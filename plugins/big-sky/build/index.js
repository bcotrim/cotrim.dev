(()=>{var e,t={52:function(e){var t;t=()=>(()=>{"use strict";var e=[,(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o,i=(o="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e={}){var t,n,i=e;function r(){function e(e){const r=o;n=t=0,o=new Map,r.forEach((t=>{try{t(e)}catch(e){console.error(e)}})),this.ob(),i&&i.Tb()}let t=0,n=0,o=new Map,i=null,r=null;this.requestAnimationFrame=function(i){t||(t=requestAnimationFrame(e.bind(this)));const r=++n;return o.set(r,i),r},this.cancelAnimationFrame=function(e){o.delete(e),t&&0==o.size&&(cancelAnimationFrame(t),t=0)},this.Rb=function(e){r&&(document.body.remove(r),r=null),e||(r=document.createElement("div"),r.style.backgroundColor="black",r.style.position="fixed",r.style.right=0,r.style.top=0,r.style.color="white",r.style.padding="4px",r.innerHTML="RIVE FPS",e=function(e){r.innerHTML="RIVE FPS "+e.toFixed(1)},document.body.appendChild(r)),i=new function(){let t=0,n=0;this.Tb=function(){var o=performance.now();n?(++t,1e3<(o-=n)&&(e(1e3*t/o),t=n=0)):(n=o,t=0)}}},this.Ob=function(){r&&(document.body.remove(r),r=null),i=null},this.ob=function(){}}function a(e){console.assert(!0);const t=new Map;let n=-1/0;this.push=function(o){return o=o+((1<<e)-1)>>e,t.has(o)&&clearTimeout(t.get(o)),t.set(o,setTimeout((function(){t.delete(o),0==t.length?n=-1/0:o==n&&(n=Math.max(...t.keys()),console.assert(n<o))}),1e3)),n=Math.max(o,n),n<<e}}i.ready=new Promise(((e,o)=>{t=e,n=o}));const s=i.onRuntimeInitialized;i.onRuntimeInitialized=function(){s&&s();let e=i.decodeAudio;i.decodeAudio=function(t,n){n(t=e(t))};let t=i.decodeFont;i.decodeFont=function(e,n){n(e=t(e))};const n=i.FileAssetLoader;i.ptrToAsset=e=>{let t=i.ptrToFileAsset(e);return t.isImage?i.ptrToImageAsset(e):t.isFont?i.ptrToFontAsset(e):t.isAudio?i.ptrToAudioAsset(e):t},i.CustomFileAssetLoader=n.extend("CustomFileAssetLoader",{__construct:function({loadContents:e}){this.__parent.__construct.call(this),this.Gb=e},loadContents:function(e,t){return e=i.ptrToAsset(e),this.Gb(e,t)}}),i.CDNFileAssetLoader=n.extend("CDNFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this)},loadContents:function(e){let t=i.ptrToAsset(e);return""!==(e=t.cdnUuid)&&(n=t.cdnBaseUrl+"/"+e,(o=new XMLHttpRequest).responseType="arraybuffer",o.onreadystatechange=function(){4==o.readyState&&200==o.status&&(e=>{t.decode(new Uint8Array(e.response))})(o)},o.open("GET",n,!0),o.send(null),!0);var n,o}}),i.FallbackFileAssetLoader=n.extend("FallbackFileAssetLoader",{__construct:function(){this.__parent.__construct.call(this),this.kb=[]},addLoader:function(e){this.kb.push(e)},loadContents:function(e,t){for(let n of this.kb)if(n.loadContents(e,t))return!0;return!1}})};const c="createConicGradient createImageData createLinearGradient createPattern createRadialGradient getContextAttributes getImageData getLineDash getTransform isContextLost isPointInPath isPointInStroke measureText".split(" "),l=new function(){function e(){if(!t){var e=document.createElement("canvas"),a={alpha:1,depth:0,stencil:0,antialias:0,premultipliedAlpha:1,preserveDrawingBuffer:0,preferLowPowerToHighPerformance:0,failIfMajorPerformanceCaveat:0,enableExtensionsByDefault:1,explicitSwapControl:1,renderViaOffscreenBackBuffer:1};let s;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){if(s=e.getContext("webgl",a),n=1,!s)return console.log("No WebGL support. Image mesh will not be drawn."),!1}else if(s=e.getContext("webgl2",a))n=2;else{if(!(s=e.getContext("webgl",a)))return console.log("No WebGL support. Image mesh will not be drawn."),!1;n=1}function c(e,t,n){if(t=s.createShader(t),s.shaderSource(t,n),s.compileShader(t),0<((n=s.getShaderInfoLog(t))||"").length)throw n;s.attachShader(e,t)}if(s=new Proxy(s,{get:(e,t)=>e.isContextLost()?(l||(console.error("Cannot render the mesh because the GL Context was lost. Tried to invoke ",t),l=!0),"function"==typeof e[t]?function(){}:void 0):"function"==typeof e[t]?function(...n){return e[t].apply(e,n)}:e[t],set(e,t,n){if(!e.isContextLost())return e[t]=n,!0;l||(console.error("Cannot render the mesh because the GL Context was lost. Tried to set property "+t),l=!0)}}),o=Math.min(s.getParameter(s.MAX_RENDERBUFFER_SIZE),s.getParameter(s.MAX_TEXTURE_SIZE)),c(e=s.createProgram(),s.VERTEX_SHADER,"attribute vec2 vertex;\n                attribute vec2 uv;\n                uniform vec4 mat;\n                uniform vec2 translate;\n                varying vec2 st;\n                void main() {\n                    st = uv;\n                    gl_Position = vec4(mat2(mat) * vertex + translate, 0, 1);\n                }"),c(e,s.FRAGMENT_SHADER,"precision highp float;\n                uniform sampler2D image;\n                varying vec2 st;\n                void main() {\n                    gl_FragColor = texture2D(image, st);\n                }"),s.bindAttribLocation(e,0,"vertex"),s.bindAttribLocation(e,1,"uv"),s.linkProgram(e),0<((a=s.getProgramInfoLog(e))||"").trim().length)throw a;i=s.getUniformLocation(e,"mat"),r=s.getUniformLocation(e,"translate"),s.useProgram(e),s.bindBuffer(s.ARRAY_BUFFER,s.createBuffer()),s.enableVertexAttribArray(0),s.enableVertexAttribArray(1),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,s.createBuffer()),s.uniform1i(s.getUniformLocation(e,"image"),0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t=s}return!0}let t=null,n=0,o=0,i=null,r=null,s=0,c=0,l=!1;e(),this.hc=function(){return e(),o},this.Mb=function(e){t.deleteTexture&&t.deleteTexture(e)},this.Lb=function(o){if(!e())return null;const i=t.createTexture();return i?(t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),2==n?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),i):null};const u=new a(8),d=new a(8),p=new a(10),h=new a(10);this.Qb=function(n,o,a,l,g){if(e()){var m=u.push(n),f=d.push(o);if(t.canvas){for(var y of(t.canvas.width==m&&t.canvas.height==f||(t.canvas.width=m,t.canvas.height=f),t.viewport(0,f-o,n,o),t.disable(t.SCISSOR_TEST),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.SCISSOR_TEST),a.sort(((e,t)=>t.wb-e.wb)),m=p.push(l),s!=m&&(t.bufferData(t.ARRAY_BUFFER,8*m,t.DYNAMIC_DRAW),s=m),m=0,a))t.bufferSubData(t.ARRAY_BUFFER,m,y.Ta),m+=4*y.Ta.length;for(var b of(console.assert(m==4*l),a))t.bufferSubData(t.ARRAY_BUFFER,m,b.Db),m+=4*b.Db.length;for(var v of(console.assert(m==8*l),m=h.push(g),c!=m&&(t.bufferData(t.ELEMENT_ARRAY_BUFFER,2*m,t.DYNAMIC_DRAW),c=m),y=0,a))t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,y,v.indices),y+=2*v.indices.length;console.assert(y==2*g),v=0,b=!0,m=y=0;for(const e of a){e.image.Ka!=v&&(t.bindTexture(t.TEXTURE_2D,e.image.Ja||null),v=e.image.Ka),e.mc?(t.scissor(e.Ya,f-e.Za-e.jb,e.Ac,e.jb),b=!0):b&&(t.scissor(0,f-o,n,o),b=!1),a=2/n;const s=-2/o;t.uniform4f(i,e.ha[0]*a*e.Ba,e.ha[1]*s*e.Ca,e.ha[2]*a*e.Ba,e.ha[3]*s*e.Ca),t.uniform2f(r,e.ha[4]*a*e.Ba+a*(e.Ya-e.ic*e.Ba)-1,e.ha[5]*s*e.Ca+s*(e.Za-e.jc*e.Ca)+1),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,m),t.vertexAttribPointer(1,2,t.FLOAT,!1,0,m+4*l),t.drawElements(t.TRIANGLES,e.indices.length,t.UNSIGNED_SHORT,y),m+=4*e.Ta.length,y+=2*e.indices.length}console.assert(m==4*l),console.assert(y==2*g)}}},this.canvas=function(){return e()&&t.canvas}},u=i.onRuntimeInitialized;i.onRuntimeInitialized=function(){function e(e){switch(e){case g.srcOver:return"source-over";case g.screen:return"screen";case g.overlay:return"overlay";case g.darken:return"darken";case g.lighten:return"lighten";case g.colorDodge:return"color-dodge";case g.colorBurn:return"color-burn";case g.hardLight:return"hard-light";case g.softLight:return"soft-light";case g.difference:return"difference";case g.exclusion:return"exclusion";case g.multiply:return"multiply";case g.hue:return"hue";case g.saturation:return"saturation";case g.color:return"color";case g.luminosity:return"luminosity"}}function t(e){return"rgba("+((16711680&e)>>>16)+","+((65280&e)>>>8)+","+((255&e)>>>0)+","+((4278190080&e)>>>24)/255+")"}function n(){0<C.length&&(l.Qb(x.drawWidth(),x.drawHeight(),C,S,E),C=[],E=S=0,x.reset(512,512));for(const e of _){for(const t of e.H)t();e.H=[]}_.clear()}u&&u();var o=i.RenderPaintStyle;const a=i.RenderPath,s=i.RenderPaint,d=i.Renderer,p=i.StrokeCap,h=i.StrokeJoin,g=i.BlendMode,m=o.fill,f=o.stroke,y=i.FillRule.evenOdd;let b=1;var v=i.RenderImage.extend("CanvasRenderImage",{__construct:function({la:e,xa:t}={}){this.__parent.__construct.call(this),this.Ka=b,b=b+1&2147483647||1,this.la=e,this.xa=t},__destruct:function(){this.Ja&&(l.Mb(this.Ja),URL.revokeObjectURL(this.Wa)),this.__parent.__destruct.call(this)},decode:function(e){var t=this;t.xa&&t.xa(t);var n=new Image;t.Wa=URL.createObjectURL(new Blob([e],{type:"image/png"})),n.onload=function(){t.Fb=n,t.Ja=l.Lb(n),t.size(n.width,n.height),t.la&&t.la(t)},n.src=t.Wa}}),w=a.extend("CanvasRenderPath",{__construct:function(){this.__parent.__construct.call(this),this.T=new Path2D},rewind:function(){this.T=new Path2D},addPath:function(e,t,n,o,i,r,a){var s=this.T,c=s.addPath;e=e.T;const l=new DOMMatrix;l.a=t,l.b=n,l.c=o,l.d=i,l.e=r,l.f=a,c.call(s,e,l)},fillRule:function(e){this.Va=e},moveTo:function(e,t){this.T.moveTo(e,t)},lineTo:function(e,t){this.T.lineTo(e,t)},cubicTo:function(e,t,n,o,i,r){this.T.bezierCurveTo(e,t,n,o,i,r)},close:function(){this.T.closePath()}}),k=s.extend("CanvasRenderPaint",{color:function(e){this.Xa=t(e)},thickness:function(e){this.Ib=e},join:function(e){switch(e){case h.miter:this.Ia="miter";break;case h.round:this.Ia="round";break;case h.bevel:this.Ia="bevel"}},cap:function(e){switch(e){case p.butt:this.Ha="butt";break;case p.round:this.Ha="round";break;case p.square:this.Ha="square"}},style:function(e){this.Hb=e},blendMode:function(t){this.Eb=e(t)},clearGradient:function(){this.ja=null},linearGradient:function(e,t,n,o){this.ja={yb:e,zb:t,bb:n,cb:o,Ra:[]}},radialGradient:function(e,t,n,o){this.ja={yb:e,zb:t,bb:n,cb:o,Ra:[],ec:!0}},addStop:function(e,t){this.ja.Ra.push({color:e,stop:t})},completeGradient:function(){},draw:function(e,n,o){let i=this.Hb;var r=this.Xa,a=this.ja;if(e.globalCompositeOperation=this.Eb,null!=a){r=a.yb;var s=a.zb;const n=a.bb;var c=a.cb;const o=a.Ra;a.ec?(a=n-r,c-=s,r=e.createRadialGradient(r,s,0,r,s,Math.sqrt(a*a+c*c))):r=e.createLinearGradient(r,s,n,c);for(let e=0,n=o.length;e<n;e++)s=o[e],r.addColorStop(s.stop,t(s.color));this.Xa=r,this.ja=null}switch(i){case f:e.strokeStyle=r,e.lineWidth=this.Ib,e.lineCap=this.Ha,e.lineJoin=this.Ia,e.stroke(n);break;case m:e.fillStyle=r,e.fill(n,o)}}});const _=new Set;let x=null,C=[],S=0,E=0;var I=i.CanvasRenderer=d.extend("Renderer",{__construct:function(e){this.__parent.__construct.call(this),this.S=[1,0,0,1,0,0],this.C=e.getContext("2d"),this.Ua=e,this.H=[]},save:function(){this.S.push(...this.S.slice(this.S.length-6)),this.H.push(this.C.save.bind(this.C))},restore:function(){const e=this.S.length-6;if(6>e)throw"restore() called without matching save().";this.S.splice(e),this.H.push(this.C.restore.bind(this.C))},transform:function(e,t,n,o,i,r){const a=this.S,s=a.length-6;a.splice(s,6,a[s]*e+a[s+2]*t,a[s+1]*e+a[s+3]*t,a[s]*n+a[s+2]*o,a[s+1]*n+a[s+3]*o,a[s]*i+a[s+2]*r+a[s+4],a[s+1]*i+a[s+3]*r+a[s+5]),this.H.push(this.C.transform.bind(this.C,e,t,n,o,i,r))},rotate:function(e){const t=Math.sin(e);e=Math.cos(e),this.transform(e,t,-t,e,0,0)},_drawPath:function(e,t){this.H.push(t.draw.bind(t,this.C,e.T,e.Va===y?"evenodd":"nonzero"))},_drawRiveImage:function(t,n,o){var i=t.Fb;if(i){var r=this.C,a=e(n);this.H.push((function(){r.globalCompositeOperation=a,r.globalAlpha=o,r.drawImage(i,0,0),r.globalAlpha=1}))}},_getMatrix:function(e){const t=this.S,n=t.length-6;for(let o=0;6>o;++o)e[o]=t[n+o]},_drawImageMesh:function(t,o,r,a,s,c,u,d,p,h){var g=this.C.canvas.width,m=this.C.canvas.height;const f=p-u,y=h-d;u=Math.max(u,0),d=Math.max(d,0),p=Math.min(p,g),h=Math.min(h,m);const b=p-u,v=h-d;if(console.assert(b<=Math.min(f,g)),console.assert(v<=Math.min(y,m)),!(0>=b||0>=v)){p=b<f||v<y,g=h=1;var w=Math.ceil(b*h),k=Math.ceil(v*g);m=l.hc(),w>m&&(h*=m/w,w=m),k>m&&(g*=m/k,k=m),x||(x=new i.DynamicRectanizer(m),x.reset(512,512)),0>(m=x.addRect(w,k))&&(n(),_.add(this),m=x.addRect(w,k),console.assert(0<=m));var I=65535&m,T=m>>16;C.push({ha:this.S.slice(this.S.length-6),image:t,Ya:I,Za:T,ic:u,jc:d,Ac:w,jb:k,Ba:h,Ca:g,Ta:new Float32Array(a),Db:new Float32Array(s),indices:new Uint16Array(c),mc:p,wb:t.Ka<<1|(p?1:0)}),S+=a.length,E+=c.length;var A=this.C,P=e(o);this.H.push((function(){A.save(),A.resetTransform(),A.globalCompositeOperation=P,A.globalAlpha=r;const e=l.canvas();e&&A.drawImage(e,I,T,w,k,u,d,b,v),A.restore()}))}},_clipPath:function(e){this.H.push(this.C.clip.bind(this.C,e.T,e.Va===y?"evenodd":"nonzero"))},clear:function(){_.add(this),this.H.push(this.C.clearRect.bind(this.C,0,0,this.Ua.width,this.Ua.height))},flush:function(){},translate:function(e,t){this.transform(1,0,0,1,e,t)}});i.makeRenderer=function(e){const t=new I(e),n=t.C;return new Proxy(t,{get(e,o){if("function"==typeof e[o])return function(...t){return e[o].apply(e,t)};if("function"==typeof n[o]){if(-1<c.indexOf(o))throw Error("RiveException: Method call to '"+o+"()' is not allowed, as the renderer cannot immediately pass through the return                 values of any canvas 2d context methods.");return function(...e){t.H.push(n[o].bind(n,...e))}}return e[o]},set(e,o,i){if(o in n)return t.H.push((()=>{n[o]=i})),!0}})},i.decodeImage=function(e,t){new v({la:t}).decode(e)},i.renderFactory={makeRenderPaint:function(){return new k},makeRenderPath:function(){return new w},makeRenderImage:function(){let e=A;return new v({xa:()=>{e.total++},la:()=>{if(e.loaded++,e.loaded===e.total){const t=e.ready;t&&(t(),e.ready=null)}}})}};let T=i.load,A=null;i.load=function(e,t,n=!0){const o=new i.FallbackFileAssetLoader;return void 0!==t&&o.addLoader(t),n&&(t=new i.CDNFileAssetLoader,o.addLoader(t)),new Promise((function(t){let n=null;A={total:0,loaded:0,ready:function(){t(n)}},n=T(e,o),0==A.total&&t(n)}))},o=new r,i.requestAnimationFrame=o.requestAnimationFrame.bind(o),i.cancelAnimationFrame=o.cancelAnimationFrame.bind(o),i.enableFPSCounter=o.Rb.bind(o),i.disableFPSCounter=o.Ob,o.ob=n,i.resolveAnimationFrame=n,i.cleanup=function(){x&&x.delete()}};var d,p,h=Object.assign({},i),g="./this.program",m="object"==typeof window,f="function"==typeof importScripts,y="";(m||f)&&(f?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),o&&(y=o),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",f&&(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),d=(e,t,n)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{200==o.status||0==o.status&&o.response?t(o.response):n()},o.onerror=n,o.send(null)});var b,v=i.print||console.log.bind(console),w=i.printErr||console.error.bind(console);Object.assign(i,h),h=null,i.thisProgram&&(g=i.thisProgram),i.wasmBinary&&(b=i.wasmBinary),i.noExitRuntime,"object"!=typeof WebAssembly&&$("no native wasm support detected");var k,_,x,C,S,E,I,T,A,P,N=!1;function O(){var e=k.buffer;i.HEAP8=x=new Int8Array(e),i.HEAP16=S=new Int16Array(e),i.HEAP32=I=new Int32Array(e),i.HEAPU8=C=new Uint8Array(e),i.HEAPU16=E=new Uint16Array(e),i.HEAPU32=T=new Uint32Array(e),i.HEAPF32=A=new Float32Array(e),i.HEAPF64=P=new Float64Array(e)}var R,M=[],L=[],D=[];function B(){var e=i.preRun.shift();M.unshift(e)}var F,j=0,U=null,q=null;function $(e){throw i.onAbort&&i.onAbort(e),w(e="Aborted("+e+")"),N=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),n(e),e}function H(e){return e.startsWith("data:application/octet-stream;base64,")}if(!H(F="canvas_advanced.wasm")){var z=F;F=i.locateFile?i.locateFile(z,y):y+z}function G(e){if(e==F&&b)return new Uint8Array(b);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}function V(e,t,n){return function(e){if(!b&&(m||f)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>G(e)));if(d)return new Promise(((t,n)=>{d(e,(e=>t(new Uint8Array(e))),n)}))}return Promise.resolve().then((()=>G(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{w("failed to asynchronously prepare wasm: "+e),$(e)}))}var W,Y,J={437932:(e,t,n,o,i)=>{if("undefined"==typeof window||void 0===(window.AudioContext||window.webkitAudioContext))return 0;if(void 0===window.h){window.h={Aa:0},window.h.I={},window.h.I.ya=e,window.h.I.capture=t,window.h.I.La=n,window.h.ga={},window.h.ga.stopped=o,window.h.ga.xb=i;let r=window.h;r.D=[],r.yc=function(e){for(var t=0;t<r.D.length;++t)if(null==r.D[t])return r.D[t]=e,t;return r.D.push(e),r.D.length-1},r.Cb=function(e){for(r.D[e]=null;0<r.D.length&&null==r.D[r.D.length-1];)r.D.pop()},r.Sc=function(e){for(var t=0;t<r.D.length;++t)if(r.D[t]==e)return r.Cb(t)},r.ra=function(e){return r.D[e]},r.Bb=["touchend","click"],r.unlock=function(){for(var e=0;e<r.D.length;++e){var t=r.D[e];null!=t&&null!=t.J&&t.state===r.ga.xb&&t.J.resume().then((()=>{Nn(t.pb)}),(e=>{console.error("Failed to resume audiocontext",e)}))}r.Bb.map((function(e){document.removeEventListener(e,r.unlock,!0)}))},r.Bb.map((function(e){document.addEventListener(e,r.unlock,!0)}))}return window.h.Aa+=1,1},440110:()=>{void 0!==window.h&&(--window.h.Aa,0===window.h.Aa&&delete window.h)},440274:()=>void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia,440378:()=>{try{var e=new(window.AudioContext||window.webkitAudioContext),t=e.sampleRate;return e.close(),t}catch(e){return 0}},440549:(e,t,n,o,i,r)=>{if(void 0===window.h)return-1;var a={},s={};return e==window.h.I.ya&&0!=n&&(s.sampleRate=n),a.J=new(window.AudioContext||window.webkitAudioContext)(s),a.J.suspend(),a.state=window.h.ga.stopped,n=0,e!=window.h.I.ya&&(n=t),a.Z=a.J.createScriptProcessor(o,n,t),a.Z.onaudioprocess=function(n){if(null!=a.sa&&0!=a.sa.length||(a.sa=new Float32Array(A.buffer,i,o*t)),e==window.h.I.capture||e==window.h.I.La){for(var s=0;s<t;s+=1)for(var c=n.inputBuffer.getChannelData(s),l=a.sa,u=0;u<o;u+=1)l[u*t+s]=c[u];Rn(r,o,i)}if(e==window.h.I.ya||e==window.h.I.La)for(Mn(r,o,i),s=0;s<n.outputBuffer.numberOfChannels;++s)for(c=n.outputBuffer.getChannelData(s),l=a.sa,u=0;u<o;u+=1)c[u]=l[u*t+s];else for(s=0;s<n.outputBuffer.numberOfChannels;++s)n.outputBuffer.getChannelData(s).fill(0)},e!=window.h.I.capture&&e!=window.h.I.La||navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){a.Da=a.J.createMediaStreamSource(e),a.Da.connect(a.Z),a.Z.connect(a.J.destination)})).catch((function(e){console.log("Failed to get user media: "+e)})),e==window.h.I.ya&&a.Z.connect(a.J.destination),a.pb=r,window.h.yc(a)},443426:e=>window.h.ra(e).J.sampleRate,443499:e=>{void 0!==(e=window.h.ra(e)).Z&&(e.Z.onaudioprocess=function(){},e.Z.disconnect(),e.Z=void 0),void 0!==e.Da&&(e.Da.disconnect(),e.Da=void 0),e.J.close(),e.J=void 0,e.pb=void 0},443899:e=>{window.h.Cb(e)},443949:e=>{(e=window.h.ra(e)).J.resume(),e.state=window.h.ga.xb},444088:e=>{(e=window.h.ra(e)).J.suspend(),e.state=window.h.ga.stopped}},K=e=>{for(;0<e.length;)e.shift()(i)},X=(e,t)=>{for(var n=0,o=e.length-1;0<=o;o--){var i=e[o];"."===i?e.splice(o,1):".."===i?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},Q=e=>{var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=X(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},Z=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."},ee=e=>{if("/"===e)return"/";var t=(e=(e=Q(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},te=e=>(te=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);$("initRandomDevice")})())(e);function ne(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=X(e.split("/").filter((e=>!!e)),!t).join("/"))||"."}var oe="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,ie=(e,t,n)=>{var o=t+n;for(n=t;e[n]&&!(n>=o);)++n;if(16<n-t&&e.buffer&&oe)return oe.decode(e.subarray(t,n));for(o="";t<n;){var i=e[t++];if(128&i){var r=63&e[t++];if(192==(224&i))o+=String.fromCharCode((31&i)<<6|r);else{var a=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|r<<6|a:(7&i)<<18|r<<12|a<<6|63&e[t++])?o+=String.fromCharCode(i):(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else o+=String.fromCharCode(i)}return o},re=[],ae=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++n):t+=3}return t},se=(e,t,n,o)=>{if(!(0<o))return 0;var i=n;o=n+o-1;for(var r=0;r<e.length;++r){var a=e.charCodeAt(r);if(55296<=a&&57343>=a&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++r)),127>=a){if(n>=o)break;t[n++]=a}else{if(2047>=a){if(n+1>=o)break;t[n++]=192|a>>6}else{if(65535>=a){if(n+2>=o)break;t[n++]=224|a>>12}else{if(n+3>=o)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63}t[n++]=128|a>>6&63}t[n++]=128|63&a}}return t[n]=0,n-i};function ce(e,t){var n=Array(ae(e)+1);return e=se(e,n,0,n.length),t&&(n.length=e),n}var le=[];function ue(e,t){le[e]={input:[],F:[],V:t},je(e,de)}var de={open:function(e){var t=le[e.node.za];if(!t)throw new Ee(43);e.s=t,e.seekable=!1},close:function(e){e.s.V.qa(e.s)},qa:function(e){e.s.V.qa(e.s)},read:function(e,t,n,o){if(!e.s||!e.s.V.ib)throw new Ee(60);for(var i=0,r=0;r<o;r++){try{var a=e.s.V.ib(e.s)}catch(e){throw new Ee(29)}if(void 0===a&&0===i)throw new Ee(6);if(null==a)break;i++,t[n+r]=a}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,n,o){if(!e.s||!e.s.V.Oa)throw new Ee(60);try{for(var i=0;i<o;i++)e.s.V.Oa(e.s,t[n+i])}catch(e){throw new Ee(29)}return o&&(e.node.timestamp=Date.now()),i}},pe={ib:function(){e:{if(!re.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n"),!e){e=null;break e}re=ce(e,!0)}e=re.shift()}return e},Oa:function(e,t){null===t||10===t?(v(ie(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(v(ie(e.F,0)),e.F=[])},bc:function(){return{Fc:25856,Hc:5,Ec:191,Gc:35387,Dc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},cc:function(){return 0},dc:function(){return[24,80]}},he={Oa:function(e,t){null===t||10===t?(w(ie(e.F,0)),e.F=[]):0!=t&&e.F.push(t)},qa:function(e){e.F&&0<e.F.length&&(w(ie(e.F,0)),e.F=[])}};function ge(e,t){var n=e.j?e.j.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),0!=n&&(t=Math.max(t,256)),n=e.j,e.j=new Uint8Array(t),0<e.v&&e.j.set(n.subarray(0,e.v),0))}var me,fe,ye,be,ve={O:null,U:()=>ve.createNode(null,"/",16895,0),createNode(e,t,n,o){if(24576==(61440&n)||4096==(61440&n))throw new Ee(63);return ve.O||(ve.O={dir:{node:{Y:ve.l.Y,P:ve.l.P,ka:ve.l.ka,va:ve.l.va,ub:ve.l.ub,Ab:ve.l.Ab,vb:ve.l.vb,sb:ve.l.sb,Ea:ve.l.Ea},stream:{ba:ve.m.ba}},file:{node:{Y:ve.l.Y,P:ve.l.P},stream:{ba:ve.m.ba,read:ve.m.read,write:ve.m.write,pa:ve.m.pa,lb:ve.m.lb,nb:ve.m.nb}},link:{node:{Y:ve.l.Y,P:ve.l.P,ma:ve.l.ma},stream:{}},$a:{node:{Y:ve.l.Y,P:ve.l.P},stream:Fe}}),16384==(61440&(n=Oe(e,t,n,o)).mode)?(n.l=ve.O.dir.node,n.m=ve.O.dir.stream,n.j={}):32768==(61440&n.mode)?(n.l=ve.O.file.node,n.m=ve.O.file.stream,n.v=0,n.j=null):40960==(61440&n.mode)?(n.l=ve.O.link.node,n.m=ve.O.link.stream):8192==(61440&n.mode)&&(n.l=ve.O.$a.node,n.m=ve.O.$a.stream),n.timestamp=Date.now(),e&&(e.j[t]=n,e.timestamp=n.timestamp),n},Kc:e=>e.j?e.j.subarray?e.j.subarray(0,e.v):new Uint8Array(e.j):new Uint8Array(0),l:{Y(e){var t={};return t.Jc=8192==(61440&e.mode)?e.id:1,t.Mc=e.id,t.mode=e.mode,t.Oc=1,t.uid=0,t.Lc=0,t.za=e.za,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.v:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.Bc=new Date(e.timestamp),t.Nc=new Date(e.timestamp),t.Ic=new Date(e.timestamp),t.Jb=4096,t.Cc=Math.ceil(t.size/t.Jb),t},P(e,t){if(void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&(t=t.size,e.v!=t))if(0==t)e.j=null,e.v=0;else{var n=e.j;e.j=new Uint8Array(t),n&&e.j.set(n.subarray(0,Math.min(t,e.v))),e.v=t}},ka(){throw Ie[44]},va:(e,t,n,o)=>ve.createNode(e,t,n,o),ub(e,t,n){if(16384==(61440&e.mode)){try{var o=Ne(t,n)}catch(e){}if(o)for(var i in o.j)throw new Ee(55)}delete e.parent.j[e.name],e.parent.timestamp=Date.now(),e.name=n,t.j[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},Ab(e,t){delete e.j[t],e.timestamp=Date.now()},vb(e,t){var n,o=Ne(e,t);for(n in o.j)throw new Ee(55);delete e.j[t],e.timestamp=Date.now()},sb(e){var t,n=[".",".."];for(t in e.j)e.j.hasOwnProperty(t)&&n.push(t);return n},Ea:(e,t,n)=>((e=ve.createNode(e,t,41471,0)).link=n,e),ma(e){if(40960!=(61440&e.mode))throw new Ee(28);return e.link}},m:{read(e,t,n,o,i){var r=e.node.j;if(i>=e.node.v)return 0;if(8<(e=Math.min(e.node.v-i,o))&&r.subarray)t.set(r.subarray(i,i+e),n);else for(o=0;o<e;o++)t[n+o]=r[i+o];return e},write(e,t,n,o,i,r){if(t.buffer===x.buffer&&(r=!1),!o)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.j||e.j.subarray)){if(r)return e.j=t.subarray(n,n+o),e.v=o;if(0===e.v&&0===i)return e.j=t.slice(n,n+o),e.v=o;if(i+o<=e.v)return e.j.set(t.subarray(n,n+o),i),o}if(ge(e,i+o),e.j.subarray&&t.subarray)e.j.set(t.subarray(n,n+o),i);else for(r=0;r<o;r++)e.j[i+r]=t[n+r];return e.v=Math.max(e.v,i+o),o},ba(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.v),0>t)throw new Ee(28);return t},pa(e,t,n){ge(e.node,t+n),e.node.v=Math.max(e.node.v,t+n)},lb(e,t,n,o,i){if(32768!=(61440&e.node.mode))throw new Ee(43);if(e=e.node.j,2&i||e.buffer!==x.buffer){if((0<n||n+t<e.length)&&(e=e.subarray?e.subarray(n,n+t):Array.prototype.slice.call(e,n,n+t)),n=!0,$(),!(t=void 0))throw new Ee(48);x.set(e,t)}else n=!1,t=e.byteOffset;return{o:t,M:n}},nb:(e,t,n,o)=>(ve.m.write(e,t,0,o,n,!1),0)}},we=null,ke={},_e=[],xe=1,Ce=null,Se=!0,Ee=null,Ie={},Te=(e,t={})=>{if(!(e=ne(e)))return{path:"",node:null};if(8<(t=Object.assign({gb:!0,Qa:0},t)).Qa)throw new Ee(32);e=e.split("/").filter((e=>!!e));for(var n=we,o="/",i=0;i<e.length;i++){var r=i===e.length-1;if(r&&t.parent)break;if(n=Ne(n,e[i]),o=Q(o+"/"+e[i]),n.wa&&(!r||r&&t.gb)&&(n=n.wa.root),!r||t.fb)for(r=0;40960==(61440&n.mode);)if(n=ze(o),o=ne(Z(o),n),n=Te(o,{Qa:t.Qa+1}).node,40<r++)throw new Ee(32)}return{path:o,node:n}},Ae=e=>{for(var t;;){if(e===e.parent)return e=e.U.mb,t?"/"!==e[e.length-1]?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}},Pe=(e,t)=>{for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%Ce.length},Ne=(e,t)=>{var n;if(n=(n=Me(e,"x"))?n:e.l.ka?0:2)throw new Ee(n,e);for(n=Ce[Pe(e.id,t)];n;n=n.lc){var o=n.name;if(n.parent.id===e.id&&o===t)return n}return e.l.ka(e,t)},Oe=(e,t,n,o)=>(e=new Sn(e,t,n,o),t=Pe(e.parent.id,e.name),e.lc=Ce[t],Ce[t]=e),Re=e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},Me=(e,t)=>Se?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2,Le=(e,t)=>{try{return Ne(e,t),20}catch(e){}return Me(e,"wx")},De=e=>{if(!(e=_e[e]))throw new Ee(8);return e},Be=(e,t=-1)=>(ye||((ye=function(){this.h={}}).prototype={},Object.defineProperties(ye.prototype,{object:{get(){return this.node},set(e){this.node=e}},flags:{get(){return this.h.flags},set(e){this.h.flags=e}},position:{get(){return this.h.position},set(e){this.h.position=e}}})),e=Object.assign(new ye,e),-1==t&&(t=(()=>{for(var e=0;4096>=e;e++)if(!_e[e])return e;throw new Ee(33)})()),e.X=t,_e[t]=e),Fe={open:e=>{e.m=ke[e.node.za].m,e.m.open&&e.m.open(e)},ba:()=>{throw new Ee(70)}},je=(e,t)=>{ke[e]={m:t}},Ue=(e,t)=>{var n="/"===t,o=!t;if(n&&we)throw new Ee(10);if(!n&&!o){var i=Te(t,{gb:!1});if(t=i.path,(i=i.node).wa)throw new Ee(10);if(16384!=(61440&i.mode))throw new Ee(54)}t={type:e,Qc:{},mb:t,kc:[]},(e=e.U(t)).U=t,t.root=e,n?we=e:i&&(i.wa=t,i.U&&i.U.kc.push(t))},qe=(e,t,n)=>{var o=Te(e,{parent:!0}).node;if(!(e=ee(e))||"."===e||".."===e)throw new Ee(28);var i=Le(o,e);if(i)throw new Ee(i);if(!o.l.va)throw new Ee(63);return o.l.va(o,e,t,n)},$e=(e,t,n)=>{void 0===n&&(n=t,t=438),qe(e,8192|t,n)},He=(e,t)=>{if(!ne(e))throw new Ee(44);var n=Te(t,{parent:!0}).node;if(!n)throw new Ee(44);t=ee(t);var o=Le(n,t);if(o)throw new Ee(o);if(!n.l.Ea)throw new Ee(63);n.l.Ea(n,t,e)},ze=e=>{if(!(e=Te(e).node))throw new Ee(44);if(!e.l.ma)throw new Ee(28);return ne(Ae(e.parent),e.l.ma(e))},Ge=(e,t,n)=>{if(""===e)throw new Ee(44);if("string"==typeof t){var o={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(void 0===o)throw Error(`Unknown file open mode: ${t}`);t=o}if(n=64&t?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var r=e;else{e=Q(e);try{r=Te(e,{fb:!(131072&t)}).node}catch(e){}}if(o=!1,64&t)if(r){if(128&t)throw new Ee(20)}else r=qe(e,n,0),o=!0;if(!r)throw new Ee(44);if(8192==(61440&r.mode)&&(t&=-513),65536&t&&16384!=(61440&r.mode))throw new Ee(54);if(!o&&(n=r?40960==(61440&r.mode)?32:16384==(61440&r.mode)&&("r"!==Re(t)||512&t)?31:Me(r,Re(t)):44))throw new Ee(n);if(512&t&&!o){if(!(n="string"==typeof(n=r)?Te(n,{fb:!0}).node:n).l.P)throw new Ee(63);if(16384==(61440&n.mode))throw new Ee(31);if(32768!=(61440&n.mode))throw new Ee(28);if(o=Me(n,"w"))throw new Ee(o);n.l.P(n,{size:0,timestamp:Date.now()})}return t&=-131713,(r=Be({node:r,path:Ae(r),flags:t,seekable:!0,position:0,m:r.m,zc:[],error:!1})).m.open&&r.m.open(r),!i.logReadFiles||1&t||(be||(be={}),e in be||(be[e]=1)),r},Ve=(e,t,n)=>{if(null===e.X)throw new Ee(8);if(!e.seekable||!e.m.ba)throw new Ee(70);if(0!=n&&1!=n&&2!=n)throw new Ee(28);e.position=e.m.ba(e,t,n),e.zc=[]},We=()=>{Ee||((Ee=function(e,t){this.name="ErrnoError",this.node=t,this.pc=function(e){this.aa=e},this.pc(e),this.message="FS error"}).prototype=Error(),Ee.prototype.constructor=Ee,[44].forEach((e=>{Ie[e]=new Ee(e),Ie[e].stack="<generic error, no stack>"})))},Ye=(e,t,n)=>{e=Q("/dev/"+e);var o=function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}(!!t,!!n);fe||(fe=64);var i=fe++<<8;je(i,{open:e=>{e.seekable=!1},close:()=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(e,n,o,i)=>{for(var r=0,a=0;a<i;a++){try{var s=t()}catch(e){throw new Ee(29)}if(void 0===s&&0===r)throw new Ee(6);if(null==s)break;r++,n[o+a]=s}return r&&(e.node.timestamp=Date.now()),r},write:(e,t,o,i)=>{for(var r=0;r<i;r++)try{n(t[o+r])}catch(e){throw new Ee(29)}return i&&(e.node.timestamp=Date.now()),r}}),$e(e,o,i)},Je={},Ke=void 0;function Xe(){return I[(Ke+=4)-4>>2]}function Qe(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e}function Ze(e,t){return e=Qe(e),{[e]:function(){return t.apply(this,arguments)}}[e]}function et(){this.M=[void 0],this.hb=[]}var tt=new et,nt=void 0;function ot(e){throw new nt(e)}var it=e=>(e||ot("Cannot use deleted val. handle = "+e),tt.get(e).value),rt=e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return tt.pa({tb:1,value:e})}};function at(e){var t=Error,n=Ze(e,(function(t){this.name=e,this.message=t,void 0!==(t=Error(t).stack)&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},n}var st=void 0,ct=void 0;function lt(e){for(var t="";C[e];)t+=ct[C[e++]];return t}var ut=[];function dt(){for(;ut.length;){var e=ut.pop();e.g.fa=!1,e.delete()}}var pt=void 0,ht={};function gt(e,t){for(void 0===t&&ot("ptr should not be undefined");e.A;)t=e.na(t),e=e.A;return t}var mt={};function ft(e){var t=lt(e=Dn(e));return An(e),t}function yt(e,t){var n=mt[e];return void 0===n&&ot(t+" has unknown type "+ft(e)),n}function bt(){}var vt=!1;function wt(e){--e.count.value,0===e.count.value&&(e.G?e.L.W(e.G):e.u.i.W(e.o))}function kt(e,t,n){return t===n?e:void 0===n.A||null===(e=kt(e,t,n.A))?null:n.Pb(e)}var _t={},xt=void 0;function Ct(e){throw new xt(e)}function St(e,t){return t.u&&t.o||Ct("makeClassHandle requires ptr and ptrType"),!!t.L!=!!t.G&&Ct("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Et(Object.create(e,{g:{value:t}}))}function Et(e){return"undefined"==typeof FinalizationRegistry?(Et=e=>e,e):(vt=new FinalizationRegistry((e=>{wt(e.g)})),bt=e=>{vt.unregister(e)},(Et=e=>{var t=e.g;return t.G&&vt.register(e,{g:t},e),e})(e))}var It={};function Tt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function At(e){return this.fromWireType(I[e>>2])}var Pt={},Nt={};function Ot(e,t,n){function o(t){(t=n(t)).length!==e.length&&Ct("Mismatched type converter count");for(var o=0;o<e.length;++o)Mt(e[o],t[o])}e.forEach((function(e){Nt[e]=t}));var i=Array(t.length),r=[],a=0;t.forEach(((e,t)=>{mt.hasOwnProperty(e)?i[t]=mt[e]:(r.push(e),Pt.hasOwnProperty(e)||(Pt[e]=[]),Pt[e].push((()=>{i[t]=mt[e],++a===r.length&&o(i)})))})),0===r.length&&o(i)}function Rt(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError(`Unknown type size: ${e}`)}}function Mt(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");!function(e,t,n={}){var o=t.name;if(e||ot(`type "${o}" must have a positive integer typeid pointer`),mt.hasOwnProperty(e)){if(n.$b)return;ot(`Cannot register type '${o}' twice`)}mt[e]=t,delete Nt[e],Pt.hasOwnProperty(e)&&(t=Pt[e],delete Pt[e],t.forEach((e=>e())))}(e,t,n)}function Lt(e){ot(e.g.u.i.name+" instance already deleted")}function Dt(){}function Bt(e,t,n){if(void 0===e[t].B){var o=e[t];e[t]=function(){return e[t].B.hasOwnProperty(arguments.length)||ot(`Function '${n}' called with an invalid number of arguments (${arguments.length}) - expects one of (${e[t].B})!`),e[t].B[arguments.length].apply(this,arguments)},e[t].B=[],e[t].B[o.ea]=o}}function Ft(e,t,n){i.hasOwnProperty(e)?((void 0===n||void 0!==i[e].B&&void 0!==i[e].B[n])&&ot(`Cannot register public name '${e}' twice`),Bt(i,e,e),i.hasOwnProperty(n)&&ot(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),i[e].B[n]=t):(i[e]=t,void 0!==n&&(i[e].Pc=n))}function jt(e,t,n,o,i,r,a,s){this.name=e,this.constructor=t,this.N=n,this.W=o,this.A=i,this.Ub=r,this.na=a,this.Pb=s,this.qb=[]}function Ut(e,t,n){for(;t!==n;)t.na||ot(`Expected null or instance of ${n.name}, got an instance of ${t.name}`),e=t.na(e),t=t.A;return e}function qt(e,t){return null===t?(this.Na&&ot(`null is not a valid ${this.name}`),0):(t.g||ot(`Cannot pass "${nn(t)}" as a ${this.name}`),t.g.o||ot(`Cannot pass deleted object as a pointer of type ${this.name}`),Ut(t.g.o,t.g.u.i,this.i))}function $t(e,t){if(null===t){if(this.Na&&ot(`null is not a valid ${this.name}`),this.ua){var n=this.Pa();return null!==e&&e.push(this.W,n),n}return 0}if(t.g||ot(`Cannot pass "${nn(t)}" as a ${this.name}`),t.g.o||ot(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.ta&&t.g.u.ta&&ot(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`),n=Ut(t.g.o,t.g.u.i,this.i),this.ua)switch(void 0===t.g.G&&ot("Passing raw pointer to smart pointer is illegal"),this.tc){case 0:t.g.L===this?n=t.g.G:ot(`Cannot convert argument of type ${t.g.L?t.g.L.name:t.g.u.name} to parameter type ${this.name}`);break;case 1:n=t.g.G;break;case 2:if(t.g.L===this)n=t.g.G;else{var o=t.clone();n=this.oc(n,rt((function(){o.delete()}))),null!==e&&e.push(this.W,n)}break;default:ot("Unsupporting sharing policy")}return n}function Ht(e,t){return null===t?(this.Na&&ot(`null is not a valid ${this.name}`),0):(t.g||ot(`Cannot pass "${nn(t)}" as a ${this.name}`),t.g.o||ot(`Cannot pass deleted object as a pointer of type ${this.name}`),t.g.u.ta&&ot(`Cannot convert argument of type ${t.g.u.name} to parameter type ${this.name}`),Ut(t.g.o,t.g.u.i,this.i))}function zt(e,t,n,o){this.name=e,this.i=t,this.Na=n,this.ta=o,this.ua=!1,this.W=this.oc=this.Pa=this.rb=this.tc=this.nc=void 0,void 0!==t.A?this.toWireType=$t:(this.toWireType=o?qt:Ht,this.K=null)}function Gt(e,t,n){i.hasOwnProperty(e)||Ct("Replacing nonexistant public symbol"),void 0!==i[e].B&&void 0!==n?i[e].B[n]=t:(i[e]=t,i[e].ea=n)}var Vt=[],Wt=e=>{var t=Vt[e];return t||(e>=Vt.length&&(Vt.length=e+1),Vt[e]=t=R.get(e)),t};function Yt(e,t){var n=(e=lt(e)).includes("j")?((e,t)=>{var n=[];return function(){if(n.length=0,Object.assign(n,arguments),e.includes("j")){var o=i["dynCall_"+e];o=n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)}else o=Wt(t).apply(null,n);return o}})(e,t):Wt(t);return"function"!=typeof n&&ot(`unknown function pointer with signature ${e}: ${t}`),n}var Jt=void 0;function Kt(e,t){var n=[],o={};throw t.forEach((function e(t){o[t]||mt[t]||(Nt[t]?Nt[t].forEach(e):(n.push(t),o[t]=!0))})),new Jt(`${e}: `+n.map(ft).join([", "]))}function Xt(e,t,n,o,i){var r=t.length;2>r&&ot("argTypes array size mismatch! Must at least get return value and 'this' types!");var a=null!==t[1]&&null!==n,s=!1;for(n=1;n<t.length;++n)if(null!==t[n]&&void 0===t[n].K){s=!0;break}var c="void"!==t[0].name,l=r-2,u=Array(l),d=[],p=[];return function(){if(arguments.length!==l&&ot(`function ${e} called with ${arguments.length} arguments, expected ${l} args!`),p.length=0,d.length=a?2:1,d[0]=i,a){var n=t[1].toWireType(p,this);d[1]=n}for(var r=0;r<l;++r)u[r]=t[r+2].toWireType(p,arguments[r]),d.push(u[r]);if(r=o.apply(null,d),s)Tt(p);else for(var h=a?1:2;h<t.length;h++){var g=1===h?n:u[h-2];null!==t[h].K&&t[h].K(g)}return c?t[0].fromWireType(r):void 0}}function Qt(e,t){for(var n=[],o=0;o<e;o++)n.push(T[t+4*o>>2]);return n}function Zt(e,t,n){return e instanceof Object||ot(`${n} with invalid "this": ${e}`),e instanceof t.i.constructor||ot(`${n} incompatible with "this" of type ${e.constructor.name}`),e.g.o||ot(`cannot call emscripten binding method ${n} on deleted object`),Ut(e.g.o,e.g.u.i,t.i)}function en(e){e>=tt.h&&0==--tt.get(e).tb&&tt.Zb(e)}function tn(e,t,n){switch(t){case 0:return function(e){return this.fromWireType((n?x:C)[e])};case 1:return function(e){return this.fromWireType((n?S:E)[e>>1])};case 2:return function(e){return this.fromWireType((n?I:T)[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function nn(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function on(e,t){switch(t){case 2:return function(e){return this.fromWireType(A[e>>2])};case 3:return function(e){return this.fromWireType(P[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function rn(e,t,n){switch(t){case 0:return n?function(e){return x[e]}:function(e){return C[e]};case 1:return n?function(e){return S[e>>1]}:function(e){return E[e>>1]};case 2:return n?function(e){return I[e>>2]}:function(e){return T[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var an="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,sn=(e,t)=>{for(var n=e>>1,o=n+t/2;!(n>=o)&&E[n];)++n;if(32<(n<<=1)-e&&an)return an.decode(C.subarray(e,n));for(n="",o=0;!(o>=t/2);++o){var i=S[e+2*o>>1];if(0==i)break;n+=String.fromCharCode(i)}return n},cn=(e,t,n)=>{if(void 0===n&&(n=2147483647),2>n)return 0;var o=t;n=(n-=2)<2*e.length?n/2:e.length;for(var i=0;i<n;++i)S[t>>1]=e.charCodeAt(i),t+=2;return S[t>>1]=0,t-o},ln=e=>2*e.length,un=(e,t)=>{for(var n=0,o="";!(n>=t/4);){var i=I[e+4*n>>2];if(0==i)break;++n,65536<=i?(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|1023&i)):o+=String.fromCharCode(i)}return o},dn=(e,t,n)=>{if(void 0===n&&(n=2147483647),4>n)return 0;var o=t;n=o+n-4;for(var i=0;i<e.length;++i){var r=e.charCodeAt(i);if(55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++i)),I[t>>2]=r,(t+=4)+4>n)break}return I[t>>2]=0,t-o},pn=e=>{for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);55296<=o&&57343>=o&&++n,t+=4}return t},hn={};function gn(e){var t=hn[e];return void 0===t?lt(e):t}var mn,fn=[],yn=[],bn=[],vn={},wn=()=>{if(!mn){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"};for(e in vn)void 0===vn[e]?delete t[e]:t[e]=vn[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);mn=n}return mn},kn=e=>0==e%4&&(0!=e%100||0==e%400),xn=[31,29,31,30,31,30,31,31,30,31,30,31],Cn=[31,28,31,30,31,30,31,31,30,31,30,31];function Sn(e,t,n,o){e||(e=this),this.parent=e,this.U=e.U,this.wa=null,this.id=xe++,this.name=t,this.mode=n,this.l={},this.m={},this.za=o}Object.defineProperties(Sn.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),We(),Ce=Array(4096),Ue(ve,"/"),qe("/tmp",16895,0),qe("/home",16895,0),qe("/home/web_user",16895,0),(()=>{qe("/dev",16895,0),je(259,{read:()=>0,write:(e,t,n,o)=>o}),$e("/dev/null",259),ue(1280,pe),ue(1536,he),$e("/dev/tty",1280),$e("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,n=()=>(0===t&&(t=te(e).byteLength),e[--t]);Ye("random",n),Ye("urandom",n),qe("/dev/shm",16895,0),qe("/dev/shm/tmp",16895,0)})(),(()=>{qe("/proc",16895,0);var e=qe("/proc/self",16895,0);qe("/proc/self/fd",16895,0),Ue({U:()=>{var t=Oe(e,"fd",16895,73);return t.l={ka:(e,t)=>{var n=De(+t);return(e={parent:null,U:{mb:"fake"},l:{ma:()=>n.path}}).parent=e}},t}},"/proc/self/fd")})(),Object.assign(et.prototype,{get(e){return this.M[e]},has(e){return void 0!==this.M[e]},pa(e){var t=this.hb.pop()||this.M.length;return this.M[t]=e,t},Zb(e){this.M[e]=void 0,this.hb.push(e)}}),nt=i.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},tt.M.push({value:void 0},{value:null},{value:!0},{value:!1}),tt.h=tt.M.length,i.count_emval_handles=function(){for(var e=0,t=tt.h;t<tt.M.length;++t)void 0!==tt.M[t]&&++e;return e},st=i.PureVirtualError=at("PureVirtualError");for(var En=Array(256),In=0;256>In;++In)En[In]=String.fromCharCode(In);ct=En,i.getInheritedInstanceCount=function(){return Object.keys(ht).length},i.getLiveInheritedInstances=function(){var e,t=[];for(e in ht)ht.hasOwnProperty(e)&&t.push(ht[e]);return t},i.flushPendingDeletes=dt,i.setDelayFunction=function(e){pt=e,ut.length&&pt&&pt(dt)},xt=i.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Dt.prototype.isAliasOf=function(e){if(!(this instanceof Dt&&e instanceof Dt))return!1;var t=this.g.u.i,n=this.g.o,o=e.g.u.i;for(e=e.g.o;t.A;)n=t.na(n),t=t.A;for(;o.A;)e=o.na(e),o=o.A;return t===o&&n===e},Dt.prototype.clone=function(){if(this.g.o||Lt(this),this.g.ia)return this.g.count.value+=1,this;var e=Et,t=Object,n=t.create,o=Object.getPrototypeOf(this),i=this.g;return(e=e(n.call(t,o,{g:{value:{count:i.count,fa:i.fa,ia:i.ia,o:i.o,u:i.u,G:i.G,L:i.L}}}))).g.count.value+=1,e.g.fa=!1,e},Dt.prototype.delete=function(){this.g.o||Lt(this),this.g.fa&&!this.g.ia&&ot("Object already scheduled for deletion"),bt(this),wt(this.g),this.g.ia||(this.g.G=void 0,this.g.o=void 0)},Dt.prototype.isDeleted=function(){return!this.g.o},Dt.prototype.deleteLater=function(){return this.g.o||Lt(this),this.g.fa&&!this.g.ia&&ot("Object already scheduled for deletion"),ut.push(this),1===ut.length&&pt&&pt(dt),this.g.fa=!0,this},zt.prototype.Vb=function(e){return this.rb&&(e=this.rb(e)),e},zt.prototype.ab=function(e){this.W&&this.W(e)},zt.prototype.argPackAdvance=8,zt.prototype.readValueFromPointer=At,zt.prototype.deleteObject=function(e){null!==e&&e.delete()},zt.prototype.fromWireType=function(e){function t(){return this.ua?St(this.i.N,{u:this.nc,o:n,L:this,G:e}):St(this.i.N,{u:this,o:e})}var n=this.Vb(e);if(!n)return this.ab(e),null;var o=function(e,t){return t=gt(e,t),ht[t]}(this.i,n);if(void 0!==o)return 0===o.g.count.value?(o.g.o=n,o.g.G=e,o.clone()):(o=o.clone(),this.ab(e),o);if(o=this.i.Ub(n),!(o=_t[o]))return t.call(this);o=this.ta?o.Kb:o.pointerType;var i=kt(n,this.i,o.i);return null===i?t.call(this):this.ua?St(o.i.N,{u:o,o:i,L:this,G:e}):St(o.i.N,{u:o,o:i})},Jt=i.UnboundTypeError=at("UnboundTypeError");var Tn={__syscall_fcntl64:function(e,t,n){Ke=n;try{var o=De(e);switch(t){case 0:var i=Xe();return 0>i?-28:Be(o,i).X;case 1:case 2:case 6:case 7:return 0;case 3:return o.flags;case 4:return i=Xe(),o.flags|=i,0;case 5:return i=Xe(),S[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return I[Ln()>>2]=28,-1}}catch(e){if(void 0===Je||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_ioctl:function(e,t,n){Ke=n;try{var o=De(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return o.s?0:-59;case 21505:if(!o.s)return-59;if(o.s.V.bc){t=[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var i=Xe();I[i>>2]=25856,I[i+4>>2]=5,I[i+8>>2]=191,I[i+12>>2]=35387;for(var r=0;32>r;r++)x[i+r+17|0]=t[r]||0}return 0;case 21506:case 21507:case 21508:if(!o.s)return-59;if(o.s.V.cc)for(i=Xe(),t=[],r=0;32>r;r++)t.push(x[i+r+17|0]);return 0;case 21519:return o.s?(i=Xe(),I[i>>2]=0):-59;case 21520:return o.s?-28:-59;case 21531:if(i=Xe(),!o.m.ac)throw new Ee(59);return o.m.ac(o,t,i);case 21523:return o.s?(o.s.V.dc&&(r=[24,80],i=Xe(),S[i>>1]=r[0],S[i+2>>1]=r[1]),0):-59;default:return-28}}catch(e){if(void 0===Je||"ErrnoError"!==e.name)throw e;return-e.aa}},__syscall_openat:function(e,t,n,o){Ke=o;try{var i=t=t?ie(C,t):"";if("/"===i.charAt(0))t=i;else{var r=-100===e?"/":De(e).path;if(0==i.length)throw new Ee(44);t=Q(r+"/"+i)}var a=o?Xe():0;return Ge(t,n,a).X}catch(e){if(void 0===Je||"ErrnoError"!==e.name)throw e;return-e.aa}},_embind_create_inheriting_constructor:function(e,t,n){e=lt(e),t=yt(t,"wrapper"),n=it(n);var o=[].slice,i=t.i,r=i.N,a=i.A.N,s=i.A.constructor;for(var c in e=Ze(e,(function(){i.A.qb.forEach(function(e){if(this[e]===a[e])throw new st(`Pure virtual function ${e} must be implemented in JavaScript`)}.bind(this)),Object.defineProperty(this,"__parent",{value:r}),this.__construct.apply(this,o.call(arguments))})),r.__construct=function(){this===r&&ot("Pass correct 'this' to __construct");var e=s.implement.apply(void 0,[this].concat(o.call(arguments)));bt(e);var t=e.g;e.notifyOnDestruction(),t.ia=!0,Object.defineProperties(this,{g:{value:t}}),Et(this),e=t.o,e=gt(i,e),ht.hasOwnProperty(e)?ot(`Tried to register registered instance: ${e}`):ht[e]=this},r.__destruct=function(){this===r&&ot("Pass correct 'this' to __destruct"),bt(this);var e=this.g.o;e=gt(i,e),ht.hasOwnProperty(e)?delete ht[e]:ot(`Tried to unregister unregistered instance: ${e}`)},e.prototype=Object.create(r),n)e.prototype[c]=n[c];return rt(e)},_embind_finalize_value_object:function(e){var t=It[e];delete It[e];var n=t.Pa,o=t.W,i=t.eb;Ot([e],i.map((e=>e.Yb)).concat(i.map((e=>e.rc))),(e=>{var r={};return i.forEach(((t,n)=>{var o=e[n],a=t.Wb,s=t.Xb,c=e[n+i.length],l=t.qc,u=t.sc;r[t.Sb]={read:e=>o.fromWireType(a(s,e)),write:(e,t)=>{var n=[];l(u,e,c.toWireType(n,t)),Tt(n)}}})),[{name:t.name,fromWireType:function(e){var t,n={};for(t in r)n[t]=r[t].read(e);return o(e),n},toWireType:function(e,t){for(var i in r)if(!(i in t))throw new TypeError(`Missing field: "${i}"`);var a=n();for(i in r)r[i].write(a,t[i]);return null!==e&&e.push(o,a),a},argPackAdvance:8,readValueFromPointer:At,K:o}]}))},_embind_register_bigint:function(){},_embind_register_bool:function(e,t,n,o,i){var r=Rt(n);Mt(e,{name:t=lt(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?o:i},argPackAdvance:8,readValueFromPointer:function(e){if(1===n)var o=x;else if(2===n)o=S;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);o=I}return this.fromWireType(o[e>>r])},K:null})},_embind_register_class:function(e,t,n,o,i,r,a,s,c,l,u,d,p){u=lt(u),r=Yt(i,r),s&&(s=Yt(a,s)),l&&(l=Yt(c,l)),p=Yt(d,p);var h=Qe(u);Ft(h,(function(){Kt(`Cannot construct ${u} due to unbound types`,[o])})),Ot([e,t,n],o?[o]:[],(function(t){if(t=t[0],o)var n=t.i,i=n.N;else i=Dt.prototype;t=Ze(h,(function(){if(Object.getPrototypeOf(this)!==a)throw new nt("Use 'new' to construct "+u);if(void 0===c.$)throw new nt(u+" has no accessible constructor");var e=c.$[arguments.length];if(void 0===e)throw new nt(`Tried to invoke ctor of ${u} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(c.$).toString()}) parameters instead!`);return e.apply(this,arguments)}));var a=Object.create(i,{constructor:{value:t}});t.prototype=a;var c=new jt(u,t,a,p,n,r,s,l);c.A&&(void 0===c.A.oa&&(c.A.oa=[]),c.A.oa.push(c)),n=new zt(u,c,!0,!1),i=new zt(u+"*",c,!1,!1);var d=new zt(u+" const*",c,!1,!0);return _t[e]={pointerType:i,Kb:d},Gt(h,t),[n,i,d]}))},_embind_register_class_class_function:function(e,t,n,o,i,r,a){var s=Qt(n,o);t=lt(t),r=Yt(i,r),Ot([],[e],(function(e){function o(){Kt(`Cannot call ${i} due to unbound types`,s)}var i=`${(e=e[0]).name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var c=e.i.constructor;return void 0===c[t]?(o.ea=n-1,c[t]=o):(Bt(c,t,i),c[t].B[n-1]=o),Ot([],s,(function(o){if(o=Xt(i,[o[0],null].concat(o.slice(1)),null,r,a),void 0===c[t].B?(o.ea=n-1,c[t]=o):c[t].B[n-1]=o,e.i.oa)for(const n of e.i.oa)n.constructor.hasOwnProperty(t)||(n.constructor[t]=o);return[]})),[]}))},_embind_register_class_class_property:function(e,t,n,o,i,r,a,s){t=lt(t),r=Yt(i,r),Ot([],[e],(function(e){var i=`${(e=e[0]).name}.${t}`,c={get(){Kt(`Cannot access ${i} due to unbound types`,[n])},enumerable:!0,configurable:!0};return c.set=s?()=>{Kt(`Cannot access ${i} due to unbound types`,[n])}:()=>{ot(`${i} is a read-only property`)},Object.defineProperty(e.i.constructor,t,c),Ot([],[n],(function(n){n=n[0];var i={get:()=>n.fromWireType(r(o)),enumerable:!0};return s&&(s=Yt(a,s),i.set=e=>{var t=[];s(o,n.toWireType(t,e)),Tt(t)}),Object.defineProperty(e.i.constructor,t,i),[]})),[]}))},_embind_register_class_constructor:function(e,t,n,o,i,r){var a=Qt(t,n);i=Yt(o,i),Ot([],[e],(function(e){var n=`constructor ${(e=e[0]).name}`;if(void 0===e.i.$&&(e.i.$=[]),void 0!==e.i.$[t-1])throw new nt(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.i.$[t-1]=()=>{Kt(`Cannot construct ${e.name} due to unbound types`,a)},Ot([],a,(function(o){return o.splice(1,0,null),e.i.$[t-1]=Xt(n,o,null,i,r),[]})),[]}))},_embind_register_class_function:function(e,t,n,o,i,r,a,s){var c=Qt(n,o);t=lt(t),r=Yt(i,r),Ot([],[e],(function(e){function o(){Kt(`Cannot call ${i} due to unbound types`,c)}var i=`${(e=e[0]).name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.i.qb.push(t);var l=e.i.N,u=l[t];return void 0===u||void 0===u.B&&u.className!==e.name&&u.ea===n-2?(o.ea=n-2,o.className=e.name,l[t]=o):(Bt(l,t,i),l[t].B[n-2]=o),Ot([],c,(function(o){return o=Xt(i,o,e,r,a),void 0===l[t].B?(o.ea=n-2,l[t]=o):l[t].B[n-2]=o,[]})),[]}))},_embind_register_class_property:function(e,t,n,o,i,r,a,s,c,l){t=lt(t),i=Yt(o,i),Ot([],[e],(function(e){var o=`${(e=e[0]).name}.${t}`,u={get(){Kt(`Cannot access ${o} due to unbound types`,[n,a])},enumerable:!0,configurable:!0};return u.set=c?()=>{Kt(`Cannot access ${o} due to unbound types`,[n,a])}:()=>{ot(o+" is a read-only property")},Object.defineProperty(e.i.N,t,u),Ot([],c?[n,a]:[n],(function(n){var a=n[0],u={get(){var t=Zt(this,e,o+" getter");return a.fromWireType(i(r,t))},enumerable:!0};if(c){c=Yt(s,c);var d=n[1];u.set=function(t){var n=Zt(this,e,o+" setter"),i=[];c(l,n,d.toWireType(i,t)),Tt(i)}}return Object.defineProperty(e.i.N,t,u),[]})),[]}))},_embind_register_emval:function(e,t){Mt(e,{name:t=lt(t),fromWireType:function(e){var t=it(e);return en(e),t},toWireType:function(e,t){return rt(t)},argPackAdvance:8,readValueFromPointer:At,K:null})},_embind_register_enum:function(e,t,n,o){function i(){}n=Rt(n),t=lt(t),i.values={},Mt(e,{name:t,constructor:i,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:tn(t,n,o),K:null}),Ft(t,i)},_embind_register_enum_value:function(e,t,n){var o=yt(e,"enum");t=lt(t),e=o.constructor,o=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:Ze(`${o.name}_${t}`,(function(){}))}}),e.values[n]=o,e[t]=o},_embind_register_float:function(e,t,n){n=Rt(n),Mt(e,{name:t=lt(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:on(t,n),K:null})},_embind_register_function:function(e,t,n,o,i,r){var a=Qt(t,n);e=lt(e),i=Yt(o,i),Ft(e,(function(){Kt(`Cannot call ${e} due to unbound types`,a)}),t-1),Ot([],a,(function(n){return Gt(e,Xt(e,[n[0],null].concat(n.slice(1)),null,i,r),t-1),[]}))},_embind_register_integer:function(e,t,n,o,i){t=lt(t),-1===i&&(i=4294967295),i=Rt(n);var r=e=>e;if(0===o){var a=32-8*n;r=e=>e<<a>>>a}n=t.includes("unsigned")?function(e,t){return t>>>0}:function(e,t){return t},Mt(e,{name:t,fromWireType:r,toWireType:n,argPackAdvance:8,readValueFromPointer:rn(t,i,0!==o),K:null})},_embind_register_memory_view:function(e,t,n){function o(e){e>>=2;var t=T;return new i(t.buffer,t[e+1],t[e])}var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];Mt(e,{name:n=lt(n),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{$b:!0})},_embind_register_std_string:function(e,t){var n="std::string"===(t=lt(t));Mt(e,{name:t,fromWireType:function(e){var t=T[e>>2],o=e+4;if(n)for(var i=o,r=0;r<=t;++r){var a=o+r;if(r==t||0==C[a]){if(i=i?ie(C,i,a-i):"",void 0===s)var s=i;else s+=String.fromCharCode(0),s+=i;i=a+1}}else{for(s=Array(t),r=0;r<t;++r)s[r]=String.fromCharCode(C[o+r]);s=s.join("")}return An(e),s},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var o="string"==typeof t;o||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ot("Cannot pass non-string to std::string");var i=n&&o?ae(t):t.length,r=Pn(4+i+1),a=r+4;if(T[r>>2]=i,n&&o)se(t,C,a,i+1);else if(o)for(o=0;o<i;++o){var s=t.charCodeAt(o);255<s&&(An(a),ot("String has UTF-16 code units that do not fit in 8 bits")),C[a+o]=s}else for(o=0;o<i;++o)C[a+o]=t[o];return null!==e&&e.push(An,r),r},argPackAdvance:8,readValueFromPointer:At,K:function(e){An(e)}})},_embind_register_std_wstring:function(e,t,n){if(n=lt(n),2===t)var o=sn,i=cn,r=ln,a=()=>E,s=1;else 4===t&&(o=un,i=dn,r=pn,a=()=>T,s=2);Mt(e,{name:n,fromWireType:function(e){for(var n,i=T[e>>2],r=a(),c=e+4,l=0;l<=i;++l){var u=e+4+l*t;l!=i&&0!=r[u>>s]||(c=o(c,u-c),void 0===n?n=c:(n+=String.fromCharCode(0),n+=c),c=u+t)}return An(e),n},toWireType:function(e,o){"string"!=typeof o&&ot(`Cannot pass non-string to C++ string type ${n}`);var a=r(o),c=Pn(4+a+t);return T[c>>2]=a>>s,i(o,c+4,a+t),null!==e&&e.push(An,c),c},argPackAdvance:8,readValueFromPointer:At,K:function(e){An(e)}})},_embind_register_value_object:function(e,t,n,o,i,r){It[e]={name:lt(t),Pa:Yt(n,o),W:Yt(i,r),eb:[]}},_embind_register_value_object_field:function(e,t,n,o,i,r,a,s,c,l){It[e].eb.push({Sb:lt(t),Yb:n,Wb:Yt(o,i),Xb:r,rc:a,qc:Yt(s,c),sc:l})},_embind_register_void:function(e,t){Mt(e,{fc:!0,name:t=lt(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(){}})},_emscripten_get_now_is_monotonic:()=>!0,_emval_as:function(e,t,n){e=it(e),t=yt(t,"emval::as");var o=[],i=rt(o);return T[n>>2]=i,t.toWireType(o,e)},_emval_call_method:function(e,t,n,o,i){e=fn[e],t=it(t),n=gn(n);var r=[];return T[o>>2]=rt(r),e(t,n,r,i)},_emval_call_void_method:function(e,t,n,o){(e=fn[e])(t=it(t),n=gn(n),null,o)},_emval_decref:en,_emval_get_method_caller:function(e,t){var n=function(e,t){for(var n=Array(e),o=0;o<e;++o)n[o]=yt(T[t+4*o>>2],"parameter "+o);return n}(e,t),o=n[0];t=o.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$";var i=yn[t];if(void 0!==i)return i;var r=Array(e-1);return i=function(e){var t=fn.length;return fn.push(e),t}(((t,i,a,s)=>{for(var c=0,l=0;l<e-1;++l)r[l]=n[l+1].readValueFromPointer(s+c),c+=n[l+1].argPackAdvance;for(t=t[i].apply(t,r),l=0;l<e-1;++l)n[l+1].Nb&&n[l+1].Nb(r[l]);if(!o.fc)return o.toWireType(a,t)})),yn[t]=i},_emval_get_module_property:function(e){return e=gn(e),rt(i[e])},_emval_get_property:function(e,t){return e=it(e),t=it(t),rt(e[t])},_emval_incref:function(e){4<e&&(tt.get(e).tb+=1)},_emval_new_cstring:function(e){return rt(gn(e))},_emval_new_object:function(){return rt({})},_emval_run_destructors:function(e){Tt(it(e)),en(e)},_emval_set_property:function(e,t,n){e=it(e),t=it(t),n=it(n),e[t]=n},_emval_take_value:function(e,t){return e=(e=yt(e,"_emval_take_value")).readValueFromPointer(t),rt(e)},abort:()=>{$("")},emscripten_asm_const_int:(e,t,n)=>{var o;for(bn.length=0,n>>=2;o=C[t++];)n+=105!=o&n,bn.push(105==o?I[n]:P[n++>>1]),++n;return J[e].apply(null,bn)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:()=>performance.now(),emscripten_memcpy_big:(e,t,n)=>C.copyWithin(e,t,t+n),emscripten_resize_heap:e=>{var t=C.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var o=t*(1+.2/n);o=Math.min(o,e+100663296);var i=Math;o=Math.max(e,o);e:{i=i.min.call(i,2147483648,o+(65536-o%65536)%65536)-k.buffer.byteLength+65535>>>16;try{k.grow(i),O();var r=1;break e}catch(e){}r=void 0}if(r)return!0}return!1},environ_get:(e,t)=>{var n=0;return wn().forEach((function(o,i){var r=t+n;for(i=T[e+4*i>>2]=r,r=0;r<o.length;++r)x[0|i++]=o.charCodeAt(r);x[0|i]=0,n+=o.length+1})),0},environ_sizes_get:(e,t)=>{var n=wn();T[e>>2]=n.length;var o=0;return n.forEach((function(e){o+=e.length+1})),T[t>>2]=o,0},fd_close:function(e){try{var t=De(e);if(null===t.X)throw new Ee(8);t.Ma&&(t.Ma=null);try{t.m.close&&t.m.close(t)}catch(e){throw e}finally{_e[t.X]=null}return t.X=null,0}catch(e){if(void 0===Je||"ErrnoError"!==e.name)throw e;return e.aa}},fd_read:function(e,t,n,o){try{e:{var i=De(e);e=t;for(var r,a=t=0;a<n;a++){var s=T[e>>2],c=T[e+4>>2];e+=8;var l=i,u=s,d=c,p=r,h=x;if(0>d||0>p)throw new Ee(28);if(null===l.X)throw new Ee(8);if(1==(2097155&l.flags))throw new Ee(8);if(16384==(61440&l.node.mode))throw new Ee(31);if(!l.m.read)throw new Ee(28);var g=void 0!==p;if(g){if(!l.seekable)throw new Ee(70)}else p=l.position;var m=l.m.read(l,h,u,d,p);g||(l.position+=m);var f=m;if(0>f){var y=-1;break e}if(t+=f,f<c)break;void 0!==r&&(r+=f)}y=t}return T[o>>2]=y,0}catch(e){if(void 0===Je||"ErrnoError"!==e.name)throw e;return e.aa}},fd_seek:function(e,t,n,o,i){t=n+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*n:NaN;try{if(isNaN(t))return 61;var r=De(e);return Ve(r,t,o),Y=[r.position>>>0,(W=r.position,1<=+Math.abs(W)?0<W?+Math.floor(W/4294967296)>>>0:~~+Math.ceil((W-+(~~W>>>0))/4294967296)>>>0:0)],I[i>>2]=Y[0],I[i+4>>2]=Y[1],r.Ma&&0===t&&0===o&&(r.Ma=null),0}catch(e){if(void 0===Je||"ErrnoError"!==e.name)throw e;return e.aa}},fd_write:function(e,t,n,o){try{e:{var i=De(e);e=t;for(var r,a=t=0;a<n;a++){var s=T[e>>2],c=T[e+4>>2];e+=8;var l=i,u=s,d=c,p=r,h=x;if(0>d||0>p)throw new Ee(28);if(null===l.X)throw new Ee(8);if(!(2097155&l.flags))throw new Ee(8);if(16384==(61440&l.node.mode))throw new Ee(31);if(!l.m.write)throw new Ee(28);l.seekable&&1024&l.flags&&Ve(l,0,2);var g=void 0!==p;if(g){if(!l.seekable)throw new Ee(70)}else p=l.position;var m=l.m.write(l,h,u,d,p,void 0);g||(l.position+=m);var f=m;if(0>f){var y=-1;break e}t+=f,void 0!==r&&(r+=f)}y=t}return T[o>>2]=y,0}catch(e){if(void 0===Je||"ErrnoError"!==e.name)throw e;return e.aa}},strftime_l:(e,t,n,o)=>((e,t,n,o)=>{function i(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function r(e,t){return i(e,t,"0")}function a(e,t){function n(e){return 0>e?-1:0<e?1:0}var o;return 0===(o=n(e.getFullYear()-t.getFullYear()))&&0===(o=n(e.getMonth()-t.getMonth()))&&(o=n(e.getDate()-t.getDate())),o}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function c(e){var t=e.ca;for(e=new Date(new Date(e.da+1900,0,1).getTime());0<t;){var n=e.getMonth(),o=(kn(e.getFullYear())?xn:Cn)[n];if(!(t>o-e.getDate())){e.setDate(e.getDate()+t);break}t-=o-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),n=s(n),0>=a(t,e)?0>=a(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var l=I[o+40>>2];for(var u in o={wc:I[o>>2],vc:I[o+4>>2],Fa:I[o+8>>2],Sa:I[o+12>>2],Ga:I[o+16>>2],da:I[o+20>>2],R:I[o+24>>2],ca:I[o+28>>2],Rc:I[o+32>>2],uc:I[o+36>>2],xc:l&&l?ie(C,l):""},n=n?ie(C,n):"",l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(u,"g"),l[u]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(u in l={"%a":e=>d[e.R].substring(0,3),"%A":e=>d[e.R],"%b":e=>p[e.Ga].substring(0,3),"%B":e=>p[e.Ga],"%C":e=>r((e.da+1900)/100|0,2),"%d":e=>r(e.Sa,2),"%e":e=>i(e.Sa,2," "),"%g":e=>c(e).toString().substring(2),"%G":e=>c(e),"%H":e=>r(e.Fa,2),"%I":e=>(0==(e=e.Fa)?e=12:12<e&&(e-=12),r(e,2)),"%j":e=>{for(var t=0,n=0;n<=e.Ga-1;t+=(kn(e.da+1900)?xn:Cn)[n++]);return r(e.Sa+t,3)},"%m":e=>r(e.Ga+1,2),"%M":e=>r(e.vc,2),"%n":()=>"\n","%p":e=>0<=e.Fa&&12>e.Fa?"AM":"PM","%S":e=>r(e.wc,2),"%t":()=>"\t","%u":e=>e.R||7,"%U":e=>r(Math.floor((e.ca+7-e.R)/7),2),"%V":e=>{var t=Math.floor((e.ca+7-(e.R+6)%7)/7);if(2>=(e.R+371-e.ca-2)%7&&t++,t)53==t&&(4==(n=(e.R+371-e.ca)%7)||3==n&&kn(e.da)||(t=1));else{t=52;var n=(e.R+7-e.ca-1)%7;(4==n||5==n&&kn(e.da%400-1))&&t++}return r(t,2)},"%w":e=>e.R,"%W":e=>r(Math.floor((e.ca+7-(e.R+6)%7)/7),2),"%y":e=>(e.da+1900).toString().substring(2),"%Y":e=>e.da+1900,"%z":e=>{var t=0<=(e=e.uc);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":e=>e.xc,"%%":()=>"%"},n=n.replace(/%%/g,"\0\0"),l)n.includes(u)&&(n=n.replace(new RegExp(u,"g"),l[u](o)));return(u=ce(n=n.replace(/\0\0/g,"%"),!1)).length>t?0:(x.set(u,e),u.length-1)})(e,t,n,o)};!function(){function e(e){if(_=e=e.exports,k=_.memory,O(),R=_.__indirect_function_table,L.unshift(_.__wasm_call_ctors),j--,i.monitorRunDependencies&&i.monitorRunDependencies(j),0==j&&(null!==U&&(clearInterval(U),U=null),q)){var t=q;q=null,t()}return e}var t={env:Tn,wasi_snapshot_preview1:Tn};if(j++,i.monitorRunDependencies&&i.monitorRunDependencies(j),i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(e){w("Module.instantiateWasm callback failed with error: "+e),n(e)}(function(e,t){var n=F;return b||"function"!=typeof WebAssembly.instantiateStreaming||H(n)||n.startsWith("file://")||"function"!=typeof fetch?V(n,e,t):fetch(n,{credentials:"same-origin"}).then((o=>WebAssembly.instantiateStreaming(o,e).then(t,(function(o){return w("wasm streaming compile failed: "+o),w("falling back to ArrayBuffer instantiation"),V(n,e,t)}))))})(t,(function(t){e(t.instance)})).catch(n)}();var An=e=>(An=_.free)(e),Pn=e=>(Pn=_.malloc)(e),Nn=i._ma_device__on_notification_unlocked=e=>(Nn=i._ma_device__on_notification_unlocked=_.ma_device__on_notification_unlocked)(e);i._ma_malloc_emscripten=(e,t)=>(i._ma_malloc_emscripten=_.ma_malloc_emscripten)(e,t),i._ma_free_emscripten=(e,t)=>(i._ma_free_emscripten=_.ma_free_emscripten)(e,t);var On,Rn=i._ma_device_process_pcm_frames_capture__webaudio=(e,t,n)=>(Rn=i._ma_device_process_pcm_frames_capture__webaudio=_.ma_device_process_pcm_frames_capture__webaudio)(e,t,n),Mn=i._ma_device_process_pcm_frames_playback__webaudio=(e,t,n)=>(Mn=i._ma_device_process_pcm_frames_playback__webaudio=_.ma_device_process_pcm_frames_playback__webaudio)(e,t,n),Ln=()=>(Ln=_.__errno_location)(),Dn=e=>(Dn=_.__getTypeName)(e);function Bn(){function e(){if(!On&&(On=!0,i.calledRun=!0,!N)){if(i.noFSInit||me||(me=!0,We(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?Ye("stdin",i.stdin):He("/dev/tty","/dev/stdin"),i.stdout?Ye("stdout",null,i.stdout):He("/dev/tty","/dev/stdout"),i.stderr?Ye("stderr",null,i.stderr):He("/dev/tty1","/dev/stderr"),Ge("/dev/stdin",0),Ge("/dev/stdout",1),Ge("/dev/stderr",1)),Se=!1,K(L),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;){var e=i.postRun.shift();D.unshift(e)}K(D)}}if(!(0<j)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)B();K(M),0<j||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),e()}),1)):e())}}if(i.__embind_initialize_bindings=()=>(i.__embind_initialize_bindings=_._embind_initialize_bindings)(),i.dynCall_iiji=(e,t,n,o,r)=>(i.dynCall_iiji=_.dynCall_iiji)(e,t,n,o,r),i.dynCall_jiji=(e,t,n,o,r)=>(i.dynCall_jiji=_.dynCall_jiji)(e,t,n,o,r),i.dynCall_iiiji=(e,t,n,o,r,a)=>(i.dynCall_iiiji=_.dynCall_iiiji)(e,t,n,o,r,a),i.dynCall_iij=(e,t,n,o)=>(i.dynCall_iij=_.dynCall_iij)(e,t,n,o),i.dynCall_jii=(e,t,n)=>(i.dynCall_jii=_.dynCall_jii)(e,t,n),i.dynCall_viijii=(e,t,n,o,r,a,s)=>(i.dynCall_viijii=_.dynCall_viijii)(e,t,n,o,r,a,s),i.dynCall_iiiiij=(e,t,n,o,r,a,s)=>(i.dynCall_iiiiij=_.dynCall_iiiiij)(e,t,n,o,r,a,s),i.dynCall_iiiiijj=(e,t,n,o,r,a,s,c,l)=>(i.dynCall_iiiiijj=_.dynCall_iiiiijj)(e,t,n,o,r,a,s,c,l),i.dynCall_iiiiiijj=(e,t,n,o,r,a,s,c,l,u)=>(i.dynCall_iiiiiijj=_.dynCall_iiiiiijj)(e,t,n,o,r,a,s,c,l,u),q=function e(){On||Bn(),On||(q=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return Bn(),e.ready});const r=i},e=>{e.exports=JSON.parse('{"name":"@rive-app/canvas","version":"2.21.6","description":"Rive\'s canvas based web api.","main":"rive.js","homepage":"https://rive.app","repository":{"type":"git","url":"https://github.com/rive-app/rive-wasm/tree/master/js"},"keywords":["rive","animation"],"author":"Rive","contributors":["Luigi Rosso <luigi@rive.app> (https://rive.app)","Maxwell Talbot <max@rive.app> (https://rive.app)","Arthur Vivian <arthur@rive.app> (https://rive.app)","Umberto Sonnino <umberto@rive.app> (https://rive.app)","Matthew Sullivan <matt.j.sullivan@gmail.com> (mailto:matt.j.sullivan@gmail.com)"],"license":"MIT","files":["rive.js","rive.js.map","rive.wasm","rive_fallback.wasm","rive.d.ts","rive_advanced.mjs.d.ts"],"typings":"rive.d.ts","dependencies":{},"browser":{"fs":false,"path":false}}')},(e,t,n)=>{n.r(t),n.d(t,{Animation:()=>o.Animation});var o=n(4)},(e,t,n)=>{n.r(t),n.d(t,{Animation:()=>o});var o=function(){function e(e,t,n,o){this.animation=e,this.artboard=t,this.playing=o,this.loopCount=0,this.scrubTo=null,this.instance=new n.LinearAnimationInstance(e,t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.animation.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this.instance.time},set:function(e){this.instance.time=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loopValue",{get:function(){return this.animation.loopValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needsScrub",{get:function(){return null!==this.scrubTo},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){null===this.scrubTo?this.instance.advance(e):(this.instance.time=0,this.instance.advance(this.scrubTo),this.scrubTo=null)},e.prototype.apply=function(e){this.instance.apply(e)},e.prototype.cleanup=function(){this.instance.delete()},e}()},(e,t,n)=>{n.r(t),n.d(t,{BLANK_URL:()=>i.BLANK_URL,registerTouchInteractions:()=>o.registerTouchInteractions,sanitizeUrl:()=>i.sanitizeUrl});var o=n(6),i=n(7)},(e,t,n)=>{n.r(t),n.d(t,{registerTouchInteractions:()=>o});var o=function(e){var t=e.canvas,n=e.artboard,o=e.stateMachines,i=void 0===o?[]:o,r=e.renderer,a=e.rive,s=e.fit,c=e.alignment,l=e.isTouchScrollEnabled,u=void 0!==l&&l;if(!(t&&i.length&&r&&a&&n&&"undefined"!=typeof window))return null;var d=null,p=!1,h=function(e){if(p&&e instanceof MouseEvent)"mouseup"==e.type&&(p=!1);else{p=u&&"touchend"===e.type&&"touchstart"===d,d=e.type;var t=e.currentTarget.getBoundingClientRect(),o=function(e,t){var n,o;return["touchstart","touchmove"].indexOf(e.type)>-1&&(null===(n=e.touches)||void 0===n?void 0:n.length)?(t||e.preventDefault(),{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}):"touchend"===e.type&&(null===(o=e.changedTouches)||void 0===o?void 0:o.length)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}(e,u),r=o.clientX,l=o.clientY;if(r||l){var h=r-t.left,g=l-t.top,m=a.computeAlignment(s,c,{minX:0,minY:0,maxX:t.width,maxY:t.height},n.bounds),f=new a.Mat2D;m.invert(f);var y=new a.Vec2D(h,g),b=a.mapXY(f,y),v=b.x(),w=b.y();switch(b.delete(),f.delete(),y.delete(),m.delete(),e.type){case"mouseout":for(var k=0,_=i;k<_.length;k++)_[k].pointerMove(v<0?v-1e4:v+1e4,w<0?w-1e4:w+1e4);break;case"touchmove":case"mouseover":case"mousemove":for(var x=0,C=i;x<C.length;x++)C[x].pointerMove(v,w);break;case"touchstart":case"mousedown":for(var S=0,E=i;S<E.length;S++)E[S].pointerDown(v,w);break;case"touchend":case"mouseup":for(var I=0,T=i;I<T.length;I++)T[I].pointerUp(v,w)}}}}.bind(void 0);return t.addEventListener("mouseover",h),t.addEventListener("mouseout",h),t.addEventListener("mousemove",h),t.addEventListener("mousedown",h),t.addEventListener("mouseup",h),t.addEventListener("touchmove",h,{passive:u}),t.addEventListener("touchstart",h,{passive:u}),t.addEventListener("touchend",h),function(){t.removeEventListener("mouseover",h),t.removeEventListener("mouseout",h),t.removeEventListener("mousemove",h),t.removeEventListener("mousedown",h),t.removeEventListener("mouseup",h),t.removeEventListener("touchmove",h),t.removeEventListener("touchstart",h),t.removeEventListener("touchend",h)}}},(e,t,n)=>{n.r(t),n.d(t,{BLANK_URL:()=>l,sanitizeUrl:()=>u});var o=/^([^\w]*)(javascript|data|vbscript)/im,i=/&#(\w+)(^\w|;)?/g,r=/&(newline|tab);/gi,a=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,s=/^.+(:|&colon;)/gim,c=[".","/"],l="about:blank";function u(e){if(!e)return l;var t,n=(t=e,t.replace(a,"").replace(i,(function(e,t){return String.fromCharCode(t)}))).replace(r,"").replace(a,"").trim();if(!n)return l;if(function(e){return c.indexOf(e[0])>-1}(n))return n;var u=n.match(s);if(!u)return n;var d=u[0];return o.test(d)?l:n}}],t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{n.r(o),n.d(o,{Alignment:()=>i,EventType:()=>y,Fit:()=>t,Layout:()=>h,LoopType:()=>b,Rive:()=>P,RiveEventType:()=>m,RiveFile:()=>A,RuntimeLoader:()=>g,StateMachineInput:()=>f,StateMachineInputType:()=>p,Testing:()=>R,decodeAudio:()=>M,decodeFont:()=>D,decodeImage:()=>L});var e,t,i,r=n(1),a=n(2),s=n(3),c=n(5),l=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}),u=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},d=function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};!function(e){e.Cover="cover",e.Contain="contain",e.Fill="fill",e.FitWidth="fitWidth",e.FitHeight="fitHeight",e.None="none",e.ScaleDown="scaleDown"}(t||(t={})),function(e){e.Center="center",e.TopLeft="topLeft",e.TopCenter="topCenter",e.TopRight="topRight",e.CenterLeft="centerLeft",e.CenterRight="centerRight",e.BottomLeft="bottomLeft",e.BottomCenter="bottomCenter",e.BottomRight="bottomRight"}(i||(i={}));var p,h=function(){function e(e){var n,o,r,a,s,c;this.fit=null!==(n=null==e?void 0:e.fit)&&void 0!==n?n:t.Contain,this.alignment=null!==(o=null==e?void 0:e.alignment)&&void 0!==o?o:i.Center,this.minX=null!==(r=null==e?void 0:e.minX)&&void 0!==r?r:0,this.minY=null!==(a=null==e?void 0:e.minY)&&void 0!==a?a:0,this.maxX=null!==(s=null==e?void 0:e.maxX)&&void 0!==s?s:0,this.maxY=null!==(c=null==e?void 0:e.maxY)&&void 0!==c?c:0}return e.new=function(t){var n=t.fit,o=t.alignment,i=t.minX,r=t.minY,a=t.maxX,s=t.maxY;return console.warn("This function is deprecated: please use `new Layout({})` instead"),new e({fit:n,alignment:o,minX:i,minY:r,maxX:a,maxY:s})},e.prototype.copyWith=function(t){var n=t.fit,o=t.alignment,i=t.minX,r=t.minY,a=t.maxX,s=t.maxY;return new e({fit:null!=n?n:this.fit,alignment:null!=o?o:this.alignment,minX:null!=i?i:this.minX,minY:null!=r?r:this.minY,maxX:null!=a?a:this.maxX,maxY:null!=s?s:this.maxY})},e.prototype.runtimeFit=function(e){return this.cachedRuntimeFit?this.cachedRuntimeFit:(n=this.fit===t.Cover?e.Fit.cover:this.fit===t.Contain?e.Fit.contain:this.fit===t.Fill?e.Fit.fill:this.fit===t.FitWidth?e.Fit.fitWidth:this.fit===t.FitHeight?e.Fit.fitHeight:this.fit===t.ScaleDown?e.Fit.scaleDown:e.Fit.none,this.cachedRuntimeFit=n,n);var n},e.prototype.runtimeAlignment=function(e){return this.cachedRuntimeAlignment?this.cachedRuntimeAlignment:(t=this.alignment===i.TopLeft?e.Alignment.topLeft:this.alignment===i.TopCenter?e.Alignment.topCenter:this.alignment===i.TopRight?e.Alignment.topRight:this.alignment===i.CenterLeft?e.Alignment.centerLeft:this.alignment===i.CenterRight?e.Alignment.centerRight:this.alignment===i.BottomLeft?e.Alignment.bottomLeft:this.alignment===i.BottomCenter?e.Alignment.bottomCenter:this.alignment===i.BottomRight?e.Alignment.bottomRight:e.Alignment.center,this.cachedRuntimeAlignment=t,t);var t},e}(),g=function(){function e(){}return e.loadRuntime=function(){r.default({locateFile:function(){return e.wasmURL}}).then((function(t){var n;for(e.runtime=t;e.callBackQueue.length>0;)null===(n=e.callBackQueue.shift())||void 0===n||n(e.runtime)})).catch((function(){var t="https://cdn.jsdelivr.net/npm/".concat(a.name,"@").concat(a.version,"/rive_fallback.wasm");e.wasmURL.toLowerCase()!==t?(console.warn("Failed to load WASM from ".concat(e.wasmURL,", trying jsdelivr as a backup")),e.setWasmUrl(t),e.loadRuntime()):console.error("Could not load Rive WASM file from unpkg or jsdelivr, network connection may be down, or         you may need to call set a new WASM source via RuntimeLoader.setWasmUrl() and call         RuntimeLoader.loadRuntime() again")}))},e.getInstance=function(t){e.isLoading||(e.isLoading=!0,e.loadRuntime()),e.runtime?t(e.runtime):e.callBackQueue.push(t)},e.awaitInstance=function(){return new Promise((function(t){return e.getInstance((function(e){return t(e)}))}))},e.setWasmUrl=function(t){e.wasmURL=t},e.isLoading=!1,e.callBackQueue=[],e.wasmURL="https://unpkg.com/".concat(a.name,"@").concat(a.version,"/rive.wasm"),e}();!function(e){e[e.Number=56]="Number",e[e.Trigger=58]="Trigger",e[e.Boolean=59]="Boolean"}(p||(p={}));var m,f=function(){function e(e,t){this.type=e,this.runtimeInput=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.runtimeInput.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.runtimeInput.value},set:function(e){this.runtimeInput.value=e},enumerable:!1,configurable:!0}),e.prototype.fire=function(){this.type===p.Trigger&&this.runtimeInput.fire()},e}();!function(e){e[e.General=128]="General",e[e.OpenUrl=131]="OpenUrl"}(m||(m={}));var y,b,v=function(){function e(e,t,n,o){this.stateMachine=e,this.playing=n,this.artboard=o,this.inputs=[],this.instance=new t.StateMachineInstance(e,o),this.initInputs(t)}return Object.defineProperty(e.prototype,"name",{get:function(){return this.stateMachine.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statesChanged",{get:function(){for(var e=[],t=0;t<this.instance.stateChangedCount();t++)e.push(this.instance.stateChangedNameByIndex(t));return e},enumerable:!1,configurable:!0}),e.prototype.advance=function(e){this.instance.advance(e)},e.prototype.reportedEventCount=function(){return this.instance.reportedEventCount()},e.prototype.reportedEventAt=function(e){return this.instance.reportedEventAt(e)},e.prototype.initInputs=function(e){for(var t=0;t<this.instance.inputCount();t++){var n=this.instance.input(t);this.inputs.push(this.mapRuntimeInput(n,e))}},e.prototype.mapRuntimeInput=function(e,t){return e.type===t.SMIInput.bool?new f(p.Boolean,e.asBool()):e.type===t.SMIInput.number?new f(p.Number,e.asNumber()):e.type===t.SMIInput.trigger?new f(p.Trigger,e.asTrigger()):void 0},e.prototype.cleanup=function(){this.instance.delete()},e}(),w=function(){function e(e,t,n,o,i){void 0===o&&(o=[]),void 0===i&&(i=[]),this.runtime=e,this.artboard=t,this.eventManager=n,this.animations=o,this.stateMachines=i}return e.prototype.add=function(e,t,n){if(void 0===n&&(n=!0),0===(e=O(e)).length)this.animations.forEach((function(e){return e.playing=t})),this.stateMachines.forEach((function(e){return e.playing=t}));else for(var o=this.animations.map((function(e){return e.name})),i=this.stateMachines.map((function(e){return e.name})),r=0;r<e.length;r++){var a=o.indexOf(e[r]),c=i.indexOf(e[r]);if(a>=0||c>=0)a>=0?this.animations[a].playing=t:this.stateMachines[c].playing=t;else{var l=this.artboard.animationByName(e[r]);if(l){var u=new s.Animation(l,this.artboard,this.runtime,t);u.advance(0),u.apply(1),this.animations.push(u)}else{var d=this.artboard.stateMachineByName(e[r]);if(d){var p=new v(d,this.runtime,t,this.artboard);this.stateMachines.push(p)}}}}return n&&(t?this.eventManager.fire({type:y.Play,data:this.playing}):this.eventManager.fire({type:y.Pause,data:this.paused})),t?this.playing:this.paused},e.prototype.initLinearAnimations=function(e,t){for(var n=this.animations.map((function(e){return e.name})),o=0;o<e.length;o++){var i=n.indexOf(e[o]);if(i>=0)this.animations[i].playing=t;else{var r=this.artboard.animationByName(e[o]);if(r){var a=new s.Animation(r,this.artboard,this.runtime,t);a.advance(0),a.apply(1),this.animations.push(a)}}}},e.prototype.initStateMachines=function(e,t){for(var n=this.stateMachines.map((function(e){return e.name})),o=0;o<e.length;o++){var i=n.indexOf(e[o]);if(i>=0)this.stateMachines[i].playing=t;else{var r=this.artboard.stateMachineByName(e[o]);if(r){var a=new v(r,this.runtime,t,this.artboard);this.stateMachines.push(a)}else this.initLinearAnimations([e[o]],t)}}},e.prototype.play=function(e){return this.add(e,!0)},e.prototype.pause=function(e){return this.add(e,!1)},e.prototype.scrub=function(e,t){var n=this.animations.filter((function(t){return e.includes(t.name)}));return n.forEach((function(e){return e.scrubTo=t})),n.map((function(e){return e.name}))},Object.defineProperty(e.prototype,"playing",{get:function(){return this.animations.filter((function(e){return e.playing})).map((function(e){return e.name})).concat(this.stateMachines.filter((function(e){return e.playing})).map((function(e){return e.name})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.animations.filter((function(e){return!e.playing})).map((function(e){return e.name})).concat(this.stateMachines.filter((function(e){return!e.playing})).map((function(e){return e.name})))},enumerable:!1,configurable:!0}),e.prototype.stop=function(e){var t=this,n=[];if(0===(e=O(e)).length)n=this.animations.map((function(e){return e.name})).concat(this.stateMachines.map((function(e){return e.name}))),this.animations.forEach((function(e){return e.cleanup()})),this.stateMachines.forEach((function(e){return e.cleanup()})),this.animations.splice(0,this.animations.length),this.stateMachines.splice(0,this.stateMachines.length);else{var o=this.animations.filter((function(t){return e.includes(t.name)}));o.forEach((function(e){e.cleanup(),t.animations.splice(t.animations.indexOf(e),1)}));var i=this.stateMachines.filter((function(t){return e.includes(t.name)}));i.forEach((function(e){e.cleanup(),t.stateMachines.splice(t.stateMachines.indexOf(e),1)})),n=o.map((function(e){return e.name})).concat(i.map((function(e){return e.name})))}return this.eventManager.fire({type:y.Stop,data:n}),n},Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.animations.reduce((function(e,t){return e||t.playing}),!1)||this.stateMachines.reduce((function(e,t){return e||t.playing}),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return!this.isPlaying&&(this.animations.length>0||this.stateMachines.length>0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{get:function(){return 0===this.animations.length&&0===this.stateMachines.length},enumerable:!1,configurable:!0}),e.prototype.atLeastOne=function(e,t){var n;return void 0===t&&(t=!0),0===this.animations.length&&0===this.stateMachines.length&&(this.artboard.animationCount()>0?this.add([n=this.artboard.animationByIndex(0).name],e,t):this.artboard.stateMachineCount()>0&&this.add([n=this.artboard.stateMachineByIndex(0).name],e,t)),n},e.prototype.handleLooping=function(){for(var e=0,t=this.animations.filter((function(e){return e.playing}));e<t.length;e++){var n=t[e];0===n.loopValue&&n.loopCount?(n.loopCount=0,this.stop(n.name)):1===n.loopValue&&n.loopCount?(this.eventManager.fire({type:y.Loop,data:{animation:n.name,type:b.Loop}}),n.loopCount=0):2===n.loopValue&&n.loopCount>1&&(this.eventManager.fire({type:y.Loop,data:{animation:n.name,type:b.PingPong}}),n.loopCount=0)}},e.prototype.handleStateChanges=function(){for(var e=[],t=0,n=this.stateMachines.filter((function(e){return e.playing}));t<n.length;t++){var o=n[t];e.push.apply(e,o.statesChanged)}e.length>0&&this.eventManager.fire({type:y.StateChange,data:e})},e.prototype.handleAdvancing=function(e){this.eventManager.fire({type:y.Advance,data:e})},e}();!function(e){e.Load="load",e.LoadError="loaderror",e.Play="play",e.Pause="pause",e.Stop="stop",e.Loop="loop",e.Draw="draw",e.Advance="advance",e.StateChange="statechange",e.RiveEvent="riveevent",e.AudioStatusChange="audiostatuschange"}(y||(y={})),function(e){e.OneShot="oneshot",e.Loop="loop",e.PingPong="pingpong"}(b||(b={}));var k,_=function(){function e(e){void 0===e&&(e=[]),this.listeners=e}return e.prototype.getListeners=function(e){return this.listeners.filter((function(t){return t.type===e}))},e.prototype.add=function(e){this.listeners.includes(e)||this.listeners.push(e)},e.prototype.remove=function(e){for(var t=0;t<this.listeners.length;t++){var n=this.listeners[t];if(n.type===e.type&&n.callback===e.callback){this.listeners.splice(t,1);break}}},e.prototype.removeAll=function(e){var t=this;e?this.listeners.filter((function(t){return t.type===e})).forEach((function(e){return t.remove(e)})):this.listeners.splice(0,this.listeners.length)},e.prototype.fire=function(e){this.getListeners(e.type).forEach((function(t){return t.callback(e)}))},e}(),x=function(){function e(e){this.eventManager=e,this.queue=[]}return e.prototype.add=function(e){this.queue.push(e)},e.prototype.process=function(){for(;this.queue.length>0;){var e=this.queue.shift();(null==e?void 0:e.action)&&e.action(),(null==e?void 0:e.event)&&this.eventManager.fire(e.event)}},e}();!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.UNAVAILABLE=1]="UNAVAILABLE"}(k||(k={}));var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._started=!1,t._enabled=!1,t._status=k.UNAVAILABLE,t}return l(t,e),t.prototype.delay=function(e){return u(this,void 0,void 0,(function(){return d(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},t.prototype.timeout=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){return[2,new Promise((function(e,t){return setTimeout(t,50)}))]}))}))},t.prototype.reportToListeners=function(){this.fire({type:y.AudioStatusChange}),this.removeAll()},t.prototype.enableAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){return this._enabled||(this._enabled=!0,this._status=k.AVAILABLE,this.reportToListeners()),[2]}))}))},t.prototype.testAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:if(this._status!==k.UNAVAILABLE||null===this._audioContext)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.race([this._audioContext.resume(),this.timeout()])];case 2:return e.sent(),this.enableAudio(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},t.prototype._establishAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){switch(e.label){case 0:return this._started?[3,5]:(this._started=!0,"undefined"!=typeof window?[3,1]:(this.enableAudio(),[3,5]));case 1:this._audioContext=new AudioContext,this.listenForUserAction(),e.label=2;case 2:return this._status!==k.UNAVAILABLE?[3,5]:[4,this.testAudio()];case 3:return e.sent(),[4,this.delay(1e3)];case 4:return e.sent(),[3,2];case 5:return[2]}}))}))},t.prototype.listenForUserAction=function(){var e=this;document.addEventListener("pointerdown",(function(){return u(e,void 0,void 0,(function(){return d(this,(function(e){return this.enableAudio(),[2]}))}))}),{once:!0})},t.prototype.establishAudio=function(){return u(this,void 0,void 0,(function(){return d(this,(function(e){return this._establishAudio(),[2]}))}))},Object.defineProperty(t.prototype,"systemVolume",{get:function(){return this._status===k.UNAVAILABLE?(this.testAudio(),0):1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),t}(_),S=new C,E=function(){function e(){}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.disconnect=function(){},e}(),I=globalThis.ResizeObserver||E,T=new(function(){function e(){var e=this;this._elementsMap=new Map,this._onObservedEntry=function(t){var n=e._elementsMap.get(t.target);null!==n?n.onResize(0==t.target.clientWidth||0==t.target.clientHeight):e._resizeObserver.unobserve(t.target)},this._onObserved=function(t){t.forEach(e._onObservedEntry)},this._resizeObserver=new I(this._onObserved)}return e.prototype.add=function(e,t){var n={onResize:t,element:e};return this._elementsMap.set(e,n),this._resizeObserver.observe(e),n},e.prototype.remove=function(e){this._resizeObserver.unobserve(e.element),this._elementsMap.delete(e.element)},e}()),A=function(){function e(e){this.enableRiveAssetCDN=!0,this.referenceCount=0,this.src=e.src,this.buffer=e.buffer,e.assetLoader&&(this.assetLoader=e.assetLoader),this.enableRiveAssetCDN="boolean"!=typeof e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new _,e.onLoad&&this.on(y.Load,e.onLoad),e.onLoadError&&this.on(y.LoadError,e.onLoadError)}return e.prototype.initData=function(){return u(this,void 0,void 0,(function(){var t,n,o;return d(this,(function(i){switch(i.label){case 0:return this.src?(t=this,[4,N(this.src)]):[3,2];case 1:t.buffer=i.sent(),i.label=2;case 2:return this.assetLoader&&(n=new this.runtime.CustomFileAssetLoader({loadContents:this.assetLoader})),o=this,[4,this.runtime.load(new Uint8Array(this.buffer),n,this.enableRiveAssetCDN)];case 3:if(o.file=i.sent(),null===this.file)throw this.eventManager.fire({type:y.LoadError,data:null}),new Error(e.fileLoadErrorMessage);return this.eventManager.fire({type:y.Load,data:this}),[2]}}))}))},e.prototype.init=function(){return u(this,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:if(!this.src&&!this.buffer)throw new Error(e.missingErrorMessage);return t=this,[4,g.awaitInstance()];case 1:return t.runtime=n.sent(),[4,this.initData()];case 2:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},e.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},e.prototype.cleanup=function(){var e;this.referenceCount-=1,this.referenceCount<=0&&(this.removeAllRiveEventListeners(),null===(e=this.file)||void 0===e||e.delete())},e.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},e.prototype.getInstance=function(){if(null!==this.file)return this.referenceCount+=1,this.file},e.missingErrorMessage="Rive source file or data buffer required",e.fileLoadErrorMessage="The file failed to load",e}(),P=function(){function e(e){var t,n=this;this.loaded=!1,this.readyForPlaying=!1,this.artboard=null,this.eventCleanup=null,this.shouldDisableRiveListeners=!1,this.automaticallyHandleEvents=!1,this.enableRiveAssetCDN=!0,this._volume=1,this._hasZeroSize=!1,this.durations=[],this.frameTimes=[],this.frameCount=0,this.isTouchScrollEnabled=!1,this.onCanvasResize=function(e){n._hasZeroSize=e,n._layout.maxX&&n._layout.maxY||n.resizeToCanvas()},this.renderSecondTimer=0,this.canvas=e.canvas,e.canvas.constructor===HTMLCanvasElement&&(this._observed=T.add(this.canvas,this.onCanvasResize)),this.src=e.src,this.buffer=e.buffer,this.riveFile=e.riveFile,this.layout=null!==(t=e.layout)&&void 0!==t?t:new h,this.shouldDisableRiveListeners=!!e.shouldDisableRiveListeners,this.isTouchScrollEnabled=!!e.isTouchScrollEnabled,this.automaticallyHandleEvents=!!e.automaticallyHandleEvents,this.enableRiveAssetCDN=void 0===e.enableRiveAssetCDN||e.enableRiveAssetCDN,this.eventManager=new _,e.onLoad&&this.on(y.Load,e.onLoad),e.onLoadError&&this.on(y.LoadError,e.onLoadError),e.onPlay&&this.on(y.Play,e.onPlay),e.onPause&&this.on(y.Pause,e.onPause),e.onStop&&this.on(y.Stop,e.onStop),e.onLoop&&this.on(y.Loop,e.onLoop),e.onStateChange&&this.on(y.StateChange,e.onStateChange),e.onAdvance&&this.on(y.Advance,e.onAdvance),e.onload&&!e.onLoad&&this.on(y.Load,e.onload),e.onloaderror&&!e.onLoadError&&this.on(y.LoadError,e.onloaderror),e.onplay&&!e.onPlay&&this.on(y.Play,e.onplay),e.onpause&&!e.onPause&&this.on(y.Pause,e.onpause),e.onstop&&!e.onStop&&this.on(y.Stop,e.onstop),e.onloop&&!e.onLoop&&this.on(y.Loop,e.onloop),e.onstatechange&&!e.onStateChange&&this.on(y.StateChange,e.onstatechange),e.assetLoader&&(this.assetLoader=e.assetLoader),this.taskQueue=new x(this.eventManager),this.init({src:this.src,buffer:this.buffer,riveFile:this.riveFile,autoplay:e.autoplay,animations:e.animations,stateMachines:e.stateMachines,artboard:e.artboard,useOffscreenRenderer:e.useOffscreenRenderer})}return e.new=function(t){return console.warn("This function is deprecated: please use `new Rive({})` instead"),new e(t)},e.prototype.onSystemAudioChanged=function(){this.volume=this._volume},e.prototype.init=function(t){var n=this,o=t.src,i=t.buffer,r=t.riveFile,a=t.animations,s=t.stateMachines,c=t.artboard,l=t.autoplay,u=void 0!==l&&l,d=t.useOffscreenRenderer,p=void 0!==d&&d;if(this.src=o,this.buffer=i,this.riveFile=r,!this.src&&!this.buffer&&!this.riveFile)throw new Error(e.missingErrorMessage);var h=O(a),m=O(s);this.loaded=!1,this.readyForPlaying=!1,g.awaitInstance().then((function(e){n.runtime=e,n.renderer=n.runtime.makeRenderer(n.canvas,p),n.canvas.width||n.canvas.height||n.resizeDrawingSurfaceToCanvas(),n.initData(c,h,m,u).then((function(){return n.setupRiveListeners()})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))},e.prototype.setupRiveListeners=function(e){var t=this;if(!this.shouldDisableRiveListeners){var n=(this.animator.stateMachines||[]).filter((function(e){return e.playing&&t.runtime.hasListeners(e.instance)})).map((function(e){return e.instance})),o=this.isTouchScrollEnabled;e&&"isTouchScrollEnabled"in e&&(o=e.isTouchScrollEnabled),this.eventCleanup=(0,c.registerTouchInteractions)({canvas:this.canvas,artboard:this.artboard,stateMachines:n,renderer:this.renderer,rive:this.runtime,fit:this._layout.runtimeFit(this.runtime),alignment:this._layout.runtimeAlignment(this.runtime),isTouchScrollEnabled:o})}},e.prototype.removeRiveListeners=function(){this.eventCleanup&&this.eventCleanup()},e.prototype.initializeAudio=function(){var e,t=this;S.status==k.UNAVAILABLE&&(null===(e=this.artboard)||void 0===e?void 0:e.hasAudio)&&(S.add({type:y.AudioStatusChange,callback:function(){return t.onSystemAudioChanged()}}),S.establishAudio())},e.prototype.initData=function(e,t,n,o){var i;return u(this,void 0,void 0,(function(){var r;return d(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),null!=this.riveFile?[3,2]:(this.riveFile=new A({src:this.src,buffer:this.buffer,enableRiveAssetCDN:this.enableRiveAssetCDN,assetLoader:this.assetLoader}),[4,this.riveFile.init()]);case 1:a.sent(),a.label=2;case 2:return this.file=this.riveFile.getInstance(),this.initArtboard(e,t,n,o),this.initializeAudio(),this.loaded=!0,this.eventManager.fire({type:y.Load,data:null!==(i=this.src)&&void 0!==i?i:"buffer"}),this.readyForPlaying=!0,this.taskQueue.process(),this.drawFrame(),[2,Promise.resolve()];case 3:return a.sent(),r="Problem loading file; may be corrupt!",console.warn(r),this.eventManager.fire({type:y.LoadError,data:r}),[2,Promise.reject(r)];case 4:return[2]}}))}))},e.prototype.initArtboard=function(e,t,n,o){if(this.file){var i,r=e?this.file.artboardByName(e):this.file.defaultArtboard();if(!r){var a="Invalid artboard name or no default artboard";return console.warn(a),void this.eventManager.fire({type:y.LoadError,data:a})}if(this.artboard=r,r.volume=this._volume*S.systemVolume,this.artboard.animationCount()<1)throw a="Artboard has no animations",this.eventManager.fire({type:y.LoadError,data:a}),a;this.animator=new w(this.runtime,this.artboard,this.eventManager),t.length>0||n.length>0?(i=t.concat(n),this.animator.initLinearAnimations(t,o),this.animator.initStateMachines(n,o)):i=[this.animator.atLeastOne(o,!1)],this.taskQueue.add({event:{type:o?y.Play:y.Pause,data:i}})}},e.prototype.drawFrame=function(){this.startRendering()},e.prototype.draw=function(e,t){this.frameRequestId=null;var n=performance.now();this.lastRenderTime||(this.lastRenderTime=e),this.renderSecondTimer+=e-this.lastRenderTime,this.renderSecondTimer>5e3&&(this.renderSecondTimer=0,null==t||t());var o=(e-this.lastRenderTime)/1e3;this.lastRenderTime=e;for(var i=0,r=this.animator.animations.filter((function(e){return e.playing||e.needsScrub})).sort((function(e){return e.needsScrub?-1:1}));i<r.length;i++){var a=r[i];a.advance(o),a.instance.didLoop&&(a.loopCount+=1),a.apply(1)}for(var s=0,l=this.animator.stateMachines.filter((function(e){return e.playing}));s<l.length;s++){var u=l[s],d=u.reportedEventCount();if(d)for(var p=0;p<d;p++){var h=u.reportedEventAt(p);if(h)if(h.type===m.OpenUrl){if(this.eventManager.fire({type:y.RiveEvent,data:h}),this.automaticallyHandleEvents){var g=document.createElement("a"),f=h,b=f.url,v=f.target,w=(0,c.sanitizeUrl)(b);b&&g.setAttribute("href",w),v&&g.setAttribute("target",v),w&&w!==c.BLANK_URL&&g.click()}}else this.eventManager.fire({type:y.RiveEvent,data:h})}u.advance(o)}this.artboard.advance(o);var k=this.renderer;k.clear(),k.save(),this.alignRenderer(),this._hasZeroSize||this.artboard.draw(k),k.restore(),k.flush(),this.animator.handleLooping(),this.animator.handleStateChanges(),this.animator.handleAdvancing(o),this.frameCount++;var _=performance.now();for(this.frameTimes.push(_),this.durations.push(_-n);this.frameTimes[0]<=_-1e3;)this.frameTimes.shift(),this.durations.shift();this.animator.isPlaying?this.startRendering():(this.animator.isPaused||this.animator.isStopped)&&(this.lastRenderTime=0)},e.prototype.alignRenderer=function(){var e=this,t=e.renderer,n=e.runtime,o=e._layout,i=e.artboard;t.align(o.runtimeFit(n),o.runtimeAlignment(n),{minX:o.minX,minY:o.minY,maxX:o.maxX,maxY:o.maxY},i.bounds)},Object.defineProperty(e.prototype,"fps",{get:function(){return this.durations.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameTime",{get:function(){return 0===this.durations.length?0:(this.durations.reduce((function(e,t){return e+t}),0)/this.durations.length).toFixed(4)},enumerable:!1,configurable:!0}),e.prototype.cleanup=function(){var e;this.stopRendering(),this.cleanupInstances(),null!==this._observed&&T.remove(this._observed),null===(e=this.riveFile)||void 0===e||e.cleanup(),this.riveFile=null,this.file=null},e.prototype.deleteRiveRenderer=function(){var e;null===(e=this.renderer)||void 0===e||e.delete(),this.renderer=null},e.prototype.cleanupInstances=function(){null!==this.eventCleanup&&this.eventCleanup(),this.stop(),this.artboard&&(this.artboard.delete(),this.artboard=null)},e.prototype.retrieveTextRun=function(e){var t;if(e)if(this.artboard){var n=this.artboard.textRun(e);if(n)return n;console.warn("Could not access a text run with name '".concat(e,"' in the '").concat(null===(t=this.artboard)||void 0===t?void 0:t.name,"' Artboard. Note that you must rename a text run node in the Rive editor to make it queryable at runtime."))}else console.warn("Tried to access text run, but the Artboard is null");else console.warn("No text run name provided")},e.prototype.getTextRunValue=function(e){var t=this.retrieveTextRun(e);return t?t.text:void 0},e.prototype.setTextRunValue=function(e,t){var n=this.retrieveTextRun(e);n&&(n.text=t)},e.prototype.play=function(e,t){var n=this;e=O(e),this.readyForPlaying?(this.animator.play(e),this.eventCleanup&&this.eventCleanup(),this.setupRiveListeners(),this.startRendering()):this.taskQueue.add({action:function(){return n.play(e,t)}})},e.prototype.pause=function(e){var t=this;e=O(e),this.readyForPlaying?(this.eventCleanup&&this.eventCleanup(),this.animator.pause(e)):this.taskQueue.add({action:function(){return t.pause(e)}})},e.prototype.scrub=function(e,t){var n=this;e=O(e),this.readyForPlaying?(this.animator.scrub(e,t||0),this.drawFrame()):this.taskQueue.add({action:function(){return n.scrub(e,t)}})},e.prototype.stop=function(e){var t=this;e=O(e),this.readyForPlaying?(this.animator.stop(e),this.eventCleanup&&this.eventCleanup()):this.taskQueue.add({action:function(){return t.stop(e)}})},e.prototype.reset=function(e){var t,n=null==e?void 0:e.artboard,o=O(null==e?void 0:e.animations),i=O(null==e?void 0:e.stateMachines),r=null!==(t=null==e?void 0:e.autoplay)&&void 0!==t&&t;this.cleanupInstances(),this.initArtboard(n,o,i,r),this.taskQueue.process()},e.prototype.load=function(e){this.file=null,this.stop(),this.init(e)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(e){this._layout=e,e.maxX&&e.maxY||this.resizeToCanvas(),this.loaded&&!this.animator.isPlaying&&this.drawFrame()},enumerable:!1,configurable:!0}),e.prototype.resizeToCanvas=function(){this._layout=this.layout.copyWith({minX:0,minY:0,maxX:this.canvas.width,maxY:this.canvas.height})},e.prototype.resizeDrawingSurfaceToCanvas=function(e){if(this.canvas instanceof HTMLCanvasElement&&window){var t=this.canvas.getBoundingClientRect(),n=t.width,o=t.height,i=e||window.devicePixelRatio||1;this.canvas.width=i*n,this.canvas.height=i*o,this.startRendering(),this.resizeToCanvas()}},Object.defineProperty(e.prototype,"source",{get:function(){return this.src},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeArtboard",{get:function(){return this.artboard?this.artboard.name:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animationNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.animationCount();t++)e.push(this.artboard.animationByIndex(t).name);return e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateMachineNames",{get:function(){if(!this.loaded||!this.artboard)return[];for(var e=[],t=0;t<this.artboard.stateMachineCount();t++)e.push(this.artboard.stateMachineByIndex(t).name);return e},enumerable:!1,configurable:!0}),e.prototype.stateMachineInputs=function(e){if(this.loaded){var t=this.animator.stateMachines.find((function(t){return t.name===e}));return null==t?void 0:t.inputs}},e.prototype.retrieveInputAtPath=function(e,t){if(e)if(this.artboard){var n=this.artboard.inputByPath(e,t);if(n)return n;console.warn("Could not access an input with name: '".concat(e,"', at path:'").concat(t,"'"))}else console.warn("Tried to access input: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));else console.warn("No input name provided for path '".concat(t,"'"))},e.prototype.setBooleanStateAtPath=function(e,t,n){var o=this.retrieveInputAtPath(e,n);o&&(o.type===p.Boolean?o.asBool().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(n,"' is not a boolean")))},e.prototype.setNumberStateAtPath=function(e,t,n){var o=this.retrieveInputAtPath(e,n);o&&(o.type===p.Number?o.asNumber().value=t:console.warn("Input with name: '".concat(e,"', at path:'").concat(n,"' is not a number")))},e.prototype.fireStateAtPath=function(e,t){var n=this.retrieveInputAtPath(e,t);n&&(n.type===p.Trigger?n.asTrigger().fire():console.warn("Input with name: '".concat(e,"', at path:'").concat(t,"' is not a trigger")))},e.prototype.retrieveTextAtPath=function(e,t){if(e)if(t)if(this.artboard){var n=this.artboard.textByPath(e,t);if(n)return n;console.warn("Could not access text with name: '".concat(e,"', at path:'").concat(t,"'"))}else console.warn("Tried to access text: '".concat(e,"', at path: '").concat(t,"', but the Artboard is null"));else console.warn("No path provided for text '".concat(e,"'"));else console.warn("No text name provided for path '".concat(t,"'"))},e.prototype.getTextRunValueAtPath=function(e,t){var n=this.retrieveTextAtPath(e,t);if(n)return n.text;console.warn("Could not get text with name: '".concat(e,"', at path:'").concat(t,"'"))},e.prototype.setTextRunValueAtPath=function(e,t,n){var o=this.retrieveTextAtPath(e,n);o?o.text=t:console.warn("Could not set text with name: '".concat(e,"', at path:'").concat(n,"'"))},Object.defineProperty(e.prototype,"playingStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(e){return e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playingAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(e){return e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedAnimationNames",{get:function(){return this.loaded?this.animator.animations.filter((function(e){return!e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pausedStateMachineNames",{get:function(){return this.loaded?this.animator.stateMachines.filter((function(e){return!e.playing})).map((function(e){return e.name})):[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this.animator.isPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaused",{get:function(){return this.animator.isPaused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{get:function(){return this.animator.isStopped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.artboard?this.artboard.bounds:void 0},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t){this.eventManager.add({type:e,callback:t})},e.prototype.off=function(e,t){this.eventManager.remove({type:e,callback:t})},e.prototype.unsubscribe=function(e,t){console.warn("This function is deprecated: please use `off()` instead."),this.off(e,t)},e.prototype.removeAllRiveEventListeners=function(e){this.eventManager.removeAll(e)},e.prototype.unsubscribeAll=function(e){console.warn("This function is deprecated: please use `removeAllRiveEventListeners()` instead."),this.removeAllRiveEventListeners(e)},e.prototype.stopRendering=function(){this.loaded&&this.frameRequestId&&(this.runtime.cancelAnimationFrame?this.runtime.cancelAnimationFrame(this.frameRequestId):cancelAnimationFrame(this.frameRequestId),this.frameRequestId=null)},e.prototype.startRendering=function(){this.loaded&&this.artboard&&!this.frameRequestId&&(this.runtime.requestAnimationFrame?this.frameRequestId=this.runtime.requestAnimationFrame(this.draw.bind(this)):this.frameRequestId=requestAnimationFrame(this.draw.bind(this)))},e.prototype.enableFPSCounter=function(e){this.runtime.enableFPSCounter(e)},e.prototype.disableFPSCounter=function(){this.runtime.disableFPSCounter()},Object.defineProperty(e.prototype,"contents",{get:function(){if(this.loaded){for(var e={artboards:[]},t=0;t<this.file.artboardCount();t++){for(var n=this.file.artboardByIndex(t),o={name:n.name,animations:[],stateMachines:[]},i=0;i<n.animationCount();i++){var r=n.animationByIndex(i);o.animations.push(r.name)}for(var a=0;a<n.stateMachineCount();a++){for(var s=n.stateMachineByIndex(a),c=s.name,l=new this.runtime.StateMachineInstance(s,n),u=[],d=0;d<l.inputCount();d++){var p=l.input(d);u.push({name:p.name,type:p.type})}o.stateMachines.push({name:c,inputs:u})}e.artboards.push(o)}return e}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.artboard&&this.artboard.volume!==this._volume&&(this._volume=this.artboard.volume),this._volume},set:function(e){this._volume=e,this.artboard&&(this.artboard.volume=e*S.systemVolume)},enumerable:!1,configurable:!0}),e.missingErrorMessage="Rive source file or data buffer required",e}(),N=function(e){return u(void 0,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return t=new Request(e),[4,fetch(t)];case 1:return[4,n.sent().arrayBuffer()];case 2:return[2,n.sent()]}}))}))},O=function(e){return"string"==typeof e?[e]:e instanceof Array?e:[]},R={EventManager:_,TaskQueueManager:x},M=function(e){return new Promise((function(t){return g.getInstance((function(n){n.decodeAudio(e,t)}))}))},L=function(e){return new Promise((function(t){return g.getInstance((function(n){n.decodeImage(e,t)}))}))},D=function(e){return new Promise((function(t){return g.getInstance((function(n){n.decodeFont(e,t)}))}))}})(),o})(),e.exports=t()},957:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var o=n(609),i=n(52);function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=r(o),s=function(){return s=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function c(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}function l(){var e="undefined"!=typeof window&&"number"==typeof window.devicePixelRatio?window.devicePixelRatio:1;return Math.min(Math.max(1,e),3)}"function"==typeof SuppressedError&&SuppressedError;var u=function(){function e(){}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.disconnect=function(){},e}(),d=globalThis.ResizeObserver||u,p=void 0!==globalThis.ResizeObserver,h=!p;function g(e,t){void 0===t&&(t=!0);var n=o.useState({width:0,height:0}),i=n[0],r=n[1];o.useEffect((function(){if("undefined"!=typeof window&&t){var e=function(){r({width:window.innerWidth,height:window.innerHeight})};return h&&(e(),window.addEventListener("resize",e)),function(){return window.removeEventListener("resize",e)}}}),[]);var a,s,c=o.useRef(new d((a=function(e){p&&r({width:e[e.length-1].contentRect.width,height:e[e.length-1].contentRect.height})},s=0,function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];clearTimeout(s),s=window.setTimeout((function(){return a.apply(e,t)}),0)})));return o.useEffect((function(){var n=c.current;if(t){var o=e.current;return e.current&&p&&n.observe(e.current),function(){n.disconnect(),o&&p&&n.unobserve(o)}}n.disconnect()}),[e,c]),i}var m={useDevicePixelRatio:!0,fitCanvasToArtboardHeight:!1,useOffscreenRenderer:!0,shouldResizeCanvasToContainer:!0};function f(e){return Object.assign({},m,e)}function y(e){var t=e.riveLoaded,n=void 0!==t&&t,i=e.canvasElem,r=e.containerRef,a=e.options,s=void 0===a?{}:a,c=e.onCanvasHasResized,u=e.artboardBounds,d=f(s),p=o.useState({height:0,width:0}),h=p[0],m=h.height,y=h.width,b=p[1],v=o.useState({height:0,width:0}),w=v[0],k=w.height,_=w.width,x=v[1],C=o.useState(!0),S=C[0],E=C[1],I=d.fitCanvasToArtboardHeight,T=d.shouldResizeCanvasToContainer,A=d.useDevicePixelRatio,P=d.customDevicePixelRatio,N=g(r,T),O=function(e){var t=e||l(),n=o.useState(t),i=n[0],r=n[1];return o.useEffect((function(){if("undefined"!=typeof window&&"matchMedia"in window){var t=function(){var t=e||l();r(t)},n=window.matchMedia("screen and (resolution: ".concat(i,"dppx)"));return n.hasOwnProperty("addEventListener")?n.addEventListener("change",t):n.addListener(t),function(){n.hasOwnProperty("removeEventListener")?n.removeEventListener("change",t):n.removeListener(t)}}}),[i,e]),i}(P),R=null!=u?u:{},M=R.maxX,L=R.maxY,D=o.useCallback((function(){var e,t,n,o,i=null!==(t=null===(e=r.current)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:0,a=null!==(o=null===(n=r.current)||void 0===n?void 0:n.clientHeight)&&void 0!==o?o:0;return I&&u?{width:i,height:i*(u.maxY/u.maxX)}:{width:i,height:a}}),[r,I,M,L]);o.useEffect((function(){if(T&&r.current&&n){var e=D(),t=e.width,o=e.height,a=!1;if(i){var s=t!==y||o!==m;if(d.fitCanvasToArtboardHeight&&s&&(r.current.style.height=o+"px",a=!0),d.useDevicePixelRatio){if(s||t*O!==_||o*O!==k){var l=O*t,u=O*o;i.width=l,i.height=u,i.style.width=t+"px",i.style.height=o+"px",x({width:l,height:u}),a=!0}}else s&&(i.width=t,i.height=o,x({width:t,height:o}),a=!0);b({width:t,height:o})}c&&(S||a)&&c&&c(),S&&E(!1)}}),[i,r,N,O,D,S,E,k,_,m,y,c,T,I,A,n]),o.useEffect((function(){x({width:0,height:0})}),[i])}var b,v=function(){function e(){}return e.prototype.observe=function(){},e.prototype.unobserve=function(){},e.prototype.disconnect=function(){},e}(),w=globalThis.IntersectionObserver||v,k=function(){function e(){var e=this;this.elementsMap=new Map,this.onObserved=function(t){t.forEach((function(t){var n=e.elementsMap.get(t.target);n&&n(t)}))},this.observer=new w(this.onObserved)}return e.prototype.registerCallback=function(e,t){this.observer.observe(e),this.elementsMap.set(e,t)},e.prototype.removeCallback=function(e){this.observer.unobserve(e),this.elementsMap.delete(e)},e}(),_=function(){return b||(b=new k),b};function x(e){var t=e.setContainerRef,n=e.setCanvasRef,o=e.className,i=void 0===o?"":o,r=e.style,l=e.children,u=c(e,["setContainerRef","setCanvasRef","className","style","children"]),d=s({width:"100%",height:"100%"},r);return a.default.createElement("div",s({ref:t,className:i},!i&&{style:d}),a.default.createElement("canvas",s({ref:n,style:{verticalAlign:"top",width:0,height:0}},u),l))}function C(e,t){void 0===t&&(t={});var n=o.useState(null),r=n[0],c=n[1],l=o.useRef(null),u=o.useState(null),d=u[0],p=u[1],h=Boolean(e),g=f(t),m=o.useCallback((function(){d&&(d.startRendering(),d.resizeToCanvas())}),[d]);y({riveLoaded:!!d,canvasElem:r,containerRef:l,options:g,onCanvasHasResized:m,artboardBounds:null==d?void 0:d.bounds});var b=o.useCallback((function(e){null===e&&r&&(r.height=0,r.width=0),c(e)}),[]);o.useEffect((function(){if(r&&e&&null==d){var t=g.useOffscreenRenderer,n=new i.Rive(s(s({useOffscreenRenderer:t},e),{canvas:r}));n.on(i.EventType.Load,(function(){r?p(n):n.cleanup()}))}}),[r,h,d]);var v=o.useCallback((function(e){l.current=e}),[]),w={observe:o.useCallback((function(e,t){_().registerCallback(e,t)}),[]),unobserve:o.useCallback((function(e){_().removeCallback(e)}),[])},k=w.observe,C=w.unobserve;o.useEffect((function(){var e,t=!1,n=function(){if(r&&t){var e=r.getBoundingClientRect();e.width>0&&e.height>0&&e.top<(window.innerHeight||document.documentElement.clientHeight)&&e.bottom>0&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.right>0&&(null==d||d.startRendering(),t=!1)}};return r&&!1!==g.shouldUseIntersectionObserver&&k(r,(function(o){o.isIntersecting?d&&d.startRendering():d&&d.stopRendering(),t=!o.isIntersecting,clearTimeout(e),o.isIntersecting||0!==o.boundingClientRect.width||(e=setTimeout(n,10))})),function(){r&&C(r)}}),[k,C,d,r,g.shouldUseIntersectionObserver]),o.useEffect((function(){return function(){d&&(d.cleanup(),p(null))}}),[d,r]);var S=null==e?void 0:e.animations;o.useEffect((function(){d&&S&&(d.isPlaying?(d.stop(d.animationNames),d.play(S)):d.isPaused&&(d.stop(d.animationNames),d.pause(S)))}),[S,d]);var E=o.useCallback((function(e){return a.default.createElement(x,s({setContainerRef:v,setCanvasRef:b},e))}),[b,v]);return{canvas:r,container:l.current,setCanvasRef:b,setContainerRef:v,rive:d,RiveComponent:E}}t.default=function(e){var t=e.src,n=e.artboard,o=e.animations,i=e.stateMachines,r=e.layout,l=e.useOffscreenRenderer,u=void 0===l||l,d=e.shouldDisableRiveListeners,p=void 0!==d&&d,h=e.shouldResizeCanvasToContainer,g=void 0===h||h,m=e.automaticallyHandleEvents,f=void 0!==m&&m,y=e.children,b=c(e,["src","artboard","animations","stateMachines","layout","useOffscreenRenderer","shouldDisableRiveListeners","shouldResizeCanvasToContainer","automaticallyHandleEvents","children"]),v=C({src:t,artboard:n,animations:o,layout:r,stateMachines:i,autoplay:!0,shouldDisableRiveListeners:p,automaticallyHandleEvents:f},{useOffscreenRenderer:u,shouldResizeCanvasToContainer:g}).RiveComponent;return a.default.createElement(v,s({},b),y)},t.useResizeCanvas=y,t.useRive=C,t.useRiveFile=function(e){var t=this,n=o.useState(null),r=n[0],a=n[1],s=o.useState("idle"),c=s[0],l=s[1];return o.useEffect((function(){var n=null;return function(e,t,n,o){new(n||(n=Promise))((function(t,i){function r(e){try{s(o.next(e))}catch(e){i(e)}}function a(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(r,a)}s((o=o.apply(e,[])).next())}))}(t,0,void 0,(function(){return function(e,t){var n,o,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(i=2&s[0]?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){r.label=s[1];break}if(6===s[0]&&r.label<i[1]){r.label=i[1],i=s;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(s);break}i[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],o=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){try{l("loading"),(n=new i.RiveFile(e)).init(),n.on(i.EventType.Load,(function(){null==n||n.getInstance(),a(n),l("success")})),n.on(i.EventType.LoadError,(function(){l("failed")})),a(n)}catch(e){console.error(e),l("failed")}return[2]}))})),function(){null==n||n.cleanup()}}),[e.src,e.buffer]),{riveFile:r,status:c}},t.useStateMachineInput=function(e,t,n,r){var a=o.useState(null),s=a[0],c=a[1];return o.useEffect((function(){function o(){if(e&&t&&n||c(null),e&&t&&n){var o=e.stateMachineInputs(t);if(o){var i=o.find((function(e){return e.name===n}));void 0!==r&&i&&(i.value=r),c(i||null)}}else c(null)}o(),e&&e.on(i.EventType.Load,(function(){o()}))}),[e]),s},Object.keys(i).forEach((function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}))},789:function(e,t){!function(e){"use strict";function t(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))}const n=(e=300)=>new Promise((t=>{setTimeout(t,e)})),o=e=>t(void 0,void 0,void 0,(function*(){return yield n(),document.hasFocus()?e:o(e)}));e.checkIfBrowserSupported=()=>{var e;return Boolean(null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getDisplayMedia)},e.takeScreenshot=({onCaptureEnd:e,onCaptureStart:i,quality:r=.7,type:a="image/jpeg",soundEffectUrl:s}={})=>t(void 0,void 0,void 0,(function*(){return yield null==i?void 0:i(),navigator.mediaDevices.getDisplayMedia({preferCurrentTab:!0,video:{frameRate:30}}).then(o).then((o=>t(void 0,void 0,void 0,(function*(){const t=(e=>{const t=document.createElement("video");return t.autoplay=!0,t.muted=!0,t.playsInline=!0,t.srcObject=e,t.setAttribute("style","position:fixed;top:0;left:0;pointer-events:none;visibility:hidden;"),t})(o);document.body.appendChild(t),s&&(e=>{const t=document.createElement("audio");t.loop=!1,t.src=e,t.play(),t.remove()})(s),yield n();const i=(e=>{var t,n,o;const i=null===(t=e.srcObject)||void 0===t?void 0:t.getTracks()[0].getSettings(),r=document.createElement("canvas");r.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:0,r.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:0;const a=r.getContext("2d");return null==a||a.drawImage(e,0,0),r})(t),c=i.toDataURL(a,r);return(e=>{var t;const n=null===(t=e.srcObject)||void 0===t?void 0:t.getTracks();null==n||n.forEach((e=>e.stop())),e.srcObject=null,e.remove()})(t),i.remove(),yield null==e?void 0:e(),c}))))})),Object.defineProperty(e,"__esModule",{value:!0})}(t)},833:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(o++,"%c"===e&&(i=o))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=!1),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(736)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},736:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,r,a=null;function s(...e){if(!s.enabled)return;const o=s,i=Number(new Date),r=i-(n||i);o.diff=r,o.prev=n,o.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";a++;const r=t.formatters[i];if("function"==typeof r){const t=e[a];n=r.call(o,t),e.splice(a,1),a--}return n})),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=o,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,r=t.enabled(e)),r),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function o(e,n){const o=t(this.namespace+(void 0===n?":":n)+e);return o.log=this.log,o}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const o=("string"==typeof e?e:"").split(/[\s,]+/),i=o.length;for(n=0;n<i;n++)o[n]&&("-"===(e=o[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,o;for(n=0,o=t.skips.length;n<o;n++)if(t.skips[n].test(e))return!1;for(n=0,o=t.names.length;n<o;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},744:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function i(e,t,n){return e.concat(t).map((function(e){return o(e,n)}))}function r(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function s(e,n,c){(c=c||{}).arrayMerge=c.arrayMerge||i,c.isMergeableObject=c.isMergeableObject||t,c.cloneUnlessOtherwiseSpecified=o;var l=Array.isArray(n);return l===Array.isArray(e)?l?c.arrayMerge(e,n,c):function(e,t,n){var i={};return n.isMergeableObject(e)&&r(e).forEach((function(t){i[t]=o(e[t],n)})),r(t).forEach((function(r){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,r)||(a(e,r)&&n.isMergeableObject(t[r])?i[r]=function(e,t){if(!t.customMerge)return s;var n=t.customMerge(e);return"function"==typeof n?n:s}(r,n)(e[r],t[r],n):i[r]=o(t[r],n))})),i}(e,n,c):o(n,c)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return s(e,n,t)}),{})};var c=s;e.exports=c},849:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var o,i=t.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!r)return!1;for(o in e);return void 0===o||t.call(e,o)},s=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(i)return i(e,n).value}return e[n]};e.exports=function e(){var t,n,o,i,l,u,d=arguments[0],p=1,h=arguments.length,g=!1;for("boolean"==typeof d&&(g=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<h;++p)if(null!=(t=arguments[p]))for(n in t)o=c(d,n),d!==(i=c(t,n))&&(g&&i&&(a(i)||(l=r(i)))?(l?(l=!1,u=o&&r(o)?o:[]):u=o&&a(o)?o:{},s(d,{name:n,newValue:e(g,u,i)})):void 0!==i&&s(d,{name:n,newValue:i}));return d}},788:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,o=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,c=/^\s+|\s+$/g,l="";function u(e){return e?e.replace(c,l):l}e.exports=function(e,c){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];c=c||{};var d=1,p=1;function h(e){var t=e.match(n);t&&(d+=t.length);var o=e.lastIndexOf("\n");p=~o?e.length-o:p+e.length}function g(){var e={line:d,column:p};return function(t){return t.position=new m(e),v(),t}}function m(e){this.start=e,this.end={line:d,column:p},this.source=c.source}m.prototype.content=e;var f=[];function y(t){var n=new Error(c.source+":"+d+":"+p+": "+t);if(n.reason=t,n.filename=c.source,n.line=d,n.column=p,n.source=e,!c.silent)throw n;f.push(n)}function b(t){var n=t.exec(e);if(n){var o=n[0];return h(o),e=e.slice(o.length),n}}function v(){b(o)}function w(e){var t;for(e=e||[];t=k();)!1!==t&&e.push(t);return e}function k(){var t=g();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;l!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,l===e.charAt(n-1))return y("End of comment missing");var o=e.slice(2,n-2);return p+=2,h(o),e=e.slice(n),p+=2,t({type:"comment",comment:o})}}function _(){var e=g(),n=b(i);if(n){if(k(),!b(r))return y("property missing ':'");var o=b(a),c=e({type:"declaration",property:u(n[0].replace(t,l)),value:o?u(o[0].replace(t,l)):l});return b(s),c}}return v(),function(){var e,t=[];for(w(t);e=_();)!1!==e&&(t.push(e),w(t));return t}()}},585:e=>{var t=1e3,n=60*t,o=60*n,i=24*o,r=7*i;function a(e,t,n,o){var i=t>=1.5*n;return Math.round(e/n)+" "+o+(i?"s":"")}e.exports=function(e,s){s=s||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var s=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return s*r;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return s.long?(c=e,(l=Math.abs(c))>=i?a(c,l,i,"day"):l>=o?a(c,l,o,"hour"):l>=n?a(c,l,n,"minute"):l>=t?a(c,l,t,"second"):c+" ms"):function(e){var r=Math.abs(e);return r>=i?Math.round(e/i)+"d":r>=o?Math.round(e/o)+"h":r>=n?Math.round(e/n)+"m":r>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},20:(e,t,n)=>{"use strict";var o=n(609),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,r={},l=null,u=null;for(o in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,o)&&!c.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===r[o]&&(r[o]=t[o]);return{$$typeof:i,type:e,key:l,ref:u,props:r,_owner:s.current}}t.Fragment=r,t.jsx=l,t.jsxs=l},848:(e,t,n)=>{"use strict";e.exports=n(20)},133:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(788));t.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var o=(0,i.default)(e),r="function"==typeof t;return o.forEach((function(e){if("declaration"===e.type){var o=e.property,i=e.value;r?t(o,i,e):i&&((n=n||{})[o]=i)}})),n}},609:e=>{"use strict";e.exports=window.React},942:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,r(n)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},852:(e,t,n)=>{"use strict";var o={};n.r(o),n.d(o,{boolean:()=>vt,booleanish:()=>wt,commaOrSpaceSeparated:()=>St,commaSeparated:()=>Ct,number:()=>_t,overloadedBoolean:()=>kt,spaceSeparated:()=>xt});var i={};n.r(i),n.d(i,{attentionMarkers:()=>ai,contentInitial:()=>ei,disable:()=>si,document:()=>Zo,flow:()=>ni,flowInitial:()=>ti,insideSpan:()=>ri,string:()=>oi,text:()=>ii});var r=n(609);const a=window.wp.plugins,s=window.wp.primitives;var c=n(848);const l=(0,c.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(s.Path,{d:"M4 9v1.5h16V9H4zm12 5.5h4V13h-4v1.5zm-6 0h4V13h-4v1.5zm-6 0h4V13H4v1.5z"})}),u=window.wp.privateApis,d=["I know using unstable features means my theme or plugin will inevitably break in the next version of WordPress.","I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress."],{lock:p,unlock:h}=function(){let e;for(const t of d)try{return(0,u.__dangerousOptInToUnstableAPIsOnlyForCoreModules)(t,"@wordpress/edit-site")}catch(t){e=t}throw e}(),g=window.wp.editor,m=window.wp.data,f=window.wp.element,y=window.wp.blockEditor,b="undefined"!=typeof window&&window?.bigSkyInitialState?.isDevMode||!1,v="undefined"!=typeof window?window.console:console,w={info:b?v.info.bind(v):()=>{},warn:b?v.warn.bind(v):()=>{},error:b?v.error.bind(v):()=>{},storeLastPayload:function(e){b&&(window.bigSkyInitialState.lastPayload=e)}};const k=[239,187,191];class _ extends TransformStream{constructor(){let e;super({start(t){e=function(e){let t,n,o,i,r,a,s;return c(),{feed:function(e){n=n?n+e:e,t&&function(e){return k.every(((t,n)=>e.charCodeAt(n)===t))}(n)&&(n=n.slice(k.length)),t=!1;const r=n.length;let a=0,s=!1;for(;a<r;){s&&("\n"===n[a]&&++a,s=!1);let e,t=-1,c=i;for(let i=o;t<0&&i<r;++i)e=n[i],":"===e&&c<0?c=i-a:"\r"===e?(s=!0,t=i-a):"\n"===e&&(t=i-a);if(t<0){o=r-a,i=c;break}o=0,i=-1,l(n,a,c,t),a+=t+1}a===r?n="":a>0&&(n=n.slice(a))},reset:c};function c(){t=!0,n="",o=0,i=-1,r=void 0,a=void 0,s=""}function l(t,n,o,i){if(0===i)return s.length>0&&(e({type:"event",id:r,event:a||void 0,data:s.slice(0,-1)}),s="",r=void 0),void(a=void 0);const c=o<0,l=t.slice(n,n+(c?i:o));let u=0;u=c?i:" "===t[n+o+1]?o+2:o+1;const d=n+u,p=i-u,h=t.slice(d,d+p).toString();if("data"===l)s+=h?`${h}\n`:"\n";else if("event"===l)a=h;else if("id"!==l||h.includes("\0")){if("retry"===l){const t=parseInt(h,10);Number.isNaN(t)||e({type:"reconnect-interval",value:t})}}else r=h}}((e=>{"event"===e.type&&t.enqueue(e)}))},transform(t){e.feed(t)}})}}const x={WPCOM_JETPACK_AI:"wpcom-jetpack-ai",WPCOM_OPENAI:"wpcom-openai",OPENAI:"openai",GROQ:"groq",OLLAMA:"ollama",LMSTUDIO:"lmstudio",LOCALAI:"localai",LOCAL_GRAPH:"local-graph",WPCOM_GRAPH:"wpcom-graph",getAvailable:()=>[x.WPCOM_JETPACK_AI,x.WPCOM_OPENAI,x.OLLAMA,x.LMSTUDIO,x.LOCALAI,x.OPENAI,x.GROQ,x.LOCAL_GRAPH,x.WPCOM_GRAPH],getDefault:()=>x.OPENAI,getDefaultApiKey:e=>(e!==x.GROQ||"undefined"==typeof process)&&(e!==x.OPENAI||"undefined"==typeof process)&&null},C={GPT_4O_MINI:"gpt-4o-mini",GPT_4_TURBO:"gpt-4-turbo",GPT_4O:"gpt-4o-2024-11-20",LLAMA3_70B_8192:"llama3-70b-8192",LLAMA3_70B_8192_WPCOM:"llama3-70b",GEMMA_7b_INSTRUCT:"gemma:7b-instruct-q5_K_M",PHI_3_MEDIUM:"legraphista/Phi-3-medium-128k-instruct-IMat-GGUF",MISTRAL_03:"mistral-0.3",HERMES_2_PRO_MISTRAL:"hermes-2-pro-mistral",isMultimodal:e=>e===C.GPT_4O,supportsToolMessages:e=>[C.GPT_4O,C.GPT_4_TURBO,C.GPT_4O_MINI,C.LLAMA3_70B_8192,C.MISTRAL_03,C.HERMES_2_PRO_MISTRAL,C.LOCAL_GRAPH,C.WPCOM_GRAPH].includes(e),getAvailable:e=>e===x.GROQ?[C.LLAMA3_70B_8192]:[x.WPCOM_JETPACK_AI,x.WPCOM_OPENAI].includes(e)?[C.GPT_4O,C.GPT_4_TURBO,C.GPT_4O_MINI,C.LLAMA3_70B_8192_WPCOM]:e===x.OLLAMA?[C.GEMMA_7b_INSTRUCT]:e===x.LOCALAI?[C.MISTRAL_03,C.HERMES_2_PRO_MISTRAL]:e===x.LMSTUDIO?[C.PHI_3_MEDIUM]:[C.GPT_4O_MINI,C.GPT_4_TURBO,C.GPT_4O],getDefault:(e=null)=>(e||(e=x.getDefault()),e===x.GROQ?C.LLAMA3_70B_8192:[x.WPCOM_JETPACK_AI,x.WPCOM_OPENAI,x.OPENAI].includes(e)?C.GPT_4O:e===x.OLLAMA?C.GEMMA_7b_INSTRUCT:e===x.LOCALAI?C.HERMES_2_PRO_MISTRAL:C.GPT_4O)},S=(e,t)=>{const n=C.isMultimodal(t),o=C.supportsToolMessages(t);return n||(e=e.map((e=>{if(e.content&&Array.isArray(e.content)){const t=e.content.filter((e=>"text"===e.type)).map((e=>e.text)).join("\n"),n=e.content.filter((e=>"image_url"===e.type)).map((e=>e.image_url.substring(0,200))).join("\n");e.content=[t,n].join("\n")}return e}))),o||(console.warn("remapping history",e),e=e.map((e=>"tool"===e.role?{...e,role:"user"}:e)),console.warn("remapped history",e)),e.map((e=>e.tool_calls?{...e,tool_calls:e.tool_calls.map((e=>("string"!=typeof e.function.arguments&&(e.function.arguments=JSON.stringify(e.function.arguments)),e)))}:e))},E="You are a helpful AI assistant.";function I(e,t,n,o,i){const r=e.slice(-o),a=r.findIndex((e=>"tool"!==e.role));a>0&&r.splice(0,a);const s=[{role:"system",content:t},...S(r,i)];return n&&s.push({role:"system",content:n}),s}class T{constructor({apiKey:e,feature:t,sessionId:n}){this.apiKey=e,this.feature=t,this.sessionId=n,this.abortController=null}getApiKey(){return this.apiKey}async run({model:e,messages:t,tools:n,instructions:o,additionalInstructions:i,temperature:r,maxTokens:a,tags:s,middleware:c,sessionId:l,store:u}){var d,p;if(!t||!t.length)throw new Error("Missing history");e=null!==(d=e)&&void 0!==d?d:this.getDefaultModel(),t=I(t,null!=o?o:E,i,this.maxHistoryLength,e),r=null!==(p=r)&&void 0!==p?p:this.getDefaultTemperature(e);const h=null!=a?a:this.getDefaultMaxTokens(e),g=c?c(this.call.bind(this),{tags:s}):this.call.bind(this),m=await g({model:e,temperature:r,max_tokens:h,messages:t,tools:n,sessionId:l,store:u}),f=m.choices[0];if("tool_calls"===f.finish_reason);else{if("length"===f.finish_reason)throw new Error("Finish reason length not implemented");"content_filter"===f.finish_reason||f.finish_reason}return!f.message.id&&m.id&&(f.message.id=m.id),f.message}async call(e){const t=this.getParams(e),n=this.getHeaders();this.abortController=new AbortController,w.info(`🤖 Calling ${this.constructor.name} with model ${t.model}, temperature ${t.temperature}, max_tokens ${t.max_tokens}`),w.storeLastPayload(t);const o=await fetch(this.getServiceUrl(),{method:"POST",headers:n,body:JSON.stringify(t),signal:this.abortController.signal});if(401===o.status)throw new Error("Unauthorized");if(403===o.status)throw new Error("Forbidden");if(429===o.status)throw new Error("Rate limit exceeded");if(500===o.status){const e=await o.text();throw new Error(`Internal server error: ${e}`)}let i;try{i=await o.json()}catch(e){if("AbortError"===e.name)return null;throw console.error("Error parsing response",e),new Error("Unexpected response format")}finally{this.abortController=null}var r;if(i.code&&!i.choices)throw new Error(`${i.code} ${null!==(r=i.message)&&void 0!==r?r:""}`);if(i.error)throw console.error("Chat Model Error",i.error,t),new Error(`${i.error.type}: ${i.error.message}`);if(!i?.choices||i?.choices.length>1)throw console.error("Invalid response from server, unexpected number of choices",i,i?.choices),new Error("Invalid response from server");return i}async*runStream({model:e,messages:t,tools:n,instructions:o,additionalInstructions:i,temperature:r,maxTokens:a}){var s,c;if(!t||!t.length)throw new Error("Missing history");this.abortController=new AbortController;const l=this.getHeaders();e=null!==(s=e)&&void 0!==s?s:this.getDefaultModel(),t=I(t,null!=o?o:E,i,this.maxHistoryLength,e),r=null!==(c=r)&&void 0!==c?c:this.getDefaultTemperature(e);const u=null!=a?a:this.getDefaultMaxTokens(e);w.info(`🤖 Streaming ${this.constructor.name} with model ${e}, temperature ${r}, max_tokens ${u}`);const d=this.getParams({model:e,temperature:r,max_tokens:u,messages:t,tools:n,stream:!0}),p=await fetch(this.getServiceUrl(),{method:"POST",headers:l,body:JSON.stringify(d),signal:this.abortController.signal});if(401===p.status)throw new Error("Unauthorized");if(403===p.status)throw new Error("Forbidden");if(429===p.status)throw new Error("Rate limit exceeded");if(500===p.status){const e=await p.text();throw new Error(`Internal server error: ${e}`)}const h=p.body.pipeThrough(new TextDecoderStream).pipeThrough(new _).getReader();try{for(;;){const{done:e,value:t}=await h.read();if(e)break;if("[DONE]"===t.data){yield{event:"done"};break}const n=JSON.parse(t.data);if("chat.completion.error"===n.object){yield{event:"chat.completion.error",data:n};break}"chat.completion.chunk"===n.object?yield{event:"chat.message.partial",data:n}:"moderation.result.combined"===n.object&&Object.keys(n.result).length>0?yield{event:"moderation.result.combined",data:n.result}:["moderation.result.custom","moderation.result.openai","moderation.result.classifications"].includes(n.object)?console.log(n.object,n):console.error("Unknown object type",t)}}catch(e){console.error("Stream reading error:",e)}finally{h.releaseLock()}}abortRequest(){this.abortController&&this.abortController.abort()}getParams({model:e,temperature:t,max_tokens:n,messages:o,tools:i,sessionId:r,tool_choice:a=null,stream:s=!1,response_format:c="text"}){const l={stream:s,model:e,temperature:t,messages:o,max_tokens:n,response_format:c,sessionId:r};return i?.length&&(l.tools=i),a&&(l.tool_choice={type:"function",function:{name:a}}),l}getHeaders(){return{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"}}getDefaultMaxTokens(){return 4096}getDefaultTemperature(){return.2}getDefaultModel(){throw new Error("Not implemented")}getServiceUrl(){throw new Error("Not implemented")}static getInstance(e,t,n,o){const i={apiKey:t,feature:n,sessionId:o};switch(e){case x.GROQ:return new B(i);case x.OPENAI:return new D(i);case x.WPCOM_JETPACK_AI:return new A(i);case x.WPCOM_OPENAI:return new P(i);case x.OLLAMA:return new N(i);case x.LMSTUDIO:return new O(i);case x.LOCALAI:return new R(i);case x.LOCAL_GRAPH:return new M(i);case x.WPCOM_GRAPH:return new L(i);default:throw new Error(`Unknown service: ${e}`)}}}class A extends T{getDefaultModel(){return C.GPT_4O}getParams(e){const t=super.getParams(e);return this.feature&&(t.feature=this.feature),this.sessionId&&(t.session_id=this.sessionId),e.store&&(t.store=e.store),t}getServiceUrl(){return"https://public-api.wordpress.com/wpcom/v2/jetpack-ai-query"}}class P extends T{getHeaders(){const e=super.getHeaders();return this.feature&&(e["X-WPCOM-AI-Feature"]=this.feature,e["Access-Control-Request-Headers"]="authorization,content-type,X-WPCOM-AI-Feature"),this.sessionId&&(e["X-WPCOM-Session-ID"]=this.sessionId),e}getDefaultModel(){return C.GPT_4O}getServiceUrl(){return"https://public-api.wordpress.com/wpcom/v2/openai-proxy/v1/chat/completions"}}class N extends T{getDefaultModel(){return C.GEMMA_7b_INSTRUCT}getServiceUrl(){return"http://localhost:11434/api/chat"}}class O extends T{getDefaultModel(){return C.PHI_3_MEDIUM}getServiceUrl(){return"http://localhost:1234/v1/chat/completions"}}class R extends T{getDefaultModel(){return C.HERMES_2_PRO_MISTRAL}getServiceUrl(){return"http://localhost:1234/v1/chat/completions"}}class M extends T{constructor({apiKey:e,feature:t,sessionId:n}){super({apiKey:e,feature:t,sessionId:n})}getApiKey(){return this.apiKey}getDefaultModel(){return C.GPT_4O}getServiceUrl(){return"http://localhost:8000/ai-services/graphs/chat/completions"}}class L extends T{constructor({apiKey:e,feature:t,sessionId:n}){super({apiKey:e,feature:t,sessionId:n})}getHeaders(){const e=super.getHeaders();return this.feature&&(e["X-WPCOM-AI-Feature"]=this.feature,e["Access-Control-Request-Headers"]="authorization,content-type,X-WPCOM-AI-Feature"),this.sessionId&&(e["X-WPCOM-Session-ID"]=this.sessionId),e}getDefaultModel(){return C.GPT_4O}getServiceUrl(){return"https://public-api.wordpress.com/wpcom/v2/graphs/v1/chat/completions"}}class D extends T{getDefaultModel(){return C.GPT_4O}getServiceUrl(){return"https://api.openai.com/v1/chat/completions"}getParams(e){const t=super.getParams(e);return"string"==typeof t.response_format&&(t.response_format={type:t.response_format}),t}}class B extends T{getDefaultModel(){return C.LLAMA3_70B_8192}getDefaultTemperature(){return.1}getDefaultMaxTokens(){return 8192}getServiceUrl(){return"https://api.groq.com/openai/v1/chat/completions"}}const F=T,j={agents:[],activeAgentId:null,started:!1,changeAgentCount:0},U={setAgentStarted:e=>({type:"SET_AGENT_STARTED",started:e}),setActiveAgent:e=>({type:"SET_ACTIVE_AGENT",agentId:e}),registerAgent:e=>({type:"REGISTER_AGENT",agent:e}),incrementChangeAgentCount:()=>({type:"INCREMENT_CHANGE_AGENT_COUNT"}),resetChangeAgentCount:()=>({type:"RESET_CHANGE_AGENT_COUNT"})},q=(e=j,t)=>{switch(t.type){case"REGISTER_AGENT":const{agent:n}=t,o=e.agents.findIndex((e=>e.id===n.id));if(-1!==o){const t=[...e.agents];return t[o]=n,{...e,agents:t}}return{...e,agents:[...e.agents,n]};case"SET_ACTIVE_AGENT":return{...e,activeAgentId:t.agentId};case"SET_AGENT_STARTED":return{...e,started:t.started};case"INCREMENT_CHANGE_AGENT_COUNT":return{...e,changeAgentCount:e.changeAgentCount+1};case"RESET_CHANGE_AGENT_COUNT":return{...e,changeAgentCount:0};default:return e}},$={getActiveAgentId:e=>e.activeAgentId,getAgents:e=>e.agents,isAgentStarted:e=>e.started,getChangeAgentCount:e=>e.changeAgentCount,getActiveAgent:(0,m.createSelector)((e=>e.agents.find((t=>t.id===e.activeAgentId))),(e=>[e.agents,e.activeAgentId])),getActiveAgentName:(0,m.createSelector)((e=>$.getActiveAgent(e)?.name),(e=>[e.agents,e.activeAgentId]))};function H(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}const z=window.wp.i18n,G={SYSTEM:"system",USER:"user",ASSISTANT:"assistant",LOCAL_ASSISTANT:"local_assistant",USER_CHOICE:"user_choice",CONFIRM:"confirm",ACTION:"action",COMPONENT:"component",THINKING:"thinking",ERROR:"error",TOOL_CALL:"tool_call",TOOL:"tool",SCREENSHOT:"screenshot",SET_TOPIC:"set_topic",SET_COLOR:"set_color",SET_FONT:"set_font",SET_SITE_TITLE:"set_site_title",SET_SITE_DESCRIPTION:"set_site_description",SET_SITE_LOCATION:"set_site_location",SAVE_PAGE:"save_page"},V=((0,z.__)("Type another request …","big-sky"),{siteDescription:null,siteLocation:null,siteTitle:null,siteType:null,topic:null,colorRequest:null,currentColor:null,currentFont:null,defaultImageStyle:"photographic",patterns:{}}),W={scrollWaitTime:500,assistantMessageThinkingTime:1e3,visualAdjustmentWaitTime:2e3},Y={CHAT:"chat",COMPLETED:"completed",HANDOFF:"handoff",PENDING:"pending",MENUS:"menus"},J=6,K=/\bis-style-(\S+)\b/g,X={ITEMS_KEY:"Items",ITEM_KEY:"Item",SECTIONS_KEY:"Sections",SECTION_KEY:"Section"},Q={error:null,enabled:!0,feature:"unknown",model:null,service:null,temperature:.1,apiKey:null,stream:!1,response_format:"text",graphConfig:{},messages:[],documents:[],tool_calls:[],isToolRunning:!1,isFetchingChatCompletion:!1,baseUrl:null,store:!1},Z=e=>{const{service:t,apiKey:n,feature:o,sessionId:i}=e((e=>({service:e.root.service,apiKey:e.root.apiKey,feature:e.root.feature,sessionId:e.root.sessionId})));if(!t||!n)throw new Error("Service and API key are required");return F.getInstance(t,n,o,i)},ee=e=>async({select:t,dispatch:n})=>{const{stream:o,model:i,temperature:r,messages:a,feature:s,response_format:c,store:l}=t((e=>({model:e.root.model,temperature:e.root.temperature,messages:e.root.messages,feature:e.root.feature,stream:e.root.stream,response_format:e.root.response_format||"",store:e.root.store})));if(!i||!r)return console.error("Model and temperature are required",{model:i,temperature:r,messages:a,feature:s}),void n({type:"CHAT_ERROR",error:"Model and temperature are required"});n({type:"CHAT_BEGIN_REQUEST"});try{if(o){n({type:"CHAT_BEGIN_REQUEST"});const o=await Z(t).runStream({...e,messages:a,model:i,temperature:r,feature:s,store:l}),c={created_at:Date.now()/1e3,role:"assistant",content:"",tool_calls:[]};for await(const e of o)switch(e.event){case"chat.message.partial":if(c.id=e.data.id,e.data.choices[0].delta.tool_calls)for(const t of e.data.choices[0].delta.tool_calls){var u;const e={...null!==(u=c.tool_calls[t.index])&&void 0!==u?u:{function:{name:"",arguments:""}}};t.id&&(e.id=t.id),t.type&&(e.type=t.type),t.function.name&&(e.function.name+=t.function.name),t.function.arguments&&(e.function.arguments+=t.function.arguments),c.tool_calls[t.index]=e}e.data.choices[0].delta.content&&(c.content+=e.data.choices[0].delta.content),e.data.finish_reason&&(c.finish_reason=e.data.finish_reason),n({type:"ADD_MESSAGE",message:c});break;case"chat.completion.error":console.error("Chat completion error",e.data),n({type:"CHAT_ERROR",error:e.data.error}),n({type:"CHAT_END_REQUEST"});break;case"done":n({type:"CHAT_END_REQUEST"})}return}const d=await Z(t).run({...e,messages:a,model:i,temperature:r,feature:s,response_format:c,store:l});n(ae.addMessage(d)),n({type:"CHAT_END_REQUEST"})}catch(e){console.error("Chat error",e),n({type:"CHAT_ERROR",error:e.message})}},te=(e,t)=>{t=function(e){let t=e.content;return null==t&&(t=""),Array.isArray(t)&&(t=t.map((e=>"text"===e.type&&"string"==typeof e.text?.value?{...e,text:e.text.value}:e))),{...e,content:t}}(t);const n=e.messages.findIndex((e=>e.id===t.id));if(-1!==n)return{...e,messages:[...e.messages.slice(0,n),{...e.messages[n],thread_id:t.thread_id,state:t.state,content:t.content,additional_kwargs:t.additional_kwargs,tool_calls:t.tool_calls},...e.messages.slice(n+1)]};if("tool"===t.role&&t.tool_call_id){const n=e.messages.find((e=>"tool"===e.role&&e.tool_call_id===t.tool_call_id));if(n)return console.warn("tool call result already exists",{message:t,existingToolCallResultMessage:n}),e;if(!e.messages.some((e=>"assistant"===e.role&&e.tool_calls?.some((e=>e.id===t.tool_call_id)))))return e}return t.created_at&&!e.messages.some((e=>!e.created_at))||console.warn("All messages must have a created_at timestamp",t,e.messages),{...e,messages:ne([...e.messages,t])}},ne=e=>{const t=[...e];t.sort(((e,t)=>e.created_at-t.created_at));for(let e=0;e<t.length;e++)if("assistant"===t[e].role&&t[e].tool_calls&&t[e].tool_calls.length>0){let n=e+1;for(let o=e+1;o<t.length;o++)if("tool"===t[o].role&&t[e].tool_calls.some((e=>e.id===t[o].tool_call_id))){const e=t.splice(o,1)[0];t.splice(n,0,e),n++}}return t},oe=(0,m.createSelector)((e=>e.messages.filter((e=>"tool"===e.role)).map((e=>({tool_call_id:e.tool_call_id,output:e.content})))),(e=>[e.messages])),ie={isEnabled:e=>e.enabled,isLoading:()=>!1,isRunning:e=>e.isToolRunning||e.isFetchingChatCompletion,isServiceAvailable:e=>e.enabled&&!e.error&&e.service&&e.apiKey,isChatAvailable:e=>ie.isServiceAvailable(e),isAvailable:e=>ie.isChatAvailable(e),isAwaitingUserInput:e=>ie.getPendingToolCalls(e).length>0||ie.getRunningToolCallIds(e).length>0||ie.getAssistantMessage(e),getStream:e=>e.stream,getService:e=>e.service,getModel:e=>e.model,getTemperature:e=>e.temperature,getFeature:e=>e.feature,getApiKey:e=>e.apiKey,getBaseUrl:e=>e.baseUrl,getError:e=>e.error,getMessages:e=>e.messages,getDocuments:e=>e.documents,getAssistantMessage:e=>{const t=e.messages[e.messages.length-1];return"assistant"===t?.role&&t.content?t.content:null},getToolOutputs:oe,getPendingToolCalls:(0,m.createSelector)(((e,t=null)=>{const n=((e,t=null)=>e.messages.filter((e=>"assistant"===e.role&&e.tool_calls?.some((e=>!t||e.function.name===t)))).map((e=>e.tool_calls)).reduce(((e,t)=>e.concat(t)),[]))(e,t),o=ie.getRunningToolCallIds(e),i=oe(e);return n.filter((e=>!o.includes(e.id)&&!i.some((t=>t.tool_call_id===e.id))))}),(e=>[e.messages])),getRunningToolCallIds:e=>e.tool_calls.map((e=>e.id)),getAdditionalMessages:(0,m.createSelector)((e=>e.messages.filter((e=>["assistant","user"].includes(e.role)&&e.content&&!e.thread_id))),(e=>[e.messages])),getGraphConfig:e=>e.graphConfig,isStoringConversation:e=>e.store},re=e=>({type:"ADD_MESSAGE",message:{...e,id:e.id||H(),created_at:e.created_at||Date.now()/1e3}}),ae={setEnabled:e=>({type:"SET_ENABLED",enabled:e}),setError:e=>({type:"SET_ERROR",error:e}),setGraphConfig:e=>({type:"SET_GRAPH_CONFIG",graphConfig:e}),setStream:e=>({type:"SET_STREAM",stream:e}),setService:e=>({type:"SET_SERVICE",service:e}),setApiKey:e=>({type:"SET_API_KEY",apiKey:e}),setBaseUrl:e=>({type:"SET_BASE_URL",baseUrl:e}),setFeature:e=>({type:"SET_FEATURE",feature:e}),setSessionId:e=>({type:"SET_SESSION_ID",sessionId:e}),setTemperature:e=>({type:"SET_TEMPERATURE",temperature:e}),setModel:e=>({type:"SET_MODEL",model:e}),setStoreConversation:e=>({type:"SET_STORE_CONVERSATION",store:e}),clearError:()=>({type:"CHAT_ERROR",error:null}),setToolResult:(e,t)=>async({dispatch:n})=>{n({type:"TOOL_BEGIN_REQUEST",ts:Date.now(),tool_call_id:e});try{const o=await t;n({type:"TOOL_END_REQUEST",id:`tc:${e}`,ts:Date.now(),tool_call_id:e,result:o})}catch(t){n({type:"TOOL_ERROR",id:e,error:t.message||"There was an error"})}},runChatCompletion:ee,addMessage:re,agentSay:e=>re({role:"assistant",content:[{type:"text",text:e}]}),clearMessages:(e="all")=>({type:"CLEAR_MESSAGES",messageType:e}),addSystemMessage:e=>re({role:"system",content:e}),userSay:(e,t=[])=>re({role:"user",id:H(),content:[{type:"text",text:e},...t?.map((e=>({type:"image_url",image_url:e})))]}),userSayRepeat:()=>({select:e})=>{const{model:t,temperature:n,messages:o,feature:i,stream:r,response_format:a,store:s}=e((e=>({model:e.root.model,temperature:e.root.temperature,messages:e.root.messages,feature:e.root.feature,stream:e.root.stream,response_format:e.root.response_format||"",store:e.root.store})));return ee({model:t,temperature:n,messages:o,feature:i,stream:r,response_format:a,store:s})},call:(e,t,n)=>({type:"ADD_MESSAGE",message:{id:H(),created_at:Date.now()/1e3,role:"assistant",tool_calls:[{id:null!=n?n:H(),type:"function",function:{name:e,arguments:JSON.stringify(t)}}]}})},se={toolkits:[],contexts:{},callbacks:{},tools:{}},ce=(e,t)=>{const{name:n,callbacks:o}=t;return{...e,callbacks:{...e.callbacks,[n]:o}}},le=(e,t)=>{const{name:n,context:o}=t,i=e.contexts[n]||{};return{...e,contexts:{...e.contexts,[n]:o.hasOwnProperty("fromAssistantId")?{...i,...o}:o}}},ue=(e,t)=>{const{name:n,tools:o}=t;return{...e,tools:{...e.tools,[n]:o}}},de=(e,t)=>{const n={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=(n,...i)=>t[o](n[e],...i));return n},pe=(e,t)=>{const n={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=(...n)=>{const i=t[o](...n);return"function"==typeof i?({select:t,...n})=>i({select:n=>t((t=>n({root:t.root[e],metadata:t.metadata}))),...n}):i});return n},he=(0,m.createReduxStore)("big-sky-agents",{reducer:(0,m.combineReducers)({agents:q,toolkits:(e=se,t)=>{switch(t.type){case"REGISTER_TOOLKIT":return((e,t)=>{const{toolkit:n}=t;n.callbacks&&(e=ce(e,{name:n.name,callbacks:n.callbacks})),n.context&&(e=le(e,{name:n.name,context:n.context})),n.tools&&(e=ue(e,{name:n.name,tools:n.tools}));const o=e.toolkits.findIndex((e=>e.name===n.name));return-1!==o?{...e,toolkits:[...e.toolkits.slice(0,o),n,...e.toolkits.slice(o+1)]}:{...e,toolkits:[...e.toolkits,n]}})(e,t);case"REGISTER_TOOLKIT_CALLBACKS":return ce(e,t);case"REGISTER_TOOLKIT_CONTEXT":return le(e,t);case"REGISTER_TOOLKIT_TOOLS":return ue(e,t);default:return e}},chat:(e=Q,t)=>{switch(t.type){case"SET_ENABLED":return{...e,enabled:t.enabled};case"SET_ERROR":return{...e,error:t.error};case"SET_STREAM":return{...e,stream:t.stream};case"SET_SERVICE":return{...e,service:t.service};case"SET_API_KEY":return{...e,apiKey:t.apiKey};case"SET_BASE_URL":return{...e,baseUrl:t.baseUrl};case"SET_FEATURE":return{...e,feature:t.feature};case"SET_SESSION_ID":return{...e,sessionId:t.sessionId};case"SET_MODEL":return{...e,model:t.model};case"SET_TEMPERATURE":return{...e,temperature:t.temperature};case"SET_STORE_CONVERSATION":return{...e,store:t.store};case"CHAT_BEGIN_REQUEST":return{...e,isFetchingChatCompletion:!0};case"CHAT_END_REQUEST":return{...e,isFetchingChatCompletion:!1};case"CHAT_ERROR":return{...e,isFetchingChatCompletion:!1,error:t.error};case"TOOL_BEGIN_REQUEST":return{...e,tool_calls:[...e.tool_calls,{id:t.tool_call_id,created_at:t.ts}],isToolRunning:!0};case"TOOL_CALL_UPDATE":return{...e,tool_calls:e.tool_calls.map((e=>e.id===t.tool_call_id?{...e,...t.update}:e))};case"TOOL_UPDATE_REQUEST":return{...e,tool_calls:e.tool_calls.map((e=>{var n;return e.id===t.delta.id?{name:null!==(n=t.delta.function.name)&&void 0!==n?n:e.name,arguments:t.delta.function.arguments?e.arguments+t.delta.function.arguments:e.arguments}:e}))};case"TOOL_END_REQUEST":return{...te(e,{role:"tool",id:t.id,created_at:t.ts/1e3,tool_call_id:t.tool_call_id,content:t.result}),error:null,isToolRunning:!1,tool_calls:e.tool_calls.filter((e=>e.id!==t.tool_call_id))};case"TOOL_ERROR":return{...te(e,{role:"tool",id:t.id,tool_call_id:t.tool_call_id,content:"Error"}),error:t.error,isToolRunning:!1,tool_calls:e.tool_calls.map((e=>e.id===t.tool_call_id?{...e,error:t.error}:e))};case"ADD_MESSAGE":return te(e,t.message);case"ADD_MESSAGE_TOOL_CALL":return te(e,{id:t.id,role:"assistant",created_at:t.ts/1e3,tool_calls:t.tool_calls});case"APPLY_MESSAGE_CONTENT_DELTA":const n=t.id,o=t.content,i=e.messages.findIndex((e=>e.id===n));if(-1===i)return e;const r={...e.messages[i]};return console.warn("got message",r),o.forEach((e=>{const{index:t,text:n}=e;r.content[t]?r.content[t].text+=n.value:r.content.push({type:"text",text:n.value})})),{...e,messages:[...e.messages.slice(0,i),r,...e.messages.slice(i+1)]};case"SET_MESSAGES":return{...e,messages:t.messages};case"CLEAR_MESSAGES":switch(t.messageType){case"tool":return{...e,messages:e.messages.filter((e=>!(e.role===G.ASSISTANT&&""===e.content||e.role===G.TOOL||e.tool_calls?.length)))};case"system":return{...e,messages:e.messages.filter((e=>e.role!==G.SYSTEM))};default:return{...e,messages:[]}}default:return e}}}),actions:{...pe("agents",U),...pe("toolkits",{registerToolkit:e=>({type:"REGISTER_TOOLKIT",toolkit:e}),setCallbacks:(e,t)=>({type:"REGISTER_TOOLKIT_CALLBACKS",name:e,callbacks:t}),setContext:(e,t)=>({type:"REGISTER_TOOLKIT_CONTEXT",name:e,context:t})}),...pe("chat",ae)},selectors:{...de("agents",$),...de("toolkits",{getToolkits:e=>e.toolkits,getToolkit:(e,t)=>e.toolkits[t],getContexts:e=>e.contexts,getCallbacks:e=>e.callbacks,getTools:e=>e.tools}),...de("chat",ie)}});(0,m.register)(he);const ge=[];ge.forEach((e=>{(0,m.dispatch)(he).registerAgent(e)}));const me=(0,f.createContext)(he),{Consumer:fe,Provider:ye}=me,be=new Map,ve=function({children:e,...t}){const n=JSON.stringify(t),o=(0,f.useMemo)((()=>{if(!be.has(n)){const i=(e=`agents-${H()}`,o=t,(0,m.createReduxStore)(e,{reducer:q,actions:U,selectors:$,initialState:{...j,...o}}));(0,m.register)(i),be.set(n,i)}var e,o;return be.get(n)}),[t,n]);return(0,r.createElement)(ye,{value:o},e)},we=function(){const e=(0,f.useContext)(me),{registerAgent:t,setActiveAgent:n,setAgentStarted:o}=(0,m.useDispatch)(e),{agents:i,activeAgentId:r,activeAgent:a,name:s,started:c}=(0,m.useSelect)((t=>{const n=t(e);return{name:n.getActiveAgentName(),agents:n.getAgents(),activeAgent:n.getActiveAgent(),activeAgentId:n.getActiveAgentId(),started:n.isAgentStarted()}})),l=(0,f.useCallback)((()=>{ge.forEach((e=>{t(e)}))}),[t]);return{agents:i,name:s,started:c,activeAgent:a,activeAgentId:r,setAgentStarted:o,setActiveAgent:n,registerAgent:t,registerDefaultAgents:l}};(0,m.dispatch)(he).setService(x.OPENAI),(0,m.dispatch)(he).setModel(C.GPT_4O);const ke=(0,f.createContext)(he),{Consumer:_e,Provider:xe}=ke;function Ce(){const e=(0,f.useContext)(ke),{reset:t,setEnabled:n,call:o,addSystemMessage:i,userSay:r,userSayRepeat:a,clearMessages:s,setToolResult:c,runChatCompletion:l,agentSay:u,submitToolOutputs:d,setService:p,setModel:h,setTemperature:g,setApiKey:y,setFeature:b,setBaseUrl:v,setSessionId:w,setStream:k,setGraphConfig:_,setError:x,setStoreConversation:C,incrementChangeAgentCount:S,resetChangeAgentCount:E}=(0,m.useDispatch)(e),{baseUrl:I,service:T,temperature:A,apiKey:P,error:N,model:O,loading:R,running:M,enabled:L,messages:D,documents:B,assistantMessage:F,pendingToolCalls:j,additionalMessages:U,toolOutputs:q,isAvailable:$,isChatAvailable:H,isAwaitingUserInput:z,feature:G,stream:V,graphConfig:W,isStoringConversation:Y,getChangeAgentCount:J}=(0,m.useSelect)((t=>({baseUrl:t(e).getBaseUrl(),service:t(e).getService(),temperature:t(e).getTemperature(),apiKey:t(e).getApiKey(),error:t(e).getError(),model:t(e).getModel(),loading:t(e).isLoading(),running:t(e).isRunning(),enabled:t(e).isEnabled(),messages:t(e).getMessages(),documents:t(e).getDocuments(),assistantMessage:t(e).getAssistantMessage(),pendingToolCalls:t(e).getPendingToolCalls(),additionalMessages:t(e).getAdditionalMessages(),toolOutputs:t(e).getToolOutputs(),isAvailable:t(e).isAvailable(),isChatAvailable:t(e).isChatAvailable(),isAwaitingUserInput:t(e).isAwaitingUserInput(),feature:t(e).getFeature(),stream:t(e).getStream(),graphConfig:t(e).getGraphConfig(),isStoringConversation:t(e).isStoringConversation(),getChangeAgentCount:t(e).getChangeAgentCount})));return{enabled:L,setEnabled:n,loading:R,running:M,error:N,setError:x,graphConfig:W,setGraphConfig:_,stream:V,setStream:k,apiKey:P,setApiKey:y,feature:G,setFeature:b,setSessionId:w,model:O,setModel:h,service:T,setService:p,baseUrl:I,setBaseUrl:v,temperature:A,setTemperature:g,messages:D,clearMessages:s,userSay:r,userSayRepeat:a,addSystemMessage:i,assistantMessage:F,agentSay:u,documents:B,call:o,setToolResult:c,pendingToolCalls:j,toolOutputs:q,isChatAvailable:H,runChatCompletion:l,submitToolOutputs:d,isAvailable:$,isAwaitingUserInput:z,additionalMessages:U,reset:t,isStoringConversation:Y,setStoreConversation:C,getChangeAgentCount:J,incrementChangeAgentCount:S,resetChangeAgentCount:E}}const Se=[];Se.forEach((e=>{(0,m.dispatch)(he).registerToolkit(e)}));const Ee=(0,f.createContext)(he),{Consumer:Ie,Provider:Te}=Ee;function Ae(e,t){if("object"!=typeof e||"object"!=typeof t)return t;for(const n in t)t.hasOwnProperty(n)&&(t[n]instanceof Array?(e[n]||(e[n]=[]),e[n]=e[n].concat(t[n])):t[n]instanceof Object?(e[n]||(e[n]={}),e[n]=Ae(e[n],t[n])):e[n]=t[n]);return e}function Pe(){const e=(0,f.useContext)(Ee),{activeAgent:t}=we(),{registerToolkit:n,setCallbacks:o,setContext:i}=(0,m.useDispatch)(e),{call:r,agentSay:a,userSay:s}=Ce(),{toolkits:c,contexts:l,callbacks:u,tools:d}=(0,m.useSelect)((t=>({toolkits:t(e).getToolkits(),contexts:t(e).getContexts(),callbacks:t(e).getCallbacks(),tools:t(e).getTools()}))),p=(0,f.useCallback)((()=>{Se.forEach((e=>{n(e)}))}),[n]),h=(0,f.useMemo)((()=>t?function(e,t){var n;const o="function"==typeof e.toolkits?e.toolkits():e.toolkits,i=null!==(n=o?.map((e=>{if("string"==typeof e){const n=t.find((t=>t.name===e));return n||console.warn(`Toolkit ${e} not found.`),n}return e})))&&void 0!==n?n:[];return i.filter(Boolean)}(t,c):[]),[t,c]),g=(0,f.useMemo)((()=>h?.reduce(((e,t)=>{var n;const o=null!==(n=t?.callbacks)&&void 0!==n?n:u[t.name];return o?{...e,...o}:e}),{})),[h,u]),y=(0,f.useMemo)((()=>h.reduce(((e,t)=>{var n;const o=null!==(n=t.context)&&void 0!==n?n:l[t.name];return o?Ae(e,o):e}),{})),[h,l]),b=(0,f.useMemo)((()=>{if(!t)return[];const e=function(e,t,n){var o;return null!==(o=e?.reduce(((o,i)=>{var r;if("string"==typeof i&&(i=e.find((e=>e.name===i))),!i)return o;const a=null!==(r=i.tools)&&void 0!==r?r:t[i.name],s="function"==typeof a?a(n):a;return s?[...o,...s.filter((e=>!o.some((t=>t.name===e.name))))]:o}),[]))&&void 0!==o?o:[]}(h,d,y),n=function(e,t,n){const o="function"==typeof e.tools?e.tools(t,n):e.tools,i=o?.map((e=>"string"==typeof e?n.find((t=>t.name===e)):e));return null!=i?i:n}(t,y,e);return n}),[t,h,d,y]),v=(0,f.useMemo)((()=>{const e=b.reduce(((e,t)=>(e[t.name]=(e,n)=>r(t.name,e,n),e)),{});return{...e,userSay:s,agentSay:a}}),[a,r,b,s]),w=(0,f.useCallback)((e=>e.every((e=>"string"!=typeof e||c.some((t=>t.name===e))))),[c]),k=(0,f.useCallback)((()=>{h.forEach((e=>{e.reset&&"function"==typeof e.reset&&e.reset()}))}),[h]);return{reset:k,hasToolkits:w,tools:b,context:y,invoke:v,callbacks:g,registerToolkit:n,setCallbacks:o,setContext:i,registerDefaultToolkits:p}}const Ne=e=>{try{return JSON.parse(e)}catch(t){return e}},Oe=e=>{const{pendingToolCalls:t,setToolResult:n}=Ce(),o=(0,f.useMemo)((()=>{const n=t?.find((t=>t.function.name===e));return n?{...n,function:{...n.function,arguments:Ne(n.function.arguments)}}:n}),[t,e]),{invoke:i,context:r}=Pe(),{activeAgent:a}=we(),s=(0,f.useCallback)(((e,t)=>{n(o.id,null!=t?t:e),a.onToolResult&&a.onToolResult(o.function.name,e,i,r)}),[n,o,a,i,r]);return{args:o?.function?.arguments,respond:s}},Re=(e,t)=>n=>{const{args:o,respond:i}=Oe(e);return(0,r.createElement)(t,{...n,args:o,respond:i})},Me=e=>{var t;const n=null!==(t=e.parameters)&&void 0!==t?t:{type:"object",properties:{value:{type:"string"}},required:["value"]};return n.additionalProperties=!e.strict,{type:"function",function:{name:e.name,strict:!!e.strict,description:e.description,parameters:n}}},Le=()=>{const{activeAgent:e,started:t,setAgentStarted:n}=we(),{messages:o,isChatAvailable:i,loading:r,running:a,isAvailable:s,isAwaitingUserInput:c,enabled:l,assistantMessage:u,error:d,runChatCompletion:p,toolOutputs:h,pendingToolCalls:g,setToolResult:m,agentSay:y,resetChangeAgentCount:b}=Ce(),{tools:v,invoke:k,hasToolkits:_,context:x,callbacks:C}=Pe(),[S,E]=(0,f.useState)(""),[I,T]=(0,f.useState)(""),[A,P]=(0,f.useState)(0);(0,f.useEffect)((()=>{!a&&!d&&s&&g.length>0&&g.forEach((e=>{const t="string"==typeof e.function.arguments?(()=>{try{return JSON.parse(e.function.arguments)}catch(t){return e.function.arguments}})():e.function.arguments;if("multi_tool_use.parallel"===e.function.name){const n=t.tool_uses.map((e=>{const t=C[e.recipient_name];return"function"==typeof t?(w.info("🧠 Parallel tool callback",e.recipient_name),t(e.parameters)):`Unknown tool ${e.recipient_name}`})),o=Promise.all(n);m(e.id,o)}const n=C[e.function.name];if("function"==typeof n){if("change_assistant"!==e.function.name){const n=Object.entries(t).map((([e,t])=>`        -- ${e}: ${t}`)).join("\n");w.info(`🧠 Calling Tool:\n\t-- Name: ${e.function.name}\n\t-- Args:\n${n}`)}"change_assistant"!==e.function.name&&b(),m(e.id,n(t))}}))}),[C,d,s,g,a,m,b]);const N=(0,f.useMemo)((()=>!e?.toolkits||_(e?.toolkits)),[_,e]);(0,f.useEffect)((()=>{if(e&&N){const t="function"==typeof e.instructions?e.instructions(x):e.instructions,n="function"==typeof e.additionalInstructions?e.additionalInstructions(x):e.additionalInstructions;t&&t!==S&&E(t),n!==I&&T(n)}}),[I,e,S,v,x,N]),(0,f.useEffect)((()=>{!s||!N||c||a||r||t||0!==o.length||!e||(w.info("🧠 setAgentStarted",{isAvailable:s,toolkitsLoaded:N,isAwaitingUserInput:c,running:a,loading:r,started:t,messages:o,activeAgent:e}),n(!0),"function"==typeof e.onStart&&e.onStart(k))}),[o,y,e,k,s,c,N,r,a,n,t]),(0,f.useEffect)((()=>{if(e&&i&&!a&&S&&o.length>0&&!c){const t=v.map(Me),n="function"==typeof e.instructions?e.instructions(x):e.instructions,o="function"==typeof e.additionalInstructions?e.additionalInstructions(x):e.additionalInstructions;p({tools:t,instructions:n,additionalInstructions:o})}}),[I,u,l,d,o,S,c,i,p,a,v,e?.instructions,e?.additionalInstructions,e,x]),(0,f.useEffect)((()=>{h.length>A&&e&&(h.slice(A).forEach((t=>{const n=h.find((e=>e.id===t.tool_call_id));if(n){const o=n.toolName,i=t.output;"function"==typeof e.onToolResult&&e.onToolResult(o,i,C,x)}})),P(h.length))}),[h,e,C,A,x])};function De(e,t){if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),o=[...t].sort();return n.every(((e,t)=>De(e,o[t])))}const n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(const i of n)if(!o.includes(i)||!De(e[i],t[i]))return!1;return!0}const Be=e=>{const{apiKey:t,feature:n,service:o,model:i,baseUrl:r,setApiKey:a,setService:s,setFeature:c,setModel:l,setBaseUrl:u,sessionId:d,setSessionId:p,stream:h,setStream:g,setGraphConfig:m,graphConfig:y,isStoringConversation:b,setStoreConversation:v}=Ce(),{activeAgentId:w,setActiveAgent:k}=we();(0,f.useEffect)((()=>{e.apiKey&&e.apiKey!==t&&a(e.apiKey)}),[t,e.apiKey,a]),(0,f.useEffect)((()=>{e.service&&e.service!==o&&s(e.service)}),[e,o,s]),(0,f.useEffect)((()=>{void 0!==e.stream&&e.stream!==h&&g(e.stream)}),[e,h,g]),(0,f.useEffect)((()=>{e.model&&e.model!==i&&l(e.model)}),[i,e,e.model,l]),(0,f.useEffect)((()=>{e.feature&&e.feature!==n&&c(e.feature)}),[n,e.feature,c]),(0,f.useEffect)((()=>{e.initialAgentId&&!w&&k(e.initialAgentId)}),[w,e.initialAgentId,k]),(0,f.useEffect)((()=>{e.baseUrl&&e.baseUrl!==r&&u(e.baseUrl)}),[r,e.baseUrl,u]),(0,f.useEffect)((()=>{e.graphConfig&&!De(e.graphConfig,y)&&m(e.graphConfig)}),[y,e.graphConfig,m]),(0,f.useEffect)((()=>{e.sessionId&&e.sessionId!==d&&p(e.sessionId)}),[d,e.sessionId,p]),(0,f.useEffect)((()=>{void 0!==e.store&&e.store!==b&&v(e.store)}),[b,e.store,v])},Fe={argName:"it",encoders:{},selfContained:!1,strip:!0,internalPrefix:"_val",encodersPrefix:"_enc",delimiters:{start:"{{",end:"}}"}},je={false:"function",true:"string"},Ue={evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,typeInterpolate:/\{\{%([nsb])=([\s\S]+?)\}\}/g,encode:/\{\{([a-z_$]+[\w$]*)?!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$]+(?:\.[\w$]+|\[[^\]]+\])*|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\}|\[[^\]]*\])/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g},qe={n:"number",s:"string",b:"boolean"};function $e(e,t,n,o){return("string"==typeof n?n:n.toString()).replace(t.define,((e,n,i,r)=>(0===n.indexOf("def.")&&(n=n.substring(4)),n in o||(":"===i?(r.replace(t.defineParams,((e,t,i)=>{o[n]={arg:t,text:i}})),n in o||(o[n]=r)):new Function("def",`def['${n}']=${r}`)(o)),""))).replace(t.use,((n,i)=>{i=i.replace(t.useParams,((e,t,n,i)=>{if(o[n]&&o[n].arg&&i){const e=He((n+":"+i).replace(/'|\\/g,"_"));return o.__exp=o.__exp||{},o.__exp[e]=o[n].text.replace(new RegExp(`(^|[^\\w$])${o[n].arg}([^\\w$])`,"g"),`$1${i}$2`),t+`def.__exp['${e}']`}}));const r=new Function("def","return "+i)(o);return r?$e(e,t,r,o):r}))}function He(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}function ze(e,t){let n=0,o=$e(Fe,Ue,e,t||{});const i={};o=("let out='"+(Fe.strip?o.trim().replace(/[\t ]+(\r|\n)/g,"\n").replace(/(\r|\n)[\t ]+/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):o).replace(/'|\\/g,"\\$&").replace(Ue.interpolate,((e,t)=>`'+(${He(t)})+'`)).replace(Ue.typeInterpolate,((e,t,o)=>{n++;const i=Fe.internalPrefix+n,r=`throw new Error("expected ${qe[t]}, got "+ (typeof ${i}))`;return`';const ${i}=(${He(o)});if(typeof ${i}!=="${qe[t]}") ${r};out+=${i}+'`})).replace(Ue.encode,((e,t="",n)=>(i[t]=!0,n=He(n),`'+${Fe.encodersPrefix}${Fe.selfContained?t:t?"."+t:'[""]'}(${n})+'`))).replace(Ue.conditional,((e,t,n)=>n?(n=He(n),t?`';}else if(${n}){out+='`:`';if(${n}){out+='`):t?"';}else{out+='":"';}out+='")).replace(Ue.iterate,((e,t,o,i)=>{if(!t)return"';} } out+='";n++;const r=i?`let ${i}=-1;`:"",a=i?`${i}++;`:"",s=Fe.internalPrefix+n;return`';const ${s}=${He(t)};if(${s}){${r}for (const ${o} of ${s}){${a}out+='`})).replace(Ue.evaluate,((e,t)=>`';${He(t)}out+='`))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"");const r=Array.isArray(Fe.argName)?function(e){return e.reduce(((e,t,n)=>e+(n?",":"")+t),"{")+"}"}(Fe.argName):Fe.argName;return 0===Object.keys(i).length?a((()=>new Function(r,o))):(function(e,t){const n=je[e.selfContained];for(const o in t){const t=e.encoders[o];if(!t)throw new Error(`unknown encoder "${o}"`);if(typeof t!==n)throw new Error(`selfContained ${e.selfContained}: encoder type must be "${n}"`)}}(Fe,i),o=`return function(${r}){${o}};`,a((()=>Fe.selfContained?new Function(o=function(e,t){let n="";for(const o in t)n+=`const ${e.encodersPrefix}${o}=${e.encoders[o]};`;return n}(Fe,i)+o)():new Function(Fe.encodersPrefix,o)(Fe.encoders))));function a(e){try{return e()}catch(e){throw w.error("Could not create a template function: "+o),e}}}class Ge{format(){throw new Error("Not implemented")}}class Ve extends Ge{constructor({inputVariables:e,template:t,engine:n,formatters:o={},...i}){super(),this.validate(n,e),this.inputVariables=e,this.engine=n,this.template=t,this.formatters=o,Object.assign(this,i)}validate(e,t){try{const n=t.reduce(((e,t)=>(e[t]="foo",e)),{});e(n)}catch(e){throw new Error(`Invalid inputs: ${e.message}, inputs: ${t.join(", ")}`)}}format(e){const t=this.inputVariables.reduce(((t,n)=>(n in this.formatters?t[n]=this.formatters[n].format(e):t[n]=e[n],t)),{});return this.engine(t)}}class We extends Ve{constructor({template:e,inputVariables:t,...n}){super({engine:ze(e),template:e,inputVariables:t,...n})}static fromString(e,t=[],n={}){return new We({template:e,inputVariables:t,...n})}}We.fromString("You are a helpful assistant.");const Ye={ROUTER:"big-sky-router",SPEC:"big-sky-spec",CONTENT:"big-sky-content",COLOR:"big-sky-color",PATTERN:"big-sky-pattern",FONT:"big-sky-font",PAGE:"big-sky-page",HELP:"big-sky-help",LAYOUT:"big-sky-layout",IMAGE:"big-sky-image"},Je=Object.values(Ye).filter((e=>e!==Ye.SPEC)),Ke="undefined"!=typeof window&&window.bigSkyInitialState?.userLanguage?window.bigSkyInitialState.userLanguage:"English (United States)",Xe="IMPORTANT: The content between <request_analysis> tags is strictly for internal model reasoning only. This is a hard requirement: Never include or reference any content from inside <request_analysis> tags in your response to the user.\nConduct your analysis inside <request_analysis> tags.",Qe=(e,t)=>{const n=e?.site||{},o=[],i=e=>!t||t.includes(e);return n.siteTitle&&i("siteTitle")&&o.push(` - Site Title: ${n.siteTitle}`),n.siteDescription&&i("siteDescription")&&o.push(` - Site Description: ${n.siteDescription}`),n.siteLocation?.name&&i("siteLocation")&&o.push(` - Site Location: ${n.siteLocation.name}`),n.topic&&i("topic")&&o.push(` - Site Topic: ${n.topic}`),o.join("\n")},Ze=(e,t)=>{const n=e?.selectedBlock;if(!n?.clientId)return"No selected block";const o=[],i=e=>!t||t.includes(e);return n?.clientId&&i("clientId")&&o.push(` - clientId: ${n.clientId}`),i("type")&&(n?.type?o.push(` - type: ${n.type}`):n?.name&&o.push(` - name: ${n.name}`)),n?.content&&i("content")&&o.push(` - content: ${n.content}`),o.join("\n")},et=e=>tt(e)?"":` - For any other requests, immediately call 'change_assistant' with the toAssistantId '${Ye.ROUTER}'.`,tt=e=>{const t=e?.fromAssistantId;return t===Ye.ROUTER},nt=`If the input contains a question mark or starts with question words (who, what, where, when, why, how, can, could, should, would, will, do, does, did, is, are, was, were), immediately call 'change_assistant' with the toAssistantId '${Ye.HELP}'.`,ot=`Call change_assistant tool with the toAssistantId '${Ye.HELP}'`,it=`Call change_assistant tool with the toAssistantId '${Ye.ROUTER}'`,rt="If the user input is not related to WordPress, WordPress.com, WordPress hosting, website building or website design changes, let the user know that you are not able to help with that, remind them what you can help with and wait for further input",at=e=>({name:"change_assistant",description:"Changes the active assistant and reinitializes the chat with the user's request",parameters:{type:"object",properties:{toAssistantId:{type:"string",enum:e===Ye.ROUTER?Je:[Ye.ROUTER,Ye.HELP],description:"The ID of the assistant to switch to"},fromAssistantId:{type:"string",enum:[e],description:"The ID of the assistant that was active before the change"},reason:{type:"string",description:"The reason for the assistant change. This will be used for debugging purposes."},userRequest:{type:"string",description:`The original user request that will be passed to the new assistant. DO NOT MODIFY THIS VALUE unless explicitly instructed to do so when toAssistantId is ${Ye.HELP}.`}},required:["toAssistantId","fromAssistantId","userRequest"]}}),st={name:"router",tools:()=>[at(Ye.ROUTER)]},ct=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,lt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ut={};function dt(e,t){return((t||ut).jsx?lt:ct).test(e)}const pt=/[ \t\n\f\r]/g;function ht(e){return""===e.replace(pt,"")}class gt{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function mt(e,t){const n={},o={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(o,e[i].normal);return new gt(n,o,t)}function ft(e){return e.toLowerCase()}gt.prototype.property={},gt.prototype.normal={},gt.prototype.space=null;class yt{constructor(e,t){this.property=e,this.attribute=t}}yt.prototype.space=null,yt.prototype.boolean=!1,yt.prototype.booleanish=!1,yt.prototype.overloadedBoolean=!1,yt.prototype.number=!1,yt.prototype.commaSeparated=!1,yt.prototype.spaceSeparated=!1,yt.prototype.commaOrSpaceSeparated=!1,yt.prototype.mustUseProperty=!1,yt.prototype.defined=!1;let bt=0;const vt=Et(),wt=Et(),kt=Et(),_t=Et(),xt=Et(),Ct=Et(),St=Et();function Et(){return 2**++bt}const It=Object.keys(o);class Tt extends yt{constructor(e,t,n,i){let r=-1;if(super(e,t),At(this,"space",i),"number"==typeof n)for(;++r<It.length;){const e=It[r];At(this,It[r],(n&o[e])===o[e])}}}function At(e,t,n){n&&(e[t]=n)}Tt.prototype.defined=!0;const Pt={}.hasOwnProperty;function Nt(e){const t={},n={};let o;for(o in e.properties)if(Pt.call(e.properties,o)){const i=e.properties[o],r=new Tt(o,e.transform(e.attributes||{},o),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(o)&&(r.mustUseProperty=!0),t[o]=r,n[ft(o)]=o,n[ft(r.attribute)]=o}return new gt(t,n,e.space)}const Ot=Nt({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Rt=Nt({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Mt(e,t){return t in e?e[t]:t}function Lt(e,t){return Mt(e,t.toLowerCase())}const Dt=Nt({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Lt,properties:{xmlns:null,xmlnsXLink:null}}),Bt=Nt({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:wt,ariaAutoComplete:null,ariaBusy:wt,ariaChecked:wt,ariaColCount:_t,ariaColIndex:_t,ariaColSpan:_t,ariaControls:xt,ariaCurrent:null,ariaDescribedBy:xt,ariaDetails:null,ariaDisabled:wt,ariaDropEffect:xt,ariaErrorMessage:null,ariaExpanded:wt,ariaFlowTo:xt,ariaGrabbed:wt,ariaHasPopup:null,ariaHidden:wt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:xt,ariaLevel:_t,ariaLive:null,ariaModal:wt,ariaMultiLine:wt,ariaMultiSelectable:wt,ariaOrientation:null,ariaOwns:xt,ariaPlaceholder:null,ariaPosInSet:_t,ariaPressed:wt,ariaReadOnly:wt,ariaRelevant:null,ariaRequired:wt,ariaRoleDescription:xt,ariaRowCount:_t,ariaRowIndex:_t,ariaRowSpan:_t,ariaSelected:wt,ariaSetSize:_t,ariaSort:null,ariaValueMax:_t,ariaValueMin:_t,ariaValueNow:_t,ariaValueText:null,role:null}}),Ft=Nt({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Lt,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ct,acceptCharset:xt,accessKey:xt,action:null,allow:null,allowFullScreen:vt,allowPaymentRequest:vt,allowUserMedia:vt,alt:null,as:null,async:vt,autoCapitalize:null,autoComplete:xt,autoFocus:vt,autoPlay:vt,blocking:xt,capture:null,charSet:null,checked:vt,cite:null,className:xt,cols:_t,colSpan:null,content:null,contentEditable:wt,controls:vt,controlsList:xt,coords:_t|Ct,crossOrigin:null,data:null,dateTime:null,decoding:null,default:vt,defer:vt,dir:null,dirName:null,disabled:vt,download:kt,draggable:wt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:vt,formTarget:null,headers:xt,height:_t,hidden:vt,high:_t,href:null,hrefLang:null,htmlFor:xt,httpEquiv:xt,id:null,imageSizes:null,imageSrcSet:null,inert:vt,inputMode:null,integrity:null,is:null,isMap:vt,itemId:null,itemProp:xt,itemRef:xt,itemScope:vt,itemType:xt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:vt,low:_t,manifest:null,max:null,maxLength:_t,media:null,method:null,min:null,minLength:_t,multiple:vt,muted:vt,name:null,nonce:null,noModule:vt,noValidate:vt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:vt,optimum:_t,pattern:null,ping:xt,placeholder:null,playsInline:vt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:vt,referrerPolicy:null,rel:xt,required:vt,reversed:vt,rows:_t,rowSpan:_t,sandbox:xt,scope:null,scoped:vt,seamless:vt,selected:vt,shadowRootClonable:vt,shadowRootDelegatesFocus:vt,shadowRootMode:null,shape:null,size:_t,sizes:null,slot:null,span:_t,spellCheck:wt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:_t,step:null,style:null,tabIndex:_t,target:null,title:null,translate:null,type:null,typeMustMatch:vt,useMap:null,value:wt,width:_t,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:xt,axis:null,background:null,bgColor:null,border:_t,borderColor:null,bottomMargin:_t,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:vt,declare:vt,event:null,face:null,frame:null,frameBorder:null,hSpace:_t,leftMargin:_t,link:null,longDesc:null,lowSrc:null,marginHeight:_t,marginWidth:_t,noResize:vt,noHref:vt,noShade:vt,noWrap:vt,object:null,profile:null,prompt:null,rev:null,rightMargin:_t,rules:null,scheme:null,scrolling:wt,standby:null,summary:null,text:null,topMargin:_t,valueType:null,version:null,vAlign:null,vLink:null,vSpace:_t,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:vt,disableRemotePlayback:vt,prefix:null,property:null,results:_t,security:null,unselectable:null}}),jt=Nt({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Mt,properties:{about:St,accentHeight:_t,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:_t,amplitude:_t,arabicForm:null,ascent:_t,attributeName:null,attributeType:null,azimuth:_t,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:_t,by:null,calcMode:null,capHeight:_t,className:xt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:_t,diffuseConstant:_t,direction:null,display:null,dur:null,divisor:_t,dominantBaseline:null,download:vt,dx:null,dy:null,edgeMode:null,editable:null,elevation:_t,enableBackground:null,end:null,event:null,exponent:_t,externalResourcesRequired:null,fill:null,fillOpacity:_t,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ct,g2:Ct,glyphName:Ct,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:_t,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:_t,horizOriginX:_t,horizOriginY:_t,id:null,ideographic:_t,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:_t,k:_t,k1:_t,k2:_t,k3:_t,k4:_t,kernelMatrix:St,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:_t,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:_t,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:_t,overlineThickness:_t,paintOrder:null,panose1:null,path:null,pathLength:_t,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:xt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:_t,pointsAtY:_t,pointsAtZ:_t,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:St,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:St,rev:St,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:St,requiredFeatures:St,requiredFonts:St,requiredFormats:St,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:_t,specularExponent:_t,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:_t,strikethroughThickness:_t,string:null,stroke:null,strokeDashArray:St,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:_t,strokeOpacity:_t,strokeWidth:null,style:null,surfaceScale:_t,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:St,tabIndex:_t,tableValues:null,target:null,targetX:_t,targetY:_t,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:St,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:_t,underlineThickness:_t,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:_t,values:null,vAlphabetic:_t,vMathematical:_t,vectorEffect:null,vHanging:_t,vIdeographic:_t,version:null,vertAdvY:_t,vertOriginX:_t,vertOriginY:_t,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:_t,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Ut=mt([Rt,Ot,Dt,Bt,Ft],"html"),qt=mt([Rt,Ot,Dt,Bt,jt],"svg"),$t=/^data[-\w.:]+$/i,Ht=/-[a-z]/g,zt=/[A-Z]/g;function Gt(e){return"-"+e.toLowerCase()}function Vt(e){return e.charAt(1).toUpperCase()}const Wt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var Yt=n(133);const Jt=Yt.default||Yt,Kt=Qt("end"),Xt=Qt("start");function Qt(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Zt(e){return e&&"object"==typeof e?"position"in e||"type"in e?tn(e.position):"start"in e||"end"in e?tn(e):"line"in e||"column"in e?en(e):"":""}function en(e){return nn(e&&e.line)+":"+nn(e&&e.column)}function tn(e){return en(e&&e.start)+"-"+en(e&&e.end)}function nn(e){return e&&"number"==typeof e?e:1}class on extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let o="",i={},r=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?o=e:!i.cause&&e&&(r=!0,o=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){const e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=o,this.line=a?a.line:void 0,this.name=Zt(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=r&&i.cause&&"string"==typeof i.cause.stack?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}on.prototype.file="",on.prototype.name="",on.prototype.reason="",on.prototype.message="",on.prototype.stack="",on.prototype.column=void 0,on.prototype.line=void 0,on.prototype.ancestors=void 0,on.prototype.cause=void 0,on.prototype.fatal=void 0,on.prototype.place=void 0,on.prototype.ruleId=void 0,on.prototype.source=void 0;const rn={}.hasOwnProperty,an=new Map,sn=/[A-Z]/g,cn=/-([a-z])/g,ln=new Set(["table","tbody","thead","tfoot","tr"]),un=new Set(["td","th"]),dn="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function pn(e,t,n){return"element"===t.type?function(e,t,n){const o=e.schema;let i=o;"svg"===t.tagName.toLowerCase()&&"html"===o.space&&(i=qt,e.schema=i),e.ancestors.push(t);const r=yn(e,t.tagName,!1),a=function(e,t){const n={};let o,i;for(i in t.properties)if("children"!==i&&rn.call(t.properties,i)){const r=fn(e,i,t.properties[i]);if(r){const[i,a]=r;e.tableCellAlignToStyle&&"align"===i&&"string"==typeof a&&un.has(t.tagName)?o=a:n[i]=a}}return o&&((n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=o),n}(e,t);let s=mn(e,t);return ln.has(t.tagName)&&(s=s.filter((function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&ht(t.value):ht(t));var t}))),hn(e,a,r,t),gn(a,s),e.ancestors.pop(),e.schema=o,e.create(t,r,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}bn(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const o=e.schema;let i=o;"svg"===t.name&&"html"===o.space&&(i=qt,e.schema=i),e.ancestors.push(t);const r=null===t.name?e.Fragment:yn(e,t.name,!0),a=function(e,t){const n={};for(const o of t.attributes)if("mdxJsxExpressionAttribute"===o.type)if(o.data&&o.data.estree&&e.evaluater){const t=o.data.estree.body[0];t.type;const i=t.expression;i.type;const r=i.properties[0];r.type,Object.assign(n,e.evaluater.evaluateExpression(r.argument))}else bn(e,t.position);else{const i=o.name;let r;if(o.value&&"object"==typeof o.value)if(o.value.data&&o.value.data.estree&&e.evaluater){const t=o.value.data.estree.body[0];t.type,r=e.evaluater.evaluateExpression(t.expression)}else bn(e,t.position);else r=null===o.value||o.value;n[i]=r}return n}(e,t),s=mn(e,t);return hn(e,a,r,t),gn(a,s),e.ancestors.pop(),e.schema=o,e.create(t,r,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);bn(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const o={};return gn(o,mn(e,t)),e.create(t,e.Fragment,o,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function hn(e,t,n,o){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=o)}function gn(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function mn(e,t){const n=[];let o=-1;const i=e.passKeys?new Map:an;for(;++o<t.children.length;){const r=t.children[o];let a;if(e.passKeys){const e="element"===r.type?r.tagName:"mdxJsxFlowElement"===r.type||"mdxJsxTextElement"===r.type?r.name:void 0;if(e){const t=i.get(e)||0;a=e+"-"+t,i.set(e,t+1)}}const s=pn(e,r,a);void 0!==s&&n.push(s)}return n}function fn(e,t,n){const o=function(e,t){const n=ft(t);let o=t,i=yt;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&$t.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Ht,Vt);o="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Ht.test(e)){let n=e.replace(zt,Gt);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=Tt}return new i(o,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=o.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===o.property){let t="object"==typeof n?n:function(e,t){const n={};try{Jt(t,(function(e,t){let o=e;"--"!==o.slice(0,2)&&("-ms-"===o.slice(0,4)&&(o="ms-"+o.slice(4)),o=o.replace(cn,wn)),n[o]=t}))}catch(t){if(!e.ignoreInvalidStyle){const n=t,o=new on("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=dn+"#cannot-parse-style-attribute",o}}return n}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)rn.call(e,n)&&(t[vn(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&o.space?Wt[o.property]||o.property:o.attribute,n]}}function yn(e,t,n){let o;if(n)if(t.includes(".")){const e=t.split(".");let n,i=-1;for(;++i<e.length;){const t=dt(e[i])?{type:"Identifier",name:e[i]}:{type:"Literal",value:e[i]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(i&&"Literal"===t.type),optional:!1}:t}o=n}else o=dt(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else o={type:"Literal",value:t};if("Literal"===o.type){const t=o.value;return rn.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(o);bn(e)}function bn(e,t){const n=new on("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=dn+"#cannot-handle-mdx-estrees-without-createevaluater",n}function vn(e){let t=e.replace(sn,kn);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function wn(e,t){return t.toUpperCase()}function kn(e){return"-"+e.toLowerCase()}const xn={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Cn={};function Sn(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return En(e.children,t,n)}return Array.isArray(e)?En(e,t,n):""}function En(e,t,n){const o=[];let i=-1;for(;++i<e.length;)o[i]=Sn(e[i],t,n);return o.join("")}function In(e,t,n,o){const i=e.length;let r,a=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,o.length<1e4)r=Array.from(o),r.unshift(t,n),e.splice(...r);else for(n&&e.splice(t,n);a<o.length;)r=o.slice(a,a+1e4),r.unshift(t,0),e.splice(...r),a+=1e4,t+=1e4}function Tn(e,t){return e.length>0?(In(e,e.length,0,t),e):t}class An{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const o=t||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return n&&Pn(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Pn(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Pn(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Pn(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Pn(this.left,t.reverse())}}}function Pn(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Nn(e){const t={};let n,o,i,r,a,s,c,l=-1;const u=new An(e);for(;++l<u.length;){for(;l in t;)l=t[l];if(n=u.get(l),l&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(l-1)[1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,On(u,l)),l=t[l],c=!0);else if(n[1]._container){for(i=l,o=void 0;i--&&(r=u.get(i),"lineEnding"===r[1].type||"lineEndingBlank"===r[1].type);)"enter"===r[0]&&(o&&(u.get(o)[1].type="lineEndingBlank"),r[1].type="lineEnding",o=i);o&&(n[1].end=Object.assign({},u.get(o)[1].start),a=u.slice(o,l),a.unshift(n),u.splice(o,l-o+1,a))}}return In(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function On(e,t){const n=e.get(t)[1],o=e.get(t)[2];let i=t-1;const r=[],a=n._tokenizer||o.parser[n.contentType](n.start),s=a.events,c=[],l={};let u,d,p=-1,h=n,g=0,m=0;const f=[m];for(;h;){for(;e.get(++i)[1]!==h;);r.push(i),h._tokenizer||(u=o.sliceStream(h),h.next||u.push(null),d&&a.defineSkip(h.start),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++p<s.length;)"exit"===s[p][0]&&"enter"===s[p-1][0]&&s[p][1].type===s[p-1][1].type&&s[p][1].start.line!==s[p][1].end.line&&(m=p+1,f.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(a.events=[],h?(h._tokenizer=void 0,h.previous=void 0):f.pop(),p=f.length;p--;){const t=s.slice(f[p],f[p+1]),n=r.pop();c.push([n,n+t.length-1]),e.splice(n,2,t)}for(c.reverse(),p=-1;++p<c.length;)l[g+c[p][0]]=g+c[p][1],g+=c[p][1]-c[p][0]-1;return l}const Rn={}.hasOwnProperty;function Mn(e,t){let n;for(n in t){const o=(Rn.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let r;if(i)for(r in i){Rn.call(o,r)||(o[r]=[]);const e=i[r];Ln(o[r],Array.isArray(e)?e:e?[e]:[])}}}function Ln(e,t){let n=-1;const o=[];for(;++n<t.length;)("after"===t[n].add?e:o).push(t[n]);In(e,0,0,o)}const Dn=Yn(/[A-Za-z]/),Bn=Yn(/[\dA-Za-z]/),Fn=Yn(/[#-'*+\--9=?A-Z^-~]/);function jn(e){return null!==e&&(e<32||127===e)}const Un=Yn(/\d/),qn=Yn(/[\dA-Fa-f]/),$n=Yn(/[!-/:-@[-`{-~]/);function Hn(e){return null!==e&&e<-2}function zn(e){return null!==e&&(e<0||32===e)}function Gn(e){return-2===e||-1===e||32===e}const Vn=Yn(/\p{P}|\p{S}/u),Wn=Yn(/\s/);function Yn(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Jn(e,t,n,o){const i=o?o-1:Number.POSITIVE_INFINITY;let r=0;return function(o){return Gn(o)?(e.enter(n),a(o)):t(o)};function a(o){return Gn(o)&&r++<i?(e.consume(o),a):(e.exit(n),t(o))}}const Kn={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null!==n)return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Jn(e,t,"linePrefix");e.consume(n)}),(function(t){return e.enter("paragraph"),o(t)}));let n;return t;function o(t){const o=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=o),n=o,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Hn(t)?(e.consume(t),e.exit("chunkText"),o):(e.consume(t),i)}}},Xn={tokenize:function(e){const t=this,n=[];let o,i,r,a=0;return s;function s(o){if(a<n.length){const i=n[a];return t.containerState=i[1],e.attempt(i[0].continuation,c,l)(o)}return l(o)}function c(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&b();const n=t.events.length;let i,r=n;for(;r--;)if("exit"===t.events[r][0]&&"chunkFlow"===t.events[r][1].type){i=t.events[r][1].end;break}y(a);let s=n;for(;s<t.events.length;)t.events[s][1].end=Object.assign({},i),s++;return In(t.events,r+1,0,t.events.slice(n)),t.events.length=s,l(e)}return s(e)}function l(i){if(a===n.length){if(!o)return p(i);if(o.currentConstruct&&o.currentConstruct.concrete)return g(i);t.interrupt=Boolean(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Qn,u,d)(i)}function u(e){return o&&b(),y(a),p(e)}function d(e){return t.parser.lazy[t.now().line]=a!==n.length,r=t.now().offset,g(e)}function p(n){return t.containerState={},e.attempt(Qn,h,g)(n)}function h(e){return a++,n.push([t.currentConstruct,t.containerState]),p(e)}function g(n){return null===n?(o&&b(),y(0),void e.consume(n)):(o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:o}),m(n))}function m(n){return null===n?(f(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):Hn(n)?(e.consume(n),f(e.exit("chunkFlow")),a=0,t.interrupt=void 0,s):(e.consume(n),m)}function f(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=i,i&&(i.next=e),i=e,o.defineSkip(e.start),o.write(s),t.parser.lazy[e.start.line]){let e=o.events.length;for(;e--;)if(o.events[e][1].start.offset<r&&(!o.events[e][1].end||o.events[e][1].end.offset>r))return;const n=t.events.length;let i,s,c=n;for(;c--;)if("exit"===t.events[c][0]&&"chunkFlow"===t.events[c][1].type){if(i){s=t.events[c][1].end;break}i=!0}for(y(a),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},s),e++;In(t.events,c+1,0,t.events.slice(n)),t.events.length=e}}function y(o){let i=n.length;for(;i-- >o;){const o=n[i];t.containerState=o[1],o[0].exit.call(t,e)}n.length=o}function b(){o.write([null]),i=void 0,o=void 0,t.containerState._closeFlow=void 0}}},Qn={tokenize:function(e,t,n){return Jn(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}},Zn={tokenize:function(e,t,n){return function(t){return Gn(t)?Jn(e,o,"linePrefix")(t):o(t)};function o(e){return null===e||Hn(e)?t(e):n(e)}},partial:!0},eo={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(t)};function o(t){return null===t?i(t):Hn(t)?e.check(to,r,i)(t):(e.consume(t),o)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function r(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}},resolve:function(e){return Nn(e),e}},to={tokenize:function(e,t,n){const o=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Jn(e,i,"linePrefix")};function i(i){if(null===i||Hn(i))return n(i);const r=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(i):e.interrupt(o.parser.constructs.flow,n,t)(i)}},partial:!0},no={tokenize:function(e){const t=this,n=e.attempt(Zn,(function(o){if(null!==o)return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n;e.consume(o)}),e.attempt(this.parser.constructs.flowInitial,o,Jn(e,e.attempt(this.parser.constructs.flow,o,e.attempt(eo,o)),"linePrefix")));return n;function o(o){if(null!==o)return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(o)}}},oo={resolveAll:so()},io=ao("string"),ro=ao("text");function ao(e){return{tokenize:function(t){const n=this,o=this.parser.constructs[e],i=t.attempt(o,r,a);return r;function r(e){return c(e)?i(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return c(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function c(e){if(null===e)return!0;const t=o[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:so("text"===e?co:void 0)}}function so(e){return function(t,n){let o,i=-1;for(;++i<=t.length;)void 0===o?t[i]&&"data"===t[i][1].type&&(o=i,i++):t[i]&&"data"===t[i][1].type||(i!==o+2&&(t[o][1].end=t[i-1][1].end,t.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(t,n):t}}function co(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const o=e[n-1][1],i=t.sliceStream(o);let r,a=i.length,s=-1,c=0;for(;a--;){const e=i[a];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)c++,s--;if(s)break;s=-1}else if(-2===e)r=!0,c++;else if(-1!==e){a++;break}}if(c){const i={type:n===e.length||r||c<2?"lineSuffix":"hardBreakTrailing",start:{line:o.end.line,column:o.end.column-c,offset:o.end.offset-c,_index:o.start._index+a,_bufferIndex:a?s:o.start._bufferIndex+s},end:Object.assign({},o.end)};o.end=Object.assign({},i.start),o.start.offset===o.end.offset?Object.assign(o,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}function lo(e,t,n){const o=[];let i=-1;for(;++i<e.length;){const r=e[i].resolveAll;r&&!o.includes(r)&&(t=r(t,n),o.push(r))}return t}function uo(e,t,n){let o=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},r=[];let a=[],s=[],c=!0;const l={consume:function(e){Hn(e)?(o.line++,o.column=1,o.offset+=-3===e?2:1,v()):-1!==e&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===a[o._index].length&&(o._bufferIndex=-1,o._index++)),u.previous=e,c=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=g(),u.events.push(["enter",n,u]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=g(),u.events.push(["exit",t,u]),t},attempt:y((function(e,t){b(e,t.from)})),check:y(f),interrupt:y(f,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:function(e,t){return function(e,t){let n=-1;const o=[];let i;for(;++n<e.length;){const r=e[n];let a;if("string"==typeof r)a=r;else switch(r){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&i)continue;a=" ";break;default:a=String.fromCharCode(r)}i=-2===r,o.push(a)}return o.join("")}(h(e),t)},now:g,defineSkip:function(e){i[e.line]=e.column,v()},write:function(e){return a=Tn(a,e),function(){let e;for(;o._index<a.length;){const t=a[o._index];if("string"==typeof t)for(e=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===e&&o._bufferIndex<t.length;)m(t.charCodeAt(o._bufferIndex));else m(t)}}(),null!==a[a.length-1]?[]:(b(t,0),u.events=lo(r,u.events,u),u.events)}};let d,p=t.tokenize.call(u,l);return t.resolveAll&&r.push(t),u;function h(e){return function(e,t){const n=t.start._index,o=t.start._bufferIndex,i=t.end._index,r=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(o,r)];else{if(a=e.slice(n,i),o>-1){const e=a[0];"string"==typeof e?a[0]=e.slice(o):a.shift()}r>0&&a.push(e[i].slice(0,r))}return a}(a,e)}function g(){const{line:e,column:t,offset:n,_index:i,_bufferIndex:r}=o;return{line:e,column:t,offset:n,_index:i,_bufferIndex:r}}function m(e){c=void 0,d=e,p=p(e)}function f(e,t){t.restore()}function y(e,t){return function(n,i,r){let a,d,p,h;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):(m=n,function(e){const t=null!==e&&m[e],n=null!==e&&m.null;return f([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(n)?n:n?[n]:[]])(e)});var m;function f(e){return a=e,d=0,0===e.length?r:y(e[d])}function y(e){return function(n){return h=function(){const e=g(),t=u.previous,n=u.currentConstruct,i=u.events.length,r=Array.from(s);return{restore:function(){o=e,u.previous=t,u.currentConstruct=n,u.events.length=i,s=r,v()},from:i}}(),p=e,e.partial||(u.currentConstruct=e),e.name&&u.parser.constructs.disable.null.includes(e.name)?w():e.tokenize.call(t?Object.assign(Object.create(u),t):u,l,b,w)(n)}}function b(t){return c=!0,e(p,h),i}function w(e){return c=!0,h.restore(),++d<a.length?y(a[d]):r}}}function b(e,t){e.resolveAll&&!r.includes(e)&&r.push(e),e.resolve&&In(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function v(){o.line in i&&o.column<2&&(o.column=i[o.line],o.offset+=i[o.line]-1)}}const po={name:"thematicBreak",tokenize:function(e,t,n){let o,i=0;return function(t){return e.enter("thematicBreak"),function(e){return o=e,r(e)}(t)};function r(r){return r===o?(e.enter("thematicBreakSequence"),a(r)):i>=3&&(null===r||Hn(r))?(e.exit("thematicBreak"),t(r)):n(r)}function a(t){return t===o?(e.consume(t),i++,a):(e.exit("thematicBreakSequence"),Gn(t)?Jn(e,r,"whitespace")(t):r(t))}}},ho={name:"list",tokenize:function(e,t,n){const o=this,i=o.events[o.events.length-1];let r=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return function(t){const i=o.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!o.containerState.marker||t===o.containerState.marker:Un(t)){if(o.containerState.type||(o.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(po,n,c)(t):c(t);if(!o.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return Un(t)&&++a<10?(e.consume(t),s):(!o.interrupt||a<2)&&(o.containerState.marker?t===o.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),c(t)):n(t)}function c(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||t,e.check(Zn,o.interrupt?n:l,e.attempt(go,d,u))}function l(e){return o.containerState.initialBlankLine=!0,r++,d(e)}function u(t){return Gn(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return o.containerState.size=r+o.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const o=this;return o.containerState._closeFlow=void 0,e.check(Zn,(function(n){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,Jn(e,t,"listItemIndent",o.containerState.size+1)(n)}),(function(n){return o.containerState.furtherBlankLines||!Gn(n)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,i(n)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,e.attempt(mo,t,i)(n))}));function i(i){return o.containerState._closeFlow=!0,o.interrupt=void 0,Jn(e,e.attempt(ho,t,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},go={tokenize:function(e,t,n){const o=this;return Jn(e,(function(e){const i=o.events[o.events.length-1];return!Gn(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}),"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},mo={tokenize:function(e,t,n){const o=this;return Jn(e,(function(e){const i=o.events[o.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===o.containerState.size?t(e):n(e)}),"listItemIndent",o.containerState.size+1)},partial:!0},fo={name:"blockQuote",tokenize:function(e,t,n){const o=this;return function(t){if(62===t){const n=o.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return Gn(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const o=this;return function(t){return Gn(t)?Jn(e,i,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):i(t)};function i(o){return e.attempt(fo,t,n)(o)}}},exit:function(e){e.exit("blockQuote")}};function yo(e,t,n,o,i,r,a,s,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return function(t){return 60===t?(e.enter(o),e.enter(i),e.enter(r),e.consume(t),e.exit(r),d):null===t||32===t||41===t||jn(t)?n(t):(e.enter(o),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),g(t))};function d(n){return 62===n?(e.enter(r),e.consume(n),e.exit(r),e.exit(i),e.exit(o),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),p(n))}function p(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||Hn(t)?n(t):(e.consume(t),92===t?h:p)}function h(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function g(i){return u||null!==i&&41!==i&&!zn(i)?u<l&&40===i?(e.consume(i),u++,g):41===i?(e.consume(i),u--,g):null===i||32===i||40===i||jn(i)?n(i):(e.consume(i),92===i?m:g):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(o),t(i))}function m(t){return 40===t||41===t||92===t?(e.consume(t),g):g(t)}}function bo(e,t,n,o,i,r){const a=this;let s,c=0;return function(t){return e.enter(o),e.enter(i),e.consume(t),e.exit(i),e.enter(r),l};function l(d){return c>999||null===d||91===d||93===d&&!s||94===d&&!c&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(r),e.enter(i),e.consume(d),e.exit(i),e.exit(o),t):Hn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||Hn(t)||c++>999?(e.exit("chunkString"),l(t)):(e.consume(t),s||(s=!Gn(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),c++,u):u(t)}}function vo(e,t,n,o,i,r){let a;return function(t){return 34===t||39===t||40===t?(e.enter(o),e.enter(i),e.consume(t),e.exit(i),a=40===t?41:t,s):n(t)};function s(n){return n===a?(e.enter(i),e.consume(n),e.exit(i),e.exit(o),t):(e.enter(r),c(n))}function c(t){return t===a?(e.exit(r),s(a)):null===t?n(t):Hn(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Jn(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(t))}function l(t){return t===a||null===t||Hn(t)?(e.exit("chunkString"),c(t)):(e.consume(t),92===t?u:l)}function u(t){return t===a||92===t?(e.consume(t),l):l(t)}}function wo(e,t){let n;return function o(i){return Hn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,o):Gn(i)?Jn(e,o,n?"linePrefix":"lineSuffix")(i):t(i)}}function ko(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _o={name:"definition",tokenize:function(e,t,n){const o=this;let i;return function(t){return e.enter("definition"),function(t){return bo.call(o,e,r,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function r(t){return i=ko(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return zn(t)?wo(e,s)(t):s(t)}function s(t){return yo(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function c(t){return e.attempt(xo,l,l)(t)}function l(t){return Gn(t)?Jn(e,u,"whitespace")(t):u(t)}function u(r){return null===r||Hn(r)?(e.exit("definition"),o.parser.defined.push(i),t(r)):n(r)}}},xo={tokenize:function(e,t,n){return function(t){return zn(t)?wo(e,o)(t):n(t)};function o(t){return vo(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return Gn(t)?Jn(e,r,"whitespace")(t):r(t)}function r(e){return null===e||Hn(e)?t(e):n(e)}},partial:!0},Co={name:"codeIndented",tokenize:function(e,t,n){const o=this;return function(t){return e.enter("codeIndented"),Jn(e,i,"linePrefix",5)(t)};function i(e){const t=o.events[o.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?r(e):n(e)}function r(t){return null===t?s(t):Hn(t)?e.attempt(So,r,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||Hn(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},So={tokenize:function(e,t,n){const o=this;return i;function i(t){return o.parser.lazy[o.now().line]?n(t):Hn(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):Jn(e,r,"linePrefix",5)(t)}function r(e){const r=o.events[o.events.length-1];return r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(e):Hn(e)?i(e):n(e)}},partial:!0},Eo={name:"headingAtx",tokenize:function(e,t,n){let o=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&o++<6?(e.consume(t),i):null===t||zn(t)?(e.exit("atxHeadingSequence"),r(t)):n(t)}function r(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||Hn(n)?(e.exit("atxHeading"),t(n)):Gn(n)?Jn(e,r,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),r(t))}function s(t){return null===t||35===t||zn(t)?(e.exit("atxHeadingText"),r(t)):(e.consume(t),s)}},resolve:function(e,t){let n,o,i=e.length-2,r=3;return"whitespace"===e[r][1].type&&(r+=2),i-2>r&&"whitespace"===e[i][1].type&&(i-=2),"atxHeadingSequence"===e[i][1].type&&(r===i-1||i-4>r&&"whitespace"===e[i-2][1].type)&&(i-=r+1===i?2:4),i>r&&(n={type:"atxHeadingText",start:e[r][1].start,end:e[i][1].end},o={type:"chunkText",start:e[r][1].start,end:e[i][1].end,contentType:"text"},In(e,r,i-r+1,[["enter",n,t],["enter",o,t],["exit",o,t],["exit",n,t]])),e}},Io={name:"setextUnderline",tokenize:function(e,t,n){const o=this;let i;return function(t){let a,s=o.events.length;for(;s--;)if("lineEnding"!==o.events[s][1].type&&"linePrefix"!==o.events[s][1].type&&"content"!==o.events[s][1].type){a="paragraph"===o.events[s][1].type;break}return o.parser.lazy[o.now().line]||!o.interrupt&&!a?n(t):(e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),r(t)}(t))};function r(t){return t===i?(e.consume(t),r):(e.exit("setextHeadingLineSequence"),Gn(t)?Jn(e,a,"lineSuffix")(t):a(t))}function a(o){return null===o||Hn(o)?(e.exit("setextHeadingLine"),t(o)):n(o)}},resolveTo:function(e,t){let n,o,i,r=e.length;for(;r--;)if("enter"===e[r][0]){if("content"===e[r][1].type){n=r;break}"paragraph"===e[r][1].type&&(o=r)}else"content"===e[r][1].type&&e.splice(r,1),i||"definition"!==e[r][1].type||(i=r);const a={type:"setextHeading",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[o][1].type="setextHeadingText",i?(e.splice(o,0,["enter",a,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=a,e.push(["exit",a,t]),e}},To=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ao=["pre","script","style","textarea"],Po={name:"htmlFlow",tokenize:function(e,t,n){const o=this;let i,r,a,s,c;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),l}(t)};function l(s){return 33===s?(e.consume(s),u):47===s?(e.consume(s),r=!0,h):63===s?(e.consume(s),i=3,o.interrupt?t:M):Dn(s)?(e.consume(s),a=String.fromCharCode(s),g):n(s)}function u(r){return 45===r?(e.consume(r),i=2,d):91===r?(e.consume(r),i=5,s=0,p):Dn(r)?(e.consume(r),i=4,o.interrupt?t:M):n(r)}function d(i){return 45===i?(e.consume(i),o.interrupt?t:M):n(i)}function p(i){return i==="CDATA[".charCodeAt(s++)?(e.consume(i),6===s?o.interrupt?t:E:p):n(i)}function h(t){return Dn(t)?(e.consume(t),a=String.fromCharCode(t),g):n(t)}function g(s){if(null===s||47===s||62===s||zn(s)){const c=47===s,l=a.toLowerCase();return c||r||!Ao.includes(l)?To.includes(a.toLowerCase())?(i=6,c?(e.consume(s),m):o.interrupt?t(s):E(s)):(i=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(s):r?f(s):y(s)):(i=1,o.interrupt?t(s):E(s))}return 45===s||Bn(s)?(e.consume(s),a+=String.fromCharCode(s),g):n(s)}function m(i){return 62===i?(e.consume(i),o.interrupt?t:E):n(i)}function f(t){return Gn(t)?(e.consume(t),f):C(t)}function y(t){return 47===t?(e.consume(t),C):58===t||95===t||Dn(t)?(e.consume(t),b):Gn(t)?(e.consume(t),y):C(t)}function b(t){return 45===t||46===t||58===t||95===t||Bn(t)?(e.consume(t),b):v(t)}function v(t){return 61===t?(e.consume(t),w):Gn(t)?(e.consume(t),v):y(t)}function w(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),c=t,k):Gn(t)?(e.consume(t),w):_(t)}function k(t){return t===c?(e.consume(t),c=null,x):null===t||Hn(t)?n(t):(e.consume(t),k)}function _(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||zn(t)?v(t):(e.consume(t),_)}function x(e){return 47===e||62===e||Gn(e)?y(e):n(e)}function C(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||Hn(t)?E(t):Gn(t)?(e.consume(t),S):n(t)}function E(t){return 45===t&&2===i?(e.consume(t),P):60===t&&1===i?(e.consume(t),N):62===t&&4===i?(e.consume(t),L):63===t&&3===i?(e.consume(t),M):93===t&&5===i?(e.consume(t),R):!Hn(t)||6!==i&&7!==i?null===t||Hn(t)?(e.exit("htmlFlowData"),I(t)):(e.consume(t),E):(e.exit("htmlFlowData"),e.check(No,D,I)(t))}function I(t){return e.check(Oo,T,D)(t)}function T(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),A}function A(t){return null===t||Hn(t)?I(t):(e.enter("htmlFlowData"),E(t))}function P(t){return 45===t?(e.consume(t),M):E(t)}function N(t){return 47===t?(e.consume(t),a="",O):E(t)}function O(t){if(62===t){const n=a.toLowerCase();return Ao.includes(n)?(e.consume(t),L):E(t)}return Dn(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),O):E(t)}function R(t){return 93===t?(e.consume(t),M):E(t)}function M(t){return 62===t?(e.consume(t),L):45===t&&2===i?(e.consume(t),M):E(t)}function L(t){return null===t||Hn(t)?(e.exit("htmlFlowData"),D(t)):(e.consume(t),L)}function D(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},concrete:!0},No={tokenize:function(e,t,n){return function(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(Zn,t,n)}},partial:!0},Oo={tokenize:function(e,t,n){const o=this;return function(t){return Hn(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):n(t)};function i(e){return o.parser.lazy[o.now().line]?n(e):t(e)}},partial:!0},Ro={tokenize:function(e,t,n){const o=this;return function(t){return null===t?n(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i)};function i(e){return o.parser.lazy[o.now().line]?n(e):t(e)}},partial:!0},Mo={name:"codeFenced",tokenize:function(e,t,n){const o=this,i={tokenize:function(e,t,n){let i=0;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a};function a(t){return e.enter("codeFencedFence"),Gn(t)?Jn(e,c,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===r?(e.enter("codeFencedFenceSequence"),l(t)):n(t)}function l(t){return t===r?(i++,e.consume(t),l):i>=s?(e.exit("codeFencedFenceSequence"),Gn(t)?Jn(e,u,"whitespace")(t):u(t)):n(t)}function u(o){return null===o||Hn(o)?(e.exit("codeFencedFence"),t(o)):n(o)}},partial:!0};let r,a=0,s=0;return function(t){return function(t){const n=o.events[o.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,r=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(t)}(t)};function c(t){return t===r?(s++,e.consume(t),c):s<3?n(t):(e.exit("codeFencedFenceSequence"),Gn(t)?Jn(e,l,"whitespace")(t):l(t))}function l(n){return null===n||Hn(n)?(e.exit("codeFencedFence"),o.interrupt?t(n):e.check(Ro,h,b)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||Hn(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),l(t)):Gn(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Jn(e,d,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),u)}function d(t){return null===t||Hn(t)?l(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(t))}function p(t){return null===t||Hn(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),l(t)):96===t&&t===r?n(t):(e.consume(t),p)}function h(t){return e.attempt(i,b,g)(t)}function g(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return a>0&&Gn(t)?Jn(e,f,"linePrefix",a+1)(t):f(t)}function f(t){return null===t||Hn(t)?e.check(Ro,h,b)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||Hn(t)?(e.exit("codeFlowValue"),f(t)):(e.consume(t),y)}function b(n){return e.exit("codeFenced"),t(n)}},concrete:!0},Lo=document.createElement("i");function Do(e){const t="&"+e+";";Lo.innerHTML=t;const n=Lo.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&n!==t&&n}const Bo={name:"characterReference",tokenize:function(e,t,n){const o=this;let i,r,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),i=31,r=Bn,l(t))}function c(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,r=qn,l):(e.enter("characterReferenceValue"),i=7,r=Un,l(t))}function l(s){if(59===s&&a){const i=e.exit("characterReferenceValue");return r!==Bn||Do(o.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return r(s)&&a++<i?(e.consume(s),l):n(s)}}},Fo={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),o};function o(o){return $n(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}},jo={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Jn(e,t,"linePrefix")}}},Uo={name:"labelEnd",tokenize:function(e,t,n){const o=this;let i,r,a=o.events.length;for(;a--;)if(("labelImage"===o.events[a][1].type||"labelLink"===o.events[a][1].type)&&!o.events[a][1]._balanced){i=o.events[a][1];break}return function(t){return i?i._inactive?u(t):(r=o.parser.defined.includes(ko(o.sliceSerialize({start:i.end,end:o.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s):n(t)};function s(t){return 40===t?e.attempt(qo,l,r?l:u)(t):91===t?e.attempt($o,l,r?c:u)(t):r?l(t):u(t)}function c(t){return e.attempt(Ho,l,u)(t)}function l(e){return t(e)}function u(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){let n,o,i,r,a=e.length,s=0;for(;a--;)if(n=e[a][1],o){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(o=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=a);const c={type:"labelLink"===e[o][1].type?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[o+s+2][1].end),end:Object.assign({},e[i-2][1].start)};return r=[["enter",c,t],["enter",l,t]],r=Tn(r,e.slice(o+1,o+s+3)),r=Tn(r,[["enter",u,t]]),r=Tn(r,lo(t.parser.constructs.insideSpan.null,e.slice(o+s+4,i-3),t)),r=Tn(r,[["exit",u,t],e[i-2],e[i-1],["exit",l,t]]),r=Tn(r,e.slice(i+1)),r=Tn(r,[["exit",c,t]]),In(e,o,e.length,r),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},qo={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),o};function o(t){return zn(t)?wo(e,i)(t):i(t)}function i(t){return 41===t?l(t):yo(e,r,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function r(t){return zn(t)?wo(e,s)(t):l(t)}function a(e){return n(e)}function s(t){return 34===t||39===t||40===t?vo(e,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):l(t)}function c(t){return zn(t)?wo(e,l)(t):l(t)}function l(o){return 41===o?(e.enter("resourceMarker"),e.consume(o),e.exit("resourceMarker"),e.exit("resource"),t):n(o)}}},$o={tokenize:function(e,t,n){const o=this;return function(t){return bo.call(o,e,i,r,"reference","referenceMarker","referenceString")(t)};function i(e){return o.parser.defined.includes(ko(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function r(e){return n(e)}}},Ho={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),o};function o(o){return 93===o?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}},zo={name:"labelStartImage",tokenize:function(e,t,n){const o=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),r):n(t)}function r(e){return 94===e&&"_hiddenFootnoteSupport"in o.parser.constructs?n(e):t(e)}},resolveAll:Uo.resolveAll};function Go(e){return null===e||zn(e)||Wn(e)?1:Vn(e)?2:void 0}const Vo={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,i=Go(o);let r;return function(t){return r=t,e.enter("attentionSequence"),a(t)};function a(s){if(s===r)return e.consume(s),a;const c=e.exit("attentionSequence"),l=Go(s),u=!l||2===l&&i||n.includes(s),d=!i||2===i&&l||n.includes(o);return c._open=Boolean(42===r?u:u&&(i||!d)),c._close=Boolean(42===r?d:d&&(l||!u)),t(s)}},resolveAll:function(e,t){let n,o,i,r,a,s,c,l,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d=Object.assign({},e[n][1].end),p=Object.assign({},e[u][1].start);Wo(d,-s),Wo(p,s),r={type:s>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:p},i={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},o={type:s>1?"strong":"emphasis",start:Object.assign({},r.start),end:Object.assign({},a.end)},e[n][1].end=Object.assign({},r.start),e[u][1].start=Object.assign({},a.end),c=[],e[n][1].end.offset-e[n][1].start.offset&&(c=Tn(c,[["enter",e[n][1],t],["exit",e[n][1],t]])),c=Tn(c,[["enter",o,t],["enter",r,t],["exit",r,t],["enter",i,t]]),c=Tn(c,lo(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),c=Tn(c,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",o,t]]),e[u][1].end.offset-e[u][1].start.offset?(l=2,c=Tn(c,[["enter",e[u][1],t],["exit",e[u][1],t]])):l=0,In(e,n-1,u-n+3,c),u=n+c.length-l-2;break}for(u=-1;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function Wo(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Yo={name:"autolink",tokenize:function(e,t,n){let o=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return Dn(t)?(e.consume(t),r):64===t?n(t):c(t)}function r(e){return 43===e||45===e||46===e||Bn(e)?(o=1,a(e)):c(e)}function a(t){return 58===t?(e.consume(t),o=0,s):(43===t||45===t||46===t||Bn(t))&&o++<32?(e.consume(t),a):(o=0,c(t))}function s(o){return 62===o?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(o),e.exit("autolinkMarker"),e.exit("autolink"),t):null===o||32===o||60===o||jn(o)?n(o):(e.consume(o),s)}function c(t){return 64===t?(e.consume(t),l):Fn(t)?(e.consume(t),c):n(t)}function l(e){return Bn(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),o=0,l):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||Bn(t))&&o++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}},Jo={name:"htmlText",tokenize:function(e,t,n){const o=this;let i,r,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),w):63===t?(e.consume(t),b):Dn(t)?(e.consume(t),x):n(t)}function c(t){return 45===t?(e.consume(t),l):91===t?(e.consume(t),r=0,h):Dn(t)?(e.consume(t),y):n(t)}function l(t){return 45===t?(e.consume(t),p):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):Hn(t)?(a=u,O(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),p):u(t)}function p(e){return 62===e?N(e):45===e?d(e):u(e)}function h(t){return t==="CDATA[".charCodeAt(r++)?(e.consume(t),6===r?g:h):n(t)}function g(t){return null===t?n(t):93===t?(e.consume(t),m):Hn(t)?(a=g,O(t)):(e.consume(t),g)}function m(t){return 93===t?(e.consume(t),f):g(t)}function f(t){return 62===t?N(t):93===t?(e.consume(t),f):g(t)}function y(t){return null===t||62===t?N(t):Hn(t)?(a=y,O(t)):(e.consume(t),y)}function b(t){return null===t?n(t):63===t?(e.consume(t),v):Hn(t)?(a=b,O(t)):(e.consume(t),b)}function v(e){return 62===e?N(e):b(e)}function w(t){return Dn(t)?(e.consume(t),k):n(t)}function k(t){return 45===t||Bn(t)?(e.consume(t),k):_(t)}function _(t){return Hn(t)?(a=_,O(t)):Gn(t)?(e.consume(t),_):N(t)}function x(t){return 45===t||Bn(t)?(e.consume(t),x):47===t||62===t||zn(t)?C(t):n(t)}function C(t){return 47===t?(e.consume(t),N):58===t||95===t||Dn(t)?(e.consume(t),S):Hn(t)?(a=C,O(t)):Gn(t)?(e.consume(t),C):N(t)}function S(t){return 45===t||46===t||58===t||95===t||Bn(t)?(e.consume(t),S):E(t)}function E(t){return 61===t?(e.consume(t),I):Hn(t)?(a=E,O(t)):Gn(t)?(e.consume(t),E):C(t)}function I(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,T):Hn(t)?(a=I,O(t)):Gn(t)?(e.consume(t),I):(e.consume(t),A)}function T(t){return t===i?(e.consume(t),i=void 0,P):null===t?n(t):Hn(t)?(a=T,O(t)):(e.consume(t),T)}function A(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||zn(t)?C(t):(e.consume(t),A)}function P(e){return 47===e||62===e||zn(e)?C(e):n(e)}function N(o){return 62===o?(e.consume(o),e.exit("htmlTextData"),e.exit("htmlText"),t):n(o)}function O(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),R}function R(t){return Gn(t)?Jn(e,M,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):M(t)}function M(t){return e.enter("htmlTextData"),a(t)}}},Ko={name:"labelStartLink",tokenize:function(e,t,n){const o=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in o.parser.constructs?n(e):t(e)}},resolveAll:Uo.resolveAll},Xo={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),o};function o(o){return Hn(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}},Qo={name:"codeText",tokenize:function(e,t,n){let o,i,r=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),r++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(i=e.enter("codeTextSequence"),o=0,l(t)):Hn(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),c(t))}function c(t){return null===t||32===t||96===t||Hn(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),c)}function l(n){return 96===n?(e.consume(n),o++,l):o===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",c(n))}},resolve:function(e){let t,n,o=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[o][1].type&&"space"!==e[o][1].type))for(t=i;++t<o;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[o][1].type="codeTextPadding",i+=2,o-=2;break}for(t=i-1,o++;++t<=o;)void 0===n?t!==o&&"lineEnding"!==e[t][1].type&&(n=t):t!==o&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),o-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}},Zo={42:ho,43:ho,45:ho,48:ho,49:ho,50:ho,51:ho,52:ho,53:ho,54:ho,55:ho,56:ho,57:ho,62:fo},ei={91:_o},ti={[-2]:Co,[-1]:Co,32:Co},ni={35:Eo,42:po,45:[Io,po],60:Po,61:Io,95:po,96:Mo,126:Mo},oi={38:Bo,92:Fo},ii={[-5]:jo,[-4]:jo,[-3]:jo,33:zo,38:Bo,42:Vo,60:[Yo,Jo],91:Ko,92:[Xo,Fo],93:Uo,95:Vo,96:Qo},ri={null:[Vo,oo]},ai={null:[42,95]},si={null:[]};const ci=/[\0\t\n\r]/g;function li(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}const ui=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function di(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return li(n.slice(t?2:1),t?16:10)}return Do(n)||e}const pi={}.hasOwnProperty;function hi(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(b),autolinkProtocol:u,autolinkEmail:u,atxHeading:i(m),blockQuote:i((function(){return{type:"blockquote",children:[]}})),characterEscape:u,characterReference:u,codeFenced:i(g),codeFencedFenceInfo:r,codeFencedFenceMeta:r,codeIndented:i(g,r),codeText:i((function(){return{type:"inlineCode",value:""}}),r),codeTextData:u,data:u,codeFlowValue:u,definition:i((function(){return{type:"definition",identifier:"",label:null,title:null,url:""}})),definitionDestinationString:r,definitionLabelString:r,definitionTitleString:r,emphasis:i((function(){return{type:"emphasis",children:[]}})),hardBreakEscape:i(f),hardBreakTrailing:i(f),htmlFlow:i(y,r),htmlFlowData:u,htmlText:i(y,r),htmlTextData:u,image:i((function(){return{type:"image",title:null,url:"",alt:null}})),label:r,link:i(b),listItem:i((function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}})),listItemValue:function(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)},listOrdered:i(v,(function(){this.data.expectingFirstListItemValue=!0})),listUnordered:i(v),paragraph:i((function(){return{type:"paragraph",children:[]}})),reference:function(){this.data.referenceType="collapsed"},referenceString:r,resourceDestinationString:r,resourceTitleString:r,setextHeading:i(m),strong:i((function(){return{type:"strong",children:[]}})),thematicBreak:i((function(){return{type:"thematicBreak"}}))},exit:{atxHeading:s(),atxHeadingSequence:function(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}},autolink:s(),autolinkEmail:function(e){d.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){d.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:s(),characterEscapeValue:d,characterReferenceMarkerHexadecimal:h,characterReferenceMarkerNumeric:h,characterReferenceValue:function(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let o;n?(o=li(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0):o=Do(t);this.stack[this.stack.length-1].value+=o},characterReference:function(e){this.stack.pop().position.end=gi(e.end)},codeFenced:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0})),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){const e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){const e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:d,codeIndented:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")})),codeText:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e})),codeTextData:d,data:d,definition:s(),definitionDestinationString:function(){const e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=ko(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){const e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:s(),hardBreakEscape:s(p),hardBreakTrailing:s(p),htmlFlow:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e})),htmlFlowData:d,htmlText:s((function(){const e=this.resume();this.stack[this.stack.length-1].value=e})),htmlTextData:d,image:s((function(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0})),label:function(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t},labelText:function(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(ui,di)}(t),n.identifier=ko(t).toLowerCase()},lineEnding:function(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak)return n.children[n.children.length-1].position.end=gi(e.end),void(this.data.atHardBreak=void 0);!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(u.call(this,e),d.call(this,e))},link:s((function(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0})),listItem:s(),listOrdered:s(),listUnordered:s(),paragraph:s(),referenceString:function(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=ko(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){const e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){const e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){this.data.inReference=void 0},setextHeading:s((function(){this.data.setextHeadingSlurpLineEnding=void 0})),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:s(),thematicBreak:s()}};mi(t,(e||{}).mdastExtensions||[]);const n={};return function(e){let i={type:"root",children:[]};const s={stack:[i],tokenStack:[],config:t,enter:a,exit:c,buffer:r,resume:l,data:n},u=[];let d=-1;for(;++d<e.length;)"listOrdered"!==e[d][1].type&&"listUnordered"!==e[d][1].type||("enter"===e[d][0]?u.push(d):d=o(e,u.pop(),d));for(d=-1;++d<e.length;){const n=t[e[d][0]];pi.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},s),e[d][1])}if(s.tokenStack.length>0){const e=s.tokenStack[s.tokenStack.length-1];(e[1]||yi).call(s,void 0,e[0])}for(i.position={start:gi(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:gi(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)i=t.transforms[d](i)||i;return i};function o(e,t,n){let o,i,r,a,s=t-1,c=-1,l=!1;for(;++s<=n;){const t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?c++:c--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!o||a||c||r||(r=s),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!c&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===c&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(o){let a=s;for(i=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",l=!0),t[1].type="lineEnding",i=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}r&&(!i||r<i)&&(o._spread=!0),o.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",o,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){const i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};o=i,e.splice(s,0,["enter",i,t[2]]),s++,n++,r=void 0,a=!0}}}return e[t][1]._spread=l,n}function i(e,t){return function(n){a.call(this,e(n),n),t&&t.call(this,n)}}function r(){this.stack.push({type:"fragment",children:[]})}function a(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:gi(t.start),end:void 0}}function s(e){return function(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),o=this.tokenStack.pop();if(!o)throw new Error("Cannot close `"+e.type+"` ("+Zt({start:e.start,end:e.end})+"): it’s not open");o[0].type!==e.type&&(t?t.call(this,e,o[0]):(o[1]||yi).call(this,e,o[0])),n.position.end=gi(e.end)}function l(){return function(e){const t=Cn;return Sn(e,"boolean"!=typeof t.includeImageAlt||t.includeImageAlt,"boolean"!=typeof t.includeHtml||t.includeHtml)}(this.stack.pop())}function u(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n={type:"text",value:""},n.position={start:gi(e.start),end:void 0},t.push(n)),this.stack.push(n)}function d(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=gi(e.end)}function p(){this.data.atHardBreak=!0}function h(e){this.data.characterReferenceType=e.type}function g(){return{type:"code",lang:null,meta:null,value:""}}function m(){return{type:"heading",depth:0,children:[]}}function f(){return{type:"break"}}function y(){return{type:"html",value:""}}function b(){return{type:"link",title:null,url:"",children:[]}}function v(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}}(n)(function(e){for(;!Nn(e););return e}(function(e){const t=function(e){const t={};let n=-1;for(;++n<e.length;)Mn(t,e[n]);return t}([i,...(e||{}).extensions||[]]),n={defined:[],lazy:{},constructs:t,content:o(Kn),document:o(Xn),flow:o(no),string:o(io),text:o(ro)};return n;function o(e){return function(t){return uo(n,e,t)}}}(n).document().write(function(){let e,t=1,n="",o=!0;return function(i,r,a){const s=[];let c,l,u,d,p;for(i=n+("string"==typeof i?i.toString():new TextDecoder(r||void 0).decode(i)),u=0,n="",o&&(65279===i.charCodeAt(0)&&u++,o=void 0);u<i.length;){if(ci.lastIndex=u,c=ci.exec(i),d=c&&void 0!==c.index?c.index:i.length,p=i.charCodeAt(d),!c){n=i.slice(u);break}if(10===p&&u===d&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),u<d&&(s.push(i.slice(u,d)),t+=d-u),p){case 0:s.push(65533),t++;break;case 9:for(l=4*Math.ceil(t/4),s.push(-2);t++<l;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return a&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))}function gi(e){return{line:e.line,column:e.column,offset:e.offset}}function mi(e,t){let n=-1;for(;++n<t.length;){const o=t[n];Array.isArray(o)?mi(e,o):fi(e,o)}}function fi(e,t){let n;for(n in t)if(pi.call(t,n))switch(n){case"canContainEols":{const o=t[n];o&&e[n].push(...o);break}case"transforms":{const o=t[n];o&&e[n].push(...o);break}case"enter":case"exit":{const o=t[n];o&&Object.assign(e[n],o);break}}}function yi(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Zt({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Zt({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Zt({start:t.start,end:t.end})+") is still open")}function bi(e){const t=this;t.parser=function(n){return hi(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const vi="object"==typeof self?self:globalThis,wi=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),o=i=>{if(e.has(i))return e.get(i);const[r,a]=t[i];switch(r){case 0:case-1:return n(a,i);case 1:{const e=n([],i);for(const t of a)e.push(o(t));return e}case 2:{const e=n({},i);for(const[t,n]of a)e[o(t)]=o(n);return e}case 3:return n(new Date(a),i);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),i)}case 5:{const e=n(new Map,i);for(const[t,n]of a)e.set(o(t),o(n));return e}case 6:{const e=n(new Set,i);for(const t of a)e.add(o(t));return e}case 7:{const{name:e,message:t}=a;return n(new vi[e](t),i)}case 8:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i)}return n(new vi[r](a),i)};return o})(new Map,e)(0),ki="",{toString:_i}={},{keys:xi}=Object,Ci=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=_i.call(e).slice(8,-1);switch(n){case"Array":return[1,ki];case"Object":return[2,ki];case"Date":return[3,ki];case"RegExp":return[4,ki];case"Map":return[5,ki];case"Set":return[6,ki]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Si=([e,t])=>0===e&&("function"===t||"symbol"===t),Ei=(e,{json:t,lossy:n}={})=>{const o=[];return((e,t,n,o)=>{const i=(e,t)=>{const i=o.push(e)-1;return n.set(t,i),i},r=o=>{if(n.has(o))return n.get(o);let[a,s]=Ci(o);switch(a){case 0:{let t=o;switch(s){case"bigint":a=8,t=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return i([-1],o)}return i([a,t],o)}case 1:{if(s)return i([s,[...o]],o);const e=[],t=i([a,e],o);for(const t of o)e.push(r(t));return t}case 2:{if(s)switch(s){case"BigInt":return i([s,o.toString()],o);case"Boolean":case"Number":case"String":return i([s,o.valueOf()],o)}if(t&&"toJSON"in o)return r(o.toJSON());const n=[],c=i([a,n],o);for(const t of xi(o))!e&&Si(Ci(o[t]))||n.push([r(t),r(o[t])]);return c}case 3:return i([a,o.toISOString()],o);case 4:{const{source:e,flags:t}=o;return i([a,{source:e,flags:t}],o)}case 5:{const t=[],n=i([a,t],o);for(const[n,i]of o)(e||!Si(Ci(n))&&!Si(Ci(i)))&&t.push([r(n),r(i)]);return n}case 6:{const t=[],n=i([a,t],o);for(const n of o)!e&&Si(Ci(n))||t.push(r(n));return n}}const{message:c}=o;return i([a,{name:s,message:c}],o)};return r})(!(t||n),!!t,new Map,o)(e),o},Ii="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?wi(Ei(e,t)):structuredClone(e):(e,t)=>wi(Ei(e,t));function Ti(e){const t=[];let n=-1,o=0,i=0;for(;++n<e.length;){const r=e.charCodeAt(n);let a="";if(37===r&&Bn(e.charCodeAt(n+1))&&Bn(e.charCodeAt(n+2)))i=2;else if(r<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(r))||(a=String.fromCharCode(r));else if(r>55295&&r<57344){const t=e.charCodeAt(n+1);r<56320&&t>56319&&t<57344?(a=String.fromCharCode(r,t),i=1):a="�"}else a=String.fromCharCode(r);a&&(t.push(e.slice(o,n),encodeURIComponent(a)),o=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(o)}function Ai(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Pi(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const Ni=function(e){if(null==e)return Ri;if("function"==typeof e)return Oi(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ni(e[n]);return Oi((function(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}))}(e):function(e){const t=e;return Oi((function(n){const o=n;let i;for(i in e)if(o[i]!==t[i])return!1;return!0}))}(e);if("string"==typeof e)return t=e,Oi((function(e){return e&&e.type===t}));var t;throw new Error("Expected function, string, or object as test")};function Oi(e){return function(t,n,o){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,o||void 0))}}function Ri(){return!0}const Mi=[],Li=!0,Di=!1,Bi="skip";function Fi(e,t,n,o){let i,r,a;"function"==typeof t&&"function"!=typeof n?(r=void 0,a=t,i=n):(r=t,a=n,i=o),function(e,t,n,o){let i;"function"==typeof t&&"function"!=typeof n?(o=n,n=t):i=t;const r=Ni(i),a=o?-1:1;!function e(i,s,c){const l=i&&"object"==typeof i?i:{};if("string"==typeof l.type){const e="string"==typeof l.tagName?l.tagName:"string"==typeof l.name?l.name:void 0;Object.defineProperty(u,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return u;function u(){let l,u,d,p=Mi;if((!t||r(i,s,c[c.length-1]||void 0))&&(p=function(e){return Array.isArray(e)?e:"number"==typeof e?[Li,e]:null==e?Mi:[e]}(n(i,c)),p[0]===Di))return p;if("children"in i&&i.children){const t=i;if(t.children&&p[0]!==Bi)for(u=(o?t.children.length:-1)+a,d=c.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(l=e(n,u,d)(),l[0]===Di)return l;u="number"==typeof l[1]?l[1]:u+a}}return p}}(e,void 0,[])()}(e,r,(function(e,t){const n=t[t.length-1],o=n?n.children.indexOf(e):void 0;return a(e,o,n)}),i)}function ji(e,t){const n=t.referenceType;let o="]";if("collapsed"===n?o+="[]":"full"===n&&(o+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+o}];const i=e.all(t),r=i[0];r&&"text"===r.type?r.value="["+r.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&"text"===a.type?a.value+=o:i.push({type:"text",value:o}),i}function Ui(e){const t=e.spread;return null==t?e.children.length>1:t}const qi=9,$i=32;function Hi(e){const t=String(e),n=/\r?\n|\r/g;let o=n.exec(t),i=0;const r=[];for(;o;)r.push(zi(t.slice(i,o.index),i>0,!0),o[0]),i=o.index+o[0].length,o=n.exec(t);return r.push(zi(t.slice(i),i>0,!1)),r.join("")}function zi(e,t,n){let o=0,i=e.length;if(t){let t=e.codePointAt(o);for(;t===qi||t===$i;)o++,t=e.codePointAt(o)}if(n){let t=e.codePointAt(i-1);for(;t===qi||t===$i;)i--,t=e.codePointAt(i-1)}return i>o?e.slice(o,i):""}const Gi={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",o={};t.lang&&(o.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:o,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",o=String(t.identifier).toUpperCase(),i=Ti(o.toLowerCase()),r=e.footnoteOrder.indexOf(o);let a,s=e.footnoteCounts.get(o);void 0===s?(s=0,e.footnoteOrder.push(o),a=e.footnoteOrder.length):a=r+1,s+=1,e.footnoteCounts.set(o,s);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const l={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,l),e.applyData(t,l)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),o=e.definitionById.get(n);if(!o)return ji(e,t);const i={src:Ti(o.url||""),alt:t.alt};null!==o.title&&void 0!==o.title&&(i.title=o.title);const r={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,r),e.applyData(t,r)},image:function(e,t){const n={src:Ti(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const o={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,o),e.applyData(t,o)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const o={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,o),e.applyData(t,o)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),o=e.definitionById.get(n);if(!o)return ji(e,t);const i={href:Ti(o.url||"")};null!==o.title&&void 0!==o.title&&(i.title=o.title);const r={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},link:function(e,t){const n={href:Ti(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const o={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},listItem:function(e,t,n){const o=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let o=-1;for(;!t&&++o<n.length;)t=Ui(n[o])}return t}(n):Ui(t),r={},a=[];if("boolean"==typeof t.checked){const e=o[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},o.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),r.className=["task-list-item"]}let s=-1;for(;++s<o.length;){const e=o[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?a.push(e):a.push(...e.children)}const c=o[o.length-1];c&&(i||"element"!==c.type||"p"!==c.tagName)&&a.push({type:"text",value:"\n"});const l={type:"element",tagName:"li",properties:r,children:a};return e.patch(t,l),e.applyData(t,l)},list:function(e,t){const n={},o=e.all(t);let i=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++i<o.length;){const e=o[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const r={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(o,!0)};return e.patch(t,r),e.applyData(t,r)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),o=n.shift(),i=[];if(o){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([o],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},r=Xt(t.children[1]),a=Kt(t.children[t.children.length-1]);r&&a&&(o.position={start:r,end:a}),i.push(o)}const r={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,r),e.applyData(t,r)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const o=n?n.children:void 0,i=0===(o?o.indexOf(t):1)?"th":"td",r=n&&"table"===n.type?n.align:void 0,a=r?r.length:t.children.length;let s=-1;const c=[];for(;++s<a;){const n=t.children[s],o={},a=r?r[s]:void 0;a&&(o.align=a);let l={type:"element",tagName:i,properties:o,children:[]};n&&(l.children=e.all(n),e.patch(n,l),l=e.applyData(n,l)),c.push(l)}const l={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(t,l),e.applyData(t,l)},text:function(e,t){const n={type:"text",value:Hi(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Vi,yaml:Vi,definition:Vi,footnoteDefinition:Vi};function Vi(){}const Wi={}.hasOwnProperty,Yi={};function Ji(e,t){e.position&&(t.position=function(e){const t=Xt(e),n=Kt(e);if(t&&n)return{start:t,end:n}}(e))}function Ki(e,t){let n=t;if(e&&e.data){const t=e.data.hName,o=e.data.hChildren,i=e.data.hProperties;"string"==typeof t&&("element"===n.type?n.tagName=t:n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}),"element"===n.type&&i&&Object.assign(n.properties,Ii(i)),"children"in n&&n.children&&null!=o&&(n.children=o)}return n}function Xi(e,t){const n=t.data||{},o=!("value"in t)||Wi.call(n,"hProperties")||Wi.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,o),e.applyData(t,o)}function Qi(e,t){const n=[];let o=-1;for(t&&n.push({type:"text",value:"\n"});++o<e.length;)o&&n.push({type:"text",value:"\n"}),n.push(e[o]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Zi(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function er(e,t){const n=function(e,t){const n=t||Yi,o=new Map,i=new Map,r=new Map,a={...Gi,...n.handlers},s={all:function(e){const t=[];if("children"in e){const n=e.children;let o=-1;for(;++o<n.length;){const i=s.one(n[o],e);if(i){if(o&&"break"===n[o-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=Zi(i.value)),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=Zi(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:Ki,definitionById:o,footnoteById:i,footnoteCounts:r,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,o=s.handlers[n];if(Wi.call(s.handlers,n)&&o)return o(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,o=Ii(n);return o.children=s.all(e),o}return Ii(e)}return(s.options.unknownHandler||Xi)(s,e,t)},options:n,patch:Ji,wrap:Qi};return Fi(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?o:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),s}(e,t),o=n.one(e,void 0),i=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ai,o=e.options.footnoteBackLabel||Pi,i=e.options.footnoteLabel||"Footnotes",r=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let c=-1;for(;++c<e.footnoteOrder.length;){const i=e.footnoteById.get(e.footnoteOrder[c]);if(!i)continue;const r=e.all(i),a=String(i.identifier).toUpperCase(),l=Ti(a.toLowerCase());let u=0;const d=[],p=e.footnoteCounts.get(a);for(;void 0!==p&&++u<=p;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof n?n:n(c,u);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+l+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof o?o:o(c,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const h=r[r.length-1];if(h&&"element"===h.type&&"p"===h.tagName){const e=h.children[h.children.length-1];e&&"text"===e.type?e.value+=" ":h.children.push({type:"text",value:" "}),h.children.push(...d)}else r.push(...d);const g={type:"element",tagName:"li",properties:{id:t+"fn-"+l},children:e.wrap(r,!0)};e.patch(i,g),s.push(g)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:r,properties:{...Ii(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}(n),r=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return i&&r.children.push({type:"text",value:"\n"},i),r}function tr(e,t){return e&&"run"in e?async function(n,o){const i=er(n,{file:o,...t});await e.run(i,o)}:function(n,o){return er(n,{file:o,...t||e})}}function nr(e){if(e)throw e}var or=n(849);function ir(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}const rr=function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');ur(e);let n,o=0,i=-1,r=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;r--;)if(47===e.codePointAt(r)){if(n){o=r+1;break}}else i<0&&(n=!0,i=r+1);return i<0?"":e.slice(o,i)}if(t===e)return"";let a=-1,s=t.length-1;for(;r--;)if(47===e.codePointAt(r)){if(n){o=r+1;break}}else a<0&&(n=!0,a=r+1),s>-1&&(e.codePointAt(r)===t.codePointAt(s--)?s<0&&(i=r):(s=-1,i=a));return o===i?i=a:i<0&&(i=e.length),e.slice(o,i)},ar=function(e){if(ur(e),0===e.length)return".";let t,n=-1,o=e.length;for(;--o;)if(47===e.codePointAt(o)){if(t){n=o;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},sr=function(e){ur(e);let t,n=e.length,o=-1,i=0,r=-1,a=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)o<0&&(t=!0,o=n+1),46===s?r<0?r=n:1!==a&&(a=1):r>-1&&(a=-1);else if(t){i=n+1;break}}return r<0||o<0||0===a||1===a&&r===o-1&&r===i+1?"":e.slice(r,o)},cr=function(...e){let t,n=-1;for(;++n<e.length;)ur(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){ur(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,o,i="",r=0,a=-1,s=0,c=-1;for(;++c<=e.length;){if(c<e.length)n=e.codePointAt(c);else{if(47===n)break;n=47}if(47===n){if(a===c-1||1===s);else if(a!==c-1&&2===s){if(i.length<2||2!==r||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2))if(i.length>2){if(o=i.lastIndexOf("/"),o!==i.length-1){o<0?(i="",r=0):(i=i.slice(0,o),r=i.length-1-i.lastIndexOf("/")),a=c,s=0;continue}}else if(i.length>0){i="",r=0,a=c,s=0;continue}t&&(i=i.length>0?i+"/..":"..",r=2)}else i.length>0?i+="/"+e.slice(a+1,c):i=e.slice(a+1,c),r=c-a-1;a=c,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);return 0!==n.length||t||(n="."),n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/"),t?"/"+n:n}(t)},lr="/";function ur(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const dr=function(){return"/"};function pr(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}const hr=["history","path","basename","stem","extname","dirname"];class gr{constructor(e){let t;t=e?pr(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":dr(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,o=-1;for(;++o<hr.length;){const e=hr[o];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)hr.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?rr(this.path):void 0}set basename(e){fr(e,"basename"),mr(e,"basename"),this.path=cr(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?ar(this.path):void 0}set dirname(e){yr(this.basename,"dirname"),this.path=cr(e||"",this.basename)}get extname(){return"string"==typeof this.path?sr(this.path):void 0}set extname(e){if(mr(e,"extname"),yr(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=cr(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){pr(e)&&(e=function(e){if("string"==typeof e)e=new URL(e);else if(!pr(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}(e)),fr(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?rr(this.path,this.extname):void 0}set stem(e){fr(e,"stem"),mr(e,"stem"),this.path=cr(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const o=this.message(e,t,n);throw o.fatal=!0,o}info(e,t,n){const o=this.message(e,t,n);return o.fatal=void 0,o}message(e,t,n){const o=new on(e,t,n);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}}function mr(e,t){if(e&&e.includes(lr))throw new Error("`"+t+"` cannot be a path: did not expect `"+lr+"`")}function fr(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function yr(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const br=function(e){const t=this.constructor.prototype,n=t[e],o=function(){return n.apply(o,arguments)};return Object.setPrototypeOf(o,t),o},vr={}.hasOwnProperty;class wr extends br{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=function(){const e=[],t={run:function(...t){let n=-1;const o=t.pop();if("function"!=typeof o)throw new TypeError("Expected function as last argument, not "+o);!function i(r,...a){const s=e[++n];let c=-1;if(r)o(r);else{for(;++c<t.length;)null!==a[c]&&void 0!==a[c]||(a[c]=t[c]);t=a,s?function(e,t){let n;return function(...t){const r=e.length>t.length;let a;r&&t.push(o);try{a=e.apply(this,t)}catch(e){if(r&&n)throw e;return o(e)}r||(a&&a.then&&"function"==typeof a.then?a.then(i,o):a instanceof Error?o(a):i(a))};function o(e,...o){n||(n=!0,t(e,...o))}function i(e){o(null,e)}}(s,i)(...a):o(null,...a)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}()}copy(){const e=new wr;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(or(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(Cr("data",this.frozen),this.namespace[e]=t,this):vr.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Cr("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const o=t.call(e,...n);"function"==typeof o&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Ir(e),n=this.parser||this.Parser;return _r("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),_r("process",this.parser||this.Parser),xr("process",this.compiler||this.Compiler),t?o(void 0,t):new Promise(o);function o(o,i){const r=Ir(e),a=n.parse(r);function s(e,n){e||!n?i(e):o?o(n):t(void 0,n)}n.run(a,r,(function(e,t,o){if(e||!t||!o)return s(e);const i=t,r=n.stringify(i,o);var a;"string"==typeof(a=r)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?o.value=r:o.result=r,s(e,o)}))}}processSync(e){let t,n=!1;return this.freeze(),_r("processSync",this.parser||this.Parser),xr("processSync",this.compiler||this.Compiler),this.process(e,(function(e,o){n=!0,nr(e),t=o})),Er("processSync","process",n),t}run(e,t,n){Sr(e),this.freeze();const o=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,r){const a=Ir(t);o.run(e,a,(function(t,o,a){const s=o||e;t?r(t):i?i(s):n(void 0,s,a)}))}}runSync(e,t){let n,o=!1;return this.run(e,t,(function(e,t){nr(e),n=t,o=!0})),Er("runSync","run",o),n}stringify(e,t){this.freeze();const n=Ir(t),o=this.compiler||this.Compiler;return xr("stringify",o),Sr(e),o(e,n)}use(e,...t){const n=this.attachers,o=this.namespace;if(Cr("use",this.frozen),null==e);else if("function"==typeof e)s(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?a(e):r(e)}return this;function i(e){if("function"==typeof e)s(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;s(t,n)}else r(e)}}function r(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(e.plugins),e.settings&&(o.settings=or(!0,o.settings,e.settings))}function a(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;)i(e[t])}}function s(e,t){let o=-1,i=-1;for(;++o<n.length;)if(n[o][0]===e){i=o;break}if(-1===i)n.push([e,...t]);else if(t.length>0){let[o,...r]=t;const a=n[i][1];ir(a)&&ir(o)&&(o=or(!0,a,o)),n[i]=[e,o,...r]}}}}const kr=(new wr).freeze();function _r(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function xr(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function Cr(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Sr(e){if(!ir(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Er(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ir(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new gr(e)}const Tr=[],Ar={allowDangerousHtml:!0},Pr=/^(https?|ircs?|mailto|xmpp)$/i,Nr=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Or(e){const t=e.allowedElements,n=e.allowElement,o=e.children||"",i=e.className,r=e.components,a=e.disallowedElements,s=e.rehypePlugins||Tr,l=e.remarkPlugins||Tr,u=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Ar}:Ar,d=e.skipHtml,p=e.unwrapDisallowed,h=e.urlTransform||Rr,g=kr().use(bi).use(l).use(tr,u).use(s),m=new gr;"string"==typeof o&&(m.value=o);for(const t of Nr)Object.hasOwn(e,t.from)&&(t.from,t.to&&t.to,t.id);const f=g.parse(m);let y=g.runSync(f,m);return i&&(y={type:"element",tagName:"div",properties:{className:i},children:"root"===y.type?y.children:[y]}),Fi(y,(function(e,o,i){if("raw"===e.type&&i&&"number"==typeof o)return d?i.children.splice(o,1):i.children[o]={type:"text",value:e.value},o;if("element"===e.type){let t;for(t in xn)if(Object.hasOwn(xn,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],o=xn[t];(null===o||o.includes(e.tagName))&&(e.properties[t]=h(String(n||""),t,e))}}if("element"===e.type){let r=t?!t.includes(e.tagName):!!a&&a.includes(e.tagName);if(!r&&n&&"number"==typeof o&&(r=!n(e,o,i)),r&&i&&"number"==typeof o)return p&&e.children?i.children.splice(o,1,...e.children):i.children.splice(o,1),o}})),function(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let o;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");o=function(e,t){return function(n,o,i,r){const a=Array.isArray(i.children),s=Xt(n);return t(o,i,r,a,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");i=t.jsx,r=t.jsxs,o=function(e,t,n,o){const a=Array.isArray(n.children)?r:i;return o?a(t,n,o):a(t,n)}}var i,r;const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:o,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?qt:Ut,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},s=pn(a,e,void 0);return s&&"string"!=typeof s?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}(y,{Fragment:c.Fragment,components:r,ignoreInvalidStyle:!0,jsx:c.jsx,jsxs:c.jsxs,passKeys:!0,passNode:!0})}function Rr(e){const t=e.indexOf(":"),n=e.indexOf("?"),o=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||o>-1&&t>o||Pr.test(e.slice(0,t))?e:""}var Mr={};function Lr(e){return[e]}function Dr(e,t,n){var o;if(e.length!==t.length)return!1;for(o=n;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}function Br(e,t){var n,o=t||Lr;function i(){n=new WeakMap}function r(){var t,i,r,a,s,c=arguments.length;for(a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];for(t=function(e){var t,o,i,r,a,s=n,c=!0;for(t=0;t<e.length;t++){if(!(a=o=e[t])||"object"!=typeof a){c=!1;break}s.has(o)?s=s.get(o):(i=new WeakMap,s.set(o,i),s=i)}return s.has(Mr)||((r=function(){var e={clear:function(){e.head=null}};return e}()).isUniqueByDependants=c,s.set(Mr,r)),s.get(Mr)}(s=o.apply(null,a)),t.isUniqueByDependants||(t.lastDependants&&!Dr(s,t.lastDependants,0)&&t.clear(),t.lastDependants=s),i=t.head;i;){if(Dr(i.args,a,1))return i!==t.head&&(i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.next=t.head,i.prev=null,t.head.prev=i,t.head=i),i.val;i=i.next}return i={val:e.apply(null,a)},a[0]=null,i.args=a,t.head&&(t.head.prev=i,i.next=t.head),t.head=i,i.val}return r.getDependants=o,r.clear=i,i(),r}function Fr(){return"simple"===("object"==typeof window&&"string"==typeof window._currentSiteType?window._currentSiteType:null)}const jr=window.wp.apiFetch;var Ur=n.n(jr),qr=n(833);const $r=n.n(qr)()("dops:analytics");let Hr,zr;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;const Gr={initialize:function(e,t,n){Gr.setUser(e,t),Gr.setSuperProps(n),Gr.identifyUser()},setGoogleAnalyticsEnabled:function(e,t=null){this.googleAnalyticsEnabled=e,this.googleAnalyticsKey=t},setMcAnalyticsEnabled:function(e){this.mcAnalyticsEnabled=e},setUser:function(e,t){zr={ID:e,username:t}},setSuperProps:function(e){Hr=e},assignSuperProps:function(e){Hr=Object.assign(Hr||{},e)},mc:{bumpStat:function(e,t){const n=function(e,t){let n="";if("object"==typeof e){for(const t in e)n+="&x_"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);$r("Bumping stats %o",e)}else n="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(t),$r('Bumping stat "%s" in group "%s"',t,e);return n}(e,t);Gr.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+n+"&t="+Math.random())},bumpStatWithPageView:function(e,t){const n=function(e,t){let n="";if("object"==typeof e){for(const t in e)n+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);$r("Built stats %o",e)}else n="&"+encodeURIComponent(e)+"="+encodeURIComponent(t),$r('Built stat "%s" in group "%s"',t,e);return n}(e,t);Gr.mcAnalyticsEnabled&&((new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+n+"&t="+Math.random())}},pageView:{record:function(e,t){Gr.tracks.recordPageView(e),Gr.ga.recordPageView(e,t)}},purchase:{record:function(e,t,n,o,i,r,a){Gr.ga.recordPurchase(e,t,n,o,i,r,a)}},tracks:{recordEvent:function(e,t){t=t||{},0===e.indexOf("akismet_")||0===e.indexOf("jetpack_")?(Hr&&($r("- Super Props: %o",Hr),t=Object.assign(t,Hr)),$r('Record event "%s" called with props %s',e,JSON.stringify(t)),window._tkq.push(["recordEvent",e,t])):$r('- Event name must be prefixed by "akismet_" or "jetpack_"')},recordJetpackClick:function(e){const t="object"==typeof e?e:{target:e};Gr.tracks.recordEvent("jetpack_wpa_click",t)},recordPageView:function(e){Gr.tracks.recordEvent("akismet_page_view",{path:e})},setOptOut:function(e){$r("Pushing setOptOut: %o",e),window._tkq.push(["setOptOut",e])}},ga:{initialized:!1,initialize:function(){let e={};Gr.ga.initialized||(zr&&(e={userId:"u-"+zr.ID}),window.ga("create",this.googleAnalyticsKey,"auto",e),Gr.ga.initialized=!0)},recordPageView:function(e,t){Gr.ga.initialize(),$r("Recording Page View ~ [URL: "+e+"] [Title: "+t+"]"),this.googleAnalyticsEnabled&&(window.ga("set","page",e),window.ga("send",{hitType:"pageview",page:e,title:t}))},recordEvent:function(e,t,n,o){Gr.ga.initialize();let i="Recording Event ~ [Category: "+e+"] [Action: "+t+"]";void 0!==n&&(i+=" [Option Label: "+n+"]"),void 0!==o&&(i+=" [Option Value: "+o+"]"),$r(i),this.googleAnalyticsEnabled&&window.ga("send","event",e,t,n,o)},recordPurchase:function(e,t,n,o,i,r,a){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,revenue:o,currency:a}),window.ga("ecommerce:addItem",{id:e,name:t,sku:n,price:i,quantity:r}),window.ga("ecommerce:send")}},identifyUser:function(){zr&&window._tkq.push(["identifyUser",zr.ID,zr.username])},setProperties:function(e){window._tkq.push(["setProperties",e])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},Vr=Gr,Wr=window.wp.coreData,Yr="jetpack_big_sky",Jr=/^[a-z_][a-z0-9_]*$/;function Kr(e,t){Jr.test(e)||console.error(`${t} names must match pattern: ^[a-z_][a-z0-9_]*$`)}function Xr(){const e=(0,m.select)(Qa);return e.getIsHandoff()?"handoff":e.getSiteMetadata()?.isOnboarded?"editor":"onboarding"}function Qr(){const e=(0,m.select)(Qa);return e?.getIsDevMode()||!1}function Zr(){const e=(0,m.select)(Wr.store).getEntityRecord("root","site")?.page_on_front,t=(0,m.select)(g.store).getCurrentPostId(),n=t===e;return{post_id:t,title:(0,m.select)(g.store).getEditedPostAttribute("title"),is_home_page:n}}function ea(e,t={}){Kr(e,"Event");const n={...t,...Zr(),sessionid:Qa.instantiate().store.getState().sessionId,phase:Xr(),is_test:Qr()};(function(e){Object.keys(e).forEach((e=>{Kr(e,"Property")}))})(n),Vr.tracks.recordEvent(`${Yr}_${e}`,{...n})}async function ta(e,t,n="",o="",i="",r=0){if(!e)return;const a={content:t,message_type:n,message_id:o,parent_message_id:i,is_test:Qr()};try{return await jr({path:"/wpcom/v2/big-sky/v1/session/"+encodeURIComponent(e)+"/action",method:"POST",data:a})}catch(e){ra.errorBreakLoop(r,"Error logging action: ",e)}}const na="undefined"!=typeof window&&window?.bigSkyInitialState?.isDevMode||!1;function oa(e,t,n=" "){return e&&e.length>0?e+n+t:t}const ia={info:na?console.info.bind(window.console):()=>{},warn:na?console.warn.bind(window.console):()=>{},_actionFromError(...e){const t=(0,m.select)(Qa).getSessionId();let n;return t&&(n=e.reduce(((e,t)=>{if("string"==typeof t)e.content=oa(e.content,t);else if(t instanceof Error)e.content=oa(e.content,`${t?.name}: ${t?.message}`),t?.stack&&(e.trace=oa(e.trace,t?.stack));else if(t instanceof Response)e.content=oa(e.content,`Response: ${t?.url} ${t?.status} ${t?.statusText}`,"\n\n");else if("object"!=typeof t||Array.isArray(t))try{e.extra=oa(e.extra,JSON.stringify(t))}catch(e){}else Object.entries(t).forEach((([t,n])=>{try{"string"!=typeof n&&(n=JSON.stringify(n)),e[t]=n}catch(e){}}));return e}),{content:"",trace:""})),[t,n]},error(...e){const[t,n]=ia._actionFromError(...e);n&&ta(t,n,G.ERROR),console.error.call(window.console,...e)},errorBreakLoop(e,...t){if(e>1)return void console.error.call(window.console,"[LOOP!]",...t);const[n,o]=ia._actionFromError(...t);o&&ta(n,o,G.ERROR,"","",e+1),console.error.call(window.console,"[LOOP?]",...t)}},ra=ia,aa="jetpack-ai-jwt-token",sa=18e5,ca=async(e,t=!0)=>{const n=await la(t);n&&n.token&&e(n.token)};async function la(e=!0){const t=localStorage.getItem(aa);let n;if(t&&(n=JSON.parse(t)),n&&n?.token&&n?.expire&&n?.expire>Date.now()&&e)return n;const o=window.JP_CONNECTION_INITIAL_STATE?.apiNonce,i=window.Jetpack_Editor_Initial_State?.wpcomBlogId;let r={token:"",blog_id:""};try{r=Fr()?await Ur()({path:"/wpcom/v2/sites/"+i+"/jetpack-openai-query/jwt",method:"POST"}):await Ur()({path:"/jetpack/v4/jetpack-ai-jwt?_cacheBuster="+Date.now(),credentials:"same-origin",headers:{"X-WP-Nonce":o},method:"POST"})}catch(e){ra.error("Failed to fetch Jetpack token:",e)}const a={token:r.token,blogId:r.blog_id,expire:Date.now()+sa};return ra.info("Storing new token"),localStorage.setItem(aa,JSON.stringify(a)),a}let ua=null;const da=[{title:"Headers",description:"The header section is typically located at the top of a website and contains essential information such as the brand's name, logo, navigation menu, and sometimes search functionality.",slug:"header"},{title:"Introduction",description:"Introduction sections are large, prominent areas at the top of a website that showcase key messages, images, or videos. They are designed to capture visitors' attention and encourage them to explore further.",slug:"intro"},{title:"About",description:"Informational sections provide details about a company, product, or service. They often mostly include text, to educate visitors and answer common questions.",slug:"about"},{title:"Testimonials",description:"Testimonials are statements from satisfied customers, clients, or users that highlight the benefits of a product or service.",slug:"testimonials"},{title:"Pricing Tiers",description:"Pricing tiers are used to display various pricing plans or options for products or services. They help customers compare features and costs, making it easier to choose the right plan for their needs.",slug:"pricing"},{title:"Services Offered",description:"Service offerings list the various services provided by a business, such as consulting, coaching, or training.",slug:"services"},{title:"Contact",description:"Contact sections allow visitors to see your location and get in touch with you.",slug:"contact"},{title:"Subscription Forms",description:"Subscription forms are used for recurring payments, memberships, or services. They require users to input their information and agree to terms and conditions before committing to a subscription.",slug:"newsletter"},{title:"Image Galleries",description:"Image galleries showcase collections of images that can be browsed, viewed, and sometimes downloaded or shared.",slug:"gallery"},{title:"Menu",description:"Menus showcase the food offerings available at a restaurant, cafe, or eatery. They often include categories, descriptions, and prices for each item.",slug:"menu"},{title:"Event Listings",description:"Event listings promote and provide details about upcoming events, conferences, meetings, or webinars.",slug:"events"},{title:"Blog Posts",description:"Blog posts are articles or entries published on a website's blog, often featuring news, updates, insights, or educational content.",slug:"posts"},{title:"Team",description:"Team sections showcase the people behind a business, including their names, roles, and sometimes images.",slug:"team"},{title:"Footers",description:"Footers are sections located at the bottom of a website, often containing important information such as copyright details, terms and conditions, and contact information.",slug:"footer"}],pa=da.reduce(((e,t)=>(e[t.slug]=t,e)),{}),ha=da;let ga=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t};const ma={PRIMARY_HEADING:"h1","core/heading":"h2","core/paragraph":"p","core/site-title":"st","core/button":"b"};function fa(e,t){const n=[];return e.forEach((e=>{if(e.innerBlocks?.length>0)n.push(...fa(e.innerBlocks,t||e?.attributes?.metadata?.patternCategory));else if("core/heading"===e.name||"core/paragraph"===e.name||"core/button"===e.name){const o="intro"===t&&"core/heading"===e.name?"PRIMARY_HEADING":e.name;let i;i="core/button"===e.name?"string"==typeof e.attributes.text?e.attributes.text:"Click here":"string"==typeof e.attributes.content?e.attributes.content:e.attributes.content?.originalHTML,n.push({name:o,clientId:e.clientId,example:i,block:e})}})),n}function ya(e,t,n){const o={"core/heading":30,"core/paragraph":60,"core/button":8},i={"core/heading":0,"core/paragraph":0,"core/button":0};if(0===e.length&&t){const e=[];return Object.keys(i).forEach((t=>{for(;i[t]<3;)i[t]++,e.push({t:ma[t],i:"SPARE",ln:o[t]})})),{contentForRequest:e,clientIdMap:{},blockMap:null}}const r={},a={},s=e.map((e=>{i[e.name]++;const o=ga(4);let s;return r[o]=e.clientId,t&&(a[e.clientId]=e.block),s=t?{t:ma[e.name],i:o,ln:e.example.length}:{t:ma[e.name],i:o,e:e.example},n&&(s.l=n),s}));return t&&Object.keys(i).forEach((e=>{for(;i[e]<3;)i[e]++,s.push({t:ma[e],i:"SPARE",ln:o[e]})})),{contentForRequest:s,clientIdMap:r,blockMap:t?a:null}}function ba(e,t){if(e?.innerBlocks){const n=e.innerBlocks.find((e=>e.attributes.className===t));if(n)return n;for(let n=0;n<e.innerBlocks.length;n++){const o=ba(e.innerBlocks[n],t);if(o)return o}}return!1}function va(e,t){if(e?.innerBlocks)for(let n=e.innerBlocks.length-1;n>=0;n--){const o=e.innerBlocks[n];if(o.attributes.className===t)return o;const i=va(o,t);if(i)return i}return!1}function wa({data:e,type:t,offset:n}){let o="";-1===n&&(n=0);for(let i=n%=e.length;i<e.length;i++)if(e[i][t])return o=e[i][t],{data:e,contentValue:o};return{data:e,contentValue:o}}function ka(e,t){let n=`\x3c!--\\s*wp:${t}\\s*.*?--\x3e.*?\x3c!--\\s*/wp:${t}\\s*--\x3e`;return"navigation"===t&&(n=`\x3c!--\\s*wp:${t}\\s*[^/]*?/--\x3e`),e.replace(new RegExp(n,"gs"),"")}const _a="undefined"!=typeof window&&window.bigSkyInitialState?.userLanguage?window.bigSkyInitialState.userLanguage:"English (United States)",xa=We.fromString(`## {{= it.role }}\n\n{{? it.context }}\n\n## Context:\n{{= it.context }}\n{{?}}\n\n{{? it.examplesDescription }}\n## Examples:\n{{= it.examplesDescription }}\n\n{{~it.examples :value }}\n- {{= value }}\n{{~}}\n\n{{?}}\n\n{{? it.do && it.do.length }}\n## Things you should do:\n\n- Respond in ${_a} unless the user explicitly asks for a different language.\n{{~it.do :value }}\n- {{= value }}\n{{~}}\n\n{{?}}\n\n{{? it.dont && it.dont.length }}\n## Things you should NEVER do:\n\n{{~it.dont :value }}\n- {{= value }}\n{{~}}\n\n{{?}}\n{{? it.additionalInstructions }}\n## Additional instructions:\n{{= it.additionalInstructions }}\n{{?}}\n`,["role","context","examplesDescription","examples","do","dont","additionalInstructions"]);function Ca(e){return xa.format({role:"You are an expert at generating realistic names, descriptions, dates, times, and locations for events that would be listed on a website when provided with a description of the website",do:["ALWAYS return an array of JSON objects as in the example response.","Events should be ordered by date, starting with the earliest.","Event descriptions should always be two short sentences long, never longer. Never use quotes (' or \") in the description.",`Dates should always be after today's date which is: ${(new Date).toLocaleDateString()} and formatted in this style: ${e}`],examplesDescription:"Here is an example response:",examples:['{ events: [\n\t\t\t\t\t{"name": "Event Name", "description": "Event Description", "date": "Event Date", "time": "Event Time", "location": "Event Location"},\n\t\t\t\t\t{"name": "Event Name", "description": "Event Description", "date": "Event Date", "time": "Event Time", "location": "Event Location"}\n\t\t\t] }']})}const Sa=xa.format({role:"You are an expert at generating services offered when provided with a description of the website.",do:["ALWAYS return an array of JSON objects as in the example response.","Each service has a short name, a brief description, and link text.","The description should be one sentence long, never longer.","The link text should be a short phrase or word used as a call to action."],examplesDescription:"Here is an example response:",examples:['{ services: [\n\t\t\t\t{"name": "Service Name", "description": "Service Description", "link": "Service Link"},\n\t\t\t\t{"name": "Service Name", "description": "Service Description", "link": "Service Link"}\n\t\t] }']}),Ea=xa.format({role:"You are an expert at generating realistic testimonials for a website when provided with a description of the website.",do:["ALWAYS return an array of JSON objects as in the example response.","Assume all testimonials are for a positive 5-star rating.",'Each testimonial should contain the following information:\n            - name: The name of the person giving the testimonial, in the format of "First Name" "Last Initial", e.g. "John D."\n            - handle: The social media handle of the person giving the testimonial, e.g. "@john_doe"\n             - review: The review given by the person, no more than 2 sentences long.'],examplesDescription:"Here is an example response:",examples:['{ testimonials: [\n\t\t\t\t{"name": "John D.", "handle": "@john_doe", "review": "This is a wonderful product that was received as advertised! I would buy it again!"},\n\t\t\t\t{"name": "John D.", "handle": "@john_doe", "review": "This is a wonderful product that was received as advertised! I would buy it again!"}\n\t\t] }']}),Ia={name:"events",getPrompts:function({conceptSection:e}){const t=e?.length?ba(e[0],"is-event-date"):null;let n="Jan 1, 2025";return t&&(n="string"==typeof t.attributes.content?t.attributes.content:t.attributes.content?.originalHTML),{system:Ca(n),user:"Generate 10 event names, descriptions, dates, and locations for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:r,ITEM_KEY:a}=X;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===r?c=i:t?.attributes?.metadata?.name===a&&c++;const l=["is-event-date","is-event-time","is-event-name","is-event-description","is-event-location"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedEventsData:n,contentValue:i}=wa({data:s,type:e.replace("is-event-",""),offset:c});s=n,o?o(t.clientId,{content:i}):t.attributes.content=i}}return t?.innerBlocks.forEach((t=>{c=e({rootBlock:t,data:s,updateBlockAttributes:o,startIndex:c})})),c}},Ta={name:"footer",preprocessSection:function(e){e.html=ka(e.html,"navigation")},getPrompts:function({siteLocation:e}){var t;return{system:(t=e?.name,xa.format({role:"You are an expert at generating realistic address, phone, email and opening hours for footer section of a page that would be listed on a website when provided with a description of the website.",context:`The address: ${t||"unknown"}`,examplesDescription:"Here are examples for each part of the footer section:",examples:["Address: 123 Example Street\nSan Franciso, CA 12345","Phone and email: (123) 456-7890\nadmin@example.com","Opening hours: Monday—Friday\n9am-5pm"],do:["Use the email, address, phone information in the site description if provided. Otherwise make up a realistic one."],additionalInstructions:'Your response will only be in valid JSON with no other content. All fields are required. Return the result as an array of JSON objects in the following format:\n            { "address": "Address in two lines", "phone-email": "Phone number and email address in two lines",\n\t\t\t"opening-hours": "Weekday from/to and time range for opening hours in two lines"}'})),user:"Generate the footer information for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:r,ITEM_KEY:a}=X;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===r?c=-1:t?.attributes?.metadata?.name===a&&c++;const l=["is-footer-address","is-footer-phone-email","is-footer-opening-hours"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedFooterData:n,contentValue:i}=wa({data:s,type:e.replace("is-footer-",""),offset:c});s=n,o?o(t.clientId,{content:i}):t.attributes.content=i}}return t?.innerBlocks.forEach((t=>{c=e({rootBlock:t,data:s,updateBlockAttributes:o,startIndex:c})})),c}};let Aa=!1;const Pa={name:"menu",getPrompts:function({siteLocation:e,numOfSections:t=2}){var n;return{system:(n=e?.name,xa.format({role:"An expert at generating realistic food menus for a website when provided with a description of the website.",do:["ALWAYS return an array of JSON objects as in the example response.","The sections and items in the menu should always pertain to food or drink and be relevant to the website's description.",'The menus you generate will contain specific sections like "Lunch", "Cakes", "Dinner", "Coffee" and be tailored to the website\'s description.',"Each section of the menu will contain menu items with a name, description, and realistic price in the local currency for the item.",`The currency should include only the symbol of the currency for the location of '${n}'. If you cannot determine the correct currency symbol, use '$'.`,"Item descriptions should always be one short sentence long, never longer."],dont:["Use the word 'Menu' in the section names.","Use the same item in multiple sections.","Use quotes (' or \") in the description.","Use markdown or HTML in the JSON response."],examplesDescription:"Here is an example response:",examples:['{ menu: [\n\t\t\t\t\t{"name": "Menu Section Name", "items": [{"name": "Item Name", "description": "Item Description", "currency": "Currency Symbol", "price": "Item Price"}]},\n\t\t\t\t\t{"name": "Menu Section Name", "items": [{"name": "Item Name", "description": "Item Description", "currency": "Currency Symbol", "price": "Item Price"}]}\n\t\t\t] }']})),user:`Generate ${t} menu sections, each with 8 menu items relevant for this website based on the description and reason the section exists.`}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,sectionHeading:i,replaceHeading:r,startIndex:a=-1}){const{ITEMS_KEY:s,ITEM_KEY:c}=X;let l=null;if(!n)return;t?.attributes?.metadata?.patternCategory?(l=JSON.parse(JSON.stringify(n)),Aa=!1):l=n;let u=a;t?.attributes?.metadata?.name===s?u=a:t?.attributes?.metadata?.name===c&&u++;const d=["is-menu-section-name","is-menu-item-name","is-menu-item-description","is-menu-item-currency","is-menu-item-price"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>d.includes(e)));if(e){if("is-menu-section-name"===e){if(!r)return;Aa=!1===Aa?0:1,a++}const{data:n,contentValue:s}=function({data:e,type:t,sectionIndex:n,sectionHeading:o,offset:i=0}){let r=n||0;o&&(r=Object.values(e).findIndex((e=>e.name===o)),-1===r&&(r=0));const a=e[r];let s="";if("section-name"===t)return s=a.name,{data:e,contentValue:s};const c=t.replace("item-","");for(let t=i%=a.items.length;t<a.items.length;t++)if(a.items[t][c])return s=a.items[t][c],{data:e,contentValue:s};return{data:e,contentValue:s}}({data:l,type:e.replace("is-menu-",""),sectionIndex:Aa,sectionHeading:i,offset:u});l=n,o?o(t.clientId,{content:s}):t.attributes.content=s}}for(const n of t.innerBlocks)u=e({rootBlock:n,data:l,updateBlockAttributes:o,sectionHeading:i,replaceHeading:r,startIndex:u});return u}};let Na=-1;const Oa={name:"pricing",getPrompts:function({siteLocation:e}){var t;return{system:(t=e?.name,xa.format({role:"You are an expert at generating pricing tiers for a website when provided with a description of the website.",do:["Generate a short title no more than 3 words, and a brief description as an overview of the pricing tiers.","The pricing tiers you generate will contain specific sections with varying levels of services tailored to the website's description.",`Each pricing tier will contain a name, the price in the local currency for the location of '${t}', and a list of the services included.`,"Make up prices for the tiers, but ensure they are realistic for the website's description and for the services provided.",`The currency should include only the symbol of the currency for the location of '${t}'. If you cannot determine the correct currency symbol, use '$'.`,"The list of services should be realistic and relevant to the website's description. Features for a preceding tier should be always be included in the next tier."],additionalInstructions:'Your response will only be in valid JSON with no other content. You will return each pricing tier in a JSON array in the following format:\n\n\t\t{\n\t\t\t"title": "Pricing Tier Section Title",\n\t\t\t"description": "Pricing Tier Section Description",\n\t\t\t"tiers": [\n\t\t\t\t{\n\t\t\t\t\t"name": "Basic",\n\t\t\t\t\t"price": "$50",\n\t\t\t\t\t"services": [ "Service 1", "Service 2", "Service 3", "Service 4" ]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "Standard",\n\t\t\t\t\t"price": "$100",\n\t\t\t\t\t"services": [ "Services from Basic Tier", "Service 5", "Service 6", "Service 7" ]\n\t\t\t\t}\n\t\t\t]\n\t\t}'})),user:"Generate 3 pricing tiers with 4 features in each tier. The first feature of the second tier should include all the features of the first tier, and so on."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:r,ITEM_KEY:a}=X;let s=null;if(!n)return;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===r?c=i:t?.attributes?.metadata?.name===a&&c++;const l=["is-pricing-title","is-pricing-description","is-pricing-tier-name","is-pricing-tier-price","is-pricing-tier-service","is-pricing-tier-service-checked"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){"is-pricing-tier-name"===e&&(i++,Na=-1),e.startsWith("is-pricing-tier-service")&&Na++;const{data:n,contentValue:r}=function({data:e,type:t,tierIndex:n,serviceIndex:o=0}){const i=Array.isArray(e)?e[0]:e;let r="";if(["title","description"].includes(t))return r=i[t],{data:e,contentValue:r};const a=t.replace("tier-",""),s=(n&&-1!==n?n:0)%i.tiers.length;if(["name","price"].includes(a))return r=i.tiers[s][a],{data:e,contentValue:r};const c=i.tiers[s].services;return["service"].includes(a)?(r=c[o],{data:e,contentValue:r}):["service-checked"].includes(a)?(r=`<b>✓</b> ${c[o]}`,{data:e,contentValue:r}):{data:e,contentValue:r}}({data:s,type:e.replace("is-pricing-",""),tierIndex:c,serviceIndex:Na});s=n,o?o(t.clientId,{content:r}):t.attributes.content=r}}for(const n of t.innerBlocks)c=e({rootBlock:n,data:s,updateBlockAttributes:o,startIndex:c});return c},preprocessSection:function(e){e.html=ka(e.html,"buttons")},isCachedContentValid:function(e){return e?.length>0&&e[0]?.tiers}},Ra={name:"services",getPrompts:function(){return{system:Sa,user:"Generate 6 services relevant for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:r,ITEM_KEY:a}=X;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===r?c=i:t?.attributes?.metadata?.name===a&&c++;const l=["is-service-name","is-service-description","is-service-link"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedServicesData:n,contentValue:i}=wa({data:s,type:e.replace("is-service-",""),offset:c});s=n,((e,t,n=null)=>{const o={"core/button":{text:t},"core/paragraph":e.attributes?.className?.includes("is-service-link")?{content:`<a href="#">${t}</a>`}:{content:t},default:{content:t}},i=o[e.name]||o.default;n?n(e.clientId,i):Object.assign(e.attributes,i)})(t,i,o)}}for(const n of t.innerBlocks)c=e({rootBlock:n,data:s,updateBlockAttributes:o,startIndex:c});return c}},Ma={name:"testimonials",getPrompts:function(){return{system:Ea,user:"Generate 4 testimonials for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:r,ITEM_KEY:a}=X;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===r?c=i:t?.attributes?.metadata?.name===a&&c++;const l=["is-testimonial-name","is-testimonial-handle","is-testimonial-review"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedTestimonialsData:n,contentValue:i}=wa({data:s,type:e.replace("is-testimonial-",""),offset:c});s=n;let r=i;"is-testimonial-name"===e?r=(0,z.__)("Testimonial generated by AI","big-sky"):"is-testimonial-handle"===e&&(
// translators: @generatedbyai is a fake account name we use to make it clear that an AI generated testimonial is AI generated.
r=(0,z.__)("@generatedbyai","big-sky")),o?o(t.clientId,{content:r}):t.attributes.content=r}}return t?.innerBlocks.forEach((t=>{c=e({rootBlock:t,data:s,updateBlockAttributes:o,startIndex:c})})),c}},La=window.wp.blocks;function Da(e){return"jetpack/map"===e.name?(0,La.createBlock)("core/group",{style:{dimensions:{minHeight:e.attributes.mapHeight}}},[e]):(e.innerBlocks=e.innerBlocks.map((e=>Da(e))),e)}const Ba={name:"contact",getPrompts:function({siteLocation:e}){var t;return{system:(t=e?.name,xa.format({role:"You are an expert at generating realistic descriptions, address, phone, email and opening hours for contact us page that would be listed on a website when provided with a description of the website",context:`The address: ${t||"unknown"}`,do:["If the site location name is provided you must always use it for the `address` property.","Contact Us descriptions should always be two short sentences long, never longer. Never use quotes (' or \") in the description.","Your response will always be in valid JSON and an array of objects with all the specified fields and no other content. All fields are required."],examplesDescription:"Here is an example response:",examples:["[{'address: 123 Example Street\nSan Franciso, CA 12345',\n\t\t\t'phone-email: (123) 456-7890\nadmin@example.com',\n\t\t\t'address-phone: 123 Example Street,\nSan Francisco, CA 12345\n(123)-456-7890',\n\t\t\t'opening-hours: Monday—Friday\n9am-5pm',\n\t\t\t'description: Contact us anytime for any questions or concerns.}]"]})),user:"Generate the contact information for this website based on the description and reason the section exists."}},replaceContent:function e({rootBlock:t,data:n,updateBlockAttributes:o,startIndex:i=-1}){const{ITEMS_KEY:r,ITEM_KEY:a}=X;if(!n)return;let s=null;s=t?.attributes?.metadata?.patternCategory?JSON.parse(JSON.stringify(n)):n;let c=i;t?.attributes?.metadata?.name===r?c=-1:t?.attributes?.metadata?.name===a&&c++;const l=["is-contact-description","is-contact-address","is-contact-phone-email","is-contact-address-phone","is-contact-opening-hours"];if(t?.attributes?.className){const e=t.attributes.className.split(" ").find((e=>l.includes(e)));if(e){const{updatedContactData:n,contentValue:i}=wa({data:s,type:e.replace("is-contact-",""),offset:c});s=n,o?o(t.clientId,{content:i}):t.attributes.content=i}}return t?.innerBlocks.forEach((t=>{c=e({rootBlock:t,data:s,updateBlockAttributes:o,startIndex:c})})),c},preprocessSection:function(e){const t=(0,La.parse)(e.html);e.html=(0,La.serialize)(t.map((e=>Da(e))))}},Fa={pricing:Oa,footer:Ta,contact:Ba},ja={events:Ia,menu:Pa,pricing:Oa,services:Ra,testimonials:Ma,contact:Ba,team:{name:"team"},footer:Ta},Ua=Object.keys(ja),qa=Object.keys(Fa);function $a(e){return e?.length>0}var Ha;const za={"gpt-3.5-turbo-0125":{inputCost:5e-4,outputCost:.0015},"gpt-4o":{inputCost:.005,outputCost:.015},"gpt-4-turbo":{inputCost:.01,outputCost:.03},"gpt-4o-mini":{inputCost:15e-5,outputCost:6e-4},"dall-e-3":{imageCost:.04}},Ga={"claude-3-5-sonnet-20241022":{inputCost:.003,outputCost:.015}},Va={bigSkyInitialState:window?.bigSkyInitialState,apiKey:"",currentUserMessage:"",pendingToolCallbacks:0,currentToolCall:"",hasRetriedChatRequest:!1,assistant:"",advancedChatModel:"gpt-4o",basicChatModel:"gpt-4o-mini",imageGenModel:"dall-e-3",openAIUsage:{},anthropicUsage:{},commands:{},stock_photos:{},selectedSectionContent:{},cachedContent:{},patternCategories:(()=>{if(!ha)return[];const e={};return ha.forEach((t=>{e[t.slug]||(e[t.slug]={description:t.description,title:t.title})})),e})(),remotePatterns:[],generatedPatterns:[],currentPageMetadata:{},newPageId:!1,delaySettings:{onboarding:{afterBlockProcessed:1e3,afterScrollToBlock:1500}},isAssistantButtonVisible:!1,isToolContainerVisible:!1,toolComponent:null,showThread:!1,chatComponents:[],dockView:Y.MENUS,onSelectedBlockAction:{},inputtedFiles:[],onInputtedFilesAction:{},showChatContinueButton:!1,chatContinueButtonOnClick:()=>{},showEditorWelcome:!1,isEditorReady:!1,isEditorIframeLoaded:!1,isTemplatePartContentReady:!1,lastSelectedBlock:null,lastCancelableAction:{},blockBeforeChanges:null,handoffStep:0,logSessions:!0,sessionId:H(),chosenCategories:[],chosenColors:[],chosenCustomColors:null,generatedVariations:[],chosenFonts:[],isBuildingSite:!1,currentHandoffArea:"welcome",userStyleWithSettings:{},currentColor:"",currentFont:"",imageStyle:"",isTyping:!1,siteMetadata:null!==(Ha=window?.bigSkyInitialState?.siteMetadata)&&void 0!==Ha?Ha:V,isMaximized:!1,initializedCustomScheme:!1,hideInput:!1,customVariationTemplates:[],currentPaletteColors:[],generatedPatternChunksAsJSON:[],generatedPatternAsBlocks:[],generatedPatternAsString:"",generatedPatternDummySectionClientId:null,generatedRootPatternClientId:null};async function Wa(e,t=!1){return new Promise((t=>setTimeout(t,e))).then(t)}const Ya={ID:1,URL:"https://dotcompatterns.wordpress.com/wp-content/uploads/2024/01/paint-wide-3.jpg"},Ja={runChatCompletion:(e,t=[],n,o=.1,i="text",r=!1)=>async({select:a,dispatch:s})=>{const c=await la(!r);if(!c)return;const l={model:e,messages:t,stream:!1,temperature:o,session_id:a.getSessionId()};n&&(l.tools=n),i&&(l.response_format=i);const u=window.bigSkyInitialState?.isLocalGraph,d=new(u?M:A)({apiKey:c.token,feature:"big-sky",sessionId:a.getSessionId()});ua=d;try{const t=await d.call(l);return s.logOpenAIUsage(e,t.usage),t}catch(a){if("AbortError"===a.name)throw a;return r?(ra.error("OpenAI error",a),null):s.runChatCompletion(e,t,n,o,i,!0)}},generateImage:({model:e,prompt:t,n=1,size:o,response_format:i="url",image_format:r="PNG",retry:a=!1})=>async({select:s,dispatch:c})=>{try{const l=await la(!a);if(!l)return;const u="https://public-api.wordpress.com/wpcom/v2/jetpack-ai-image",d={model:e,prompt:t,n,size:o,response_format:i,remove_background:!0,image_format:r,feature:"big-sky",session_id:s.getSessionId()},p=await fetch(u,{method:"POST",headers:{Authorization:`Bearer ${l.token}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(p.status>=300)return a?(ra.error("Error calling Image Generation API: ",h),null):c.generateImage({model:e,prompt:t,n,size:o,response_format:i,image_format:r,retry:!0});const h=await p.json();return c.logOpenAIUsage(e,h.usage),h}catch(s){return a?(ra.error("OpenAI error",s),null):c.generateImage({model:e,prompt:t,n,size:o,response_format:i,image_format:r,retry:!0})}},logOpenAIUsage:function(e,t){return{type:"LOG_OPENAI_USAGE",payload:{model:e,usage:t}}},nextStockPhoto:(e,t)=>async({dispatch:n,resolveSelect:o})=>{const i=await o.getPhotosFromPexels(e,t);let r;return i?.photos&&0!==i?.photos.length||(ra.error("Photos not set - falling back to default"),i.photos=[Ya]),i.photos=i.photos.filter(((e,t,n)=>t===n.findIndex((t=>t.ID===e.ID)))),i.photos.sort((()=>.5-Math.random())),r=1===i.photos.length?i.photos[0]:i.photos.shift(),n({type:"SET_STOCK_PHOTOS",payload:i,topic:e}),r},removeOldestMessage:()=>({type:"SHIFT_MESSAGE"}),setLastSelectedBlock:e=>({type:"SET_LAST_SELECTED_BLOCK",payload:e}),setIsAssistantButtonVisible:e=>({type:"SET_IS_ASSISTANT_BUTTON_VISIBLE",payload:e}),setIsToolContainerVisible:e=>({type:"SET_IS_TOOL_CONTAINER_VISIBLE",payload:e}),setToolComponent:e=>({type:"SET_TOOL_COMPONENT",payload:e}),setCurrentUserMessage:e=>({type:"SET_CURRENT_USER_MESSAGE",payload:e}),archiveMessages:()=>({type:"ARCHIVE_MESSAGES"}),archiveMessage:e=>({type:"ARCHIVE_MESSAGE",payload:e}),setLogSessions:e=>({type:"SET_LOG_SESSIONS",payload:e}),setSessionLogged:e=>({type:"SET_SESSION_LOGGED",payload:e}),deleteMessage:e=>({type:"DELETE_MESSAGE",payload:e}),setSelectedSectionContent:e=>({type:"SET_PATTERN_SHUFFLING_CONTENT",payload:e}),clearSelectedSectionContent:()=>({type:"CLEAR_PATTERN_SHUFFLING_CONTENT"}),setIsEditorReady:e=>({type:"SET_IS_EDITOR_READY",payload:e}),setIsEditorIframeLoaded:e=>({type:"SET_IS_EDITOR_IFRAME_LOADED",payload:e}),addCachedContent:e=>({type:"ADD_CACHED_CONTENT",payload:e}),addCachedImage:e=>({type:"ADD_CACHED_IMAGE",payload:e}),addCommand:e=>({type:"ADD_COMMAND",payload:e}),resetCachedContent:()=>(localStorage.removeItem(`bigSkyCachedContent${window.Jetpack_Editor_Initial_State?.wpcomBlogId}`),{type:"SET_CACHED_CONTENT",payload:{}}),setRemotePatterns:(e,t)=>({type:"SET_REMOTE_PATTERNS",payload:[e,t]}),setGeneratedPatterns:e=>({type:"SET_GENERATED_PATTERNS",payload:e}),setIsEditingPageLayout:e=>({type:"SET_IS_EDITING_PAGE_LAYOUT",payload:e}),setCurrentPageMetadata:e=>({type:"SET_CURRENT_PAGE_METADATA",payload:e}),setIsBuildingSite:e=>({type:"SET_IS_BUILDING_SITE",payload:e}),setIsHandoff:e=>({type:"SET_IS_HANDOFF",payload:e}),setCurrentHandoffArea:e=>({type:"SET_CURRENT_HANDOFF_AREA",payload:e}),setChatComponents:e=>({type:"SET_CHAT_COMPONENTS",payload:e}),setShowThread:e=>({type:"SET_SHOW_THREAD",payload:e}),setCurrentToolCall:e=>({type:"SET_CURRENT_TOOL_CALL",payload:e}),incrementPendingToolCallbacks:()=>({type:"INCREMENT_PENDING_TOOL_CALLBACKS"}),decrementPendingToolCallbacks:()=>({type:"DECREMENT_PENDING_TOOL_CALLBACKS"}),setDockView:e=>({type:"SET_DOCK_VIEW",payload:e}),setLastCancelableAction:e=>({type:"SET_LAST_CANCELABLE_ACTION",payload:e}),setChosenCategories:e=>({type:"SET_CHOSEN_CATEGORIES",payload:e}),setChosenColors:e=>({type:"SET_CHOSEN_COLORS",payload:e}),setChosenCustomColors:e=>({type:"SET_CHOSEN_CUSTOM_COLORS",payload:e}),setChosenFonts:e=>({type:"SET_CHOSEN_FONTS",payload:e}),setBlockBeforeChanges:e=>({type:"SET_BLOCK_BEFORE_CHANGES",payload:e}),setOnSelectedBlockAction:e=>({type:"SET_ON_SELECTED_BLOCK_ACTION",payload:e}),setIsTemplatePartContentReady:e=>({type:"SET_IS_TEMPLATE_PART_CONTENT_READY",payload:e}),setUserStyleWithSettings:e=>({type:"SET_USER_STYLE_WITH_SETTINGS",payload:e}),setInputtedFiles:e=>({type:"SET_INPUTTED_FILES",payload:e}),setOnInputtedFilesAction:e=>({type:"SET_ON_INPUTTED_FILES_ACTION",payload:e}),setShowChatContinueButton:e=>({type:"SET_SHOW_CHAT_CONTINUE_BUTTON",payload:e}),setChatContinueButtonOnClick:e=>({type:"SET_CHAT_CONTINUE_BUTTON_ON_CLICK",payload:e}),setCurrentColor:e=>({type:"SET_CURRENT_COLOR",payload:e}),setInitializedCustomScheme:e=>({type:"SET_INITIALIZED_CUSTOM_SCHEME",payload:e}),pushGeneratedVariations:e=>({type:"PUSH_GENERATED_VARIATIONS",payload:e}),setCurrentFont:e=>({type:"SET_CURRENT_FONT",payload:e}),setImageStyle:e=>({type:"SET_IMAGE_STYLE",payload:e}),setIsTyping:e=>({type:"SET_IS_TYPING",payload:e}),setApiKey:e=>({type:"SET_API_KEY",payload:e}),setHasRetriedChatRequest:e=>({type:"SET_HAS_RETRIED_CHAT_REQUEST",payload:e}),setSiteMetadata:e=>({type:"SET_SITE_METADATA",payload:e}),setHandoffStep:e=>({type:"SET_HANDOFF_STEP",payload:e}),resetStore:()=>({type:"RESET_STORE"}),setIsMaximized:e=>({type:"SET_IS_MAXIMIZED",payload:e}),setHideInput:e=>({type:"SET_HIDE_INPUT",payload:e}),setShowEditorWelcome:e=>({type:"SET_SHOW_EDITOR_WELCOME",payload:e}),setAssistant:e=>({type:"SET_ASSISTANT",payload:e}),setGeneratedPatternAsString:e=>({type:"SET_GENERATED_PATTERN_AS_STRING",payload:e}),setGeneratedPatternChunksAsJSON:e=>({type:"SET_GENERATED_PATTERN_CHUNKS_AS_JSON",payload:e}),setGeneratedPatternAsBlocks:e=>({type:"SET_GENERATED_PATTERN_AS_BLOCKS",payload:e}),setGeneratedPatternDummySectionClientId:e=>({type:"SET_GENERATED_PATTERN_DUMMY_SECTION_CLIENT_ID",payload:e}),setGeneratedRootPatternClientId:e=>({type:"SET_GENERATED_ROOT_PATTERN_CLIENT_ID",payload:e}),logAnthropicUsage:(e,t)=>({type:"LOG_ANTHROPIC_USAGE",payload:{model:e,usage:t}}),setCurrentPaletteColors:e=>({type:"SET_CURRENT_PALETTE_COLORS",payload:e}),setNewPageId:e=>({type:"SET_NEW_PAGE_ID",payload:e})},Ka=Br((e=>e.messages.filter((e=>!e.archived))),(e=>[e.messages])),Xa=Br((e=>{const t={};return e.bigSkyInitialState?.siteIntent&&(t.siteIntent=e.bigSkyInitialState.siteIntent),e.bigSkyInitialState?.siteGoals&&e.bigSkyInitialState.siteGoals.length>0&&(t.siteGoals=e.bigSkyInitialState.siteGoals),t}),(e=>[e.bigSkyInitialState])),Qa=(0,m.createReduxStore)("ai-assembler",{reducer:function(e=Va,t){var n,o;const i=`bigSkyCachedContent${window.Jetpack_Editor_Initial_State?.wpcomBlogId}`;switch(t.type){case"SET_LAST_SELECTED_BLOCK":return{...e,lastSelectedBlock:t.payload};case"SET_IS_ASSISTANT_BUTTON_VISIBLE":return{...e,isAssistantButtonVisible:t.payload};case"SET_IS_TOOL_CONTAINER_VISIBLE":return{...e,isToolContainerVisible:t.payload};case"SET_TOOL_COMPONENT":return{...e,toolComponent:t.payload};case"SET_CURRENT_USER_MESSAGE":return{...e,currentUserMessage:t.payload};case"LOG_OPENAI_USAGE":const{model:r,usage:a={}}=t.payload,s={completionTokens:0,promptTokens:0,totalTokens:0,totalRequests:0,estimatedCost:0,...e.openAIUsage[r]};s.completionTokens+=a.completion_tokens,s.promptTokens+=a.prompt_tokens,s.totalTokens+=a.total_tokens,s.totalRequests+=1;const c=function(e,t,n){if(za[e]){const{inputCost:o,outputCost:i}=za[e];return t/1e3*o+n/1e3*i}return(t+n)/1e3*.03}(r,a.prompt_tokens,a.completion_tokens);return s.estimatedCost+=c,{...e,openAIUsage:{...e.openAIUsage,[r]:s}};case"LOG_ANTHROPIC_USAGE":const{model:l,usage:u={}}=t.payload,d={inputTokens:0,outputTokens:0,totalTokens:0,totalRequests:0,estimatedCost:0,...e.anthropicUsage[l]};d.inputTokens+=u.input_tokens||0,d.outputTokens+=u.output_tokens||0,d.totalTokens=d.inputTokens+d.outputTokens,d.totalRequests+=1;const p=function(e,t,n){if(Ga[e]){const{inputCost:o,outputCost:i}=Ga[e];return t/1e3*o+n/1e3*i}return 0}(l,u.input_tokens||0,u.output_tokens||0);return d.estimatedCost+=p,{...e,anthropicUsage:{...e.anthropicUsage,[l]:d}};case"SET_LOG_SESSIONS":return{...e,logSessions:t.payload};case"SET_SESSION_ID":return{...e,sessionId:t.payload};case"SET_SESSION_LOGGED":return{...e,sessionLogged:t.payload};case"SET_STOCK_PHOTOS":return{...e,stock_photos:{...e.stock_photos,[t.topic]:t.payload}};case"SET_PATTERN_SHUFFLING_CONTENT":return{...e,selectedSectionContent:{...e.selectedSectionContent,...t.payload}};case"CLEAR_PATTERN_SHUFFLING_CONTENT":return{...e,selectedSectionContent:{}};case"SET_IS_EDITOR_READY":return{...e,isEditorReady:t.payload};case"SET_IS_EDITOR_IFRAME_LOADED":return{...e,isEditorIframeLoaded:t.payload};case"ADD_CACHED_CONTENT":const h={p:"paragraph",h2:"heading",b:"button"}[t.payload.type],g=t.payload.category,m=!!t.payload.append;let f;if(Ua.includes(g)){const n=Array.isArray(t.payload.content)?t.payload.content:[t.payload.content];f={...e.cachedContent},f[g]&&!t.payload.clear||(f[g]=[]);const o="pricing"===g?"title":"name";n.forEach((e=>{const t=f[g].findIndex((t=>t[o]===e[o]));if(-1===t)f[g].push(e);else if(m)if("menu"===g||"pricing"===g){const n="menu"===g?"items":"tiers";f[g][t][n].push(...e[n])}else f[g].push(e);else f[g][t]=e}))}else{const n=`${g}-${h}`;f={...e.cachedContent,[n]:[...e.cachedContent[n]?e.cachedContent[n]:[],t.payload.content]}}return localStorage.setItem(i,JSON.stringify({...f,lastUpdated:Date.now()})),{...e,cachedContent:f};case"SET_CACHED_CONTENT":return localStorage.setItem(i,JSON.stringify({...t.payload,lastUpdated:Date.now()})),{...e,cachedContent:t.payload};case"ADD_CACHED_IMAGE":return{...e,cachedContent:{...e.cachedContent,images:[...e.cachedContent.images?e.cachedContent.images:[],t.payload]}};case"ADD_COMMAND":return{...e,commands:{...e.commands,...t.payload}};case"SET_REMOTE_PATTERNS":const[y,b]=t.payload;return{...e,remotePatterns:{...e.remotePatterns,[b]:y}};case"SET_GENERATED_PATTERNS":return{...e,generatedPatterns:t.payload};case"SET_IS_EDITING_PAGE_LAYOUT":return{...e,isEditingPageLayout:t.payload};case"SET_CURRENT_PAGE_METADATA":return{...e,currentPageMetadata:t.payload};case"SET_IS_BUILDING_SITE":return{...e,isBuildingSite:t.payload};case"SET_IS_HANDOFF":return{...e,isHandoff:t.payload};case"SET_CURRENT_HANDOFF_AREA":return{...e,currentHandoffArea:t.payload};case"SET_CHAT_COMPONENTS":return{...e,chatComponents:t.payload};case"SET_SHOW_THREAD":return{...e,showThread:t.payload};case"SET_CURRENT_TOOL_CALL":return{...e,currentToolCall:t.payload};case"INCREMENT_PENDING_TOOL_CALLBACKS":return{...e,pendingToolCallbacks:e.pendingToolCallbacks+1};case"DECREMENT_PENDING_TOOL_CALLBACKS":return{...e,pendingToolCallbacks:e.pendingToolCallbacks-1};case"SET_DOCK_VIEW":return{...e,dockView:t.payload};case"SET_LAST_CANCELABLE_ACTION":return null===t.payload?{...e,lastCancelableAction:{}}:{...e,lastCancelableAction:{...e.lastCancelableAction,...t.payload}};case"SET_CHOSEN_CATEGORIES":return{...e,chosenCategories:t.payload};case"SET_CHOSEN_COLORS":return{...e,chosenColors:t.payload};case"SET_CHOSEN_CUSTOM_COLORS":return{...e,chosenCustomColors:t.payload};case"SET_INITIALIZED_CUSTOM_SCHEME":return{...e,initializedCustomScheme:t.payload};case"PUSH_GENERATED_VARIATIONS":return{...e,generatedVariations:[...t.payload,...e.generatedVariations]};case"SET_CHOSEN_FONTS":return{...e,chosenFonts:t.payload};case"SET_IMAGE_STYLE":return{...e,imageStyle:t.payload};case"SET_BLOCK_BEFORE_CHANGES":return{...e,blockBeforeChanges:t.payload};case"SET_ON_SELECTED_BLOCK_ACTION":return{...e,onSelectedBlockAction:t.payload};case"SET_IS_TEMPLATE_PART_CONTENT_READY":return{...e,isTemplatePartContentReady:t.payload};case"SET_USER_STYLE_WITH_SETTINGS":return{...e,userStyleWithSettings:t.payload};case"SET_INPUTTED_FILES":const v=null!==(n=e.inputtedFiles)&&void 0!==n?n:[],w=null!==(o=t.payload)&&void 0!==o?o:[];for(const e of v)w.some((t=>t.url===e.url))||URL.revokeObjectURL(e.url);return{...e,inputtedFiles:w};case"SET_ON_INPUTTED_FILES_ACTION":return{...e,onInputtedFilesAction:t.payload};case"SET_SHOW_CHAT_CONTINUE_BUTTON":return{...e,showChatContinueButton:t.payload};case"SET_CHAT_CONTINUE_BUTTON_ON_CLICK":return{...e,chatContinueButtonOnClick:t.payload};case"SET_CURRENT_COLOR":return{...e,currentColor:t.payload};case"SET_CURRENT_FONT":return{...e,currentFont:t.payload};case"SET_IS_TYPING":return{...e,isTyping:t.payload};case"SET_API_KEY":return{...e,apiKey:t.payload};case"SET_HAS_RETRIED_CHAT_REQUEST":return{...e,hasRetriedChatRequest:t.payload};case"SET_SITE_METADATA":return{...e,siteMetadata:{...e.siteMetadata,...t.payload}};case"SET_HANDOFF_STEP":return{...e,handoffStep:t.payload};case"RESET_STORE":return{...Va,apiKey:e.apiKey,stock_photos:e.stock_photos,cachedContent:e.cachedContent,patternCategories:e.patternCategories,remotePatterns:e.remotePatterns,currentPageMetadata:e.currentPageMetadata,siteMetadata:e.siteMetadata};case"SET_IS_MAXIMIZED":return{...e,isMaximized:t.payload};case"SET_HIDE_INPUT":return{...e,hideInput:t.payload};case"SET_SHOW_EDITOR_WELCOME":return{...e,showEditorWelcome:t.payload};case"SET_ASSISTANT":return{...e,assistant:t.payload};case"SET_CUSTOM_VARIATION_TEMPLATES":return{...e,customVariationTemplates:t.payload};case"SET_GENERATED_PATTERN_CHUNKS_AS_JSON":return Array.isArray(t.payload)&&0===t.payload.length?{...e,generatedPatternChunksAsJSON:[]}:{...e,generatedPatternChunksAsJSON:[...e.generatedPatternChunksAsJSON,...Array.isArray(t.payload)?t.payload:[t.payload]]};case"SET_GENERATED_PATTERN_AS_BLOCKS":return{...e,generatedPatternAsBlocks:t.payload};case"SET_GENERATED_PATTERN_AS_STRING":return{...e,generatedPatternAsString:t.payload};case"SET_GENERATED_PATTERN_DUMMY_SECTION_CLIENT_ID":return{...e,generatedPatternDummySectionClientId:t.payload};case"SET_GENERATED_ROOT_PATTERN_CLIENT_ID":return{...e,generatedRootPatternClientId:t.payload};case"SET_CURRENT_PALETTE_COLORS":return{...e,currentPaletteColors:t.payload};case"SET_NEW_PAGE_ID":return{...e,newPageId:t.payload};default:return e}},actions:Ja,selectors:{getAdditionalContext:Xa,getCurrentMessages:Ka,getCustomVariationTemplates:e=>e.customVariationTemplates,getAllMessages:e=>e.messages,currentUserMessage:e=>e.currentUserMessage,getLastSelectedBlock:e=>e.lastSelectedBlock,getIsAssistantButtonVisible:e=>e.isAssistantButtonVisible,isToolContainerVisible:e=>e.isToolContainerVisible,getToolComponent:e=>e.toolComponent,getOpenAIChatUsage:e=>e.openAIUsage[e.advancedChatModel],getOpenAIChat35Usage:e=>e.openAIUsage["gpt-3.5-turbo-0125"],getOpenAIImageGenUsage:e=>e.openAIUsage[e.imageGenModel],getAnthropicUsage:e=>e.anthropicUsage["claude-3-5-sonnet-20241022"],getAdvancedChatModel:e=>e.advancedChatModel,getBasicChatModel:e=>e.basicChatModel,getImageGenModel:e=>e.imageGenModel,shouldLogSessions:e=>e.logSessions,getSessionId:e=>e.sessionId,isSessionLogged:e=>e.sessionLogged,getDelaySettings:e=>e.delaySettings,getPhotosFromPexels:(e,t)=>e.stock_photos[t]||{},getSelectedSectionContent:e=>e.selectedSectionContent,getIsEditorReady:e=>e.isEditorReady,getIsEditorIframeLoaded:e=>e.isEditorIframeLoaded,getCachedContent:e=>e.cachedContent,getCommands:e=>e.commands,getPatternCategories:e=>e.patternCategories,getIsComingSoon:e=>e.bigSkyInitialState?.isComingSoon||!1,getIsBlogPrivate:e=>e.bigSkyInitialState?.isBlogPrivate||!1,getIsDevMode:e=>!!e.bigSkyInitialState?.isDevMode,getSiteLaunchStatus:e=>e.bigSkyInitialState?.launchStatus||"",getUserLocale:e=>e.bigSkyInitialState?.userLocale||"en_US",getUserLanguage:e=>e.bigSkyInitialState?.userLanguage||"English (United States)",getRemotePatterns:(e,t)=>e.remotePatterns[t],getGeneratedPatterns:e=>e.generatedPatterns,getIsEditingPageLayout:e=>e.isEditingPageLayout,getCurrentPageMetadata:e=>e.currentPageMetadata,getIsBuildingSite:e=>e.isBuildingSite,getIsHandoff:e=>e.isHandoff,getCurrentHandoffArea:e=>e.currentHandoffArea,getChatComponents:e=>e.chatComponents,getShowThread:e=>e.showThread,getCurrentToolCall:e=>e.currentToolCall,getPendingToolCallbacks:e=>e.pendingToolCallbacks,getDockView:e=>e.dockView,getLastCancelableAction:e=>e.lastCancelableAction,getChosenCategories:e=>e.chosenCategories,getChosenColors:e=>e.chosenColors,getChosenCustomColors:e=>e.chosenCustomColors,getInitializedCustomScheme:e=>e.initializedCustomScheme,getGeneratedVariations:e=>e.generatedVariations,getChosenFonts:e=>e.chosenFonts,getBlockBeforeChanges:e=>e.blockBeforeChanges,getOnSelectedBlockAction:e=>e.onSelectedBlockAction,getIsTemplatePartContentReady:e=>e.isTemplatePartContentReady,getUserStyleWithSettings:e=>e.userStyleWithSettings,getInputtedFiles:e=>e.inputtedFiles,getOnInputtedFilesAction:e=>e.onInputtedFilesAction,getShowChatContinueButton:e=>e.showChatContinueButton,getChatContinueButtonOnClick:e=>e.chatContinueButtonOnClick,getCurrentColor:e=>e.currentColor,getCurrentFont:e=>e.currentFont,getImageStyle:e=>e.imageStyle,getIsTyping:e=>e.isTyping,getApiKey:e=>e.apiKey,getHasRetriedChatRequest:e=>e.hasRetriedChatRequest,getSiteMetadata:e=>e.siteMetadata,getHandoffStep:e=>e.handoffStep,getIsMaximized:e=>e.isMaximized,getHideInput:e=>e.hideInput,getShowEditorWelcome:e=>e.showEditorWelcome,getAssistant:e=>e.assistant,getGeneratedPatternChunksAsJSON:e=>e.generatedPatternChunksAsJSON,getGeneratedPatternAsBlocks:e=>e.generatedPatternAsBlocks,getGeneratedPatternAsString:e=>e.generatedPatternAsString,getGeneratedPatternDummySectionClientId:e=>e.generatedPatternDummySectionClientId,getGeneratedRootPatternClientId:e=>e.generatedRootPatternClientId,getCurrentPaletteColors:e=>e.currentPaletteColors,getNewPageId:e=>e.newPageId},resolvers:{getCachedContent:()=>({dispatch:e})=>{let t={};const n=localStorage.getItem(`bigSkyCachedContent${window.Jetpack_Editor_Initial_State?.wpcomBlogId}`);if(n)try{t=JSON.parse(n)}catch(e){ra.error("Failed to parse cached content",e)}e({type:"SET_CACHED_CONTENT",payload:t})},getPhotosFromPexels:(e,t)=>{const n={foodAndBeverage:"food and drink",business:"business people",blog:"writing",portfolio:"art",personal:"writing"};return async({dispatch:o,select:i})=>{const r=async(e,t,n=3)=>{for(let o=1;o<=n;o++)try{const n=await la(1===o);if(!n)throw new Error("No Jetpack token");const i=await fetch(`https://public-api.wordpress.com/wpcom/v2/meta/external-media/pexels?number=${t}&path=recent&search=`+encodeURIComponent(e),{headers:{Authorization:`X_JETPACK_JWT ${n.token}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const r=await i.json();return r?.media||[]}catch(e){if(o>=n)throw e;const t=Math.min(1e3*Math.pow(2,o-1),5e3);await Wa(t),ra.info(`Attempt ${o} failed, retrying after ${t}ms delay...`)}return[]};try{const a=await r(e,t);let s=[...a];if(a.length<t){const e=n[i.getSiteMetadata()?.siteType]||"people or places",o=t-a.length,c=await r(e,o);s=[...s,...c]}0===s.length&&(s=[Ya]),o({type:"SET_STOCK_PHOTOS",payload:{index:0,photos:s},topic:e})}catch(t){ra.error("Failed to fetch stock photos from Pexels after retry",t),o({type:"SET_STOCK_PHOTOS",payload:{index:0,photos:[Ya]},topic:e})}}},getRemotePatterns:e=>async({dispatch:t})=>{const n=["header","menu","intro","link-in-bio","team","posts","events","about","services"];try{await(async(o=3)=>{for(let i=1;i<=o;i++)try{const o=await fetch(`https://public-api.wordpress.com/rest/v1.1/ptk/patterns/${encodeURIComponent(e)}?post_type=wp_block&per_page=10000`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const i=await o.json();if(i){const o=i.filter((e=>!!n.some((t=>e.categories?.[t]))||e.is_included_in_big_sky)),r=[...new Set(ha.map((e=>e.slug)))];return o.forEach((e=>{const t=e.categories;if(0!==Object.keys(t).length){for(const n in t)if(r.includes(n)){e.category=n;break}qa.includes(e.category)&&Fa[e.category].preprocessSection(e)}})),void t({type:"SET_REMOTE_PATTERNS",payload:[o,e]})}}catch(e){if(i>=o)throw ra.error(`Failed to fetch remote patterns after ${o} attempts`,e),e;const t=Math.min(1e3*Math.pow(2,i-1),5e3);await Wa(t),ra.info(`Attempt ${i} failed, retrying after ${t}ms delay...`)}})()}catch(e){ra.error("All retry attempts failed to fetch remote patterns",e)}},getCustomVariationTemplates:()=>async({dispatch:e})=>{e({type:"SET_CUSTOM_VARIATION_TEMPLATES",payload:await jr({path:"/wpcom/v2/big-sky/v1/variation-templates/colors"})})}}});function Za({notice:e,type:t="info",delay:n=3e3}){const{setIsToolContainerVisible:o,setToolComponent:i}=(0,m.useDispatch)(Qa);return(0,f.useEffect)((()=>{let e;return n>0&&(e=setTimeout((()=>{o(!1),i(null)}),n)),()=>{e&&clearTimeout(e)}}),[n,o,i]),(0,r.createElement)("div",{className:`big-sky__dock__notice big-sky__dock__notice-${t}`},(0,r.createElement)(Or,null,e))}(0,m.register)(Qa);const es=()=>{const{resetStore:e,setToolComponent:t,setIsToolContainerVisible:n}=(0,m.useDispatch)(Qa);return()=>{e(),t((0,r.createElement)(Za,{notice:(0,z.__)("We couldn't complete that request. Please try again.","big-sky"),type:"error"})),n(!0)}},ts=()=>{const e=es(),{decrementPendingToolCallbacks:t,incrementPendingToolCallbacks:n,setCurrentToolCall:o}=(0,m.useDispatch)(Qa),i=(0,f.useCallback)((e=>async o=>{n(),await Wa(200),await e(o),t()}),[t,n]);return{withPendingToolCallback:i,createToolCallback:({name:t,action:n,closeChatWhenDone:r=()=>!0,validator:a=null,failValidatorAction:s=null})=>async c=>{if(o(t),a)try{if(!await a(c))return void("function"==typeof s&&await s(c,{message:"Failed to validate arguments"}))}catch(e){return void("function"==typeof s&&await s(c,e))}const l=async t=>{try{await n(t)}catch(t){ra.error("Tool error:",t),e()}};r()?i(l)(c):await l(c)}}},ns=new Map,os=[];function is(e){return ns.get(e)}function rs(e){const t=is(e);return t?.toolkits?.[0]?.name}function as(){const{setAssistant:e}=(0,m.useDispatch)(Qa),{agentSay:t,userSayRepeat:n,getChangeAgentCount:o,incrementChangeAgentCount:i,resetChangeAgentCount:r,clearMessages:a}=Ce(),{setContext:s}=Pe(),c=(0,f.useRef)([]),l=(e,n)=>{ra.error("Router error:",e,n),t((0,z.__)("I am sorry, I had trouble processing that request. Please try again.","big-sky"))};return{changeAssistant:t=>{if(!(u=t.userRequest,o()>3&&(l("maxRetriesReached",u),r(),1)||(e=>{if(c.current.length<2)return!1;const t=c.current[0]?.toAssistantId===e.fromAssistantId&&c.current[0]?.fromAssistantId===e.toAssistantId,n=c.current.length>=3&&c.current[2]?.toAssistantId===e.toAssistantId&&c.current[2]?.fromAssistantId===e.fromAssistantId&&c.current[1]?.toAssistantId===c.current[0]?.fromAssistantId&&c.current[1]?.fromAssistantId===c.current[0]?.toAssistantId;return!(!t&&!n||(l("loopDetected",e.userRequest),r(),0))})(t))){if(ra.info(`🔔 Changing the assistant:\n\t-- To: ${t.toAssistantId}\n\t-- From: ${t.fromAssistantId}\n\t-- Reason: ${t.reason}`),c.current=[{toAssistantId:t.toAssistantId,fromAssistantId:t.fromAssistantId},...c.current].slice(0,4),e(t.toAssistantId),i(),a(G.TOOL),a(G.SYSTEM),t.fromAssistantId===Ye.ROUTER&&t.toAssistantId!==Ye.HELP){const e=rs(t.toAssistantId);e&&s(e,{fromAssistantId:t.fromAssistantId})}if(t.toAssistantId===Ye.HELP){const e=rs(t.toAssistantId);e&&s(e,{fromAssistantId:t.fromAssistantId})}return n(),"Assistant changed"}var u}}}const ss={id:Ye.ROUTER,description:"An assistant that analyzes user requests and routes them to the most appropriate specialized assistant.",instructions:e=>function(e){return`\nYou are a router system for a website builder platform. Your role is to analyze user requests and route them to the appropriate assistant by calling the 'change_assistant' tool with the correct assistant ID.\n\nHere is the current context, use this to inform your responses:\n\n<selected_block_context>\n${Ze(e,["clientId","type"])}\n</selected_block_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${Ke}\n</language>\n\nHere are the available assistants and their tools:\n\n<color_assistant>\nColor Assistant (ID: ${Ye.COLOR})\n\nDescription:\n   - An assistant specializing in color palette creation, selection, and assisting users with website color modifications.\n\nTools:\n   - color_palette_generator: Generates color palettes\n   - update_component_color: Updates colors of specific components\n</color_assistant>\n\n<content_assistant>\nContent Assistant (ID: ${Ye.CONTENT})\n\nDescription:\n   - An expert content writer and editor assistant, specializing in website content creation and editing. The primary goal is to help users improve their website content and editing content within existing patterns/sections.\n\nTools:\n   - rewrite_content: Rewrites text content in blocks to change the tone or spelling.\n   - make_text_bold_italic: Formats text content, only supports making it bold or italic\n   - update_button_link: Updates button links to a new URL\n   - upsert_social_link: Adds/updates social media links in the social links block\n   - update_address: Updates address information within an already existing contact form section/pattern\n   - add_container_to_events_section: Adds an events container to an existing events section/pattern\n   - add_item_to_events_container: Adds an events item to an existing events container\n   - add_container_to_menu_section: Adds a menu container to an existing menu section/pattern\n   - add_item_to_menu_container: Adds a menu item to an existing menu container\n   - modify_contact_form_fields: Adds and removes fields from an existing contact form section/pattern\n   - add_container_to_services_section: Adds a services container to an existing services section/pattern\n   - add_item_to_testimonials_section: Adds a testimonials item to an existing testimonials section/pattern\n   - add_container_to_pricing_section: Adds a pricing container to an existing pricing section/pattern\n   - add_container_to_team_section: Adds a team container to an existing team section/pattern\n   - add_member_to_team_container: Adds a team member to an existing team section/pattern\n   - make_suggestion: Makes content suggestions\n   - start_over: Resets content changes\n\nNote:\n   - Does not support adding entirely new sections/patterns.\n</content_assistant>\n\n<font_assistant>\nFont Assistant (ID: ${Ye.FONT})\n\nDescription:\n   - An assistant specializing in font selection and helping users modify their website fonts.\n\nTools:\n   - show_font_picker: Shows font selection interface\n</font_assistant>\n\n<help_assistant>\nHelp Assistant (ID: ${Ye.HELP})\n\nDescription:\n   - An assistant specializing in answering questions about WordPress, website building, and technical guidance.\n\nTools:\n   - ask_wordpress_expert: Asks WordPress expert for help\n</help_assistant>\n\n<image_assistant>\nImage Assistant (ID: ${Ye.IMAGE})\n\nDescription:\n   - An assistant specializing in the generation and fetching of images and site logos.\n\nTools:\n   - generate_image: Generates AI images\n   - get_stock_image: Retrieves stock images\n   - generate_site_logo: Generates site logos with AI\n   - upload_site_logo: Handles site logo uploads\n\nNote:\n  - Does not support modifying images in any other way.\n</image_assistant>\n\n<layout_assistant>\nLayout Assistant (ID: ${Ye.LAYOUT})\n\nDescription:\n   - An assistant specializing in full page layouts to allow users to modify the layout for their entire website page.\n\nTools:\n   - show_layout_picker: Shows the user the full page layout options to select from\n\nNote:\n   - Does not support changing padding, margins, or other layout settings.\n</layout_assistant>\n\n<page_assistant>\nPage Assistant (ID: ${Ye.PAGE})\n\nDescription:\n   - An assistant specializing in creating new pages and navigating between pages.\n\nTools:\n   - add_page: Adds new pages\n   - navigate_to_page: Navigates between pages\n\nNote:\n   - Does not support deleting pages.\n</page_assistant>\n\n<pattern_assistant>\nPattern Assistant (ID: ${Ye.PATTERN})\n\nDescription:\n   - An assistant specializing in adding and replacing full page patterns and sections.\n\nTools:\n   - add_pattern: Adds new patterns/sections to pages\n   - remove_block: Removes blocks from pages\n   - replace_pattern: Replaces existing patterns/sections on pages\n\nNote:\n   - Does not support editing content within patterns/sections.\n   - Does not support pattern/section ordering changes.\n</pattern_assistant>\n\nRouting Instructions:\n\n1. Quickly analyze the user's request.\n2. ${rt}\n3. If the request is valid, identify which assistant would be most appropriate to handle it based on the available tools.\n4. Call the 'change_assistant' function to route the request to the chosen assistant.\n\n\nBefore routing:\n\n1. Request Analysis:\n   ${Xe}\n   - Clearly state the main intent of the user's request.\n   - List all relevant information from the user's request.\n   - Identify any potential edge cases or ambiguities in the request.\n   - Evaluate the complexity of the request, considering if it might require multiple assistants.\n\n2. Assistant Evaluation:\n   - List all potentially relevant assistants and their tools that could address this request.\n   - For each potential assistant, consider the pros and cons of routing to them.\n\n3. Decision Making:\n   - Determine which assistant is most appropriate based on the primary action the user wants to take.\n   - Check if the chosen assistant has a specific tool to address the user's request.\n   - If no assistant has a specific tool for the request, or if the request requires functionality not covered by the matching assistant's tools: ${ot}.\n   - Clearly state your final choice and provide detailed reasoning for your decision.\n\nImportant to remember:\n   - Prioritize speed in your analysis and decision-making. The user is waiting for a response.\n   - Never attempt to answer user questions or complete tasks yourself. Always route to the appropriate assistant.\n   - Never route to an assistant when a tool does not exist to perform the action they are asking for, even if the assistant is the best match.\n   - After your analysis, call the 'change_assistant' function with 'toAssistantId' as the selected assistant ID and a 'reason' that sums up your decision.\n   - If no assistant has a specific tool for the request, or if the request requires functionality not covered by the matching assistant's tools: ${ot}.\n`}(e),tags:[Ye.ROUTER],toolkits:[st],toolkitHook:()=>{const{createToolCallback:e}=ts(),{changeAssistant:t}=as(),{setCallbacks:n,setContext:o}=Pe(),{selectedBlock:i}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{selectedBlock:t()}}));(0,f.useEffect)((()=>{n(st.name,{change_assistant:e({name:"change_assistant",action:e=>{t(e)},closeChatWhenDone:()=>!1})}),o(st.name,{selectedBlock:i})}),[n]),(0,f.useEffect)((()=>{o(st.name,{selectedBlock:i})}),[i,o])},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))}},cs=ss,ls=xa.format({role:"You are a website design analyst at Automattic, the company behind WordPress.com, and an expert at using tools to obtain the required specifications for a new website design.",context:"The required specifications to build a site are: siteType, topic, siteDescription, and siteTitle.",examplesDescription:"Guide the user to provide a site description that is suitable for the type of site they need",examples:["- Business site: \n\t- Peak Performance Consulting: Strategic advisory and leadership development for executives, enhancing business growth and efficiency.\n\t- FitLife Tracker: A mobile app offering personalized workouts, nutrition tracking, and progress monitoring for fitness enthusiasts.\n\t- Brew Haven Café: A cozy coffee shop with artisanal blends, fresh pastries, and a welcoming atmosphere for relaxation and socializing.\n\t","- Blogs: \n\t- The Tech Innovator: For tech enthusiasts and professionals, offering in-depth articles and news on emerging technologies and trends.\n\t- Healthy Living Daily: For health-conscious individuals, providing tips, recipes, and stories to inspire a balanced, healthy lifestyle.\n\t","- Portfolios: \n\t- Alex Parker Design: Showcasing innovative graphic design projects, including branding and web design, highlighting creative expertise and visual storytelling.\n\t- Emma Stone Photography: Featuring a curated collection of stunning portraits, landscapes, and editorial photography, demonstrating technical skill and artistic vision.\n\t","- Personal: \n\t- Jim Smithers: Providing a biography and work history along with a list of side projects.\n\t- SciFi Memorabilia: Showcasing my personal sci-fi memorabilia collection for other sci-fi fans to enjoy.\n\t"],do:["Use the make_suggestions tool when:\n\t\t\t\t- the user is explicitly asking for suggestions.\n\t\t\t\t- the user cannot or is not sure how to answer a question about a specification.\n\t\t\t\t- the site specs are complete and the user is asking for suggestions to change a specification.","Use the confirm_site_specs tool when:\n\t\t\t\t- you have all the required specifications.\n\t\t\t\t- the user has asked for changes to the specifications.",'Check the results of the confirm_site_specs tool carefully. Some responses may seem like a confirmation to continue, but they may actually be asking for changes, for example:\n\t\t\t\t- "make my site interesting" could be take to indicate "go ahead make my site, and make it interesting" but this includes extra details that are not part of the required specifications, so you should ask for clarification.',"Use the buildSite tool when:\n\t\t\t\t- the user has confirmed the specifications.","Ask for a physical location if the user has not provided one and it seems relevant to the site they are building, for example:\n\t\t\t\t- If the user is building a site for a local business, like a butcher, baker, restaurant, cafe, or gym, etc.\n\t\tIf user asks for a suggestion with location, call make_suggestions with the biggest city shopping district relevant to the language they are using.","Check each of the user's responses carefully for information that can be used to fill in these specifications. A response may contain multiple pieces of information that can be used to fill in multiple specifications.","Fill in the siteLocationName specification if a response contains partial location information","Use only the information provided by the user to complete the specifications.","Ask only one question per message, and keep the question under 40 words.","Suggest a site description that is suitable for the type of site the user needs if they continue to provide vague or unclear responses.","Restate the previous question and ask for clarification if a user response is unclear."],dont:["Ask more than one question per message.","Respond with a question or comment over 40 words.","Ask for a physical location if the user is building a site that is not location-specific, like a blog.","Ask the user to confirm your individual specification parameter choices.","Ask the user directly to confirm the specifications you have gathered. ALWAYS use the confirm_site_specs tool to confirm the specifications. When calling the confirm_site_specs tool your message content should be null.","Ask the user what sort of sections or content they want on their website, or what sort of style or layout they want. Only ask questions that will help you fill in the required specifications.","Ask what type of website a user needs if it can be deduced from the user's responses, for example:\n\t\t\t - If a user says they want to a site for their shop, cafe, restaurant, gym, etc. you can assume they need an business site.\n\t\t\t - If a user says they want a site to share their thoughts, experiences, or knowledge, you can assume they need a blog site.\n\t\t\t - If a user says they want a site to showcase their work, you can assume they need a portfolio site.","Discuss products or services that are not provided by Automattic, Inc. or WordPress.com.",'Answer malicious questions nor questions unrelated to designing their new website. Do not explain concepts. Instead of answering the question, direct the user back to the website design process using\n\t\t\t something from the content of their question, for example:\n\t\t\t - User request: "Can you help me with my taxes?"\n\t\t\t - Your response: "That is a tricky one. Do you want me to help you set up a website where you can share helpful tips you have learnt about paying tax?"\n\t\t\t - User request: "What is the best way to win chess?"\n\t\t\t - Your response: "Set up a blog site and write about your chess learning journey. Reflecting on your play this way could help you improve. Do you want me to help you set up a website for this?"',"Provide a summary of the site specifications in any of your responses. The confirm_site_specs tool is the only way to confirm the specifications."]}),us=Object.values({foodAndBeverage:{slug:"foodAndBeverage",description:"Food or beverage service establishment such as a restaurant, cafe, bar, fastfood"},business:{slug:"business",description:"General business or company website"},blog:{slug:"blog",description:"Regular content publication and articles"},portfolio:{slug:"portfolio",description:"Showcase of work, projects, or creative content"},personal:{slug:"personal",description:"Personal website or resume"}}).map((e=>e.slug)),ds={name:"spec",tools:()=>[{name:"build_site",description:"Called once the site specifications have been confirmed. This method should always be called by itself. Do not call in parallel with other functions.",parameters:{type:"object",properties:{siteType:{type:"string"},topic:{type:"string"},siteDescription:{type:"string"},siteTitle:{type:"string"},siteLocationName:{type:["string","null"]},imageStyle:{type:"string",description:"The style of image to use, based on the site title and description. Use photographic if there is no image style that matches the site.",enum:["3d-model","analog-film","anime","cinematic","comicbook","craft-clay","digital-art","enhance","fantasy-art","isometric","line-art","lowpoly","neonpunk","origami","photographic","pixel-art","texture"]},colorRequest:{type:["string","null"],description:'The color request for the site. This should be a single string that describes the color request for the site, as user has described it. For example, "I want a site with a blue and white color scheme". Leave null if the user has not provided a color request.'}},required:["siteType","topic","siteDescription","siteTitle","siteLocationName","imageStyle","colorRequest"]},strict:!0},{name:"confirm_site_specs",description:"Confirms that the gathered specifications are correct. The required specifications to build a site are: siteType, topic, siteDescription, and siteTitle. The content of your message should ALWAYS be null.",parameters:{type:"object",properties:{siteType:{type:"string",description:"The type of site being created. Prefer making assumptions about the siteType based on information the user provides rather than asking the user direct. For example a site that sounds like a business, eg. for a consultancy, gymn, florist, or plumber assume the siteType is 'business'. For a site that sounds like a food and beverage establishment, eg. a restaurant, cafe, bar, fastfood, assume the siteType is 'foodAndBeverage'. For a site like a photography portfolio assume the siteType is 'portfolio'. For a site like a daily journal about travel assume the siteType is 'blog'. Only ask the user for clarification as a last resort if you really can't determine the siteType from the information provided. If you do ask the user for clarification, provide a list of options from the available site types.",enum:us},topic:{type:"string",description:"Your task is to determine the main topic of the site using no more than two words. It should not be something generic like ecommerce, and should not be the site name. Avoid using ambiguous terms that have multiple meanings. For businesses and professional sites always use the primary business type as the topic, for example with 'a law firm specializing in divorce' set topic as 'law firm' not 'divorce', or for 'a doctor who treats drug addiction' use 'doctor' not 'drug addiction'"},siteDescription:{type:"string",description:"Never ask for this. It is a summary of the sites specifications gathered so far e.g. 'A technical bookshop called TechReads, specialising in machine learning books'. If the user has not provided enough information for you to create a useful description ask follow up questions to flesh it out. Do not include the location in the description. Use the user's language."},siteTitle:{type:"string",description:"The title of the site. Look for obvious titles in the information provided, for example: If a business name is provided this should be used. eg. for 'I want a site for my coffee shop Java Jivin' the siteTitle should be 'Java Jivin'. If an explicit title is provided, use that. eg. for 'I want a site for my photography portfolio called My Photos' the siteTitle should be 'My Photos'. If there is an obvious title just use it and don't ask for confirmation. If you can't determine the title, ask the user to provide one."},siteLocationName:{type:["string","null"],description:"The physical location of the business or person as a single string. Ask for this if the user has not provided one and it seems like something that should have a location, eg. a bar, a coffee shop, a restaurant, a gym, etc. This should only be a location on a map in a readable form. e.g. 123 Main Street, Los Angeles, CA, USA. Use the post code if provided but do not ask for it. If you cannot determine the location, do not include this. Ask for an actual street address if it seems like a something that should have one and it hasn't been provided already. If the type of site doesn't seem like it should have a location, don't ask for this."},inputPlaceholder:{type:"string",description:"The placeholder text for the input field. The value should be something like, 'Click below to make changes…'."},actions:{type:"array",description:"You must provide one action for the user to confirm the specifications. [ { 'actionName': 'Looks good', 'description': 'Build $siteTitle' } ].",items:{type:"object",additionalProperties:!1,required:["actionName","description"],properties:{actionName:{type:"string"},description:{type:"string"}}}}},required:["siteType","topic","siteDescription","siteTitle","siteLocationName","inputPlaceholder","actions"]},strict:!0},{name:"make_suggestions",description:"Makes suggestions for a particular request.",parameters:{type:"object",properties:{message:{type:"string",description:"The message to display to the user. This will be phrased in terms of a suggestion relevant to the context, eg. 'Here are some suggestions for a site title…'."},inputPlaceholder:{type:"string",description:"The placeholder text for the input field. For example, if providing suggestions for a business name, the inputPlaceholder could be 'Enter a different business name…'. Do not include any comment about selecting from the provided actions."},actions:{type:"array",description:"Provides a few options for the user to choose from. For example, if a user is asking for business name suggestions for their coffee shop, the actions could be [ 'Java Jivin', 'Java Jive', 'Java Jive Cafe' ]. If they are wanting to know what you can help with for site design the acitons might be ['Change colors', 'Change fonts', 'Add a new page']Keep your suggestions to a maximum of 2 and under 20 characters",items:{type:"object",properties:{actionName:{type:"string",description:"The title of the action. Keep it very short."},description:{type:"string",description:"The description of the suggestion. Briefly describe the suggestion in context for the user."}}}}},required:["message","inputPlaceholder","actions","description"]}},{name:"start_over",description:'Always call this if the user wants to start over from scratch or change what their site is about.\n\t\tExamples of when to call this:\n\t\t- "Start over"\n\t\t- "I want to start fresh"\n\t\t- "Can I change what my site is about?"\n\t\t- "Let\'s start from the beginning"\n\t\t- "Reset everything"\n\t\tAlways call this tool directly when the user expresses a desire to start over.\n\t\tNever try to reset the site yourself, or reply with a message to say you have done so.\n\t\tDo not ask follow-up questions, just call this tool directly when the user expresses a desire to start over.',strict:!0}]},ps=new We({template:"{{? it.additionalContext }}\n{{\n\tconst {\n\t\tsiteGoals,\n\t\tsiteType,\n\t\ttopic,\n\t\tsiteDescription,\n\t\tsiteTitle,\n\t\tsiteLocation,\n\t\tcolorRequest\n\t} = it.additionalContext;\n}}\n{{? siteGoals }}The user has indicated that their goals with the site are to {{~siteGoals :item}}{{=item}}, {{~}}{{?}}\n{{? siteType }}The site type is {{=siteType}}.{{?}}\n{{? topic }}The site's topic is {{=topic}}.{{?}}\n{{? siteDescription }}The site's description is: {{=siteDescription}}{{?}}\n{{? siteTitle }}The site's title is \"{{=siteTitle}}\".{{?}}\n{{? siteLocation?.name }}The site's location is {{=siteLocation.name}}.{{?}}\n{{? colorRequest }}The user has requested the following color scheme: {{=colorRequest}}{{?}}\n{{?}}",inputVariables:["additionalContext"]});async function hs(e,t="Big Sky Session"){try{return await jr({path:"/wpcom/v2/big-sky/v1/session/"+encodeURIComponent(e),method:"POST",data:{name:t,is_test:Qr()}})}catch(e){ra.error("Error logging session: ",e)}}let gs={};function ms(){const{shouldLogSessions:e,sessionId:t,getSiteMetadata:n}=(0,m.useSelect)((e=>({getSiteMetadata:e(Qa).getSiteMetadata,sessionId:e(Qa).getSessionId(),shouldLogSessions:e(Qa).shouldLogSessions()}))),{currentPostId:o}=(0,m.useSelect)((e=>({currentPostId:e(g.store).getCurrentPostId()}))),{setSiteMetadata:i}=(0,m.useDispatch)(Qa),{saveEditedEntityRecord:r,editEntityRecord:a}=(0,m.useDispatch)(Wr.store),s=e=>!!e.siteTitle&&!!e.siteDescription&&!!e.topic,c=async(o,c=!1,l=!1)=>{const u=n();gs={...gs,...o};const d={...u,...gs};delete d.mode,d.isOnboarded=!l&&s(d);const p=JSON.stringify(d);s(d)&&p!==JSON.stringify(u)&&async function(e,t){try{return await jr({path:"/wpcom/v2/big-sky/v1/session/"+encodeURIComponent(e)+"/metadata",method:"POST",data:t})}catch(e){ra.error("Error logging site metadata: ",e)}}(t,d),i(d),a("root","site",void 0,{big_sky_site_metadata:p},{undoIgnore:!0}),c&&await r("root","site",void 0,{big_sky_site_metadata:p}),o.siteTitle&&e&&hs(t,o.siteTitle)};return{getPagePatterns:(e=null)=>{const t=n().patterns;return e?t[e]:t[o]},getSiteMetadata:n,setCurrentColor:n=>(e&&ta(t,n,G.SET_COLOR,H()),c({currentColor:n})),setCurrentFont:n=>(e&&ta(t,n,G.SET_FONT,H()),c({currentFont:n})),setTopic:n=>(e&&ta(t,n,G.SET_TOPIC,H()),c({topic:n})),setSiteDescription:n=>(e&&ta(t,n,G.SET_SITE_DESCRIPTION,H()),c({siteDescription:n})),setSiteLocation:n=>(e&&ta(t,n,G.SET_SITE_LOCATION,H()),c({siteLocation:n})),setSiteTitle:n=>(e&&ta(t,n,G.SET_SITE_TITLE,H()),c({siteTitle:n})),setSiteMetadata:c}}var fs=n(744);const ys=()=>{var e,t,n,o;const i=document.querySelector('[name="editor-canvas"]'),r=null!==(e=i?.contentDocument)&&void 0!==e?e:null;return{canvasiFrame:i,canvasiFrameRoot:null!==(t=r?.documentElement)&&void 0!==t?t:null,canvasiFrameDocument:r,canvasiFrameWindow:null!==(n=i?.contentWindow)&&void 0!==n?n:null,canvasiFrameBody:null!==(o=r?.body)&&void 0!==o?o:null}};function bs(){const{getBlockHierarchyRootClientId:e,getBlock:t,getBlocksByName:n,getClientIdsOfDescendants:o,getBlockParentsByBlockName:i,getBlocks:r}=(0,m.useSelect)(y.store),{selectBlock:a,updateBlockAttributes:s}=(0,m.useDispatch)(y.store),{replaceBlock:c}=(0,m.useDispatch)(g.store),l=(0,m.useSelect)((e=>{var t;const n=e(Wr.store).getEntityRecord("root","site");return{siteTitle:null!==(t=n?.title)&&void 0!==t?t:""}})),u=e=>{const t=[];return e.forEach((e=>{if(e.innerBlocks?.length>0)t.push(...u(e.innerBlocks));else if("core/heading"===e.name||"core/paragraph"===e.name||"core/site-title"===e.name||"core/image"===e.name||"core/button"===e.name){let n;n="core/button"===e.name?e.attributes.text||"Button":"core/site-title"===e.name?"Acme Inc":e.attributes.content,t.push({name:e.name,clientId:e.clientId,example:n})}})),t},d=e=>{const o=n("core/template-part");if(!o)return;const i="header"===e?"header":"footer";return o.find((e=>t(e).attributes.slug===i))},p=(e,t)=>{if(t&&t.coordinates)for(const n of e){if("jetpack/map"===n.name){const e=t.coordinates[0],o=t.coordinates[1];n.attributes.mapCenter={lat:e,lng:o},n.attributes.points=[{placeTitle:t.name,title:l.siteTitle||t.name,caption:"",id:"place."+Math.random(),coordinates:{latitude:e,longitude:o}}],s(n?.clientId,{mapCenter:{lat:e,lng:o},points:[{placeTitle:t.name,title:l.siteTitle||t.name,caption:"",id:"place."+Math.random(),coordinates:{latitude:e,longitude:o}}]})}n.innerBlocks?.length>0&&p(n.innerBlocks,t)}},h=(e,t,n)=>{const o=e.getBoundingClientRect();let i=o.top,r=o.bottom;return o.height>t.innerHeight&&(i=o.top+(o.height-t.innerHeight),r=o.bottom-(o.height-t.innerHeight)),i>=0&&r<=t.innerHeight&&(a(n),!0)},b=async(e,t="start",n=!1)=>{if(e){const{canvasiFrameWindow:o}=ys();if(o&&"complete"===o.document.readyState){const i=o.document.getElementById(`block-${e}`);if(i&&i.scrollIntoView({behavior:"smooth",block:t}),n){if(h(i,o,e))return;const t=e=>{h(i,o,e)&&o.document.removeEventListener("scroll",n)},n=()=>t(e);o.document.addEventListener("scroll",n)}}}},v=(0,f.useCallback)(((e,t)=>{if(e.name===t)return e;if(e.innerBlocks?.length)for(const n of e.innerBlocks){const e=v(n,t);if(e)return e}return!1}),[]),w=e=>{const n=t(e);if("core/template-part"===n.name)return n;const o=i(e,"core/template-part");return o?t(o[0]):void 0},k=e=>{const t=(0,La.createBlock)(e.name,e.attributes);return e.innerBlocks&&e.innerBlocks.length&&(t.innerBlocks=e.innerBlocks.map((e=>k(e)))),t},_=e=>{const{clientId:t,name:n,attributes:o,innerBlocks:i}=e,r=(0,La.createBlock)(n,o,i);return(e=>{if(!e)return!1;switch(e.name){case"core/paragraph":return e.attributes?.content?.length>0;case"core/image":return e.attributes?.url?.length>0;case"core/quote":return e.attributes?.value?.length>0;default:return!0}})(r)&&c(t,r),e?.innerBlocks?.forEach((e=>{_(e)})),e};return{getSurroundingContentOfBlock:n=>{const i=e(n?.clientId),r=t(i),a=o(r?.clientId);let s="";return a.forEach((e=>{const n=t(e);"core/heading"!==n.name&&"core/paragraph"!==n.name||(s+=" "+n.attributes.content)})),s},getContentOfBlocks:u,getContentBlockClientID:()=>n("core/post-content")[0],getTemplatePartClientID:d,setBlockIsProcessing:(e,t)=>{const n=(e=>{const{canvasiFrameWindow:t}=ys();return t&&"complete"===t.document.readyState?t.document.getElementById(`block-${e.clientId}`):null})(e);n&&(n.classList.remove("big-sky__is-processing"),n.classList.remove("big-sky__has-processed"),n.classList.add(t?"big-sky__is-processing":"big-sky__has-processed"))},setMapLocationInBlocks:p,scrollToBlock:b,scrollToFirstBlockByName:(e,t="start",o=!1)=>{const i=n(e);i.length>0&&b(i[0],t,o)},getFirstChildBlockByName:v,getParentRootPatternBlock:e=>{const n=t(e);if(!n)return null;if(n.attributes?.metadata?.patternCategory)return n;const o=i(e,"core/group");if(!o)return;let r=null;return o.forEach((e=>{const n=t(e);n?.attributes?.metadata?.patternCategory&&(r=n)})),r},getParentRootTemplatePartBlock:w,isTemplatePart:e=>{const n=w(e);return n?"core/template-part"===n.name:"core/template-part"===t(e).name},copyBlockWithInnerBlocks:k,getFirstChildBlockByClientIdDOMElement:e=>{const{canvasiFrameWindow:n}=ys(),o=n.document.getElementById(`block-${e}`);return t(o.querySelector('div[data-type="core/group"]').getAttribute("data-block"))},fixInvalidBlock:_,findSiteLogoBlock:()=>{const e=d("header"),t=r(e),n=d("footer"),o=r(n),i=e=>{for(const t of e){if("core/site-logo"===t.name)return t;if(t.innerBlocks&&t.innerBlocks.length>0){const e=i(t.innerBlocks);if(e)return e}}};return i([...t,...o])}}}var vs={grad:.9,turn:360,rad:360/(2*Math.PI)},ws=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},ks=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},_s=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},xs=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Cs=function(e){return{r:_s(e.r,0,255),g:_s(e.g,0,255),b:_s(e.b,0,255),a:_s(e.a)}},Ss=function(e){return{r:ks(e.r),g:ks(e.g),b:ks(e.b),a:ks(e.a,3)}},Es=/^#([0-9a-f]{3,8})$/i,Is=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Ts=function(e){var t=e.r,n=e.g,o=e.b,i=e.a,r=Math.max(t,n,o),a=r-Math.min(t,n,o),s=a?r===t?(n-o)/a:r===n?2+(o-t)/a:4+(t-n)/a:0;return{h:60*(s<0?s+6:s),s:r?a/r*100:0,v:r/255*100,a:i}},As=function(e){var t=e.h,n=e.s,o=e.v,i=e.a;t=t/360*6,n/=100,o/=100;var r=Math.floor(t),a=o*(1-n),s=o*(1-(t-r)*n),c=o*(1-(1-t+r)*n),l=r%6;return{r:255*[o,s,a,a,c,o][l],g:255*[c,o,o,s,a,a][l],b:255*[a,a,c,o,o,s][l],a:i}},Ps=function(e){return{h:xs(e.h),s:_s(e.s,0,100),l:_s(e.l,0,100),a:_s(e.a)}},Ns=function(e){return{h:ks(e.h),s:ks(e.s),l:ks(e.l),a:ks(e.a,3)}},Os=function(e){return As((n=(t=e).s,{h:t.h,s:(n*=((o=t.l)<50?o:100-o)/100)>0?2*n/(o+n)*100:0,v:o+n,a:t.a}));var t,n,o},Rs=function(e){return{h:(t=Ts(e)).h,s:(i=(200-(n=t.s))*(o=t.v)/100)>0&&i<200?n*o/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,o,i},Ms=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ls=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ds=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Bs=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fs={string:[[function(e){var t=Es.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?ks(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?ks(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Ds.exec(e)||Bs.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Cs({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Ms.exec(e)||Ls.exec(e);if(!t)return null;var n,o,i=Ps({h:(n=t[1],o=t[2],void 0===o&&(o="deg"),Number(n)*(vs[o]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return Os(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,o=e.b,i=e.a,r=void 0===i?1:i;return ws(t)&&ws(n)&&ws(o)?Cs({r:Number(t),g:Number(n),b:Number(o),a:Number(r)}):null},"rgb"],[function(e){var t=e.h,n=e.s,o=e.l,i=e.a,r=void 0===i?1:i;if(!ws(t)||!ws(n)||!ws(o))return null;var a=Ps({h:Number(t),s:Number(n),l:Number(o),a:Number(r)});return Os(a)},"hsl"],[function(e){var t=e.h,n=e.s,o=e.v,i=e.a,r=void 0===i?1:i;if(!ws(t)||!ws(n)||!ws(o))return null;var a=function(e){return{h:xs(e.h),s:_s(e.s,0,100),v:_s(e.v,0,100),a:_s(e.a)}}({h:Number(t),s:Number(n),v:Number(o),a:Number(r)});return As(a)},"hsv"]]},js=function(e,t){for(var n=0;n<t.length;n++){var o=t[n][0](e);if(o)return[o,t[n][1]]}return[null,void 0]},Us=function(e,t){var n=Rs(e);return{h:n.h,s:_s(n.s+100*t,0,100),l:n.l,a:n.a}},qs=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},$s=function(e,t){var n=Rs(e);return{h:n.h,s:n.s,l:_s(n.l+100*t,0,100),a:n.a}},Hs=function(){function e(e){this.parsed=function(e){return"string"==typeof e?js(e.trim(),Fs.string):"object"==typeof e&&null!==e?js(e,Fs.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return ks(qs(this.rgba),2)},e.prototype.isDark=function(){return qs(this.rgba)<.5},e.prototype.isLight=function(){return qs(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Ss(this.rgba)).r,n=e.g,o=e.b,r=(i=e.a)<1?Is(ks(255*i)):"","#"+Is(t)+Is(n)+Is(o)+r;var e,t,n,o,i,r},e.prototype.toRgb=function(){return Ss(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Ss(this.rgba)).r,n=e.g,o=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+o+", "+i+")":"rgb("+t+", "+n+", "+o+")";var e,t,n,o,i},e.prototype.toHsl=function(){return Ns(Rs(this.rgba))},e.prototype.toHslString=function(){return t=(e=Ns(Rs(this.rgba))).h,n=e.s,o=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+o+"%, "+i+")":"hsl("+t+", "+n+"%, "+o+"%)";var e,t,n,o,i},e.prototype.toHsv=function(){return e=Ts(this.rgba),{h:ks(e.h),s:ks(e.s),v:ks(e.v),a:ks(e.a,3)};var e},e.prototype.invert=function(){return zs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),zs(Us(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),zs(Us(this.rgba,-e))},e.prototype.grayscale=function(){return zs(Us(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),zs($s(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),zs($s(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?zs({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ks(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=Rs(this.rgba);return"number"==typeof e?zs({h:e,s:t.s,l:t.l,a:t.a}):ks(t.h)},e.prototype.isEqual=function(e){return this.toHex()===zs(e).toHex()},e}(),zs=function(e){return e instanceof Hs?e:new Hs(e)},Gs=[],Vs=function(e){e.forEach((function(e){Gs.indexOf(e)<0&&(e(Hs,Fs),Gs.push(e))}))},Ws=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Ys=function(e){return.2126*Ws(e.r)+.7152*Ws(e.g)+.0722*Ws(e.b)};function Js(){const{getBlockVariations:e}=(0,m.useSelect)(La.store),{__experimentalGetCurrentThemeGlobalStylesVariations:t}=(0,m.useSelect)(Wr.store),{getGeneratedVariations:n}=(0,m.useSelect)(Qa),o=(0,f.useCallback)((()=>{const e=t(),o=e?.filter((e=>l(e)));return n&&n()?.length>0?[...n(),...o]:o}),[t,n]),i=(0,f.useCallback)((()=>{const e=t(),n=e?.filter((e=>u(e)));return n}),[t]),r=(0,f.useCallback)((e=>{const t=o();return t?.find((t=>t.title===e))}),[o]),a=(0,f.useCallback)(((e,t)=>{if(t.startsWith("#"))return t;const n=r(e),o=t?.match(/\d+/)[0];return n?.settings?.color?.palette?.theme?.find((e=>o===e.slug.match(/\d+/)[0]))?.color}),[r]),s=(0,f.useCallback)(((e,t)=>{const n=r(t);let o=!1;if(o=e.includes("default")?n?.styles?.color?.background||!1:n?.styles?.blocks?.["core/group"]?.variations?.[e]?.color?.background||!1,!o)return!1;const i=a(t,o);return!!i&&{themeVar:o,hex:i}}),[r,a]),c=(0,f.useCallback)(((e,t)=>{const n=r(t);let o=!1;if(o=e.includes("default")?n?.styles?.color?.text||!1:n?.styles?.blocks?.["core/group"]?.variations?.[e]?.color?.text||!1,!o)return!1;const i=a(t,o);return!!i&&{themeVar:o,hex:i}}),[r,a]),l=e=>e?.settings?.color&&!e?.settings?.typography,u=e=>e?.settings?.typography&&!e?.settings?.color,d=(0,f.useCallback)((()=>e("core/social-link")),[e]);return{MAX_VARIATIONS_SHOWN:10,getColorVariations:o,getFontVariations:i,getColorVariationByTitle:r,getFontVariationByTitle:e=>{const t=i();return t?.find((t=>t.title===e))},getHexColorFromThemeVar:a,getSectionVariationBackgroundColor:s,getSectionVariationTextColor:c,isColorVariation:l,isFontVariation:u,getVariationKeywords:e=>{let t;switch(e){case"color":t=o();break;case"font":t=i();break;default:throw new Error("Invalid variation type")}return t.reduce(((e,t)=>{const n=t?.["x-big-sky-meta"]?.keywords;return n&&n.forEach((t=>{e.includes(t)||e.push(t)})),e}),[])},getSocialLinkVariations:d}}Vs([function(e){e.prototype.luminance=function(){return e=Ys(this.rgba),void 0===(t=2)&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0;var e,t,n},e.prototype.contrast=function(t){void 0===t&&(t="#FFF");var n,o,i,r,a,s,c,l=t instanceof e?t:new e(t);return r=this.rgba,a=l.toRgb(),n=(s=Ys(r))>(c=Ys(a))?(s+.05)/(c+.05):(c+.05)/(s+.05),void 0===(o=2)&&(o=0),void 0===i&&(i=Math.pow(10,o)),Math.floor(i*n)/i+0},e.prototype.isReadable=function(e,t){return void 0===e&&(e="#FFF"),void 0===t&&(t={}),this.contrast(e)>=(a=void 0===(r=(n=t).size)?"normal":r,"AAA"===(i=void 0===(o=n.level)?"AA":o)&&"normal"===a?7:"AA"===i&&"large"===a?3:4.5);var n,o,i,r,a}}]);const Ks="Big Sky Custom",Xs="Custom Color",Qs=(e,t)=>{let n;var o;return zs(e).isLight()?(o=t,n=Object.values(o).reduce(((e,t)=>zs(t.color).brightness()<zs(e.color).brightness()?t:e))):n=(e=>Object.values(e).reduce(((e,t)=>zs(t.color).brightness()>zs(e.color).brightness()?t:e)))(t),n},Zs=e=>e?Object.values(e).sort().join("-").replace(/#/g,"").toUpperCase():"",ec=({theme:e,color:t})=>{e?.settings?.color||(e.settings.color={}),e?.settings?.color?.palette||(e.settings.color.palette={}),e?.settings?.color?.palette?.theme||(e.settings.color.palette.theme=[]);const n=e.settings.color.palette.theme.find((e=>e.color===t));if(n)return n;const o=Math.max(...e.settings.color.palette.theme.map((e=>parseInt(e.slug.split("-")[1]))))+1,i={color:t,name:`${Xs} ${o}`,slug:`theme-${o}`};return e.settings.color.palette.theme.push(i),i},tc=({styles:e,palette:t,path:n=[],currentVariationBackgroundVar:o="",currentVariationTextVar:i=""})=>{if(n.includes("elements")&&n.includes("button")){if(e?.color?.background){const n=t.find((t=>e.color.background.includes(t.slug))).color,i=t.find((e=>o.includes(e.slug))).color;if(zs(n).contrast(zs(i))<4.5){const n=Qs(i,t);if(e.color.background=`var(--wp--preset--color--${n.slug})`,e?.[":hover"]?.color?.background){const t=zs(n.color).isLight();e[":hover"].color.background=t?`color-mix(in srgb, var(--wp--preset--color--${n.slug}) 85%, #000)`:`color-mix(in srgb, var(--wp--preset--color--${n.slug}) 90%, transparent)`}}}if(e?.color?.text){const n=t.find((t=>e.color.background.includes(t.slug))).color,o=t.find((t=>e.color.text.includes(t.slug))).color;if(zs(n).contrast(zs(o))<4.5){const o=Qs(n,t);e.color.text=`var(--wp--preset--color--${o.slug})`,e?.[":hover"]?.color?.text&&(e[":hover"].color.text=`var(--wp--preset--color--${o.slug})`)}}}else{if(e?.color?.background&&e?.color?.text){o=e.color.background,i=e.color.text;const n=t.find((t=>e.color.background.includes(t.slug))).color,r=t.find((t=>e.color.text.includes(t.slug))).color;if(zs(n).contrast(zs(r))<4.5){const o=Qs(n,t);e.color.text=`var(--wp--preset--color--${o.slug})`}}if("object"==typeof e&&null!==e)for(const[r,a]of Object.entries(e))tc({styles:a,palette:t,path:[...n,r],currentVariationBackgroundVar:o,currentVariationTextVar:i})}},nc=({theme:e,colors:t})=>{e.settings.color.palette.theme.forEach(((e,n)=>{t[`color${n+1}`]&&(e.color=t[`color${n+1}`],e.name=`${Xs} ${n+1}`)})),tc({styles:e.styles,palette:e?.settings?.color?.palette?.theme})},oc=(e,t,n)=>{const o=zs(n),i=o.isLight();let r=0,a=e;for(;r<50&&zs(a).contrast(o)<t;){const{h:e,s:t,l:n}=zs(a).toHsl(),o=i?-5:5,s=Math.min(Math.max(n+o,0),100);a=zs({h:e,s:t,l:s}).toHex(),r++}return a},ic=({templateTheme:e,colors:t})=>{const n=Object.entries(t).map((([e,t])=>[e,t.color])).sort(((e,t)=>zs(t[1]).brightness()-zs(e[1]).brightness())),o={color1:n[0][1],color2:n[3][1],color3:n[1][1],color4:n[2][1]};return nc({theme:e,colors:o}),e.title=`${Ks} Light Theme - ${Zs(Object.fromEntries(Object.entries(t).map((([e,t])=>[e,t.color]))))}`,e},rc=({templateTheme:e,colors:t})=>{const n=Object.entries(t).map((([e,t])=>[e,t.color])).sort(((e,t)=>zs(e[1]).brightness()-zs(t[1]).brightness())),o={color1:n[0][1],color2:n[3][1],color3:n[1][1],color4:n[2][1]};return nc({theme:e,colors:o}),e.title=`${Ks} Dark Theme - ${Zs(Object.fromEntries(Object.entries(t).map((([e,t])=>[e,t.color]))))}`,e},ac=({templateTheme:e,colors:t})=>{const n=Object.values(t).map((e=>e.user_requested?e.color:""));if(n.every((e=>""===e)))return null;if(n.every((e=>""!==e)))return null;const o=(e=>{let[t,n,o,i]=e;return t=t?zs(t).toHex():(()=>{const{s:e,l:t}=zs("#000000").toHsl();return zs({h:0,s:Math.min(e,20),l:t}).toHex()})(),n=n?zs(n).toHex():oc("#808080",4.5,t),o?o=zs(o).toHex():(o=(e=>{const{h:t,s:n,l:o}=zs(e).toHsl(),i=Math.max(0,Math.min(100,o+(10*Math.random()-5))),r=Math.max(0,Math.min(100,n+(10*Math.random()-5)));return zs({h:t,s:r,l:i}).toHex()})(t),!zs(o).contrast(zs(t))<=2&&(o=((e,t)=>{const{h:n,s:o,l:i}=zs(t).toHsl(),{s:r,l:a}=zs(e).toHsl(),s=Math.max(0,Math.min(100,o+(r-o))),c=Math.max(0,Math.min(100,i+(a-i)));return zs({h:n,s,l:c}).toHex()})(o,t))),i=i?zs(i).toHex():oc("#c0c0c0",4.5,t),[t,n,o,i]})(n).reduce(((e,t,n)=>(e[`color${n+1}`]=t,e)),{});return nc({theme:e,colors:o}),e.title=`${Ks} HSL Theme - ${Zs(o)}`,e},sc=()=>[ic,rc,ac],{GlobalStylesContext:cc}=h(y.privateApis),{useGlobalSetting:lc,useGlobalStyle:uc,useGlobalStylesReset:dc}=h(y.privateApis);function pc(e,t){const n=e?.replace(/\s/g,"");if("var(--wp--preset--color--"!==n?.slice(0,25))return e;const o=n.slice(25,-1);return t.settings.color.palette.theme.find((e=>e.slug===o)).color}function hc(){const{getTemplatePartClientID:e}=bs(),{currentColor:t,currentFont:n,isOnboarded:o}=ms().getSiteMetadata(),{setInitializedCustomScheme:i,pushGeneratedVariations:r,setCurrentColor:a,setCurrentFont:s,setUserStyleWithSettings:c,setCurrentPaletteColors:l}=(0,m.useDispatch)(Qa),[u,d]=dc(),{getBlocks:p,getBlockAttributes:h,getBlocksByName:g}=(0,m.useSelect)(y.store),{updateBlockAttributes:b}=(0,m.useDispatch)(y.store),{editEntityRecord:v,saveEditedEntityRecord:w}=(0,m.useDispatch)(Wr.store),{setCurrentColor:k,setCurrentFont:_}=ms(),{setUserConfig:x}=(0,f.useContext)(cc),{globalStylesId:C,getEntityRecord:S,getEditedEntityRecord:E}=(0,m.useSelect)((e=>({globalStylesId:e(Wr.store).__experimentalGetCurrentGlobalStylesId(),getEntityRecord:e(Wr.store).getEntityRecord,getEditedEntityRecord:e(Wr.store).getEditedEntityRecord}))),I=(0,m.useRegistry)(),{getColorVariations:T,getFontVariations:A,getColorVariationByTitle:P}=Js(),N=(0,m.useSelect)((e=>e(Wr.store).__experimentalGetCurrentThemeGlobalStylesVariations()),[]),{getCurrentColor:O,getCurrentFont:R,getInitializedCustomScheme:M,getUserStyleWithSettings:L,getCustomVariationTemplates:D,isEditorIframeLoaded:B}=(0,m.useSelect)((e=>{const t=e(Qa);return{currentPaletteColors:t.getCurrentPaletteColors(),getCurrentColor:t.getCurrentColor,getCurrentFont:t.getCurrentFont,getInitializedCustomScheme:t.getInitializedCustomScheme,getUserStyleWithSettings:t.getUserStyleWithSettings,getCustomVariationTemplates:t.getCustomVariationTemplates,isEditorIframeLoaded:t.getIsEditorIframeLoaded()}})),[F]=lc("color.palette.core"),[j]=lc("color.palette.theme"),[U]=lc("color.palette.custom"),q=(0,f.useMemo)((()=>[...U||[],...j||[],...F||[]]),[U,j,F]),[$]=uc("",void 0,"user",{shouldDecodeEncode:!1}),[H,z]=uc("",void 0,"all",{shouldDecodeEncode:!1});(0,f.useEffect)((()=>{["blocks","color","elements","typography"].every((e=>$.hasOwnProperty(e)))&&c($)}),[$,c]);const G=(0,f.useCallback)((()=>[H.css,e=>z({...L(),css:e})]),[H.css,L,z]),V=(0,f.useMemo)((()=>E("root","globalStyles",C)),[E,C]),W=(0,f.useCallback)((()=>E("root","globalStyles",C)),[E,C]),Y=(0,f.useCallback)((e=>{var t;const n=P(e),o=Object.entries(null!==(t=n?.styles?.blocks?.["core/group"]?.variations)&&void 0!==t?t:{}).map((([e,t])=>({name:e,background:t?.color?.background,text:t?.color?.text,elements:t?.elements})));return o.find((e=>"default"===e.name))||o.unshift({name:"section-default",background:n?.styles?.color?.background,text:n?.styles?.color?.text,elements:n?.styles?.elements}),o}),[P]),J=(0,f.useCallback)((({rootBlocks:e,background_color:t,text_color:n,button_color:o,button_text_color:i,section_to_update:r=""})=>{t=t?.slug||t?.match(/var\(--wp--preset--color--(theme-\d+)\)/)?.[1]||t,n=n?.slug||n?.match(/var\(--wp--preset--color--(theme-\d+)\)/)?.[1]||n,o=o?.slug||o?.match(/var\(--wp--preset--color--(theme-\d+)\)/)?.[1]||o,i=i?.slug||i?.match(/var\(--wp--preset--color--(theme-\d+)\)/)?.[1]||i;const a=[],s=e=>{const t=[],r={...h(e.clientId)};switch(e.name){case"core/button":case"jetpack/button":i&&(r.textColor=i),o&&(r.backgroundColor=o),(o||i)&&t.push({clientId:e.clientId,attributes:r});break;case"core/heading":case"core/paragraph":case"core/site-title":case"core/post-title":n&&(r.textColor=n,t.push({clientId:e.clientId,attributes:r}));break;case"jetpack/subscriptions":i&&(r.textColor=i),o&&(r.buttonBackgroundColor=o),(o||i)&&t.push({clientId:e.clientId,attributes:r})}return e.innerBlocks.forEach((e=>{t.push(...s(e))})),t};e.forEach((e=>{const o=h(e.clientId);if(r){const e=o.className?.match(/is-style-(\S+)\b/);if(e&&e[1]!==r)return}const i={...o};t&&(i.backgroundColor=t),n&&(i.textColor=n),(t||n)&&a.push({clientId:e.clientId,attributes:i}),a.push(...s(e))})),a.forEach((e=>{b(e.clientId,e.attributes)}))}),[h,b]),K=(0,f.useCallback)((()=>{const t=g("core/post-content")[0];return[...p(t),...p(e("header")),...p(e("footer"))]}),[g,p,e]),X=(0,f.useCallback)((e=>{const{color:o,font:i,undoIgnore:r=!1,updateBlocks:c=!0}=e;let u=o||O()||t,d=i||R()||n;const p=T();p?.find((e=>e.title===u))||(u=p[Math.floor(Math.random()*p.length)]?.title);const h=(null!=p?p:N)?.find((e=>e.title===u));if(o){k(u),a(u);const e=h?.settings?.color?.palette?.theme;l(e),c&&I.batch((()=>{Y(u).forEach((e=>{J({rootBlocks:K(),background_color:e.background,text_color:e.text,button_color:e.elements?.button?.color?.background,button_text_color:e.elements?.button?.color?.text,section_to_update:e.name})}))}))}const g=A();g?.find((e=>e.title===d))||(d=g[Math.floor(Math.random()*g.length)]?.title);const m=(null!=g?g:N)?.find((e=>e.title===d));return i&&(_(d),s(d)),x((e=>{const t={arrayMerge:(e,t)=>t},n=(e={},t={})=>{const o={...e};for(const i in t)t.hasOwnProperty(i)&&("typography"===i||"object"!=typeof t[i]||Array.isArray(t[i])?o[i]=t[i]:o[i]=n(e[i]||{},t[i]));return o},o={settings:[h?.settings,m?.settings].filter(Boolean).reduce(((e,n)=>fs(e,n,t)),{}),styles:[h?.styles,m?.styles].filter(Boolean).reduce(((e,n)=>fs(e,n,t)),{})};return n(e,o)}),{undoIgnore:r}),v("root","globalStyles",C,{title:u},{undoIgnore:!0}),{selectedColorVariation:u,selectedFontVariation:d}}),[t,n,v,T,O,R,A,K,Y,C,I,k,a,_,s,l,x,J,N]),Q=(0,f.useCallback)((e=>{const t=P(e);return t?.styles?.color?.background}),[P]),Z=(0,f.useCallback)((e=>{const t=P(e);return t?.styles?.color?.text}),[P]),ee=(0,f.useCallback)((e=>{var t;const n=P(e),o=Object.entries(null!==(t=n?.styles?.blocks?.["core/group"]?.variations)&&void 0!==t?t:{}).map((([e,t])=>({name:e,label:e,background:pc(t?.color?.background,n),text:pc(t?.color?.text,n)})));return o.find((e=>"default"===e.name))||o.unshift({name:"default",label:"Default",background:pc(n?.styles?.color?.background,n),text:pc(n?.styles?.color?.text,n)}),o}),[P]),te=(0,f.useCallback)((({custom_colors:e})=>{const t=D(),n=[],o=sc();for(const i of o){const o=JSON.parse(JSON.stringify(t[0]));n.push(i({templateTheme:o,colors:e}))}const i=n.filter((e=>null!==e));return r(i),i}),[D,r]);return(0,f.useEffect)((()=>{if(!D().length||M()||!o||!B)return;const e=JSON.parse(JSON.stringify(V));e.title=t?.startsWith(Ks)?t:Ks,r([e]),l(q),i(!0)}),[t,q,D,S,M,C,o,r,i,l,V,X,B,K]),{currentTheme:V,getCurrentTheme:W,resetStyles:()=>{u&&(d(),v("root","globalStyles",C,{id:C,settings:{},styles:{}}),w("root","globalStyles",C))},setStyles:X,saveStylesEntityRecord:async()=>{await w("root","globalStyles",C)},themeColors:j,paletteColors:q,hexToRgb:e=>{let t=0,n=0,o=0;return 4===e.length?(t="0x"+e[1]+e[1],n="0x"+e[2]+e[2],o="0x"+e[3]+e[3]):7===e.length&&(t="0x"+e[1]+e[2],n="0x"+e[3]+e[4],o="0x"+e[5]+e[6]),[+t,+n,+o].join(",")},getVariationBackgroundColor:Q,getVariationTextColor:Z,getVariationSectionColors:ee,useCustomCss:G,getThemeColors:()=>j,resetBlockTextColor:e=>{b(e.clientId,{style:{...e.attributes.style,color:{text:void 0}}})},createCustomSchemeVariations:te,getCustomVariationTemplateCopy:()=>JSON.parse(JSON.stringify(D()[0])),updateRootBlocksStyles:J}}async function gc(e){try{return await jr({path:`/wp/v2/posts?tags=${e}&status=private`,method:"GET"})}catch(e){ra.error("Error fetching dummy posts: ",e)}}async function mc(e){if(!e)return;const t={posts:e};try{return await jr({path:"/wpcom/v2/big-sky/v1/dummy-posts",method:"POST",data:t})}catch(e){return ra.error("Error creating dummy posts: ",e),!1}}async function fc(){try{return await jr({path:"/wp/v2/tags?search=dummy-post",method:"GET"})}catch(e){ra.error("Error fetching dummy post tag: ",e)}}async function yc(){try{return await jr({path:"/wp/v2/tags?name=dummy-post",method:"POST"})}catch(e){ra.error("Error creating dummy post tag: ",e)}}const bc=window.wp.router;function vc(){const e="big-sky__dummy-section alignfull",{getBlocks:t,getBlocksByName:n}=(0,m.useSelect)(y.store),{setZoomLevel:o,resetZoomLevel:i}=h((0,m.useDispatch)(y.store)),{__unstableSetEditorMode:r,replaceInnerBlocks:a,updateBlockAttributes:s,replaceBlock:c,__unstableMarkNextChangeAsNotPersistent:l}=(0,m.useDispatch)(y.store),{delaySettings:u,isEditorIframeLoaded:d}=(0,m.useSelect)((e=>({delaySettings:e(Qa).getDelaySettings(),isEditorIframeLoaded:e(Qa).getIsEditorIframeLoaded()}))),{getTemplatePartClientID:p,getContentBlockClientID:g,scrollToBlock:b}=bs(),{useLocation:v}=h(bc.privateApis),{params:w,query:k}=v();let _="view";k?.canvas?_=k.canvas:w?.canvas&&(_=w.canvas);const x=(e,n)=>{const o=e.blocks[0],i=A(e),r=t(i).map((e=>e.clientId));r[n]&&T(o,r[n])},C=async(e,n,o)=>{const i=e.blocks[0],r=A(e),u=t(r).map((e=>e.clientId));i.attributes.className+=" big-sky__slide-in",i.supports={color:{background:!0},...i.supports},o||(b(u[n],"center"),await Wa(500)),"header"===e.category||"footer"===e.category?(l(),a(r,[i])):(l(),c(u[n],i)),o||await Wa(750),s(i.clientId,{className:i.attributes.className.replace(" big-sky__slide-in","")})},S=(0,f.useCallback)((()=>{if(!d||"view"===_)return;const{canvasiFrameRoot:e}=ys();let t=window.innerWidth;if(t>1850?t=1850:t<980&&(t=980),e){const n=-1e-5*t+1.035;e.style.setProperty("--block-editor-selected-block-scale",n)}}),[_,d]),E=({isEmpty:t=!0,className:n=""}={})=>(0,La.createBlock)("core/group",{className:`${e} ${t?"big-sky__is-empty-dummy":""} ${n}`},[(0,La.createBlock)("core/paragraph",{placeholder:" "})]),I=async({count:e,replaceTemplateParts:n=!0})=>{if(0===e)return;const o=Array.from({length:e}).map(E),i=g(),r=p("header"),s=p("footer");if(n&&r){const e=t(r);e?.[0]?.innerBlocks?.[0]?.attributes?.metadata?.remotePatternId||(l(),a(r,[o.shift()]))}if(n&&s){const e=t(s);e?.[0]?.innerBlocks?.[0]?.attributes?.metadata?.remotePatternId||(l(),a(s,[o.shift()]))}const c=t(i);c?.[0]?.innerBlocks?.[0]?.attributes?.metadata?.remotePatternId||(l(),a(i,o))},T=(t,n)=>{l(),a(n,[t]),l(),s(t.clientId,{style:{...t.attributes.style,color:{background:void 0}}}),l(),s(n,{className:`${e} big-sky__has-dummy-blocks `})},A=e=>"header"===e?.category?p("header"):"footer"===e?.category?p("footer"):g(),P=(0,f.useCallback)((e=>{const{canvasiFrameRoot:t}=ys();if(t)for(const[n,o]of Object.entries(e))t.style.setProperty(n,o)}),[]),N=e=>{e.preventDefault(),e.stopImmediatePropagation()};return{canvasMode:_,addPatternsToCanvas:async(e,t=!0,n=!1)=>{await I({count:e.length,replaceTemplateParts:t});const{headerPattern:o,bodyPatterns:i,footerPattern:r}=(e=>{const t=e.find((e=>"header"===e.pattern.category)),n=e.find((e=>"footer"===e.pattern.category)),o=e.filter((e=>"header"!==e.pattern.category&&"footer"!==e.pattern.category));return{headerPattern:t,bodyPatterns:o,footerPattern:n}})(e);await Wa(u.onboarding.afterBlockProcessed),o&&x(o.pattern,0),r&&x(r.pattern,0);for(let e=0;e<i.length;e++)x(i[e].pattern,e);o&&(await o.resolver,await C(o.pattern,0,n));for(let e=0;e<i.length;e++){const{pattern:t,resolver:o}=i[e];await o,n||await Wa(u.onboarding.afterBlockProcessed),await C(t,e,n)}r&&(await r.resolver,n||await Wa(u.onboarding.afterBlockProcessed),await C(r.pattern,0,n)),await Wa(u.onboarding.afterBlockProcessed),(()=>{const{canvasiFrameWindow:e}=ys();e?.scrollTo({top:0,behavior:"smooth"})})()},setStyleProperties:P,clearTemplateParts:()=>new Promise((e=>{let t=()=>{};const o=()=>{const o=n("core/template-part");if(o.length>0){t();for(const e of o)l(),a(e,[(0,La.createBlock)("core/paragraph",{placeholder:" "})]);e()}};t=(0,m.subscribe)(o),o()})),clearBlocks:()=>new Promise((e=>{let n=()=>{};const o=()=>{t(g()).length>0&&(n(),l(),a(g(),[(0,La.createBlock)("core/paragraph",{placeholder:" "})]),e())};n=(0,m.subscribe)(o),o()})),createDummySection:E,insertDummySections:I,setIframeScale:S,zoomOut:async()=>{const{canvasiFrameRoot:e}=ys();o&&o(.5),r("zoom-out");const{canvasiFrameBody:t}=ys();return t&&t.addEventListener("dblclick",N,!0),await Promise.resolve(),e&&await Promise.all(e.getAnimations().map((e=>e.finished))),window.dispatchEvent(new Event("resize")),await Wa(0)},zoomIn:async()=>{const{canvasiFrameRoot:e}=ys();i&&i(),r("edit"),await Promise.resolve(),e&&await Promise.all(e.getAnimations().map((e=>e.finished))),window.dispatchEvent(new Event("resize"));const{canvasiFrameBody:t}=ys();return t&&t.removeEventListener("dblclick",N),await Wa(0)}}}const wc=()=>{const[e,t]=(0,f.useState)(!1),n=(0,f.useRef)(!1),{postType:o,postId:i}=(0,m.useSelect)((e=>({postType:e(g.store).getCurrentPostType(),postId:e(g.store).getCurrentPostId()}))),{isSavingPost:r}=(0,m.useSelect)((e=>({isSavingPost:e(Wr.store).isSavingEntityRecord("postType",o,i)})));return(0,f.useEffect)((()=>{r&&!n.current&&(t(!1),n.current=!0),!r&&n.current&&(t(!0),ea("post_saved"),n.current=!1)}),[r]),e},kc=window.wp.mediaUtils,_c=window.wp.hooks;function xc(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function Cc(e){return"#"+e.map(xc).join("")}function Sc(e,t,n){for(var o=0;o<n.length;o++)if(Ec(e,t,n[o]))return!0;return!1}function Ec(e,t,n){switch(n.length){case 3:if(function(e,t,n){return 255!==e[t+3]||e[t]===n[0]&&e[t+1]===n[1]&&e[t+2]===n[2]}(e,t,n))return!0;break;case 4:if(function(e,t,n){return e[t+3]&&n[3]?e[t]===n[0]&&e[t+1]===n[1]&&e[t+2]===n[2]&&e[t+3]===n[3]:e[t+3]===n[3]}(e,t,n))return!0;break;case 5:if(function(e,t,n){var o=n[0],i=n[1],r=n[2],a=n[3],s=n[4],c=e[t+3],l=Ic(c,a,s);return a?!(c||!l)||!!(Ic(e[t],o,s)&&Ic(e[t+1],i,s)&&Ic(e[t+2],r,s)&&l):l}(e,t,n))return!0;break;default:return!1}}function Ic(e,t,n){return e>=t-n&&e<=t+n}function Tc(e,t,n){for(var o={},i=n.dominantDivider||24,r=n.ignoredColor,a=n.step,s=[0,0,0,0,0],c=0;c<t;c+=a){var l=e[c],u=e[c+1],d=e[c+2],p=e[c+3];if(!r||!Sc(e,c,r)){var h=Math.round(l/i)+","+Math.round(u/i)+","+Math.round(d/i);o[h]?o[h]=[o[h][0]+l*p,o[h][1]+u*p,o[h][2]+d*p,o[h][3]+p,o[h][4]+1]:o[h]=[l*p,u*p,d*p,p,1],s[4]<o[h][4]&&(s=o[h])}}var g=s[0],m=s[1],f=s[2],y=s[3],b=s[4];return y?[Math.round(g/y),Math.round(m/y),Math.round(f/y),Math.round(y/b)]:n.defaultColor}function Ac(e,t,n){for(var o=0,i=0,r=0,a=0,s=0,c=n.ignoredColor,l=n.step,u=0;u<t;u+=l){var d=e[u+3],p=e[u]*d,h=e[u+1]*d,g=e[u+2]*d;c&&Sc(e,u,c)||(o+=p,i+=h,r+=g,a+=d,s++)}return a?[Math.round(o/a),Math.round(i/a),Math.round(r/a),Math.round(a/s)]:n.defaultColor}function Pc(e,t,n){for(var o=0,i=0,r=0,a=0,s=0,c=n.ignoredColor,l=n.step,u=0;u<t;u+=l){var d=e[u],p=e[u+1],h=e[u+2],g=e[u+3];c&&Sc(e,u,c)||(o+=d*d*g,i+=p*p*g,r+=h*h*g,a+=g,s++)}return a?[Math.round(Math.sqrt(o/a)),Math.round(Math.sqrt(i/a)),Math.round(Math.sqrt(r/a)),Math.round(a/s)]:n.defaultColor}function Nc(e){return Oc(e,"defaultColor",[0,0,0,0])}function Oc(e,t,n){return void 0===e[t]?n:e[t]}function Rc(e){return function(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement}(e)?"canvas":function(e){return Lc&&e instanceof OffscreenCanvas}(e)?"offscreencanvas":function(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}(e)?"imagebitmap":e.src}function Mc(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement}var Lc="undefined"!=typeof OffscreenCanvas,Dc="undefined"==typeof window;function Bc(e){return Error("FastAverageColor: "+e)}function Fc(e,t){t||console.error(e)}var jc=function(){function e(){this.canvas=null,this.ctx=null}return e.prototype.getColorAsync=function(e,t){if(!e)return Promise.reject(Bc("call .getColorAsync() without resource"));if("string"==typeof e){if("undefined"==typeof Image)return Promise.reject(Bc("resource as string is not supported in this environment"));var n=new Image;return n.crossOrigin=t&&t.crossOrigin||"",n.src=e,this.bindImageEvents(n,t)}if(Mc(e)&&!e.complete)return this.bindImageEvents(e,t);var o=this.getColor(e,t);return o.error?Promise.reject(o.error):Promise.resolve(o)},e.prototype.getColor=function(e,t){var n=Nc(t=t||{});if(!e)return Fc(r=Bc("call .getColor() without resource"),t.silent),this.prepareResult(n,r);var o=function(e,t){var n,o=Oc(t,"left",0),i=Oc(t,"top",0),r=Oc(t,"width",e.width),a=Oc(t,"height",e.height),s=r,c=a;return"precision"===t.mode||(r>a?(n=r/a,s=100,c=Math.round(s/n)):(n=a/r,c=100,s=Math.round(c/n)),(s>r||c>a||s<10||c<10)&&(s=r,c=a)),{srcLeft:o,srcTop:i,srcWidth:r,srcHeight:a,destWidth:s,destHeight:c}}(function(e){if(Mc(e)){var t=e.naturalWidth,n=e.naturalHeight;return e.naturalWidth||-1===e.src.search(/\.svg(\?|$)/i)||(t=n=100),{width:t,height:n}}return function(e){return"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement}(e)?{width:e.videoWidth,height:e.videoHeight}:{width:e.width,height:e.height}}(e),t);if(!(o.srcWidth&&o.srcHeight&&o.destWidth&&o.destHeight))return Fc(r=Bc('incorrect sizes for resource "'.concat(Rc(e),'"')),t.silent),this.prepareResult(n,r);if(!this.canvas&&(this.canvas=Dc?Lc?new OffscreenCanvas(1,1):null:document.createElement("canvas"),!this.canvas))return Fc(r=Bc("OffscreenCanvas is not supported in this browser"),t.silent),this.prepareResult(n,r);if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx)return Fc(r=Bc("Canvas Context 2D is not supported in this browser"),t.silent),this.prepareResult(n);this.ctx.imageSmoothingEnabled=!1}this.canvas.width=o.destWidth,this.canvas.height=o.destHeight;try{this.ctx.clearRect(0,0,o.destWidth,o.destHeight),this.ctx.drawImage(e,o.srcLeft,o.srcTop,o.srcWidth,o.srcHeight,0,0,o.destWidth,o.destHeight);var i=this.ctx.getImageData(0,0,o.destWidth,o.destHeight).data;return this.prepareResult(this.getColorFromArray4(i,t))}catch(o){var r;return Fc(r=Bc("security error (CORS) for resource ".concat(Rc(e),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image")),t.silent),!t.silent&&console.error(o),this.prepareResult(n,r)}},e.prototype.getColorFromArray4=function(e,t){t=t||{};var n=e.length,o=Nc(t);if(n<4)return o;var i,r,a,s=n-n%4,c=4*(t.step||1);switch(t.algorithm||"sqrt"){case"simple":i=Ac;break;case"sqrt":i=Pc;break;case"dominant":i=Tc;break;default:throw Bc("".concat(t.algorithm," is unknown algorithm"))}return i(e,s,{defaultColor:o,ignoredColor:(r=t.ignoredColor,r?(a=r,Array.isArray(a[0])?r:[r]):[]),step:c,dominantDivider:t.dominantDivider})},e.prototype.prepareResult=function(e,t){var n,o=e.slice(0,3),i=[e[0],e[1],e[2],e[3]/255],r=(299*(n=e)[0]+587*n[1]+114*n[2])/1e3<128;return{value:[e[0],e[1],e[2],e[3]],rgb:"rgb("+o.join(",")+")",rgba:"rgba("+i.join(",")+")",hex:Cc(o),hexa:Cc(e),isDark:r,isLight:!r,error:t}},e.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},e.prototype.bindImageEvents=function(e,t){var n=this;return new Promise((function(o,i){var r=function(){c();var r=n.getColor(e,t);r.error?i(r.error):o(r)},a=function(){c(),i(Bc('Error loading image "'.concat(e.src,'"')))},s=function(){c(),i(Bc('Image "'.concat(e.src,'" loading aborted')))},c=function(){e.removeEventListener("load",r),e.removeEventListener("error",a),e.removeEventListener("abort",s)};e.addEventListener("load",r),e.addEventListener("error",a),e.addEventListener("abort",s)}))},e}();async function Uc(e,t=1024,n=1024){const o=document.createElement("img");o.width=t/2,o.height=n/2;const i=window.URL.createObjectURL(e),r=new Promise((e=>{const t=()=>{window.URL.revokeObjectURL(i),o.removeEventListener("load",t),e()};o.addEventListener("load",t)}));return o.src=i,await r,o}function qc(e=1024,t=1024){const n=document.createElement("canvas");return n.width=e,n.height=t,n}function $c(e,t,n){const o=`/* START Big Sky */\n.wp-block-site-logo .custom-logo[src*="${new window.URL(n).pathname}"] {\n\tbackground-color: currentcolor;\n\t-webkit-mask-image: url('${n}');\n\t-webkit-mask-position: center center;\n\t-webkit-mask-size: cover;\n\t-webkit-mask-repeat: no-repeat;\n\tmask-image: url('${n}');\n\tmask-position: center center;\n\tmask-size: cover;\n\tmask-repeat: no-repeat;\n\tobject-position: -1024px -1024px;\n}\n\n/* END Big Sky */`;e.includes(o)||t(e.replace(/\/\* START Big Sky \*\/.*\/\* END Big Sky \*\//s,"").trim()+`\n\n${o}`)}function Hc(){return Hc.fastAverageColor||(Hc.fastAverageColor=new jc),Hc.fastAverageColor}const zc="#ffffff",Gc=async e=>{if(!e)return zc;const{r:t,g:n,b:o,a:i}=zs(zc).toRgb();try{const r=(0,_c.applyFilters)("media.crossOrigin",void 0,e);return(await Hc().getColorAsync(e,{defaultColor:[t,n,o,255*i],silent:!0,crossOrigin:r})).hex}catch(e){return zc}},Vc=["jpeg","jpg","png","gif","svg"];function Wc(){const{getImageStyle:e}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{getBlock:e(y.store).getBlock,getBlocksByName:e(y.store).getBlocksByName,selectedBlock:t(),isEditorIframeLoaded:e(Qa).getIsEditorIframeLoaded(),isHandoff:e(Qa).getIsHandoff(),getImageStyle:e(Qa).getImageStyle}})),t=(0,m.useRegistry)(),{editEntityRecord:n}=(0,m.useDispatch)(Wr.store),{updateBlockAttributes:o}=(0,m.useDispatch)(y.store),{setBlockIsProcessing:i}=bs(),{generateImage:r,addCachedImage:a}=(0,m.useDispatch)(Qa),{getSurroundingContentOfBlock:s}=bs(),{getThemeColors:c}=hc(),{useCustomCss:l}=hc(),[u,d]=l(),p=async(e,t)=>{for(const n of e){if(b(n)){const e=n.clientId;o(e,t[e]),i(n,!1)}n.innerBlocks?.length>0&&await p(n.innerBlocks,t)}},h=async(e,t=100)=>{const n=await(0,m.dispatch)(Qa).nextStockPhoto(e,t);return n?.URL&&a(n?.URL),n?.URL},g=async({block:t,topic:n})=>{const o=`Create a minimalistic background image to fit a versatile ${n} theme, and match the following color palette: ${c().map((e=>e.color)).join(", ")}.\n\t\tThe center of the image should be mostly empty for content placement, while the edges feature abstract, subtle design elements that evoke a sense of simplicity.\n\t\tAvoid using specific objects or textures to ensure the theme can be interpreted broadly. The image should be without any text or prominent focal points.`;return f({block:t,description:n,customPrompt:o,style:e()||"photographic",size:"landscape"})},f=async({block:e,description:t,style:n,size:r=!1,customPrompt:a=!1,retry:c=!1})=>{if(!e||!b(e))return(0,z.__)("I cannot generate an image for the currently selected block.","big-sky");const l=await la(!c);if(!l)return(0,z.__)("I am unable to perform your request.","big-sky");const u=e?.clientId?s(e):"";let d;a?d=a:(d=`Please create an image based on this content: ${t||u}.`,d+=" The image should not contain any text.");const p=e.attributes.aspectRatio;let h,g,m;const y={square:{width:1024,height:1024},portrait:{width:768,height:1024},landscape:{width:1024,height:768}};r?m=y[r]:"1"!==p&&p?([h,g]=p.split("/").map(Number),m=h/g>1?y.landscape:y.portrait):m=y.square;const w={prompt:d,style:n,model:"flux",token:l.token};let k,_=!1;try{if(k=await fetch(`https://public-api.wordpress.com/wpcom/v2/sites/${l.blogId}/ai-image`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...w,...m})}),k.status>=300){if(!c)return f({block:e,description:t,style:n,size:r,customPrompt:a,retry:!0});ra.error("Error calling Image Generation API: ",k),_=!0}}catch(o){if(!c)return f({block:e,description:t,style:n,size:r,customPrompt:a,retry:!0});ra.error(o),_=!0}if(_)return i(e,!1),(0,z.__)("I encountered an error while processing your request. Please try again.","big-sky");const x=await k.blob();let C=null;for(await(0,kc.uploadMedia)({filesList:[new File([x],`${t||"untitled"}.png`,{type:"image/png"})],onError:({message:e})=>ra.error(e),onFileChange:([n])=>{if(n.id){const r=new Image;r.src=n.url,r.addEventListener("load",(()=>{const r=v(e,n.url,t);o(e.clientId,r),i(e,!1),C=n.url})),r.addEventListener("error",(()=>{i(e,!1)}))}}});!C;)await new Promise((e=>setTimeout(e,100)));return C},b=e=>!(!e||!["core/image","core/cover","core/group","core/site-logo"].includes(e.name)||"core/group"===e.name&&!e.attributes.style?.background?.backgroundImage?.url),v=(e,t,n)=>{const o={};switch(e.name){case"core/image":o.url=t,o.alt=n;break;case"core/cover":o.url=t,o.alt=n,100===e.attributes.dimRatio&&(o.dimRatio=50);break;case"core/group":o.style={background:{backgroundImage:{source:"file",url:decodeURIComponent(t)}}}}return o};return{setImagesInBlocks:async(e,n,r=!0,a={},s=!1)=>{const c=[];let l=0;const u=async e=>{for(const t of e){if(b(t))if("core/cover"!==t.name||s)c.push(h(n));else try{const e=g({block:t,topic:n});c.push(e)}catch(e){ra.error("Error generating cover image: ",e),c.push(h(n))}t.innerBlocks?.length>0&&u(t.innerBlocks)}},d=(e,t)=>{for(const s of e){if(b(s)){const e=v(s,t[l],n);l++,r?(s.attributes={...s.attributes,...e},a[s.clientId]=e):(o(s.clientId,e),i(s,!1))}s.innerBlocks?.length>0&&d(s.innerBlocks,t,l)}};u(e);const p=await Promise.all(c);if(t.batch((()=>{d(e,p)})),r)for(let e=0;e<2;e++)h(n)},getStockImageURL:h,setImages:()=>{},generateLogoWithAI:async({block:e,description:o})=>{var a;const s=`You are an expert at creating line drawing logos for business websites.\n\n\t\tAll of the logos you create follow these rules:\n\n\t\t- The logo must show a single person, place, or object that represents the following description: ${null!==(a=o.description)&&void 0!==a?a:o}\n\t\t- The logo must always be a simple, black vector line drawing. Never use color.\n\t\t- The logo should NEVER contain text, words, letters, or numbers.`,c=await r({prompt:s,size:"1024x1024",response_format:"b64_json",image_format:"PNG"}),l=c?.data?.[0]?.b64_json;if(l)try{const r=function(e){const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return new Blob([n],{type:"image/png"})}(l),a=await async function(e,t=1.5){const n=await Uc(e),o=qc(),i=o.getContext("2d");i.drawImage(n,0,0,o.width,o.height);const r=i.getImageData(0,0,o.width,o.height),{data:a}=r;for(let e=0;e<a.length;e+=4){const n=a[e],o=window.Math.round((n-128)*t)+128,i=window.Math.max(window.Math.min(o,255),0);a[e+3]=255-i,a[e]=0,a[e+1]=0,a[e+2]=0}return i.putImageData(r,0,0),await new Promise((e=>o.toBlob(e)))}(r),s=await async function(e){const t=await Uc(e),n=qc(),o=n.getContext("2d");o.drawImage(t,0,0,n.width,n.height);const i=o.getImageData(0,0,n.width,n.height),{data:r}=i;let a=1/0,s=-1/0,c=1/0,l=-1/0;for(let e=0;e<n.width;e++)for(let t=0;t<n.height;t++)r[4*(t*n.width+e)+3]&&(e<a&&(a=e),e>s&&(s=e),t<c&&(c=t),t>l&&(l=t));let u=1+s-a,d=1+l-c;if(u<d){const e=(d-u)/2;u=d,a-=Math.floor(e)}else if(d<u){const e=(u-d)/2;d=u,c-=Math.floor(e)}return n.setAttribute("width",u),n.setAttribute("height",d),o.putImageData(i,-a,-c,a,c,u,d),await new Promise((e=>n.toBlob(e)))}(a);return await(0,kc.uploadMedia)({filesList:[new File([s],"site_logo.png",{type:"image/png"})],additionalData:{"meta[big_sky_generated_logo]":-1},onError:({message:e})=>ra.error(e),onFileChange:([o])=>{if(o?.id){t.batch((()=>{$c(u,d,o.url),n("root","site",void 0,{site_logo:o.id})}));const{canvasiFrameRoot:r}=ys();r?.style?.setProperty("--site-logo-url",`url(${o.url})`),e&&i(e,!1)}}}),(0,z.sprintf)(
// Translators: Placeholder represents the description of the image requested by the user.
// Translators: Placeholder represents the description of the image requested by the user.
(0,z.__)("I have generated a new logo of: %s","big-sky"),o)}catch(e){return ra.error("Error:",e),(0,z.__)("I encountered an error while processing your request. Please try again.","big-sky")}},generateImageWithAI:f,getNewStockImage:async({block:e,topic:t})=>{if(!b(e))return(0,z.__)("I cannot generate an image for the currently selected block.","big-sky");const n=await h(t);if(!n)return i(e,!1),(0,z.__)("I could not retrieve a new stock image. Please try again.","big-sky");const r=v(e,n,t);return o(e.clientId,r),i(e,!1),(0,z.sprintf)(
// Translators: Placeholder represents the topic of the image requested by the user.
// Translators: Placeholder represents the topic of the image requested by the user.
(0,z.__)("I have inserted a new stock image of: %s","big-sky"),t)},canGenerateImage:b,updateImagesInBlocks:p,buildAttrToUpdateImage:v}}const Yc=JSON.parse('{"V":["Designed with <a href=\\"https://wordpress.com\\" rel=\\"nofollow\\">WordPress</a>"]}');function Jc(){const{getCachedContent:e}=(0,m.useSelect)((e=>{const{getCachedContent:t}=e(Qa);return t(),{getCachedContent:t}}),[]),{canGenerateImage:t,buildAttrToUpdateImage:n}=Wc(),{updateBlockAttributes:o}=(0,m.useDispatch)(y.store),i=(t,n,r={"core/heading":0,"core/paragraph":0,"core/button":0})=>{const a=e(),s=n.sectionCategory;if(Ua.includes(s))return ja[s].replaceContent(t,a?.[s]);if(t.innerBlocks?.length>0)return void t.innerBlocks.forEach((e=>i(e,n,r)));if("core/heading"!==t.name&&"core/paragraph"!==t.name&&"core/button"!==t.name)return;const c=`${s}-${t.name.replace("core/","")}`,l=a[c]?a[c]:[],u=n.selectedSectionContent[c];let d;u?.length>0&&u?.length-1>=r[t.name]?(d=u[r[t.name]],r[t.name]++):(d=l[r[t.name]],r[t.name]++),"core/heading"!==t.name&&"core/paragraph"!==t.name||(n.conceptSection?t.attributes.content=d:o(t.clientId,{content:d})),"core/button"===t.name&&(n.conceptSection?t.attributes.text=d:o(t.clientId,{text:d})),l?.length-1===r[t.name]&&(r[t.name]=0)},r=(e,t,n)=>{if(Ua.includes(t))return[];switch(e.name){case"core/heading":if(e.attributes.content){const o=`${t}-heading`;n[o]=[...n[o]?n[o]:[],"string"==typeof e.attributes.content?e.attributes.content:e.attributes.content?.text]}break;case"core/paragraph":if(e.attributes.content){const o=`${t}-paragraph`;n[o]=[...n[o]?n[o]:[],"string"==typeof e.attributes.content?e.attributes.content:e.attributes.content?.text]}break;case"core/button":if(e.attributes.text){const o=`${t}-button`;n[o]=[...n[o]?n[o]:[],"string"==typeof e.attributes.text?e.attributes.text:e.attributes.text?.originalHTML]}}return e.innerBlocks?.length>0&&e.innerBlocks.forEach((e=>r(e,t,n))),n},a=(i,r,s={index:0,urls:[]})=>{const c=e();let l=c.images?c.images:[];const u=r?.selectedSectionImages||[],d=u.map((e=>{const t=e.match(/image-pexels-(\d+)/);return t?t[1]:null})).filter(Boolean);if(l=[...u,...l.filter((e=>{const t=e.match(/photos\/(\d+)\/pexels-photo/);return!t||!d.includes(t[1])}))],t(i)){const e=s.index;s.index=(s.index+1)%l.length;const t=l[e],a=n(i,t);r.conceptSection?i.attributes={...i.attributes,...a}:o(i.clientId,a)}i.innerBlocks?.length>0&&i.innerBlocks.forEach((e=>a(e,r,s)))},s=(e,t)=>{switch(e.name){case"core/image":case"core/cover":e.attributes.url&&t.push(e.attributes.url);break;case"core/group":e.attributes.style?.background?.backgroundImage?.url&&t.push(e.attributes.style?.background?.backgroundImage?.url)}return e.innerBlocks?.length>0&&e.innerBlocks.forEach((e=>s(e,t))),t};return{updateSectionContent:i,getPatternContent:r,updatePatternImages:a,getPatternImages:s}}const Kc=xa.format({role:"You are a website copy editor and can produce relevant content for a website based on a site description that will be provided as a string description. Avoid overly flowery language and meaningless buzz words/phrases.",context:'The content to update will be provided as an array of JSON objects in the following format:\n\t\t{\n\t\t\t"t":"the type of content"\n\t\t\t"i": "a unique identifier for the content"\n\t\t\t"ln":"number of characters to limit the content to"\n\t\t\t"l":"the language of the content"\n\t\t}',examplesDescription:"The new copy you write is mapped to the same id from the 'i' property as in the original array of objects. For example, for a site description of 'An organic produce delivery service based in New York City':",examples:['Content before:\n\t\t\t{ "content":\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "123",\n\t\t\t\t\t\t"t": "h2",\n\t\t\t\t\t\t"ln": "35"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "456",\n\t\t\t\t\t\t"t": "p",\n\t\t\t\t\t\t"ln": "80"\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}','Content after:\n\t\t\t{ "content":\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "123",\n\t\t\t\t\t\t"t": "h2",\n\t\t\t\t\t\t"e": "Fred\'s Farm\'s promise to you"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"i": "456",\n\t\t\t\t\t\t"t": "p",\n\t\t\t\t\t\t"e": "Our mission is to provide the freshest organic produce to our customers."\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}'],do:['If the "l" property is specified, translate the example text to the same language as the "l" property. PLEASE DO NOT generate new copy.',"Otherwise, generate new copy according to the following guidelines:","You love being succinct and so you take the ln value of each entry very seriously. You write a string as close to this number of characters as possible. Being under this length is better than going over it.",'If the "t" property is "h1" this is a main heading: the main heading should be written in title case and have a length less than 40 characters.','If the "t" property is "h2" this is a secondary heading: secondary headings should be written in sentence case (not title case) and have a length less than 40 characters.','If the "t" property is "p" this is a paragraph its content should relate to the nearest "t" content proceeding it.','If the "t" property is "b" this is a button so the text must be a maximum length of 15 characters.',"You will write this new copy entirely by yourself using your own knowledge. You do not need to call any external tools or functions to do this.","Only ever call replace_content.","Leave the content of your response as null.","Return the updated array of objects as a JSON object."],dont:["Explain your choices to the user.","Ask the user to confirm your choices"]});function Xc(){const e=(0,m.useRegistry)(),{getBlock:t}=(0,m.useSelect)(y.store),{siteDescription:n}=ms().getSiteMetadata(),{getCachedContent:o}=(0,m.useSelect)(Qa),{basicChatModel:i}=(0,m.useSelect)((e=>({basicChatModel:e(Qa).getBasicChatModel()}))),{runChatCompletion:r,addCachedContent:a}=(0,m.useDispatch)(Qa),{updateBlockAttributes:s}=(0,m.useDispatch)(y.store),{setBlockIsProcessing:c}=bs(),{getPatternContent:l,updateSectionContent:u}=Jc(),d=async({blockClientId:e,conceptSection:n,language:o})=>{const i=!!n;let r,a=[];if(n){const e=n[0];a=n,r={name:e.attributes?.metadata?.name,patternCategory:e.attributes?.metadata?.patternCategory}}else a=[t(e)];const s=fa(a).filter((e=>!Yc.V.some((t=>e.example?.includes(t)))));return i||s.forEach((e=>{c(e,!0)})),{content:ya(s,i,o),sectionData:r}};async function p({patternType:e,siteDescription:t,siteLocation:o,pageDescription:s,topic:c,conceptSection:l,reasonForSection:u,numOfSections:d,hasRetried:h=!1}){const g=ja[e].name,m=ja[e].getPrompts({conceptSection:l,siteLocation:o,siteDescription:n,pageDescription:s,numOfSections:d,topic:c});let f="";u&&(f=`The reason for this section is: ${u}, on the topic of ${c}.`);let y="";s&&(y=`The description of the page that this section appears in is: ${s}, so the content should be relevant to this.`);const b=[{role:"system",content:m.system},{role:"user",content:`The site description is: ${t}.\n\n\t\t\t\t\t${f}.\n\n\t\t\t\t\t${y}\n\n\t\t\t\t\t${m.user}`}],v=await r(i,b,null,.2,"json_object");try{let n=JSON.parse(v?.choices?.[0]?.message?.content);return["menu","events","services","testimonials","contact","footer"].includes(e)&&("object"==typeof n&&(n=Object.values(n)[0]),Array.isArray(n)||(n=[n])),n?(a({category:g,content:n}),n):(h||(ra.info(`CONTENT TOOL: ${g} data invalid, retrying.`),p({patternType:e,siteDescription:t,siteLocation:o,conceptSection:l,reasonForSection:u,numOfSections:d,hasRetried:!0})),ra.error(`CONTENT TOOL: ${g} data missing in response after retry, events may not be updated.`),null)}catch(n){if(!h)return p({patternType:e,siteDescription:t,siteLocation:o,conceptSection:l,reasonForSection:u,numOfSections:d,hasRetried:!0});ra.error(`CONTENT TOOL: JSON parsing error for ${g} data, content may be missing.`)}return null}return{generateDummyPostContent:async function({siteDescription:e}){const t=[{role:"system",content:'You are an expert at generating blog posts based on a description of the website.\n\t\t\t\t\tThe post title should be no longer than five words.\n\t\t\t\t\tThe post content should be a paragraph of at least three sentences, but no more than five sentences. Use long descriptive sentences, as if you are writing a blog post.\n\t\t\t\t\tThe post category should be no longer than two words.\n\t\t\t\t\tThe image_search should be a short description of the image you would use for the post, no longer than three words.\n\t\t\t\t\tYou return the data as an array of JSON objects in the following format:\n\t\t\t\t\t{ "title": "Post Title", "content": "Post Content", "category": "Post Category", "image_search": "Image Descriptor" }'},{role:"user",content:`The site description is: ${e}.\n\t\t\t\t\tGenerate 6 blog posts for this website based on the description.`}],n=await r(i,t,null,.2,"json_object");let o=n?.choices?.[0]?.message?.content;return!!o&&(o=JSON.parse(o),"object"!=typeof o||Array.isArray(o)||(o=Object.values(o)[0]),Array.isArray(o)||(o=[o]),o)},replaceContent:async function({blockClientId:h,conceptSection:g,siteDescription:m,siteLocation:f,reasonForSection:y,topic:b,pageTitle:v,sectionCategory:w,requestedSubject:k,language:_,selectedConcept:x,newPage:C,numOfSections:S,noCache:E=!1,inMemory:I=!0,startIndex:T=-1,sectionHeading:A,replaceHeading:P=!0,pageDescription:N}={}){if(["team"].includes(w))return;const O=!!g,R=o();if(Ua.includes(w)&&O){const e=ja[w].isCachedContentValid||$a;if(R?.[w]&&e(R[w])&&!C&&!E)return ja[w].replaceContent({rootBlock:g[0],data:R[w],updateBlockAttributes:I?null:s,sectionHeading:A,replaceHeading:P,startIndex:T});R?.[w]&&!e(R[w])&&await a({category:w,content:[],clear:!0});const t=await p({patternType:w,siteDescription:m,pageDescription:N,siteLocation:f,conceptSection:g,reasonForSection:y,numOfSections:S,topic:b});return ja[w].replaceContent({rootBlock:g[0],data:t,updateBlockAttributes:I?null:s,replaceHeading:P,sectionHeading:A,startIndex:T})}if(R?.[w]&&!C)return u(g[0],{sectionCategory:w,selectedSectionContent:R[w],conceptSection:!0});if(Object.keys(R).find((e=>e.includes(w)))&&!C){let e={};const t=x?x.patterns.find((e=>e.category===w)):null;return t&&(e=t.blocks[0]?l(t.blocks[0],w,{}):{}),u(g[0],{sectionCategory:w,selectedSectionContent:e,conceptSection:!0})}const{content:M,sectionData:L}=await d({blockClientId:h,conceptSection:g,language:_});let D;return D=async function o({chunk:l,sectionInfo:u,customSubject:d,reason:p,_pageTitle:h,_pageDescription:g,retry:f=!1}){const y=n||m,b={content:l.contentForRequest};let v=`The site description is: ${y}\n\n`;u?.name&&(v+=`The section name is: ${u.name}\n\n`),p&&(v+=`The reason this section has been chosen: ${p}\n\n`),h&&(v+=`The page title is: ${h}\n\n`),g&&(v+=`The description of the page is: ${g}, so content should be relevant to this.\n\n`),v+="The content you choose should always be relevant to the section information provided above.",d&&(v+=`\nThe subject requested by the user: ${d}\n\n`),v+=`The content to update is: ${JSON.stringify(b)}`;const w=[{role:"system",content:Kc},{role:"user",content:v}],k=await r(i,w,null,.2,"json_object"),_=k?.choices?.[0]?.message?.content;if(_)try{const n=JSON.parse(_);return n.content?((n,o,i,r)=>{n.filter((e=>"SPARE"===e.i)).forEach((e=>a({category:r,type:e.t,content:e.e})));const l=n.filter((e=>"SPARE"!==e.i)).map((e=>({clientId:o.clientIdMap[e.i],text:e.e,type:e.t})));return e.batch((()=>{l?.forEach((e=>{const n={};r&&a({category:r,type:e.type,content:e.text});const l=t(e.clientId);if(l&&(c(l,!0),"core/heading"===l.name||"core/paragraph"===l.name?n.content=e.text:"core/site-title"===l.name||"core/button"===l.name&&(n.text=e.text),s(e.clientId,{...n}),c(l,!1)),i){const t=o.blockMap[e.clientId];t&&("core/button"===t.name?t.attributes.text=e.text:t.attributes.content=e.text)}}))})),(0,z.__)("I have replaced the content.","big-sky")})(n.content,l,O,L?.patternCategory):f?(ra.info("CONTENT TOOL: content missing in response, some content may not be updated."),(0,z.__)("I encountered an error while processing your request. Please try again.","big-sky")):(ra.info("CONTENT TOOL: content missing in response, retrying with chunk of content."),o({chunk:l,sectionInfo:L,retry:!0}))}catch(e){return f?(console.log(e),ra.info("CONTENT TOOL: JSON parsing error some content may be missing"),(0,z.__)("I encountered an error while processing your request. Please try again.","big-sky")):o({chunk:l,sectionInfo:L,retry:!0})}}(O||!h?{chunk:M,sectionInfo:L,customSubject:b||k,reason:y,_pageTitle:v,pageDescription:N}:{chunk:M,customSubject:k,pageDescription:N}),await D},getPatternTypeContent:p,getLastAvailableContentByClassName:function(e,t){const n=va(e,t);return n?"string"==typeof n.attributes.content?n.attributes.content:n.attributes.content?.originalHTML:null}}}const Qc=JSON.parse('[{"header":"section-default","body":["section-2","section-2","section-3","section-3","section-1","section-1"],"footer":"section-default"},{"header":"section-default","body":["section-3","section-3","section-1","section-1","section-default","section-default"],"footer":"section-default"},{"header":"section-default","body":["section-3","section-3","section-2","section-2","section-1","section-1"],"footer":"section-default"},{"header":"section-default","body":["section-1","section-1","section-2","section-2","section-default","section-default"],"footer":"section-default"}]'),Zc=6;function el(e){const t=[];return e.forEach((e=>{"core/image"===e.name&&e.attributes.url&&e.attributes.id&&t.push(e),t.push(...el(e.innerBlocks))})),t}function tl(){const{ITEMS_KEY:e,ITEM_KEY:t,SECTIONS_KEY:n,SECTION_KEY:o}=X,{insertBlock:i,replaceBlock:r,removeBlocks:a,updateBlockAttributes:s,setBlockEditingMode:c,updateBlockListSettings:l}=(0,m.useDispatch)(y.store),{editEntityRecord:u}=(0,m.useDispatch)(Wr.store),{setBlockRemovalRules:d}=h((0,m.useDispatch)(y.store)),{getBlocks:p,getBlockIndex:b,getBlocksByName:v,getBlockAttributes:w,getBlock:k,getSelectedBlockClientId:_,getBlockListSettings:x}=(0,m.useSelect)(y.store),{getFirstChildBlockByName:C,getParentRootPatternBlock:S,getTemplatePartClientID:E,setMapLocationInBlocks:I,fixInvalidBlock:T}=bs(),{getBlockRemovalRules:A}=h((0,m.useSelect)(y.store)),{generateLogoWithAI:P,getStockImageURL:N,setImagesInBlocks:O}=Wc(),{getRemotePatterns:R,userLocale:M}=(0,m.useSelect)((e=>{const t=e(Qa),n=t.getUserLocale();return t.getRemotePatterns(n),{getRemotePatterns:t.getRemotePatterns,userLocale:n}})),{getCurrentTheme:L}=(0,m.useSelect)(Wr.store),D=wc(),B=function(){const{homePageId:e}=(0,m.useSelect)((e=>({homePageId:e(Wr.store).getEntityRecord("root","site")?.page_on_front})),[]),{currentPostId:t}=(0,m.useSelect)((e=>({currentPostId:e(g.store).getCurrentPostId()})));return(0,f.useMemo)((()=>t===e),[t,e])}(),F=(0,m.useRegistry)(),{generateDummyPostContent:j,replaceContent:U}=Xc(),{updatePatternImages:q,getPatternImages:$}=Jc(),{getSiteMetadata:G,setSiteMetadata:V}=ms(),{themeColors:W}=hc(),{currentPostId:Y}=(0,m.useSelect)((e=>({currentPostId:e(g.store).getCurrentPostId()}))),J=Qc[Math.floor(Math.random()*Qc.length)],Q=(0,f.useCallback)((()=>{const e=v("core/post-content")[0];return p(e)}),[v,p]),Z=e=>R(M).find((t=>t.ID===e)),ee=(0,f.useCallback)((e=>{F.batch((()=>{e.forEach((e=>{if(c(e.clientId,"default"),e.attributes?.metadata?.remotePatternId){const t=x(e.clientId);l(e.clientId,{...t,templateLock:!1})}e.innerBlocks?.length>0&&ee(e.innerBlocks)}))}))}),[x,F,c,l]),te=(0,f.useCallback)(((e={})=>{const t=e.ids||[Y],n=e.blocks||[Q()],o=e.persist||!1;if(0===n.filter((e=>e.length>0)).length)return;const i={},r=p(E("header")),a=r?.[0],s=p(E("footer")),c=s?.[0];t.forEach(((e,t)=>{const o=n[t]||[],r=[a,...o,c].filter((e=>e?.attributes?.metadata)).map((e=>({id:e.attributes?.metadata?.remotePatternId||"",category:e.attributes?.metadata?.patternCategory||"",slug:e.attributes?.metadata?.patternCategory||"",reason:e.attributes?.metadata?.reason||""})));i[e]=r}));const{patterns:l}=G(),u="object"!=typeof l||Array.isArray(l)?{}:l;Object.keys(i).forEach((e=>{const t=u[e]||[],n=i[e];i[e]=n.map((e=>{const n=t.find((t=>t.id===e.id));return n?.reason&&!e.reason?{...e,reason:n.reason}:e}))})),V({patterns:{...u,...i}},o)}),[Y,p,Q,G,E,V]),ne=(0,f.useCallback)(((e,t,n=null,o=!0)=>i(e,t,n,o)),[i]),oe=(0,f.useCallback)((e=>`${L().stylesheet}//${e}`),[L]),ie=(0,f.useCallback)((async(e,t)=>{await u("postType","wp_template_part",e,{blocks:t,content:(0,La.serialize)(t)}),te()}),[u,te]),re=(0,f.useCallback)((async(e,t)=>{const n=t.attributes?.metadata?.patternCategory;if(["header","footer"].includes(n)){const e=[t];await ie(oe(n),e)}else r(e,t),te()}),[oe,ie,r,te]),ae=(0,f.useCallback)(((e,t,n,o=!0)=>{const i=A();d([]);const r=[],s=v("core/post-content")[0];let c=null;const l="replace"===n;if(l&&!t){const e=p(s).map((e=>e.clientId));a(e,o)}return e.forEach(((e,i)=>{const a=e.blocks[0];c||(c=a),l&&t?re(t,a):s?ne(a,t&&"before"===n?b(t):t?b(t)+i+1:void 0,s,o):ne(a,i,null,o),r.push(a.clientId)})),te(),d(i),r}),[b,A,p,v,ne,a,re,d,te]),se=({availablePatterns:e,category:t,siteLocation:n,isAskingForMap:o=!1,pageSlug:i})=>{const r=e?.filter((e=>e.category===t));let a=r;switch(t){case"contact":if("contact"===i&&n?.coordinates)return a.filter((e=>e.html.toLowerCase().includes("wp:jetpack/map")&&e.html.toLowerCase().match(/is-contact-address(?!-)/)));if(o)return a.filter((e=>e.html.toLowerCase().includes("wp:jetpack/map")));n?.name||(a=a.filter((e=>!e.html.toLowerCase().match(/is-contact-address(?!-)/)))),n?.coordinates||(a=a.filter((e=>!e.html.toLowerCase().includes("wp:jetpack/map"))));break;case"footer":n?.name||(a=a.filter((e=>!e.html.toLowerCase().includes("is-footer-address"))))}return B&&"about"!==i&&(a=a.filter((e=>!Object.keys(e.categories).includes("page")))),"about"===i&&(a=a.filter((e=>Object.keys(e.categories).includes("page")&&Object.keys(e.categories).includes("about")))),a.length?a:r},ce=e=>(0,La.rawHandler)({HTML:e}),le=async({blocks:e,siteDescription:t,topic:n})=>{for(const o of e){if("core/query"===o.name){let e=null,n=await fc();if(n?.length?e=n?.[0]?.id:(n=await yc(),e=n?.id),!e)return void ra.error("No Dummy Post Tag");const i=await gc(e);if(!i?.length){const e=await j({siteDescription:t}),n=e.map((async e=>{e.featured_image=await N(e.image_search,1)}));await Promise.all(n),await mc(e)}const r=Math.floor(1e5+4e5*Math.random());o.attributes.query.exclude=[r],s(o.clientId,{query:{...o.attributes.query,exclude:[r]}})}le({blocks:o.innerBlocks,siteDescription:t,topic:n})}},ue=async({pageTitle:e,section:t,siteDescription:n,pageDescription:o,topic:i,siteLocation:r,selectedConcept:a,categories:s,newPage:c=!1,noCache:l=!1,pages:u=[]})=>Promise.all([U({conceptSection:t.blocks,sectionCategory:t.category,reasonForSection:t.reason,siteDescription:n,siteLocation:r,selectedConcept:a,topic:i,pageTitle:e,pageDescription:o,newPage:c,noCache:l}),le({blocks:t.blocks,siteDescription:n,topic:i}),fe(t,i,a,c)]).then((()=>{be(t,s,u),ve(t),ye(t,r),pe(t)})),de=(e,t=[],n=!0)=>{if(!e?.length)return;let o,i=e.filter((e=>!t.includes(e.ID)));if(t?.length){const n=t[t.length-1];i=i.filter((e=>!e.disallow_after.includes(n))),o=e.filter((e=>!e.disallow_after.includes(n)))}return 0!==i.length||n?(o=i.length?i:o,o[Math.floor(Math.random()*o.length)]):void 0},pe=async e=>{const t=C(e.blocks[0],"core/cover");if(!t)return;const n=await Gc(t.attributes.url),o=Qs(n,W);t.attributes.customOverlayColor=n,t.attributes.isUserOverlayColor=!1,t.attributes.overlayColor=void 0,t.attributes.style={...t.attributes.style,color:{text:o?.color}}},he=(e,t,n)=>{let o=ce(e.html);if(el(o).forEach((e=>{e.attributes.id=null})),(o.length>1||"core/group"!==o[0]?.name)&&(o=[(0,La.createBlock)("core/group",{align:"full"},o)]),o[0]?.attributes?.style?.spacing||(o[0].attributes.style={...o[0].attributes?.style,spacing:{margin:{top:"0",bottom:"0"}}}),o[0].attributes.metadata={...o[0].attributes?.metadata,name:ha.find((e=>e.slug===t))?.title,patternCategory:t,remotePatternId:e.ID},"intro"===t&&C(o[0],"core/cover"))return o;let i=o[0].attributes.className||"";return i=i.replaceAll(K,"").trim(),o[0].attributes.className=i?i+` is-style-${n}`:`is-style-${n}`,o},ge=e=>{const t=w(e);return t?.metadata?.patternCategory||t?.slug},me=e=>{const t=S(e.clientId);return ge(t?t.clientId:e.clientId)},fe=async(e,t,n,o=!1)=>{if(["team"].includes(e.category))return;if(n){var i,r;const t=_(),o=null!==(i=null!==(r=n.patterns.find((n=>n.category===e.category&&n.blocks[0].clientId===t)))&&void 0!==r?r:n.patterns.find((t=>t.category===e.category)))&&void 0!==i?i:e,a=$(o.blocks[0],[]);return q(e.blocks[0],{selectedSectionImages:a,conceptSection:!0})}const a={};return await O(e.blocks,t,!0,a,o),a},ye=(e,t)=>{I(e.blocks,t)},be=async(e,t,n)=>{if("intro"!==e?.category&&"about"!==e?.category&&"header"!==e?.category)return;const o=e=>{if("core/button"===e.name)return e;if(e.innerBlocks?.length)for(const t of e.innerBlocks){const e=o(t);if(e)return e}return!1},i=o(e.blocks[0]);if(i){if("header"===e?.category)return i.attributes.url="/about",void(i.attributes.text=(0,z.__)("Learn more","big-sky"));if(n.find((e=>"menu"===e.slug))&&"intro"===e?.category)return i.attributes.url="/menu",void(i.attributes.text=(0,z.__)("View Menu","big-sky"));if(n.find((e=>"about"===e.slug))&&"about"===e?.category)return i.attributes.url="/about",void(i.attributes.text=(0,z.__)("Find out more","big-sky"));if(t.find((e=>"events"===e.slug)))return i.attributes.url="#events-section",void(i.attributes.text=(0,z.__)("Upcoming Events","big-sky"));if(t.find((e=>"services"===e.slug)))return i.attributes.url="#services-section",void(i.attributes.text=(0,z.__)("Our Services","big-sky"));t.find((e=>"pricing"===e.slug))&&(i.attributes.url="#pricing-section",i.attributes.text=(0,z.__)("Pricing","big-sky")),t.find((e=>"posts"===e.slug))&&(i.attributes.url="#posts-section",i.attributes.text=(0,z.__)("Read more","big-sky"))}},ve=e=>{e.blocks[0].attributes.anchor=e.category+"-section"},we=async({templatePart:e,siteDescription:t,siteLocation:n,topic:o,templatePartBlocks:i,isQuickOnboarding:r})=>Promise.all([U({conceptSection:i,siteDescription:t,sectionCategory:e,siteLocation:n}),"header"===e&&!r&&P({description:o})]).then((()=>{be({category:e,blocks:i})})),ke=e=>["header","footer"].includes(e)?k(E(e)):Q().find((t=>ge(t.clientId)===e)),_e=(e,t,n=null)=>{const o=t=>{if(!t)return null;if(t.attributes?.metadata?.name===e)return t;for(const e of t.innerBlocks){const t=o(e);if(t)return t}return null};return o(n||ke(t))},xe=(e,t)=>_e(n,e,t),Ce=(e,t)=>_e(o,e,t||xe(e)),Se=(t,n)=>_e(e,t,n||Ce(t));return(0,f.useEffect)((()=>{D&&te({persist:!0})}),[D]),{DEFAULT_NUM_CONCEPTS:Zc,ITEM_KEY:t,ITEMS_KEY:e,SECTION_KEY:o,SECTIONS_KEY:n,insertPattern:ne,insertPatterns:ae,replacePattern:re,filterByCategory:se,convertToBlocks:ce,composePatterns:({title:e,categories:t,topic:n,siteDescription:o,siteLocation:i,pageDescription:r,numberOfConcepts:a=Zc,selectedConcept:s,newPage:c=!1,noCache:l=!1,isAskingForMap:u=!1,chosenPatterns:d=[],pages:p=[],pageSlug:h})=>{const g=[];if(!t||0===t.length)return[];const{siteLocation:m}=G(),f=s?.patterns.map((e=>e.ID))||[],y=R(M);for(let e=0;e<a;e++){g[e]=[];const n=t.length>1;let o=0;t.forEach((t=>{const r=d.find((e=>e.category===t.slug))?.id,a=r?y.find((e=>e.ID===r)):de(se({availablePatterns:y,category:t.slug,siteLocation:i||m,isAskingForMap:u,pageSlug:h}),f,n);if(void 0!==a){o=o>=J?.body.length?0:o;const n=J?.body[o],i=he(a,t.slug,n);g[e].push({ID:a.ID,category:t.slug,reason:t.reason,title:a.title,blocks:i}),f.push(a.ID),o++}}))}return g.map((a=>{const u=[];for(const d of a)u.push({section:d,resolver:ue({pageTitle:e,pageDescription:r,selectedConcept:s,section:d,siteDescription:o,topic:n,siteLocation:i,concept:a,categories:t,newPage:c,noCache:l,pages:p})});return{id:H(),patterns:a,resolvers:u}}))},composeTemplatePartPattern:({templatePart:e,siteDescription:t,siteLocation:n,topic:o,pattern:i=null,isQuickOnboarding:r=!1})=>{if(!v("core/template-part"))return;const a="header"===e?"header":"footer",s=R(M);"number"==typeof i&&(i=s.find((e=>e.ID===i)));const c=i||de(se({availablePatterns:s,category:a}));if(c){const i=ce(c.html);i[0].attributes.metadata={...i[0].attributes?.metadata,name:ha.find((e=>e.slug===a))?.title,patternCategory:a,remotePatternId:c.ID};const s=J[a];let l=i[0].attributes.className||"";return l=l.replaceAll(K,"").trim(),i[0].attributes.className=l?l+` is-style-${s}`:`is-style-${s}`,{pattern:{ID:c.ID,blocks:i,category:a,title:c.title.replace(new RegExp(a+":","i"),"")+" ("+c.ID+")"},resolver:we({templatePart:e,siteDescription:t,siteLocation:n,topic:o,templatePartBlocks:i,isQuickOnboarding:r})}}},setImagesInConcept:async(e,t)=>{const n={};for(const o of e)await O(o.blocks,t,!0,n);return n},setImagesInSection:fe,getRootBlocksOfPostContent:Q,initializePattern:he,getOtherPatternsInCategory:e=>{const t=w(e);return t?.metadata&&t?.metadata?.patternCategory?R(M).filter((e=>e.category===t?.metadata?.patternCategory)):[]},getPatternCategory:ge,getParentPatternCategory:me,getPatternById:Z,createConceptFromCurrentCanvas:()=>{const e=Q().map((e=>{const t=ge(e.clientId),n=Z(e.attributes?.metadata?.remotePatternId);return{ID:n?.ID,category:t,title:n?.title,blocks:[e]}}));return{id:H(),patterns:e,resolvers:[]}},createConceptFromSelectedBlock:e=>{const t=e||_(),n=k(t),o=me(n),i=Z(k(n.clientId).attributes?.metadata.remotePatternId),r={ID:i.ID,category:o,title:i.title,blocks:[n]};return{id:H(),patterns:[r],resolvers:[]}},createConceptFromHTML:(e,t)=>{const n=ce(e),o=T(n[0]),i={ID:H(),category:t,title:(0,z.__)("Generated Pattern","big-sky"),blocks:[o]};return{id:H(),patterns:[i],resolvers:[]}},setDefaultEditMode:ee,getAvailablePatternCategories:()=>{const e=R(M),t=new Set;return e.forEach((e=>{t.add(e.category)})),Array.from(t).filter((e=>e))},getPattern:ke,getSections:xe,getSection:Ce,getItems:Se,getItem:(e,n)=>_e(t,e,n||Se(e)),replaceTemplatePart:async(e,t)=>{const n=oe(e);await ie(n,t)},syncSiteMetadataPatterns:te,setCTAInSection:be}}const{useHistory:nl}=h(bc.privateApis),ol=[];function il(){const{pages:e,homePageId:t,getEntityRecords:n}=(0,m.useSelect)((e=>({pages:e(Wr.store).getEntityRecords("postType","page",{per_page:-1,status:"publish,future,draft,pending,private"})||ol,homePageId:e(Wr.store).getEntityRecord("root","site")?.page_on_front,getEntityRecords:e(Wr.store).getEntityRecords})),[]),{saveEntityRecord:o,deleteEntityRecord:i}=(0,m.useDispatch)(Wr.store),r=(0,f.useCallback)((async()=>{const e=n("postType","page",{per_page:-1,status:"publish,future,draft,pending,private"});if(!e)return;const o=e.filter((e=>e.id!==t)).map((e=>i("postType","page",e.id,{force:!0})));await Promise.all(o)}),[t,i,n]),{currentPostId:a,getCurrentPostId:s}=(0,m.useSelect)((e=>({currentPostId:e(g.store).getCurrentPostId(),getCurrentPostId:e(g.store).getCurrentPostId}))),{isComingSoon:c,isBlogPrivate:l}=(0,m.useSelect)((e=>({isComingSoon:e(Qa).getIsComingSoon(),isBlogPrivate:e(Qa).getIsBlogPrivate()}))),u=!c&&!l,d=nl(),{addPatternsToCanvas:p}=vc(),{composePatterns:h,syncSiteMetadataPatterns:y}=tl(),{savePost:b}=(0,m.useDispatch)(g.store),v=({postId:e,postType:t}={})=>{e?d.navigate?d.navigate(`/wp-admin/site-editor.php?p=/page/${e}&canvas=edit`):d.push({postId:e,postType:t,canvas:"edit"}):d.navigate?d.navigate("/wp-admin/site-editor.php?p=/&canvas=edit"):d.push({canvas:"edit"})},w=()=>u?"draft":"publish",k=(0,f.useCallback)((()=>(e||[]).filter((e=>""!==e.title.rendered.trim())).map((e=>({id:e.id,slug:e.slug,title:e.title.rendered,status:e.status,isHomePage:e.id===t,isCurrentPage:e.id===a})))),[e,t,a]),_=(0,f.useCallback)((async e=>{try{return await i("postType","page",e,{force:!0}),!0}catch(e){return ra.error(e),!1}}),[i]),x=(0,f.useCallback)((()=>{d.back()}),[d]);return{createPage:async(e,t,n,i,r,a=!1,s=1,c=null,l=null,u=null)=>{try{if(a){const{canvasiFrameBody:a}=ys();a.classList.add("big-sky__is-creating-page");const s=await o("postType","page",{status:w(),title:e,slug:u||e||(0,z.__)("No title","big-sky")},{throwOnError:!0});v({postId:s.id,postType:s.type}),await Wa(3e3);const c=h({title:e,categories:t,topic:n,siteDescription:i,siteLocation:r,numberOfConcepts:1,newPage:!0,noCache:!0,pageSlug:u}),l=c[0].patterns.map(((e,t)=>({pattern:e,resolver:c[0].resolvers[t].resolver})));return a.classList.remove("big-sky__is-creating-page"),await p(l,!1),s}const d=h({title:e,categories:t,topic:n,siteDescription:i,siteLocation:r,numberOfConcepts:1,newPage:!0,noCache:!0,pageDescription:l,pageSlug:u}),g=d[0].resolvers.map((e=>e.resolver)).flat();await Promise.all(g);const m=d[0].patterns.map((e=>e.blocks)).flat(),f=(0,La.serialize)(m),y={status:w(),title:e,content:f,slug:u||e||(0,z.__)("No title","big-sky"),menu_order:s};return{newPage:await o("postType","page",c?{...y,id:c}:y,{throwOnError:!0}),rootBlocks:m}}catch(e){ra.error(e)}},deletePage:_,deleteAllPagesExceptHome:r,getPages:k,goToPage:v,saveAndGoToPage:async(e,t)=>{y({ids:[s()],persist:!0}),await b(s()),v(t?{postId:null,postType:null}:{postId:e,postType:"page"})},goBackPage:x}}function rl(){const{getCurrentPostId:e}=(0,m.useSelect)(g.store),{savePost:t}=(0,m.useDispatch)(g.store),{saveEntityRecord:n}=(0,m.useDispatch)(Wr.store),{resetStyles:o}=hc(),{setSiteMetadata:i}=ms(),{homePageId:r,deleteAllPagesExceptHome:a}=il(),{clearBlocks:s}=vc(),{clearMessages:c,agentSay:l}=Ce(),{clearSelectedSectionContent:u,resetCachedContent:d,setShowThread:p,setIsHandoff:h,setAssistant:f,setHandoffStep:y}=(0,m.useDispatch)(Qa);return{resetSite:async()=>{const l=e();if(async function(){try{return await jr({path:"/wpcom/v2/big-sky/v1/dummy-posts",method:"DELETE"})}catch(e){return ra.error("Error deleting dummy posts: ",e),!1}}(),a(),o(),i({...V},!0),d(),u(),h(!1),y(0),localStorage.removeItem("siteMeta"),localStorage.removeItem("buildDesigns"),c(),r!==l)return await t(),n("postType","page",{id:r,content:""}),void(window.location.href="/wp-admin/site-editor.php?canvas=edit");await s(),await t()},buildNewSite:()=>{c(),h(!1),p(!0),f(Ye.SPEC),l((0,z.__)("Here are your current site specifications. Would you like to modify them or start over?","big-sky"))}}}const al={};function sl(){const e=(0,f.useCallback)((async e=>{if(!al[e]){let t;try{t=await jr({path:"/wpcom/v2/big-sky/v1/geo-coordinates?address="+encodeURIComponent(e),method:"GET"}),ra.info("Geocode Response",t)}catch(e){return ra.error("Geocode Error",e),null}const n=t?.features?.[0]?.geometry?.coordinates;al[e]=n?n.reverse():n}return al[e]}),[]);return{getCoordinates:e}}function cl(e,t,n){const{siteType:o,topic:i,siteDescription:r,siteTitle:a,siteLocation:s,colorRequest:c}=e;return xa.format({role:"You are a website designer and an expert at taking site specifications and choosing suitable colors and fonts that align with industry standards and brand identity.",context:` Current site specifications:\n${JSON.stringify({siteType:o,topic:i,siteDescription:r,siteTitle:a,siteLocation:s,userColorRequest:c})}\nAvailable built-in colors:\n${t}\nAvailable fonts:\n${n} `,do:["Choose the best colors and fonts for the website based on the website specifications and the available options.","Consider industry standards, brand identity, and user experience when selecting colors and fonts.","Always use your best guess to choose the right colors and fonts for the website based on the website description. Do not ask the user questions or for more information.","Always choose a MINIMUM of six color palettes.","Always choose a MINIMUM of three font typesets.","Always sort the chosen color palettes starting from best match and put all chosen colors in the colors array.","Always sort the chosen font typesets starting from best match and put all chosen fonts in the fonts array.","Always call the getBuildDesigns tool. The content of your message should be null."],dont:["Explain your choices to the user.","Ask the user to confirm your choices"]})}const ll=(e,t,n={})=>({name:"getBuildDesigns",description:"Sets site color palettes and font typeset.",strict:!0,parameters:{type:"object",properties:{colors:{type:"array",description:"The list of color palette names that best match the site",items:{type:"string",enum:e}},fonts:{type:"array",description:"The list of font typeset names that best match the site",items:{type:"string",enum:t}},...n},required:["colors","fonts",...Object.keys(n)],additionalProperties:!1}}),ul=(e=[])=>({name:"color_palette_generator",description:"If one or more specific colors (names or hex values) are provided, these must be represented in the 'custom_colors' property.\n\t\tDo not ask the user to specify a specfic shade of the color requested, just return the color(s) as is.\n\t\tIf a keyword is provided that matches, or is a synonym of, one of the keywords in the 'keywords' enum return the enum keyword in the 'keyword' property.",parameters:{type:"object",properties:{colors:{type:["array","null"],description:"The requested color(s).",items:{type:"string",description:"A color name. Default to null if not supplied in the user request."}},keyword:{type:["string","null"],description:"The requested category of the color palette. Default to null if not supplied in the user request.",enum:e},custom_colors:{type:["object"],description:"An object containing a custom color palette of 4 colors, expressed as color1.color through color4.color.\n\t\t\t\t\t\tAlways provide custom colors, matching the user query as best as you can.\n\t\t\t\t\t\tUse colors that are modern/trending colors for web design.\n\t\t\t\t\t\tEach color property must be unique and contain a hex color value.\n\t\t\t\t\t",properties:{color1:{type:["object"],description:"\n\t\t\t\t\t\t\t\t- the main color used for backgrounds\n\t\t\t\t\t\t\t\t- if possible, make a choice from the colors provided\n\t\t\t\t\t\t\t\t- if there are no more colors to choose from, generate a new color\n\t\t\t\t\t\t\t\t- must never be the same as color4\n\t\t\t\t\t\t\t",properties:{color:{type:"string",description:"The hex color value."},user_requested:{type:"boolean",description:"Whether the user requested this color."}},required:["color","user_requested"],additionalProperties:!1},color2:{type:["object"],description:"\n\t\t\t\t\t\t\t\t- the main color used for text\n\t\t\t\t\t\t\t\t- must contrast at a minimum ratio of 4.5:1 with color1\n\t\t\t\t\t\t\t\t- if possible, make a choice from the colors provided\n\t\t\t\t\t\t\t\t- if there are no more colors to choose from, generate a new color\n\t\t\t\t\t\t\t",properties:{color:{type:"string",description:"The hex color value."},user_requested:{type:"boolean",description:"Whether the user requested this color."}},required:["color","user_requested"],additionalProperties:!1},color3:{type:["object"],description:"\n\t\t\t\t\t\t\t\t- the main color used for buttons\n\t\t\t\t\t\t\t\t- if possible, make a choice from the colors provided\n\t\t\t\t\t\t\t\t- if there are no more remaining colors, generate a new color\n\t\t\t\t\t\t\t",properties:{color:{type:"string",description:"The hex color value."},user_requested:{type:"boolean",description:"Whether the user requested this color."}},required:["color","user_requested"],additionalProperties:!1},color4:{type:["object"],description:"\n\t\t\t\t\t\t\t\t- the main color used for button text\n\t\t\t\t\t\t\t\t- if possible, make a choice from the colors provided\n\t\t\t\t\t\t\t\t- if there are no more colors to choose from, generate a new color\n\t\t\t\t\t\t\t",properties:{color:{type:"string",description:"The hex color value."},user_requested:{type:"boolean",description:"Whether the user requested this color."}},required:["color","user_requested"],additionalProperties:!1}},required:["color1","color2","color3","color4"],additionalProperties:!1}},required:["colors","keyword","custom_colors"],additionalProperties:!1},strict:!0}),dl={about:(0,z.__)("About","big-sky"),contact:(0,z.__)("Contact","big-sky"),menu:(0,z.__)("Menu","big-sky")},pl={about:{slug:"about",pageName:dl.about,sections:[{slug:"about",reason:"General information about the site owner or business. Main heading should be same as page title."}]},contact:{slug:"contact",pageName:dl.contact,sections:[{slug:"contact",reason:"Contact form and contact information."}]},menu:{slug:"menu",pageName:dl.menu,sections:[{slug:"menu",reason:"Full menu listing."}]}},hl=Object.keys(pl).reduce(((e,t)=>(e[pl[t].slug]=pl[t],e)),{}),gl={homepageSections:{required:[pa.intro,pa.posts,pa.newsletter],optional:[]},subPages:{required:[hl.about,hl.contact],optional:[]}},ml={homepageSections:{required:[pa.intro,pa.about],optional:[pa.services,pa.pricing,pa.events,pa.testimonials,pa.gallery]},subPages:{required:[hl.about,hl.contact],optional:[]}},fl={homepageSections:{required:[pa.intro,hl.about],optional:[pa.gallery,pa.testimonials]},subPages:{required:[hl.about,hl.menu,hl.contact],optional:[]}},yl={homepageSections:{required:[pa.intro,pa.about,pa.gallery],optional:[]},subPages:{required:[hl.about,hl.contact],optional:[]}},bl={business:ml,foodAndBeverage:fl,portfolio:{homepageSections:{required:[pa.intro,pa.about,pa.gallery],optional:[pa.testimonials]},subPages:{required:[hl.about,hl.contact],optional:[]}},blog:gl,personal:yl},vl=(e,t=[])=>{const n=bl[e]||bl.business;return Array.isArray(t)&&t.includes("newsletter")&&!n.homepageSections.required.includes(pa.newsletter)&&n.homepageSections.required.push(pa.newsletter),n},wl=e=>{const{required:t=[],optional:n=[]}=e.subPages;return{required:t.map((e=>({slug:e.slug,name:e.pageName}))),optional:n.map((e=>({slug:e.slug,name:e.pageName})))}};function kl(e,t){const{siteType:n,topic:o,siteDescription:i,siteTitle:r,siteLocation:a}=e,s=vl(n,t),c=s.homepageSections.required.map((e=>({slug:e.slug,title:e.title,description:e.description}))),l=s.homepageSections.optional.map((e=>({slug:e.slug,title:e.title,description:e.description}))),u=wl(s);return xa.format({role:"You are a website architecture expert who specializes in determining which website sections and pages would benefit specific site types and crafting compelling reasons for section inclusion based on the site context.",context:`Current site specifications:\n${JSON.stringify({siteType:n,topic:o,siteDescription:i,siteTitle:r,siteLocation:a})}\n\nRequired homepage sections (must be included in your response):\n${JSON.stringify(c,null,2)}\n\nAvailable optional sections (include only those that would benefit this site):\n${JSON.stringify(l,null,2)}\n\nPages information:\n${JSON.stringify(u,null,2)}`,do:["Return an array of sections that includes ALL required sections plus any beneficial optional sections.","For each section, provide a specific reason for including it that relates to the site specifications.","Think about how sections work together to create a cohesive user experience.","Consider industry standards and user expectations.","Return an array of pages that includes ALL required pages with potentially customized names, and a description of the page content.","Include any optional pages that would benefit this site also with potentially customized names, and a description of the page content.","Customize a page name if you think there is a more relevant name in this sites context that still maintains the core purpose indicated by the original page name.","Keep any customized page names concise and under 15 characters.","Always call getSiteStructure, and leave your message as null."],dont:["Skip any required sections or pages.","Include sections not listed in required or optional lists.","Include pages not listed in required or optional lists.","Make assumptions about site specifications not provided.","Ask questions or request more information.","Add any additional fields or explanations to the response."]})}const _l=(e,t)=>{const n=vl(e,t);return{name:"getSiteStructure",description:"Determines which sections to include on the homepage (must include all required sections) and which pages to include with their customized names",parameters:{type:"object",properties:{sections:{type:"array",description:"Array of sections to include in the homepage, with reasons for their inclusion",items:{type:"object",properties:{slug:{type:"string",description:"The slug of the section"},reason:{type:"string",description:"The reason for including this section based on the site specifications"}},required:["slug","reason"],additionalProperties:!1},minItems:n.homepageSections.required.length},pages:{type:"array",description:"Array of pages to include in the site, with customized names",items:{type:"object",properties:{slug:{type:"string",description:"The slug of the page"},name:{type:"string",description:"The customized name for the page"},description:{type:"string",description:"briefly describe the sort of content that will be on this page, no more than 30 words"}},required:["slug","name"],additionalProperties:!1},minItems:n.subPages.required.length}},required:["sections","pages"],additionalProperties:!1}}},xl=(e,t)=>{const n=function(e,t){const n=[];return t.homepageSections.required.forEach((t=>{const o=e.find((e=>e.slug===t.slug));n.push({...t,reason:o?.reason||t.description})})),t.homepageSections.optional.forEach((t=>{const o=e.find((e=>e.slug===t.slug));o&&n.push({...t,reason:o.reason})})),n}(t.sections,e),o=function(e,t){const{required:n=[],optional:o=[]}=t.subPages,i=[];return n.forEach((t=>{const n=e.find((e=>e.slug===t.slug));n?i.push({...t,pageName:n.name,description:n.description}):i.push(t)})),o.forEach((t=>{const n=e.find((e=>e.slug===t.slug));n&&i.push({...t,pageName:n.name,description:n.description})})),i}(t.pages,e);return{homepageSections:n,subPages:o}};function Cl({runUrlChangeHandling:e}={}){const{siteTitle:t,isOnboarded:n}=ms().getSiteMetadata(),[o,i]=(0,f.useState)(!1),[r,a]=(0,f.useState)(!1),[{currentStep:s,previousStep:c},l]=(0,f.useState)((()=>({currentStep:new URL(window.location.href).searchParams.get("ai-step"),previousStep:null}))),{setAssistant:u,setDockView:d,setHandoffStep:p,setChatComponents:h,setCurrentUserMessage:g,setIsHandoff:y}=(0,m.useDispatch)(Qa),{setSiteMetadata:b}=ms(),{zoomOut:v}=vc(),w=(0,f.useCallback)(((e,t=!1)=>{if(s!==e||t){l((t=>({previousStep:t.currentStep,currentStep:e})));const t=new URL(window.location.href);t.searchParams.set("ai-step",e),window.history.pushState({aiStep:e},"",t)}}),[s,l]),k=(0,f.useCallback)((e=>{"handoff"===e&&(v(),y(!0),p(0),d(Y.HANDOFF),n||b({isOnboarded:!0},!0)),"edit"===e&&(u(cs.id),g(""),o&&(h([]),d(Y.MENUS)),n||b({isOnboarded:!0},!0)),"onboarding"===e&&"onboarding"!==c&&n&&a(!0)}),[c,n,v,y,p,d,b,u,g,o,h]),_=(0,f.useCallback)((()=>{const e=new URL(window.location.href).searchParams.get("ai-step");"handoff"===e&&"edit"===c&&i(!0),"handoff"===e&&r?w("onboarding",!0):"handoff"!==e&&"edit"!==e||t?c===s&&s===e||(l((t=>({previousStep:t.currentStep,currentStep:e}))),k(e,c)):w("onboarding",!0)}),[c,r,t,s,w,i,l,k]);return(0,f.useEffect)((()=>{if(e)return _(),window.addEventListener("popstate",_),()=>{window.removeEventListener("popstate",_)}}),[e,_]),{setAiStep:w,getAiStep:()=>s,getPreviousAiStep:()=>c||s,showOnboardingDialog:r,setShowOnboardingDialog:a}}function Sl(){const{getCoordinates:e}=sl(),{setSiteMetadata:t}=ms(),{buildSite:n}=function(){const{getBuildDesigns:e}=function(){const{runChatCompletion:e}=(0,m.useDispatch)(Qa),{chatModel:t}=(0,m.useSelect)((e=>({chatModel:e(Qa).getAdvancedChatModel()}))),{setIsBuildingSite:n,resetCachedContent:o,setChosenColors:i,setChosenCustomColors:r,setChosenFonts:a,setDockView:s,setShowThread:c}=(0,m.useDispatch)(Qa),{getColorVariations:l,getFontVariations:u}=Js();return{getBuildDesigns:async(d,p)=>{n(!0),s(Y.MENUS),c(!1),ea("designing_build_started"),o();const h=l(),g=h.map((e=>({name:e.title,keywords:e["x-big-sky-meta"]?.keywords||[]}))),m=u(),f=m.map((e=>({name:e.name,keywords:e["x-big-sky-meta"]?.keywords||[]}))),y=[{role:"system",content:cl(d,JSON.stringify(g),JSON.stringify(f))}],b=h.map((e=>e.title)),v=m.map((e=>e.title)),w={};d.colorRequest&&d.colorRequest.length>0&&(w.custom_colors=ul([]).parameters.properties.custom_colors);const k=[{type:"function",function:ll(b,v,w)}],_=await e(t,y,k),x=_?.choices?.[0]?.message?.tool_calls;if(!x||0===x.length||"getBuildDesigns"!==x[0].function.name)return void ra.error("getBuildDesigns tool call missing in model response.");const C=x[0].function.arguments;try{const e=JSON.parse(C),{categories:t,colors:n,fonts:o,custom_colors:s}=e;return i(n),a(o),s&&r(s),p&&localStorage.setItem("buildDesigns",JSON.stringify({categories:t,colors:n,fonts:o,custom_colors:s})),{...d,color:n[0],font:o[0],categories:t}}catch(e){ra.error("getBuildDesigns JSON parsing error, some content may be missing")}}}}(),{getSiteStructure:t}=function(){const{runChatCompletion:e,setChosenCategories:t}=(0,m.useDispatch)(Qa),{chatModel:n}=(0,m.useSelect)((e=>({chatModel:e(Qa).getAdvancedChatModel()})));return{getSiteStructure:async(o,i)=>{ea("get_site_structure_started");const r=[{role:"system",content:kl(o,i)}],a=[{type:"function",function:_l(o.siteType,i)}],s=await e(n,r,a),c=s?.choices?.[0]?.message?.tool_calls;if(c&&0!==c.length&&"getSiteStructure"===c[0].function.name)try{const e=JSON.parse(c[0].function.arguments);if(!e||!e.sections)return void ra.error("Invalid structure response format");const n=vl(o.siteType,i),r=xl(n,e),a=r?.homepageSections?.map((e=>({slug:e.slug,reason:e.reason})));return t(a),r}catch(e){ra.error("get_site_structure JSON parsing error:",e.message)}else ra.error("getSiteStructure tool call missing in model response.")}}}(),{setAiStep:n}=Cl(),{patternCategories:o,additionalContext:i}=(0,m.useSelect)((e=>({chatModel:e(Qa).getAdvancedChatModel(),patternCategories:e(Qa).getPatternCategories(),additionalContext:e(Qa).getAdditionalContext()}))),{composePatterns:r,composeTemplatePartPattern:a,syncSiteMetadataPatterns:s}=tl();delete o.header,delete o.footer;const{currentPostId:c}=(0,m.useSelect)((e=>({currentPostId:e(g.store).getCurrentPostId()}))),{setSiteMetadata:l}=ms(),{savePost:u}=(0,m.useDispatch)(g.store),{setImageStyle:d}=(0,m.useDispatch)(Qa),{editEntityRecord:p}=(0,m.useDispatch)(Wr.store),{__unstableSetEditorMode:h}=(0,m.useDispatch)(y.store),{addPatternsToCanvas:f}=vc(),{getBlocksByName:b,getBlocks:v}=(0,m.useSelect)(y.store),{pushGeneratedVariations:w,setIsHandoff:k}=(0,m.useDispatch)(Qa),{getCurrentTheme:_,saveStylesEntityRecord:x,setStyles:C}=hc(),{createPage:S}=il();return{buildSite:async(o,g=!1)=>{const m=e(o,g),y=t(o,i.siteGoals),[E,I]=await Promise.all([m,y]),{topic:T,siteTitle:A,siteDescription:P,siteLocation:N,color:O,font:R,patterns:M}=E;d(o.defaultImageStyle),p("root","site",void 0,{title:A}),C({color:O,font:R,updateBlocks:!1});const L=Promise.all(I.subPages.map((async(e,t)=>await S(e.pageName,e.sections,T,P,N,!1,t+1,null,e.description,e.slug)))),D=a({templatePart:"header",siteDescription:P,siteLocation:N,topic:T,isQuickOnboarding:g,pattern:M?.find((e=>"header"===e.category))?.id}),B=a({templatePart:"footer",siteDescription:P,siteLocation:N,topic:T,pattern:M?.find((e=>"footer"===e.category))?.id}),F=r({categories:I.homepageSections,topic:T,siteDescription:P,siteLocation:N,numberOfConcepts:1,chosenPatterns:M?.filter((e=>"header"!==e.category&&"footer"!==e.category)),pages:I.subPages}),j=F[0].patterns.map(((e,t)=>({pattern:e,resolver:F[0].resolvers[t].resolver})));await f([D,...j,B],!0,g);const U=v(b("core/post-content")),q=await L;if(q.push({rootBlocks:U,newPage:{id:c}}),q.map((e=>e.rootBlocks.map((e=>{const t=e.attributes?.metadata?.patternCategory,n=I.homepageSections.find((e=>e.slug===t));return e.attributes.metadata.reason=n?.reason,e})))),s({ids:q.map((e=>e.newPage.id)),blocks:q.map((e=>e.rootBlocks)),persist:!0}),!F?.[0]?.patterns.length)return void h("edit");await x(),await u(c);const $=JSON.parse(JSON.stringify(_()));$.title=Ks,w([$]),C({color:O,font:R}),l({isOnboarded:!0},!0),ea("building_site_finished"),await Wa(1e3),n("handoff"),k(!0)}}}();return{buildSiteTask:async(o,i=!1)=>{const r={siteType:o.siteType,topic:o.topic,siteTitle:o.siteTitle,siteDescription:o.siteDescription,defaultImageStyle:o.imageStyle||o.defaultImageStyle,siteLocation:{name:o.siteLocationName||o.siteLocation?.name}};return o.colorRequest&&(r.colorRequest=o.colorRequest),r.siteLocation.name&&(r.siteLocation.coordinates=await e(r.siteLocation.name)),t(r),n(r,i),(0,z.__)("Designing your site now…","big-sky")}}}const El={id:Ye.SPEC,description:"An assistant that gathers and confirms information about the site specs.",instructions:ls,tags:[Ye.SPEC],additionalInstructions:e=>ps.format(e),toolkits:[ds],toolkitHook:function(){const{setChatComponents:e}=(0,m.useDispatch)(Qa),{getSiteMetadata:t}=ms(),{setCallbacks:n,setContext:o}=Pe(),i=(0,m.useSelect)((e=>e(Qa).getAdditionalContext())),{resetSite:r}=rl(),{createToolCallback:a}=ts(),s=t(),{buildSiteTask:c}=Sl();(0,f.useEffect)((()=>{n(ds.name,{build_site:async e=>{await c(e)},start_over:a({name:"start_over",action:async()=>{r(),e([])}})})}),[n]),(0,f.useEffect)((()=>{o&&(i||s.siteTitle)&&o(ds.name,{additionalContext:{...i,...s}})}),[i,o,s])},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))},onToolResult:(e,t,n)=>{n.userSay(t)}},Il=El,Tl=(e=[])=>({name:"show_font_picker",description:"Call this if the user asks for anything to do with site fonts. If font keywords are provided, use it as is. If a user requests all fonts, do not return keywords or fonts.",parameters:{type:"object",properties:{fonts:{type:["array","null"],description:"The requested font(s). Default to null if not supplied in the user request.",items:{type:"string",description:"A font name."}},keywords:{type:["array","null"],description:"The requested keywords of the font. Default to null if not supplied in the user request. The more keywords, the more specific the font. If none of the keyword match user request, try to pick a combination that represents the intent.",items:{type:"string",enum:e}}},required:["fonts","keywords"]},strict:!0}),Al=(e=[])=>({name:"upsert_social_link",description:"Call this if the user asks to add or update a social link. The url must be provided by the user. The service must be in the provided list of supported services.",parameters:{type:"object",properties:{service:{type:"string",description:"The requested service of the social link.",enum:e},url:{type:"string",description:"The URL of the social link."}},required:["service","url"]},strict:!0}),Pl=["button","checkbox","checkbox-multiple","consent","date","email","name","radio","select","telephone","text","textarea","url"],Nl=({description:e,dateFormatExample:t,timeFormatExample:n})=>({name:"add_item_to_events_container",description:`Adds new events items. The description of the site is: ${e}.\n\t\tThe event dates should be later than and in the same format as ${t}.\n\t\tThe event times should be in the same format as ${n}.\n\t\tIf not specified in the user request, make up the events according to the description of the site.\n\t\tNEVER ask any follow up questions.`,parameters:{type:"object",properties:{clientId:{type:["string","null"],description:"The clientId of the selected block. DOES NOT have to be an events block."},count:{type:"number",description:"The number of events items to add. Default to 1."},items:{type:"array",description:"The events items to add.",items:{type:"object",description:"The events item to add.",properties:{date:{type:"string",description:"The date of the event."},time:{type:"string",description:"The time of the event."},name:{type:"string",description:"The name of the event."},description:{type:"string",description:"The description of the menu item. If not provided, make something up."},location:{type:"string",description:"The location of the event. If not provided, make something up."}},additionalProperties:!1,required:["date","time","name","description","location"]}}},required:["clientId","count","items"]},strict:!0}),Ol=e=>({name:"add_item_to_menu_container",description:`Adds new menu items.\n\t\tThe description of the site is: ${e}.\n\t\tIf the menu items are not specified in the user request, make them up according to the description of the site.\n\t\tNEVER ask any follow up questions.`,parameters:{type:"object",properties:{clientId:{type:["string","null"],description:"The clientId of the selected block. DOES NOT have to be a menu block."},count:{type:"number",description:"The number of menu items to add. Default to 1."},items:{type:"array",description:"The menu items to add.",items:{type:"object",description:"The menu item to add.",properties:{name:{type:"string",description:"The name of the menu item."},description:{type:"string",description:"The description of the menu item. If not provided, make something up."},price:{type:"string",description:"The price of the menu item. If not provided, make something up."},currency:{type:"string",description:'The currency of the menu item. If not provided, default to "$".'}},additionalProperties:!1,required:["name","description","price","currency"]}}},required:["clientId","count","items"]},strict:!0}),Rl={name:"content",tools:e=>{const t=e.site?.description?.substring(0,300)||"";if(e.currentHandoffArea)switch(e.currentHandoffArea){case"colors":return[ul(e.colors?.colorVariationCategories)];case"fonts":return[Tl(e.fonts?.fontCategories)];default:return[]}const n=[{name:"make_suggestions",description:"Makes suggestions for a particular request.",parameters:{type:"object",properties:{message:{type:"string",description:"The message to display to the user. This will be phrased in terms of a suggestion relevant to the context, eg. 'Here are some suggestions for a site title…'."},inputPlaceholder:{type:"string",description:"The placeholder text for the input field. For example, if providing suggestions for a business name, the inputPlaceholder could be 'Enter a different business name…'. Do not include any comment about selecting from the provided actions."},actions:{type:"array",description:"Provides a few options for the user to choose from. For example, if a user is asking for business name suggestions for their coffee shop, the actions could be [ 'Java Jivin', 'Java Jive', 'Java Jive Cafe' ]. If they are wanting to know what you can help with for site design the acitons might be ['Change colors', 'Change fonts', 'Add a new page']Keep your suggestions to a maximum of 2 and under 20 characters",items:{type:"object",properties:{actionName:{type:"string",description:"The title of the action. Keep it very short."},description:{type:"string",description:"The description of the suggestion. Briefly describe the suggestion in context for the user."}}}}},required:["message","inputPlaceholder","actions","description"]}},Al(e.socialLinks?.services),{name:"update_address",description:"Update the contact address for the website/business",parameters:{type:"object",properties:{address:{type:"string",description:"The address to update."}},required:["address"]},strict:!1},{name:"make_text_bold_italic",description:"Use if the user asks for selected text, or substring of selected text, to be made bold or italic, or both. Never format the text yourself with markdown, use this tool instead.\n\t\t\tIf you don't know the content of the selected block, or the user has selected a block without content, still call this tool but return text parameter as 'no text selected'.",parameters:{type:"object",properties:{text:{type:"string",description:"The text to format"},substring:{type:"string",description:'Any substring of "text" to be formatted. If not provided the entire text will be formatted.'},formats:{type:"array",description:"The formats the user wants to apply. Emphasise should map to italic.",items:{type:"string",description:"A slug of format to apply.",enum:["bold","italic"]}}},required:["text","formats"]},strict:!1},{name:"start_over",description:'Always call this if the user wants to start over from scratch or change what their site is about.\n\t\tExamples of when to call this:\n\t\t- "Start over"\n\t\t- "I want to start fresh"\n\t\t- "Can I change what my site is about?"\n\t\t- "Let\'s start from the beginning"\n\t\t- "Reset everything"\n\t\tAlways call this tool directly when the user expresses a desire to start over.\n\t\tNever try to reset the site yourself, or reply with a message to say you have done so.\n\t\tDo not ask follow-up questions, just call this tool directly when the user expresses a desire to start over.',strict:!0}];if(tt(e)||n.push(at(Ye.CONTENT)),e.events?.pattern&&(e.events?.sections?n.push((({description:e,itemCount:t=5,dateFormatExample:n,timeFormatExample:o})=>({name:"add_container_to_events_section",description:`Adds a new events container (group/row of event items) to the events pattern.\n\t\tThe description of the site is: ${e}.\n\t\tIf not specified in the user request, make up ${t} events items according to the description of the site.\n\t\tThe event dates should be later than and in the same format as ${n}.\n\t\tThe event times should be in the same format as ${o}.\n\t\t`,parameters:{type:"object",properties:{items:{type:"array",description:"A list of events items to add to the events section",items:{type:"object",description:"The events item to add to the events section.",properties:{date:{type:"string",description:"The date of the event."},time:{type:"string",description:"The time of the event."},name:{type:"string",description:"The name of the event."},description:{type:"string",description:"The description of the menu item. If not provided, make something up."},location:{type:"string",description:"The location of the event. If not provided, make something up."}},additionalProperties:!1,required:["date","time","name","description","location"]}}},required:["items"]},strict:!0}))({description:t,itemCount:e.events?.itemCount,dateFormatExample:e.events?.dateFormatExample,timeFormatExample:e.events?.timeFormatExample})):e.events?.items&&n.push(Nl({description:t,dateFormatExample:e.events?.dateFormatExample,timeFormatExample:e.events?.timeFormatExample}))),e.menu?.pattern&&(e.menu?.sections?n.push((({description:e,itemCount:t=5})=>({name:"add_container_to_menu_section",description:`Adds a new menu container (group of menu items) to the menu section.\n\t\tThe description of the site is: ${e}.\n\t\tIf not specified in the user request, make up ${t} menu items according to the description of the site.\n\t\tNEVER ask any follow up questions.\n\t\t`,parameters:{type:"object",properties:{title:{type:"string",description:"The title of the menu section to add."},items:{type:"array",description:"A list of menu items to add to the menu section",items:{type:"object",description:"The menu item to add to the menu section.",properties:{name:{type:"string",description:"The name of the menu item."},description:{type:"string",description:"The description of the menu item. If not provided, make something up."},price:{type:"string",description:"The price of the menu item. If not provided, make something up."},currency:{type:"string",description:'The currency of the menu item. If not provided, default to "$".'}},additionalProperties:!1,required:["name","description","price","currency"]}}},required:["title","items"]},strict:!0}))({description:t,itemCount:e.menu?.itemCount})):e.menu?.items&&n.push(Ol(t))),e.services?.sections&&n.push((({description:e,itemCount:t=3})=>({name:"add_container_to_services_section_tool",description:`Adds a new services container (group of service items) to the services pattern.\n\t\t\tThe description of the site is: ${e}.\n\t\t\tGenerate ${t} service items according to the description of the site.\n\t\t\tNEVER ask any follow up questions.\n\t\t`,parameters:{type:"object",properties:{items:{type:"array",description:"A list of service items to add to the services section.",items:{type:"object",description:"The service item to add to the services section.",properties:{name:{type:"string",description:"The name of the service item."},description:{type:"string",description:"The description of the service item. If not provided, make something up."},link:{type:"string",description:"The link text for the service item. If not provided, make something up."}},required:["name","description","link"],additionalProperties:!1}}},required:["items"]},strict:!0}))({description:t,itemCount:e.services?.itemCount})),e.testimonials?.sections&&n.push((({description:e,itemCount:t=3})=>({name:"add_item_to_testimonials_section",description:`Adds a new testimonials section to the testimonials pattern.\n\t\t\tThe description of the site is: ${e}.\n\t\t\tGenerate ${t} testimonial items according to the description of the site.\n\t\t\tNEVER ask any follow up questions.\n\t\t`,parameters:{type:"object",properties:{items:{type:"array",description:"A list of testimonial items to add to the testimonials section.",items:{type:"object",description:"The testimonial item to add to the testimonials section.",properties:{name:{type:"string",description:'The name of the person giving the testimonial, in the format of "First Name" "Last Initial", e.g. "John D."'},handle:{type:"string",description:'The social media handle of the person giving the testimonial, e.g. "@john_doe"'},review:{type:"string",description:"The review given by the person, no more than 2 sentences long."}},additionalProperties:!1,required:["name","handle","review"]}}},required:["items"]},strict:!0}))({description:t,itemCount:e.testimonials?.itemCount})),e.pricing?.sections&&n.push((({description:e,itemCount:t=5,tiers:n=[]})=>({name:"add_container_to_pricing_section",description:`Adds a new pricing container (group of pricing tiers) to the pricing pattern.\n\t\tThe description of the site is: ${e}.\n\t\tThe current tiers on the site are: ${n.join(", ")}.\n\t\tGenerate ${t} pricing tiers according to the description of the site and the current tiers on the site.\n\t\tNEVER ask any follow up questions.\n\t\t`,parameters:{type:"object",properties:{items:{type:"array",description:"A list of pricing tiers to add to the pricing section",items:{type:"object",description:"The pricing tier to add to the pricing section.",properties:{name:{type:"string",description:"The name of the pricing tier."},price:{type:"string",description:"The price of the pricing tier. If not provided, make something up."},services:{type:"array",description:"The services of the pricing tier. If not provided, make up four services.",items:{type:"string",description:"A short description of the service."}}},additionalProperties:!1,required:["name","price","services"]}}},required:["items"]},strict:!0}))({description:t,itemCount:e.pricing?.itemCount,tiers:e.pricing?.tiers})),e.team?.pattern&&(e.team?.sections?n.push({name:"add_container_to_team_section",description:"Adds a new container (group of team members) to the team pattern.\n\t\tNEVER ask any follow up questions.\n\t\t"}):e.team?.items&&n.push({name:"add_member_to_team_container",description:"Adds a new team member.\n\t\tNEVER ask any follow up questions.",parameters:{type:"object",properties:{clientId:{type:["string","null"],description:"The clientId of the selected block. DOES NOT have to be a team block."},count:{type:"number",description:"The number of team members to add. Default to 1."}},required:["clientId","count"]},strict:!0})),e?.contactForm?.isOnPage&&n.push({name:"modify_contact_form_fields",description:"Call this if the user asks to modify the contact form fields, such as adding or removing fields.",parameters:{type:"object",properties:{action:{type:"string",enum:["insert","update","delete"],description:"The operation to perform on the contact form fields(add, modify, remove)."},fields:{type:"array",description:"The contact form fields to operate on.",items:{type:"object",properties:{label:{type:"string",description:"The label of the contact form field."},type:{type:"string",description:"The type of the contact form field.",enum:Pl},blockAttributes:{type:"object",description:"Additional attributes to update for the field.",properties:{required:{type:"boolean",description:"Whether the form field is required when submitting the form."},newLabel:{type:"string",description:"The new label of the contact form field when updating."}}}},required:["label","type"]}}},required:["action","fields"]},strict:!1}),!e.selectedBlock)return n;switch(e.menu?.pattern&&e.menu?.sections&&n.push(Ol(t)),e.events?.pattern&&e.events?.sections&&n.push(Nl({description:t,dateFormatExample:e.events?.dateFormatExample,timeFormatExample:e.events?.timeFormatExample})),e.team?.pattern&&e.team?.sections&&n.push({name:"add_member_to_team_container",description:"Adds a new team member.\n\t\tNEVER ask any follow up questions.",parameters:{type:"object",properties:{clientId:{type:["string","null"],description:"The clientId of the selected block. DOES NOT have to be a team block."},count:{type:"number",description:"The number of team members to add. Default to 1."}},required:["clientId","count"]},strict:!0}),e.selectedBlock.type){case"core/button":n.push({name:"update_button_link",description:"Update a button link for the selected block. This is not used for updating social links.",parameters:{type:"object",properties:{clientId:{type:"string",description:"The clientId of the current selected block."},url:{type:"string",description:"The URL of the button link."}},required:["clientId","url"]},strict:!0});break;case"core/paragraph":case"core/heading":n.push({name:"rewrite_content",description:"Rewrite the content from the selected block context to match a user request.\n\t\t\tIf a user requests a change in tone but doesn't provide a specific tone, ask for clarification.\n\t\t\tIf a user requests to translate the content but doesn't provide a language, ask for clarification.\n\t\t\tDo not return any content in your response.",parameters:{type:"object",properties:{content:{type:"array",description:"The list of components with the site specific content to be replaced",items:{type:"object",properties:{i:{type:"string",description:"The clientId of the content to be replace as provided in the request"},e:{type:"string",description:"The content that will replace the selected block content with a similar number of words"}},required:["i","e"],additionalProperties:!1}},message:{type:"string",description:"A message to the user summarizing the changes you have made."}},required:["content","message"]},strict:!0})}return n}},Ml=Rl,Ll=function(){const{getBlock:e}=(0,m.useSelect)(y.store);return{blockExists:t=>!!e(t),isValidClientId:e=>!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}},Dl=function(){const{getBlock:e,getBlocksByName:t}=(0,m.useSelect)(y.store),{insertBlock:n,updateBlockAttributes:o}=(0,m.useDispatch)(y.store),{setLastCancelableAction:i}=(0,m.useDispatch)(Qa),{scrollToBlock:r}=bs(),{getSocialLinkVariations:a}=Js(),{isValidClientId:s,blockExists:c}=Ll();return{updateButtonLink:async t=>{const{clientId:n,url:r}=t,a=e(n);return o(n,{url:r}),i({action:"update_button_link",clientId:n,originalUrl:a.attributes.url}),(0,z.__)("The link has been updated.","big-sky")},validateButtonArgs:e=>{if(!e)return!1;const{clientId:t}=e;return!(!s(t)||!c(t))},cancelUpdateButtonLink:({clientId:e,originalUrl:t})=>{o(e,{url:t})},upsertSocialLink:({service:i,url:a})=>{const s=t("core/social-links");let c="";return s.forEach(((t,s)=>{const l=e(t),u=l.innerBlocks.find((e=>"core/social-link"===e.name&&e.attributes.service===i));if(u)o(u.clientId,{url:a}),c="updated",0===s&&r(u.clientId,"center",!0);else{const e=(0,La.createBlock)("core/social-link",{url:a,service:i});n(e,l.innerBlocks.length,t,0===s),c="added"}})),(0,z.sprintf)(
// Translators: %1$s is the social link service, %2$s is the action (added/updated).
// Translators: %1$s is the social link service, %2$s is the action (added/updated).
(0,z.__)("The social link button for %1$s has been %2$s.","big-sky"),i,c)},validateSocialLinkArgs:e=>{if(!e)throw new Error((0,z.__)("Sorry, I can't perform this action at this time.","big-sky"));const{service:t}=e,n=a().find((e=>e.name===t));if(!n)throw new Error((0,z.__)("Sorry, the provided social media service is not supported.","big-sky"));return!0}}};const Bl=function(){const{getBlock:e,getBlocks:t,getBlocksByName:n}=(0,m.useSelect)((e=>({getBlock:e(y.store).getBlock,getBlocks:e(y.store).getBlocks,getBlocksByName:e(y.store).getBlocksByName}))),{updateBlockAttributes:o}=(0,m.useDispatch)(y.store),{setLastCancelableAction:i}=(0,m.useDispatch)(Qa),{getSiteMetadata:r,setSiteMetadata:a}=ms(),{getTemplatePartClientID:s,getContentBlockClientID:c}=bs(),{getCoordinates:l}=sl(),{setDockView:u}=(0,m.useDispatch)(Qa),d=(0,m.useSelect)((e=>{var t;const n=e(Wr.store).getEntityRecord("root","site");return{siteTitle:null!==(t=n?.title)&&void 0!==t?t:""}})),p=async e=>{const{address:n}=e,{siteLocation:o}=r(),i=o?.name;return i?([...t(s("header")),...t(s("footer")),...t(c())].forEach((e=>h(e,i,n))),n):n},h=(e,t,n)=>{if("core/heading"===e.name||"core/paragraph"===e.name){const i=e.attributes.content||"",r=f(i?.text||i),a=f(t?.name||t);if(!r.includes(a))return!1;const s=new RegExp(b(t).replace(/[\s,]+/g,"[\\s,]*"),"gi"),c=i.replace(s,null!=n?n:"");return o(e.clientId,{content:c}),!0}return!!(e.innerBlocks&&e.innerBlocks.length>0)&&e.innerBlocks.forEach((e=>h(e,t,n)))},g=async t=>{const{address:i,coordinates:r,isUndo:a}=t,s=a?r:await l(i);if(s||a)return n("jetpack/map").forEach((t=>{var n,r;const a=e(t),c=s?[{placeTitle:null!=i?i:"",title:d.siteTitle||(null!=i?i:""),caption:"",id:`place.${Math.random()}`,coordinates:{latitude:s[0],longitude:s[1]}}]:[];o(a.clientId,{mapCenter:{lat:null!==(n=s?.[0])&&void 0!==n?n:0,lng:null!==(r=s?.[1])&&void 0!==r?r:0},points:c})})),s},f=e=>e.replace(/[\s,]+/g,"").toLowerCase(),b=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{updateAddress:async e=>{try{const t=await p(e),n=await g(e),{siteLocation:o}=r(),s=o?.name;return i({action:"update_address",address:s,coordinates:o?.coordinates}),a({siteLocation:{name:t,coordinates:n}},!0),(0,z.sprintf)(
// Translators: %s is the new address.
// Translators: %s is the new address.
(0,z.__)('Your address has been updated to "%s".',"big-sky"),t)}catch(e){return console.error("Error updating address:",e),!1}},validateAddressArgs:e=>!(!e||!e.address),cancelUpdateAddress:async e=>{try{return await p({...e,isUndo:!0}),await g({...e,isUndo:!0}),a({siteLocation:{name:e.address,coordinates:e.coordinates}},!0),u(Y.MENUS),!0}catch(e){return console.error("Error canceling address update:",e),!1}}}},Fl=window.wp.richText;var jl=n(942);const Ul=window.wp.components,ql=({actions:e,animationVariants:t={}})=>{const n=(0,f.useRef)();let o,i,a=!1;const s=e.some((e=>"string"==typeof e?.type&&e.type?.startsWith("confirmation")));return(0,r.createElement)("div",{className:jl("big-sky__chat-actions",{"has-confirmation-actions":s})},(0,r.createElement)("div",{className:jl("big-sky__chat-actions__carousel",{draggable:e.length>1}),ref:n,role:"region",tabIndex:0,...e.length>1&&{onPointerDown:e=>{a=!0,n.current.classList.add("active"),o=e.pageX-n.current.offsetLeft,i=n.current.scrollLeft},onPointerLeave:()=>{a=!1,n.current.classList.remove("active")},onPointerUp:()=>{a=!1,n.current.classList.remove("active")},onPointerMove:e=>{if(!a)return;e.preventDefault();const t=2*(e.pageX-n.current.offsetLeft-o);n.current.scrollLeft=i-t}}},e.map(((e,n)=>(0,r.createElement)(Ul.__unstableMotion.button,{initial:t.initial||{},animate:t.animate||{},exit:t.exit||{},transition:{...t.transition||{},delay:n*(t.transition?.delay||0)},key:e.key,onClick:()=>{"suggested"===e.action_type?ea("chat_suggestion_click",{action_key:e.key}):ea("chat_action_click",{action_key:e.key}),e.onClick()},className:jl("big-sky__chat-actions__carousel__item",{"confirmation-action":"confirmation"===e.type,"confirmation-action-destructive":"confirmationDestructive"===e.type}),title:e.description},(0,r.createElement)("h5",null,e.actionName),e.description&&(0,r.createElement)("p",null,e.description))))))};var $l=n(789);const Hl=async e=>{if((0,$l.checkIfBrowserSupported)()){const t=function(e){const t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=atob(t[1]);let i=o.length;const r=new Uint8Array(i);for(;i--;)r[i]=o.charCodeAt(i);return new File([r],"screenshot.jpg",{type:n})}(await(0,$l.takeScreenshot)()),n=t=>{const n=t[0].url;"string"==typeof n&&n.startsWith("http")&&ta(e,`<img style="max-width: 100%" src="${n}" />`,G.SCREENSHOT)},o=e=>{ra.error("file error",e)};await(0,kc.uploadMedia)({filesList:[t],onFileChange:n,onError:o})}};function zl(){const{isSessionLogged:e,shouldLogSessions:t,sessionId:n}=(0,m.useSelect)((e=>({sessionId:e(Qa).getSessionId(),shouldLogSessions:e(Qa).shouldLogSessions(),isSessionLogged:e(Qa).isSessionLogged()}))),o=(0,m.useDispatch)(Qa).setSessionLogged;async function i(e,t="",o="",i=""){if(await r())return await ta(n,e,t,o,i)}async function r(){return!!e||!!t&&(await hs(n),o(!0),!0)}return{logSession:r,logScreenshot:async function(){if(await r())return await Hl(n)},logMessage:async function(e){if(await r())return await async function(e,t){if(!e)return;let n=t.content;return t.role===G.COMPONENT?n=`Component: &lt;${n.type.name}/&gt;`:"string"!=typeof n&&(n=JSON.stringify(n)),await ta(e,n,t.role,t.id,t.parentId)}(n,e)},logAction:i,logError:async function(e){return"object"==typeof e&&(e=JSON.stringify(e)),await i(e,G.ERROR)},logUserChoice:async function(e,t,n){return await i(e,G.USER_CHOICE,t,n)},logUserMessage:async function(e,t,n){return await i(e,G.USER,t,n)},logToolCall:async function(e,t=""){return await i(e,G.TOOL_CALL,t)},logAssistantMessage:async function(e,t=""){return await i(e,G.ASSISTANT,t)}}}function Gl({useBlockContext:e=!0,onActionClick:t,actions:n=[],animationVariants:o={}}){const[i,a]=(0,f.useState)([]),{getParentPatternCategory:s,getItems:c,getSections:l}=tl(),{isOnboarded:u}=ms().getSiteMetadata(),{selectedBlock:d}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{selectedBlock:t()}})),{callbacks:p}=Pe(),{setCurrentUserMessage:h,setShowThread:g}=(0,m.useDispatch)(Qa),{logUserChoice:b}=zl(),v=is(Ye.CONTENT),w=v?.toolkitHook,{callbacks:k}=w?w():{},_=(0,f.useCallback)((e=>{g(!0),b(e),h(e),t(e)}),[b,t,h,g]),x=(0,f.useCallback)((()=>{const e=[];return c("events")&&e.push({key:"events-add-item",actionName:(0,z.__)("Add a new item","big-sky"),description:(0,z.__)("to the events","big-sky"),onClick:()=>{k?.add_item_to_events_container?k.add_item_to_events_container({clientId:d.clientId,count:1}):_((0,z.__)("Add a new item to the events.","big-sky"))}}),l("events")&&e.unshift({key:"events-add-section",actionName:(0,z.__)("Add a new row","big-sky"),description:(0,z.__)("to the events","big-sky"),onClick:()=>{k?.add_container_to_events_section?k.add_container_to_events_section():_((0,z.__)("Add a new row to the events.","big-sky"))}}),e}),[k,c,l,_,d]),C=(0,f.useCallback)((()=>{const e=[{key:"menu-add-item",actionName:(0,z.__)("Add a new item","big-sky"),description:(0,z.__)("to the menu","big-sky"),onClick:()=>{k?.add_item_to_menu_container?k.add_item_to_menu_container({clientId:d.clientId,count:1}):_((0,z.__)("Add a new item to the menu.","big-sky"))}}];return l("menu")&&e.unshift({key:"menu-add-section",actionName:(0,z.__)("Add a new section","big-sky"),description:(0,z.__)("to the menu","big-sky"),onClick:()=>{k?.add_container_to_menu_section?k.add_container_to_menu_section({title:"New Section",items:[{name:"New Item",description:"New Item Description",price:"10"}]}):_((0,z.__)("Add a new section to the menu.","big-sky"))}}),e}),[k,l,_,d]),S=(0,f.useCallback)((()=>[{key:"pricing-add-section",actionName:(0,z.__)("Add a row","big-sky"),description:(0,z.__)("to the pricing section","big-sky"),onClick:()=>{k?.add_container_to_pricing_section?k.add_container_to_pricing_section({items:[]}):_((0,z.__)("Add a new row to the pricing section.","big-sky"))}}]),[k,_]),E=(0,f.useCallback)((()=>l("services")?[{key:"services-add-service",actionName:(0,z.__)("Add a row","big-sky"),description:(0,z.__)("to the services","big-sky"),onClick:()=>{k?.add_container_to_services_section?k.add_container_to_services_section():_((0,z.__)("Add a new row to the services.","big-sky"))}}]:[]),[l,k,_]),I=(0,f.useCallback)((()=>[{key:"testimonials-add-testimonial",actionName:(0,z.__)("Add a row","big-sky"),description:(0,z.__)("to the testimonials","big-sky"),onClick:()=>{k?.add_item_to_testimonials_section?k.add_item_to_testimonials_section():_((0,z.__)("Add a new row to the testimonials.","big-sky"))}}]),[k,_]),T=(0,f.useCallback)((()=>{const e=[];return c("team")&&e.push({key:"team-add-member",actionName:(0,z.__)("Add a new member","big-sky"),description:(0,z.__)("to the team","big-sky"),onClick:()=>{k?.add_member_to_team_container?k.add_member_to_team_container({clientId:d.clientId,count:1}):_((0,z.__)("Add a new member to the team.","big-sky"))}}),l("team")&&e.unshift({key:"team-add-section",actionName:(0,z.__)("Add a new section","big-sky"),description:(0,z.__)("to the team","big-sky"),onClick:()=>{k?.add_container_to_team_section?k.add_container_to_team_section():_((0,z.__)("Add a new section to the team.","big-sky"))}}),e}),[k,c,l,_,d]),A=(0,f.useCallback)((e=>{switch(e){case"events":return x();case"menu":return C();case"pricing":return S();case"services":return E();case"testimonials":return I();case"team":return T();default:return[]}}),[x,C,S,E,I,T]),P=(0,f.useCallback)((()=>{const e=[];if(d){const t=s(d);Ua.includes(t)&&e.push(...A(t))}const t=[{key:"site-add-page",actionName:(0,z.__)("Add a page","big-sky"),description:(0,z.__)("to my website","big-sky"),onClick:()=>{_((0,z.__)("Add a new page to my website.","big-sky"))}},{key:"site-change-colors",actionName:(0,z.__)("Change the colors","big-sky"),description:(0,z.__)("of my website","big-sky"),onClick:()=>{_((0,z.__)("Change the colors of my website.","big-sky"))}},{key:"site-change-fonts",actionName:(0,z.__)("Change the fonts","big-sky"),description:(0,z.__)("of my website","big-sky"),onClick:()=>{_((0,z.__)("Change the fonts of my website.","big-sky"))}},{key:"site-change-layout",actionName:(0,z.__)("Change layout","big-sky"),description:(0,z.__)("try a different layout","big-sky"),onClick:()=>{p?.show_layout_picker?p.show_layout_picker():_((0,z.__)("Change the layout of my website.","big-sky"))}}];return[...e,...t]}),[p,A,s,_,d]),N=(0,f.useCallback)((()=>[{key:"image-ai-image",actionName:(0,z.__)("Generate an image","big-sky"),description:(0,z.__)("using AI","big-sky"),onClick:()=>_((0,z.__)("Make a new AI image to replace the one I have selected.","big-sky"))},{key:"image-find-stock",actionName:(0,z.__)("Find an image","big-sky"),description:(0,z.__)("from stock","big-sky"),onClick:()=>_((0,z.__)("Find me a new stock image to replace the one I have selected.","big-sky"))}]),[_]),O=(0,f.useCallback)((()=>[{key:"logo-ai-image",actionName:(0,z.__)("Make a logo","big-sky"),description:(0,z.__)("using AI","big-sky"),onClick:()=>_((0,z.__)("Make a new logo to replace the one I have selected.","big-sky"))}]),[_]),R=(0,f.useCallback)((()=>[{key:"text-change-tone",actionName:(0,z.__)("Change tone","big-sky"),description:(0,z.__)("to something different","big-sky"),onClick:()=>_((0,z.__)("Change the tone of the text I have selected.","big-sky"))},{key:"text-fix-spelling-grammar",actionName:(0,z.__)("Fix spelling and grammar","big-sky"),description:(0,z.__)("of this text","big-sky"),onClick:()=>_((0,z.__)("Fix the spelling and grammar of the text I have selected.","big-sky"))},{key:"text-make-shorter",actionName:(0,z.__)("Reduce length","big-sky"),description:(0,z.__)("of this text","big-sky"),onClick:()=>_((0,z.__)("Make the text I have selected, shorter.","big-sky"))}]),[_]),M=(0,f.useCallback)((()=>[{key:"button-update-link",actionName:(0,z.__)("Update link","big-sky"),description:(0,z.__)("to something else","big-sky"),onClick:()=>_((0,z.__)("Update the button link to something else.","big-sky"))}]),[_]),L=(0,f.useCallback)((()=>{const t=i[0]?.key;if(n.length>0)return n.map((e=>({...e,action_type:"suggested"})));if((!d||!e)&&u)return P();const o=d?.name;switch(o){case"core/paragraph":case"core/heading":return R();case"core/image":case"core/cover":return N();case"core/site-logo":return O();case"core/button":case"core/social-link":return M();default:if(e&&!t?.includes("site-")&&u)return P()}}),[i,N,O,P,R,M,u,d,e,n]);return(0,f.useEffect)((()=>{a(L())}),[d]),i?.length>0?(0,r.createElement)(ql,{key:i[0]?.key,actions:i,animationVariants:o}):null}function Vl(){const{pendingToolCallbacks:e}=(0,m.useSelect)((e=>({pendingToolCallbacks:e(Qa).getPendingToolCallbacks()}))),{running:t,isAwaitingUserInput:n}=Ce();return{isThinking:!1===n||e>0||t}}function Wl({args:e,respond:t}){const{agentSay:n,isRunning:o}=Ce(),{message:i,actions:a}=e||{},{logUserChoice:s}=zl(),{setHasRetriedChatRequest:c}=(0,m.useDispatch)(Qa),{isThinking:l=!1}=Vl()||{};(0,f.useEffect)((()=>{i&&n(i)}),[n,i]);let u=[];return l||o?null:a&&a.length>0?(u=a.map((e=>({key:e.key||e.actionName||e,actionName:e.actionName||e,description:e.description||"",type:e.type,onClick:()=>{const n=()=>e?.message?e.message:e.actionName&&e.description?`${e.actionName} - ${e.description}`:e.description||e.actionName||e;s(n()),c(!1),t(n())}}))),(0,r.createElement)(Gl,{key:u.map((e=>e.key)).join("-"),actions:u,animationVariants:{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{ease:[.42,.24,.02,1],duration:.2,delay:.05}}})):null}const Yl=Re("make_suggestions",Wl),Jl=JSON.parse('["3d-model","analog-film","anime","cinematic","comicbook","craft-clay","digital-art","enhance","fantasy-art","isometric","line-art","lowpoly","neonpunk","origami","photographic","pixel-art","texture"]'),Kl={id:Ye.CONTENT,description:"An assistant that handles content generation and editing.",instructions:e=>function(e){const t=tt(e)?"":`User: "Add a gallery section"\n         Analysis: The request is about adding a new section\n         Action: ${it}\n\n         User: "Remove the team section"\n         Analysis: The request is about remving an existing section\n         Action: ${it}\n\n         User: "Install WooCommerce plugin"\n         Analysis: The request is not a question, and is not related to content edits\n         Action: ${it}`;return`\nYou are an expert content writer and editor at Automattic, specializing in website content creation, editing, and content management. Your primary goal is to help users improve their website content and manage various content sections.\n\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Qe(e,["siteTitle","siteDescription","siteLocation","topic"])}\n</site_context>\n\n<selected_block_context>\n${Ze(e,["clientId","type","content"])}\n</selected_block_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${Ke}\n</language>\n\n1. Analyze the user's request:\n   ${Xe}\n   a) Determine if the request is content-related. This includes:\n      - Modifying text (tone, formatting, but NOT color, font, or position)\n      - Updating contact or business information\n      - Making contact form field modifications\n      - Modifying content INSIDE a menu, events, testimonials, services, pricing, or team section\n      - Adding a container or item to an existing section\n   b) Check if the request is about adding or removing an ENTIRE section\n   c) Identify if the request is a question, a non-content related task, or if the selected block is not content related (e.g., core/image)\n   d) List potential tools that might be relevant to the request\n   e) For each potential tool, list its required parameters and whether they are present in the user's request\n   f) If the request involves content changes, briefly outline what those changes might entail\n\n2. Determine the appropriate action based on your analysis:\n   a) For content-related requests:\n      - Identify the required tools and parameters\n      - Check if block selection is needed\n      - Specify the content requirements\n   b) For questions:\n      - ${nt}\n   c For resetting the entire site:\n      - Use the 'start_over' tool\n   d) For other non-content requests:\n      - ${et(e)}\n\n3. Use the appropriate tools for content management:\n   - Block Content:\n     * Content changes: rewrite_content tool (requires selected block)\n     * Text formatting: make_text_bold_italic tool\n     * Button links: update_button_link tool (requires clientId)\n   - Contact Information:\n     * Address updates: update_address tool\n     * Contact form modifications: modify_contact_form_fields tool\n     * Social links: upsert_social_link tool\n   - Menu Management:\n     * Add Menu items: add_item_to_menu_container tool\n     * New Menu container: add_container_to_menu_section tool\n   - Events Management:\n     * Add Events items: add_item_to_events_container tool\n     * New Events container: add_container_to_events_section tool\n   - Business Features:\n     * New Services container: add_container_to_services_section tool\n     * New Pricing container: add_container_to_pricing_section tool\n     * New Team members: add_member_to_team_container tool\n     * New Team container: add_container_to_team_section tool\n     * New Testimonials: add_item_to_testimonials_section tool\n\n4. Special cases:\n   - If the request is content-related but there's no specific tool to handle it, ${ot}\n\n5. Important requirements:\n   - If a selected block is required, ask the user to select the block\n   - Follow date/time formats for events\n   - Use site description for generated content\n   - Maintain currency and pricing conventions\n\n6. Examples:\n\nUser: "Add a new menu section for desserts"\nAnalysis: The request is related to editing an existing menu section\nAction:\n   - If a selected block is required, ask the user to select the menu section block\n   - If it is selected, call add_container_to_menu_section tool\n\nUser: "Add three team members"\nAnalysis: The request is related to editing an existing team section\nAction:\n   - If a selected block is required, ask the user to select the team section block\n   - If it is selected, call add_member_to_team_container tool with count: 3\n\nUser: "Make this heading bold"\nAnalysis: The request is related to text formatting\nAction: Call make_text_bold_italic tool with 'bold' format\n\nUser: "add a phone field"\nAnalysis: The request is related to contact form field modifications\nAction:\n   - If a selected block is required, ask the user to select the contact form block\n   - If it is selected, call modify_contact_form_fields tool with 'phone' field\n\nUser: "I don't like the site, please reset it."\nAnalysis: The request is related to resetting the entire site\nAction: Call start_over tool\n\n${t}\nUser: "How do I update my plugins?"\nAnalysis: The request is a question, and is not related to content edits\nAction: ${ot}\n\n7. Restrictions:\n   - Only discuss Automattic/WordPress.com products\n   - Never suggest plugin installations\n   - Don't proceed without selected block when required\n   - Don't mention clientId in responses\n\nImportant:\n   - Strictly differentiate between adding/removing an entire section and editing content in an existing section.\n   - For adding or removing entire sections, ${it}\n\nRemember to use appropriate tools immediately based on analysis.\n`}(e),tags:[Ye.CONTENT],toolkits:[Ml],toolkitHook:()=>{const{createToolCallback:e,withPendingToolCallback:t}=ts(),{agentSay:n}=Ce(),{setCallbacks:o,setContext:i}=Pe(),{isContactFormOnPage:a,modifyContactForm:s,validateContactFormArgs:c}=(()=>{const{canRemoveBlock:e,getBlock:t,getBlocksByName:n}=(0,m.useSelect)(y.store),{insertBlock:o,removeBlock:i,replaceInnerBlocks:r,updateBlockAttributes:a}=(0,m.useDispatch)(y.store),{setBlockBeforeChanges:s}=(0,m.useDispatch)(Qa),{setBlockIsProcessing:c}=bs(),l=()=>{const e=n("jetpack/contact-form");return e.length?t(e[0]):null},u=e=>e.innerBlocks.filter((e=>(e=>e.name.startsWith("jetpack/field-")||"jetpack/button"===e.name)(e))),d=(e,t)=>(e.filter((e=>Pl.includes(e.type))).map((e=>({...e,type:e.type.startsWith("jetpack/field-")?e.type:`jetpack/field-${e.type}`}))).forEach((e=>{const n=e.label&&""!==e.label.trim()?{label:e.label}:{},i=(0,La.createBlock)(e.type,n);o(i,Math.max(t.innerBlocks.length-1,0),t.clientId,!1)})),(0,z.__)("I have added the requested fields to the contact form.","big-sky")),p=async(e,t)=>{const n=[],o=[],i=u(t);e.forEach((e=>{const t=i.filter((t=>t.name===`jetpack/field-${e.type}`||"jetpack/button"===t.name&&"button"===e.type));let r;const s="button"===e.type?"text":"label";if(r=1===t.length?t[0]:t.length>1?t.find((t=>t.attributes[s]?.toLowerCase()===e.label.toLowerCase())):i.find((t=>t.attributes[s]?.toLowerCase()===e.label.toLowerCase())),r){const t={};void 0!==e.blockAttributes.required&&(t.required=e.blockAttributes.required),e.blockAttributes.newLabel&&("button"===e.type?t.text=e.blockAttributes.newLabel:t.label=e.blockAttributes.newLabel),a(r.clientId,t),n.push(e.type);const o=i.findIndex((e=>e.clientId===r.clientId));o>-1&&i.splice(o,1)}else o.push(e.type)}));let r="";return n.length>0?r+=1===n.length?(0,z.__)("I've updated a field for you.","big-sky"):(0,z.__)("I've updated some fields for you.","big-sky"):r+=(0,z.__)("I was not able to update any fields.","big-sky"),o.length>0&&(r+="\n"+(0,z.__)("I could not update the following fields:","big-sky")+"\n",r+=o.join("\n")),r.trim()},h=async(t,n)=>{const o=[],r=[],a=u(n);t.forEach((t=>{const n=a.filter((e=>e.name===`jetpack/field-${t.type}`));let s;if(s=1===n.length?n[0]:n.length>1?n.find((e=>e.attributes.label.toLowerCase()===t.label.toLowerCase())):a.find((e=>e.attributes.label.toLowerCase()===t.label.toLowerCase())),s&&e(s.clientId)){i(s.clientId,!1),o.push({type:t.type,label:s.attributes.label});const e=a.findIndex((e=>e.clientId===s.clientId));e>-1&&a.splice(e,1)}else r.push(t)}));let s="";return o.length>0&&(s+=1===o.length?(0,z.__)("I deleted a field for you.","big-sky"):(0,z.__)("I deleted some fields for you.","big-sky")),r.length>0&&(s+="\n"+(0,z.__)("I could not delete the following fields:","big-sky")+"\n"+r.map((e=>`${e.label}`)).join("\n")+". "),0===o.length&&0===r.length&&(s=(0,z.__)("No fields were deleted.","big-sky")),s.trim()};return{cancelModifyContactForm:(e,t)=>{r(e,t,!1)},isContactFormOnPage:()=>!!l(),modifyContactForm:async({action:e,fields:t})=>{const n=l(),o={insert:d,update:p,delete:h};if(!o[e])throw new Error((0,z.__)("Invalid action specified.","big-sky"));s(n),c(n,!0),await Wa(W.visualAdjustmentWaitTime);const i=await o[e](t,n);return c(n,!1),i},validateContactFormArgs:({action:e,fields:t})=>{if(!l())throw new Error((0,z.__)("No contact form block found on this page. Have you added one yet?","big-sky"));if(!Array.isArray(t))throw new Error((0,z.__)("Please specify the field(s) to modify in the contact form.","big-sky"));if(t.some((e=>"button"===e.type))&&"delete"===e)throw new Error((0,z.__)("I cannot delete the button field, as it is required to submit the form. Instead, I can change the label for you.","big-sky"));if(t.some((e=>"button"===e.type))&&"insert"===e)throw new Error((0,z.__)("The contact form can only have one button. I can change the button's label for you, if you like.","big-sky"));if(!t.some((e=>Pl.includes(e.type))))throw new Error((0,z.__)("It seems that a field type you specified is not valid. Please specify a valid field type in the contact form.","big-sky"));if(!["insert","update","delete"].includes(e))throw new Error((0,z.__)("Something went wrong when trying to modify the contact form. Please try again.","big-sky"));return!0}}})(),{replaceContentAgent:l,addSection:u,getItemsCount:d,validateAddContentSectionArgs:p,addItems:h,validateAddItemsArgs:g,getCurrentPricingContent:b}=function(){const{getCachedContent:e}=(0,m.useSelect)(Qa),{addCachedContent:t,setBlockBeforeChanges:n,setLastCancelableAction:o}=(0,m.useDispatch)(Qa),{getBlock:i,getBlockOrder:r,getBlockParents:a}=(0,m.useSelect)(y.store),{insertBlock:s,updateBlockAttributes:c}=(0,m.useDispatch)(y.store),{copyBlockWithInnerBlocks:l,setBlockIsProcessing:u,getFirstChildBlockByName:d,scrollToBlock:p}=bs(),{ITEM_KEY:h,SECTION_KEY:g,getParentPatternCategory:f,getPattern:b,getSections:v,getSection:w,getItems:k,getItem:_}=tl(),{getSiteMetadata:x}=ms(),{replaceContent:C}=Xc(),S=(0,m.useRegistry)(),E=e=>!["team"].includes(e),I=(e,t=k(e,b(e)))=>{if(!t)return 0;let n=0;for(const o of t.innerBlocks)o.attributes?.metadata?.name===h&&n++,n+=I(e,o);return n},T=(t,n)=>{const o=e();let i=o?.[t]?.length-1||-1;return"menu"===t?i=o?.[t]?.find((e=>e.name===n))?.items?.length-1||-1:"pricing"===t&&(i=o?.[t]?.[0]?.tiers?.length-1||-1),i},A=async({category:e,clientId:n,count:c,items:p,useCacheKey:h=!1})=>{try{const{topic:m}=x();let f,y=m;if(n){const t=((e,t)=>{if(e.attributes?.metadata?.name===t)return e;const n=a(e.clientId);for(const e of n){const n=i(e);if(n.attributes?.metadata?.name===t)return n}})(i(n),g);if(t){const n=d(t,"core/heading");y=n?.attributes?.content?.text||n?.attributes?.content||y,f=k(e,t)}}f=f||k(e,b(e));const v=_(e,f),w=[],S=r(f.clientId).length;for(let t=0;t<c;t++){const n=l(v);await s(n,S+t,f.clientId,!1),E(e)&&u(n,!0),w.push(n)}const I=T(e,y);if(p&&(h?await t({category:e,content:[{name:y,items:p}],append:!0}):await t({category:e,content:p,append:!0})),E(e)){let t=I;for(const n of w)await C({conceptSection:[n],sectionCategory:e,sectionHeading:y,startIndex:t,inMemory:!1}),await Wa(500),u(n,!1),t++}return o({action:`add_${e}_items`,clientIds:w.map((e=>e.clientId))}),(0,z.sprintf)(
// translators: %s is the name of the pattern category.
// translators: %s is the name of the pattern category.
(0,z.__)("I have added new %s items.","big-sky"),e)}catch(t){return(0,z.sprintf)(
// translators: %s is the name of the pattern category.
// translators: %s is the name of the pattern category.
(0,z.__)("There was an issue updating the content for the new %s item.","big-sky"),e)}};return{replaceContentAgent:({content:e,message:t})=>{const o=e.map((e=>({clientId:e.i,text:e.e})));return S.batch((()=>{o?.forEach((e=>{const t={},o=i(e.clientId);o&&(n(o),"core/heading"===o.name||"core/paragraph"===o.name?t.content=e.text:"core/site-title"===o.name||"core/button"===o.name&&(t.text=e.text),c(e.clientId,{...t}))}))})),t||(0,z.__)("I have replaced the content.","big-sky")},addSection:async({category:e,title:n,items:i,useCacheKey:a=!1})=>{try{const{siteDescription:h}=x(),g=v(e),m=w(e,g),f=l(m);if(await s(f,r(g.clientId).length,g.clientId,!1),E(e)&&u(f,!0),p(f.clientId,"center"),await Wa(500),n){const e=d(f,"core/heading");e&&(e.attributes.content=n,c(e.clientId,e.attributes))}const y=k(e,f),b={conceptSection:[y],sectionCategory:e,siteDescription:h,sectionHeading:n,replaceHeading:!1,inMemory:!1,startIndex:T(e,n)};let _=0;const S=I(e,y);return a&&i?(await t({category:e,content:[{name:n,items:i}],append:!0}),_=i.length-S):i?(await t({category:e,content:i,append:!0}),_=i.length-S):(b.noCache=!0,b.numOfSections=1),E(e)&&await C(b),_>0&&await A({clientId:y.clientId,count:_,category:e,cacheOffset:S-1}),E(e)&&(await Wa(500),u(f,!1)),o({action:`add_${e}_section`,clientId:f.clientId}),(0,z.sprintf)(
// translators: %s is the name of the pattern category.
// translators: %s is the name of the pattern category.
(0,z.__)("I have added a new %s section.","big-sky"),e)}catch(t){return(0,z.sprintf)(
// translators: %s is the name of the pattern category.
// translators: %s is the name of the pattern category.
(0,z.__)("There was an issue updating the content for the new %s section.","big-sky"),e)}},validateAddContentSectionArgs:e=>{if(!b(e.category))throw new Error((0,z.sprintf)(
// translators: %s is the name of the pattern category.
// translators: %s is the name of the pattern category.
(0,z.__)("No %s pattern found.","big-sky"),e.category));if(!v(e.category))throw new Error((0,z.sprintf)(
// translators: %s is the name of the pattern category.
// translators: %s is the name of the pattern category.
(0,z.__)("No %s sections block found.","big-sky"),e.category));return"menu"===e.category&&(e=>{if(!e.title)throw new Error((0,z.__)("Please provide a title for the menu section.","big-sky"))})(e),!0},addItems:A,validateAddItemsArgs:e=>{if(!b(e.category))throw new Error((0,z.sprintf)(
// translators: %s is the name of the pattern category.
// translators: %s is the name of the pattern category.
(0,z.__)("No %s pattern found.","big-sky"),e.category));const t=v(e.category);if(!e.clientId){if(t)throw new Error((0,z.sprintf)(
// translators: %s is the name of the pattern category.
// translators: %s is the name of the pattern category.
(0,z.__)("Select a %s section to add items to.","big-sky"),e.category));return!0}return t||(f(i(e.clientId)),e.category),!0},getItemsCount:I,getCurrentPricingContent:()=>{const t=e();return t?.pricing&&t.pricing[0]?.tiers?{title:t.pricing[0]?.title,description:t.pricing[0]?.description,tiers:t.pricing[0].tiers.map((e=>e.name))}:{}}}}(),{changeAssistant:v}=as(),{updateButtonLink:w,upsertSocialLink:k,validateSocialLinkArgs:_}=Dl(),{updateAddress:x}=Bl(),{formatContent:C,validateFormatContentArgs:S}=function(){const{getSelectedBlock:e,getSelectionStart:t,getSelectionEnd:n}=(0,m.useSelect)((e=>e(y.store))),{updateBlockAttributes:o}=(0,m.useDispatch)(y.store),{setBlockBeforeChanges:i}=(0,m.useDispatch)(Qa);return{formatContent:async({text:r,substring:a,formats:s})=>{try{const c=e();let l=0,u=r?.length;if(a){const e=r?.indexOf(a);-1!==e&&(l=e,u=l+a.length)}else{const e=t()?.offset,o=n()?.offset;e!==o&&(l=null!=e?e:0,u=null!=o?o:r?.length)}i(c);let d=(0,Fl.create)({html:c.attributes.content||""});return s.forEach((e=>{d=(0,Fl.applyFormat)(d,{type:`core/${e}`},l,u)})),o(c.clientId,{content:(0,Fl.toHTMLString)({value:d})}),(0,z.__)("Content has been formatted successfully.","big-sky")}catch(e){return ra.error("Error formatting content:",e),(0,z.__)("Failed to format the content.","big-sky")}},validateFormatContentArgs:t=>{const n=e();if(!n.attributes?.content?.originalHTML||n.attributes?.content?.originalHTML!==t?.text)throw new Error((0,z.__)("Please select a single block that contains the text you want to format.","big-sky"));return!0}}}(),{startOver:E,startOverActions:I}=function(){const{resetSite:e}=rl(),{clearMessages:t}=Ce(),n=[{actionName:(0,z.__)("Yes","big-sky"),description:(0,z.__)("Permanently reset my site","big-sky"),type:"confirmationDestructive",key:"start-over-yes"},{actionName:(0,z.__)("No","big-sky"),description:(0,z.__)("I have changed my mind","big-sky"),type:"confirmation",key:"start-over-no"}];return{startOver:async o=>{o.startsWith(n[0].actionName)&&e(),t()},startOverActions:n}}(),{getParentPatternCategory:T,getPattern:A,getSections:P,getItems:N}=tl(),{getLastAvailableContentByClassName:O}=Xc(),{topic:R,siteTitle:M,siteDescription:L,siteLocation:D,defaultImageStyle:B}=ms().getSiteMetadata(),{getVariationKeywords:F,getSocialLinkVariations:j}=Js(),{selectedBlock:U,getIsHandoff:q,currentHandoffArea:$}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store),{getOnSelectedBlockAction:n,getIsHandoff:o,getCurrentHandoffArea:i}=e(Qa);return{selectedBlock:t(),getIsHandoff:o,currentHandoffArea:i(),getOnSelectedBlockAction:n}})),{setChatComponents:H,setDockView:G,setShowThread:V,setHideInput:J}=(0,m.useDispatch)(Qa),K={add_item_to_events_container:e({name:"add_item_to_events_container",action:async e=>{n(await h({...e,category:"events"}))},validator:e=>g({...e,category:"events"}),failValidatorAction:(e,t)=>{V(!0),n(t.message)}}),add_container_to_events_section:e({name:"add_container_to_events_section",action:async e=>{n(await u({...e,category:"events"}))},validator:e=>p({...e,category:"events"}),failValidatorAction:(e,t)=>{V(!0),n(t.message)}}),add_item_to_menu_container:e({name:"add_item_to_menu_container",action:async e=>{n(await h({...e,category:"menu",useCacheKey:!0}))},validator:e=>g({...e,category:"menu"}),failValidatorAction:(e,t)=>{V(!0),console.warn("Failed to add menu items",t),n(t.message)}}),add_container_to_menu_section:e({name:"add_container_to_menu_section",action:async e=>{n(await u({...e,category:"menu",useCacheKey:!0}))},validator:e=>p({...e,category:"menu"}),failValidatorAction:(e,t)=>{V(!0),console.warn("Failed to add menu section",t),n(t.message)}}),add_container_to_pricing_section:e({name:"add_container_to_pricing_section",action:async e=>{const{title:t,description:o}=b();e.items=[{title:t,description:o,tiers:e.items}],n(await u({...e,category:"pricing"}))},validator:e=>p({...e,category:"pricing"}),failValidatorAction:(e,t)=>{V(!0),n(t.message)}}),add_container_to_services_section:e({name:"add_container_to_services_section",action:async e=>{n(await u({...e,category:"services"}))},validator:e=>p({...e,category:"services"}),failValidatorAction:(e,t)=>{V(!0),n(t.message)}}),add_member_to_team_container:e({name:"add_member_to_team_container",action:async e=>{n(await h({...e,category:"team"}))}}),add_container_to_team_section:e({name:"add_container_to_team_section",action:async e=>{n(await u({...e,category:"team"}))}}),add_item_to_testimonials_section:e({name:"add_item_to_testimonials_section",action:async e=>{n(await u({...e,category:"testimonials"}))},validator:e=>p({...e,category:"testimonials"}),failValidatorAction:(e,t)=>{V(!0),n(t.message)}}),modify_contact_form_fields:e({name:"modify_contact_form_fields",action:async e=>{n(await s(e))},validator:e=>c(e),failValidatorAction:(e,t)=>{n(t.message)}}),rewrite_content:e({name:"rewrite_content",action:async e=>{n(l(e))}}),update_button_link:e({name:"update_button_link",action:async e=>{n(await w(e))}}),upsert_social_link:e({name:"upsert_social_link",action:e=>{n(k(e))},validator:e=>_(e),failValidatorAction:(e,t)=>{V(!0),console.warn("Failed to upsert social link",t),n(t.message)}}),update_address:e({name:"update_address",action:async e=>{n(await x(e))}}),make_text_bold_italic:e({name:"make_text_bold_italic",failValidatorAction:(e,t)=>{V(!0),n(t.message)},validator:e=>S(e),action:async e=>{n(await C(e))}}),start_over:e({name:"start_over",action:async()=>{V(!0),J(!0);const e={actions:I};n((0,z.__)("All customizations and pages on your site will be permanently reset. Are you sure you want to start over?","big-sky")),H([(0,r.createElement)(Wl,{key:"suggestions",args:e,respond:async e=>{E(e),G(Y.MENUS),H([]),J(!1)}})])},closeChatWhenDone:()=>!1}),change_assistant:e({name:"change_assistant",action:e=>{V(!0),v(e)},closeChatWhenDone:()=>!1})};(0,f.useEffect)((()=>{o(Ml.name,K)}),[o]);const X=ha.map((e=>e.slug));return(0,f.useEffect)((()=>{const e=j(),t={patterns:{patternCategories:X},site:{siteTitle:M,siteDescription:L,siteLocation:D,topic:R},colors:{colorVariationCategories:F("color")},fonts:{fontCategories:F("font")},socialLinks:{services:e.map((e=>e.name))},events:{pattern:A("events"),sections:P("events"),items:N("events",A("events")),itemCount:d("events"),dateFormatExample:O(A("events"),"is-event-date"),timeFormatExample:O(A("events"),"is-event-time")},menu:{pattern:A("menu"),sections:P("menu"),items:N("menu",A("menu")),itemCount:d("menu")},services:{pattern:A("services"),sections:P("services"),itemCount:d("services")},testimonials:{pattern:A("testimonials"),sections:P("testimonials"),itemCount:d("testimonials")},pricing:{tiers:b().tiers,pattern:A("pricing"),sections:P("pricing"),itemCount:d("pricing")},team:{pattern:A("team"),sections:P("team"),items:N("team",A("team")),itemCount:d("team")}};if(a()&&(t.contactForm={isOnPage:!0}),q())return t.currentHandoffArea=$,void i(Ml.name,t);if(!U)return void i(Ml.name,t);const n=T(U);switch(U.name){case"core/image":case"core/site-logo":case"core/cover":t.selectedBlock={type:U.name,clientId:U.clientId,parentPatternCategory:n},t.images={styles:Jl,defaultStyle:B},i(Ml.name,t);break;case"core/paragraph":case"core/heading":t.selectedBlock={type:U.name,clientId:U.clientId,parentPatternCategory:n,content:"string"==typeof U.attributes.content?U.attributes.content:U.attributes.content?.originalHTML||U.attributes.content?.text},i(Ml.name,t);break;default:t.selectedBlock={type:U.name,clientId:U.clientId,parentPatternCategory:n},i(Ml.name,t)}}),[U,i,q,$,D]),{createToolCallback:e,withPendingToolCallback:t,callbacks:K}},onToolResult:(e,t,n)=>{n.userSay(t)},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))}},Xl=Kl,Ql={name:"color",tools:e=>{const t=[ul(e.colors?.colorVariationCategories),{name:"update_component_color",description:"Update the color of the component.\n\t\t\tAvailable components are background, text, buttons, and button text.\n\t\t\tDefault scope to global.\n\t\t\tA global scope request will contain keywords like 'site' or 'all' or similar words.\n\t\t\tIf the scope isn't global and a clientId is provided, use block as the scope \n\t\t\tif the user specifically says this button, this paragraph, etc. Otherwise the scope is section.",parameters:{type:"object",properties:{background_color:{type:["string","null"],description:"The hex color value."},text_color:{type:["string","null"],description:"The hex color value."},button_color:{type:["string","null"],description:"The hex color value."},button_text_color:{type:["string","null"],description:"The hex color value."},scope:{type:["string","null"],description:"The scope of the component.",enum:["global","section","block"]},clientId:{type:["string","null"],description:"The client ID of the selected block."}},required:["background_color","text_color","button_color","button_text_color","scope","clientId"],additionalProperties:!1},strict:!0}];return"colors"===e.currentHandoffArea||tt(e)||t.push(at(Ye.COLOR)),t}},Zl=Ql;var eu=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},tu=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},nu=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},ou=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},iu=function(e){return 255*(e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e)},ru=96.422,au=82.521,su=216/24389,cu=24389/27,lu=function(e){var t=e.l,n=e.a,o=e.b,i=e.alpha,r=void 0===i?1:i;if(!eu(t)||!eu(n)||!eu(o))return null;var a=function(e){return{l:nu(e.l,0,400),a:e.a,b:e.b,alpha:nu(e.alpha)}}({l:Number(t),a:Number(n),b:Number(o),alpha:Number(r)});return uu(a)},uu=function(e){var t=(e.l+16)/116,n=e.a/500+t,o=t-e.b/200;return function(e){var t,n,o=.9555766*(t=e).x+-.0230393*t.y+.0631636*t.z,i=-.0282895*t.x+1.0099416*t.y+.0210077*t.z,r=.0122982*t.x+-.020483*t.y+1.3299098*t.z;return n={r:iu(.032404542*o-.015371385*i-.004985314*r),g:iu(-.00969266*o+.018760108*i+41556e-8*r),b:iu(556434e-9*o-.002040259*i+.010572252*r),a:e.a},{r:nu(n.r,0,255),g:nu(n.g,0,255),b:nu(n.b,0,255),a:nu(n.a)}}({x:(Math.pow(n,3)>su?Math.pow(n,3):(116*n-16)/cu)*ru,y:100*(e.l>8?Math.pow((e.l+16)/116,3):e.l/cu),z:(Math.pow(o,3)>su?Math.pow(o,3):(116*o-16)/cu)*au,a:e.alpha})};const du=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})}),pu=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z"})});function hu(e){return"[object Object]"===Object.prototype.toString.call(e)}function gu(e){var t,n;return!1!==hu(e)&&(void 0===(t=e.constructor)||!1!==hu(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}const mu=window.wp.keycodes,fu=window.wp.compose,{useGlobalStyle:yu,useGlobalStylesOutput:bu}=h(y.privateApis),vu={start:{scale:1,opacity:1}},wu={start:{scale:0,opacity:0}},ku={leading:!0,trailing:!0},_u=({label:e,type:t})=>{var n,o,i,a,s;const[c="serif"]=yu("typography.fontFamily"),[l]=yu("typography.fontWeight"),[u="normal"]=yu("typography.fontStyle"),[d="none"]=yu("typography.textTransform"),[p="black"]=yu("color.text"),[h]=yu("elements.h1.typography.fontFamily"),[g]=yu("elements.heading.typography.fontFamily"),m=null!==(n=null!=h?h:g)&&void 0!==n?n:c,[b]=yu("elements.h1.typography.fontWeight"),[v]=yu("elements.heading.typography.fontWeight"),w=null!==(o=null!=b?b:v)&&void 0!==o?o:l,[k]=yu("elements.h1.typography.fontStyle"),[_]=yu("elements.heading.typography.fontStyle"),x=null!==(i=null!=k?k:_)&&void 0!==i?i:u,[C]=yu("elements.h1.typography.textTransform"),[S]=yu("elements.heading.typography.textTransform"),E=null!==(a=null!=C?C:S)&&void 0!==a?a:d,[I]=yu("elements.h1.color.text"),[T]=yu("elements.heading.color.text"),A=null!==(s=null!=I?I:T)&&void 0!==s?s:p,[P="white"]=yu("color.background"),[N]=bu(),[O,{width:R}]=(0,fu.useResizeObserver)(),[M,L]=(0,f.useState)(R),[D,B]=(0,f.useState)(),F=(0,fu.useThrottle)(L,250,ku),{currentColor:j}=ms().getSiteMetadata(),{getColorVariationByTitle:U}=Js(),q=U(j),$=()=>"color"===t?P||"#ffffff":(()=>{const e=q?.styles?.color?.background,t=e?.split("--")[4].replace(")","");return q?.settings?.color?.palette?.theme?.find((e=>e.slug===t))?.color})()||"#ffffff";(0,f.useLayoutEffect)((()=>{R&&F(R)}),[R,F]),(0,f.useLayoutEffect)((()=>{const e=M?M/248:1,t=e-(D||0);!(Math.abs(t)>.1)&&D||B(e)}),[M,D]);const H=D||(R?R/248:1),{paletteColors:z,getThemeColors:G}=hc(),V=(0,f.useMemo)((()=>N?[...N,{css:"html{overflow:hidden}body{min-width: 0;padding: 0;border: none;}",isGlobalStyles:!0}]:N),[N]),W=!!R;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{style:{position:"relative"}},O),W&&(0,r.createElement)(y.__unstableIframe,{className:"edit-site-global-styles-preview__iframe",style:{width:"100%",height:152*H},tabIndex:-1},(0,r.createElement)(y.__unstableEditorStyles,{styles:V}),(0,r.createElement)(Ul.__unstableMotion.div,{style:{height:152*H,width:"100%",background:$(),cursor:"pointer"},initial:"start"},(0,r.createElement)(Ul.__unstableMotion.div,{variants:vu,style:{height:"100%",overflow:"hidden"}},(0,r.createElement)(Ul.__experimentalHStack,{spacing:10*H,justify:"center",style:{height:"100%",overflow:"hidden"}},"font"===t&&(0,r.createElement)(Ul.__unstableMotion.div,{style:{color:(()=>{const e=q?.styles?.color?.text,t=e?.split("--")[4].replace(")","");return q?.settings?.color?.palette?.theme?.find((e=>e.slug===t))?.color})()||"#000000",whiteSpace:"nowrap",paddingLeft:"5px",lineHeight:1,padding:"0.2em"},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:.3,type:"tween"}},(0,r.createElement)("span",{style:{fontFamily:m,fontSize:100*H,fontWeight:w,fontStyle:x,textTransform:E}},"A"),(0,r.createElement)("span",{style:{fontFamily:c,fontSize:90*H,fontWeight:l,fontStyle:u,textTransform:d}},"a")),"color"===t&&(0,r.createElement)(Ul.__experimentalHStack,{spacing:0,alignment:"center",style:{margin:"0 0 0 10px"},className:"big-sky__color-swatch"},G().filter((e=>e.color!==P)).slice(0,3).map((({slug:e,color:t},n)=>(0,r.createElement)(Ul.__unstableMotion.div,{key:` ${e}_${n}`,style:{height:52*H,width:52*H,background:t,borderRadius:"100%",margin:"0 0 0 -10px",border:`3px solid ${$()}`,boxSizing:"content-box"},animate:{scale:1,opacity:1},initial:{scale:.1,opacity:0},transition:{delay:1===n?.2:.1}})))))),(0,r.createElement)(Ul.__unstableMotion.div,{style:{height:"100%",width:"100%",position:"absolute",top:0,overflow:"hidden",filter:"blur(60px)",opacity:.1}},(0,r.createElement)(Ul.__experimentalHStack,{spacing:0,justify:"flex-start",style:{height:"100%",overflow:"hidden"}},z.slice(0,4).map((({color:e},t)=>(0,r.createElement)("div",{key:t,style:{height:"100%",background:e,flexGrow:1}}))))),(0,r.createElement)(Ul.__unstableMotion.div,{variants:wu,style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",top:0}},(0,r.createElement)(Ul.__experimentalVStack,{spacing:3*H,justify:"center",style:{height:"100%",overflow:"hidden",padding:10*H,boxSizing:"border-box"}},e&&(0,r.createElement)("div",{style:{fontSize:40*H,fontFamily:m,color:"color"===t?A:"#1e1e1e",fontWeight:w,fontStyle:x,textTransform:E,lineHeight:"1em",textAlign:"center"}},e))))))},{GlobalStylesContext:xu}=h(y.privateApis);function Cu(e={},t={}){return fs(e,t,{isMergeableObject:gu})}function Su({variation:e,type:t}){const{setStyles:n}=hc(),[o,i]=(0,f.useState)(!1),{base:a}=(0,f.useContext)(xu),s=(0,f.useMemo)((()=>{var t;const n={settings:{...e?.settings,isPreview:!0},styles:null!==(t=e?.styles)&&void 0!==t?t:{}};return{user:n,base:a,merged:Cu(a,n),setUserConfig:()=>{}}}),[e,a]),{currentColor:c,currentFont:l}=ms().getSiteMetadata(),u=()=>{"color"===t?(ea("color_variation_click",{color:e.title}),n({color:e.title})):(ea("font_variation_click",{font:e.title}),n({font:e.title}))},d=()=>"color"===t?e?.title===c:e?.title===l;let p=e?.title;return e?.description&&(p=(0,z.sprintf)(/* translators: %1$s: variation title. %2$s variation description. */ /* translators: %1$s: variation title. %2$s variation description. */
(0,z.__)("%1$s (%2$s)","big-sky"),e?.title,e?.description)),(0,r.createElement)(xu.Provider,{value:s},(0,r.createElement)("div",{className:jl("edit-site-global-styles-variations_item",{"is-active":d()}),role:"button",onClick:u,onKeyDown:e=>{e.keyCode===mu.ENTER&&(e.preventDefault(),u())},tabIndex:"0","aria-label":p,"aria-current":d(),onFocus:()=>i(!0),onBlur:()=>i(!1)},(0,r.createElement)("div",{className:"edit-site-global-styles-variations_item-preview"},(0,r.createElement)(_u,{label:e?.title,isFocused:o,type:t,className:"big-sky__styles-preview"}))))}const Eu=(e,t,n)=>e.slice(t,t+n),Iu=({variations:e,currentVariation:t,maxToShow:n=6,type:o,numSuggestions:i=0})=>{const[a,s]=(0,f.useState)([]),[c,l]=(0,f.useState)(0),u=n,d=(0,f.useMemo)((()=>((e,t,n)=>{const o=[...e.filter((e=>e.title!==t))].filter((e=>e));return n>0?[...o.slice(0,n)]:o})(e,t,i)),[e,t,i]);return(0,f.useEffect)((()=>{if(!d)return;const e=Eu(d,0,u);s(e)}),[u,d]),d&&0===d.length?(0,r.createElement)("div",null,(0,z.__)("There was a problem retrieving options. Please try again.","big-sky")):(0,r.createElement)("div",{className:"big-sky__dock__menu__variation-picker"},a&&a.length>0&&(0,r.createElement)(Ul.__experimentalVStack,{spacing:2},(0,r.createElement)(Ul.__experimentalGrid,{columns:3,className:"big-sky__variations"},a.map(((e,t)=>(0,r.createElement)(Su,{key:t,variation:e,type:o})))),d.length>n&&(0,r.createElement)(Ul.__experimentalHStack,{className:"big-sky__wizard-actions",alignment:"edge"},(0,r.createElement)(Ul.Button,{"aria-label":(0,z.__)("Previous options","big-sky"),variant:"tertiary",size:"small",icon:du,onClick:()=>{const e=Math.max(0,c-u);l(e);const t=Eu(d,e,u);s(t)},disabled:0===c,align:"left"}),(0,r.createElement)(Ul.Button,{"aria-label":(0,z.__)("Next options","big-sky"),align:"right",variant:"tertiary",size:"small",icon:pu,onClick:()=>{const e=Math.min(c+u,Math.floor(d.length/u)*u);l(e);const t=Eu(d,e,u);s(t)},disabled:c+u>=d.length-1}))))},Tu=({colorVariations:e,maxColorsToShow:t=12,numSuggestions:n=0,currentVariationIsSuggested:o=!1})=>{const{currentColor:i}=ms().getSiteMetadata();return(0,r.createElement)(Iu,{variations:e,currentVariation:i,maxToShow:t,numSuggestions:n,currentVariationIsSuggested:o,type:"color"})};Vs([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},o={};for(var i in n)o[n[i]]=i;var r={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,a,s=o[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var c=this.toRgb(),l=1/0,u="black";if(!r.length)for(var d in n)r[d]=new e(n[d]).toRgb();for(var p in n){var h=(i=c,a=r[p],Math.pow(i.r-a.r,2)+Math.pow(i.g-a.g,2)+Math.pow(i.b-a.b,2));h<l&&(l=h,u=p)}return u}},t.string.push([function(t){var o=t.toLowerCase(),i="transparent"===o?"#0000":n[o];return i?new e(i).toRgb():null},"name"])},function(e,t){e.prototype.toLab=function(){return t=function(e){var t=ou(e.r),n=ou(e.g),o=ou(e.b);return function(e){return{x:nu(e.x,0,ru),y:nu(e.y,0,100),z:nu(e.z,0,au),a:nu(e.a)}}(function(e){return{x:1.0478112*e.x+.0228866*e.y+-.050127*e.z,y:.0295424*e.x+.9904844*e.y+-.0170491*e.z,z:-.0092345*e.x+.0150436*e.y+.7521316*e.z,a:e.a}}({x:100*(.4124564*t+.3575761*n+.1804375*o),y:100*(.2126729*t+.7151522*n+.072175*o),z:100*(.0193339*t+.119192*n+.9503041*o),a:e.a}))}(this.rgba),o=t.y/100,i=t.z/au,n=(n=t.x/ru)>su?Math.cbrt(n):(cu*n+16)/116,e={l:116*(o=o>su?Math.cbrt(o):(cu*o+16)/116)-16,a:500*(n-o),b:200*(o-(i=i>su?Math.cbrt(i):(cu*i+16)/116)),alpha:t.a},{l:tu(e.l,2),a:tu(e.a,2),b:tu(e.b,2),alpha:tu(e.alpha,3)};var e,t,n,o,i},e.prototype.delta=function(t){void 0===t&&(t="#FFF");var n=t instanceof e?t:new e(t),o=function(e,t){var n=e.l,o=e.a,i=e.b,r=t.l,a=t.a,s=t.b,c=180/Math.PI,l=Math.PI/180,u=Math.pow(Math.pow(o,2)+Math.pow(i,2),.5),d=Math.pow(Math.pow(a,2)+Math.pow(s,2),.5),p=(n+r)/2,h=Math.pow((u+d)/2,7),g=.5*(1-Math.pow(h/(h+Math.pow(25,7)),.5)),m=o*(1+g),f=a*(1+g),y=Math.pow(Math.pow(m,2)+Math.pow(i,2),.5),b=Math.pow(Math.pow(f,2)+Math.pow(s,2),.5),v=(y+b)/2,w=0===m&&0===i?0:Math.atan2(i,m)*c,k=0===f&&0===s?0:Math.atan2(s,f)*c;w<0&&(w+=360),k<0&&(k+=360);var _=k-w,x=Math.abs(k-w);x>180&&k<=w?_+=360:x>180&&k>w&&(_-=360);var C=w+k;x<=180?C/=2:C=(w+k<360?C+360:C-360)/2;var S=1-.17*Math.cos(l*(C-30))+.24*Math.cos(2*l*C)+.32*Math.cos(l*(3*C+6))-.2*Math.cos(l*(4*C-63)),E=r-n,I=b-y,T=2*Math.sin(l*_/2)*Math.pow(y*b,.5),A=1+.015*Math.pow(p-50,2)/Math.pow(20+Math.pow(p-50,2),.5),P=1+.045*v,N=1+.015*v*S,O=30*Math.exp(-1*Math.pow((C-275)/25,2)),R=-2*Math.pow(h/(h+Math.pow(25,7)),.5)*Math.sin(2*l*O);return Math.pow(Math.pow(E/1/A,2)+Math.pow(I/1/P,2)+Math.pow(T/1/N,2)+R*I*T/(1*P*1*N),.5)}(this.toLab(),n.toLab())/100;return nu(tu(o,3))},t.object.push([lu,"lab"])}]);const Au={beige:"white",black:"black",bisque:"white",blanchedalmond:"white",crimson:"red",darkslategray:"black",darkgoldenrod:"brown",darkolivegreen:"green",firebrick:"red",gainsboro:"gray",gold:"yellow",honeydew:"white",indigo:"blue",ivory:"white",khaki:"brown",lavender:"purple",lavenderblush:"white",lightgrey:"gray",lightsalmon:"orange",lime:"green",linen:"white",maroon:"red",mintcream:"white",peru:"brown",salmon:"orange",seashell:"white",sienna:"brown",silver:"gray",snow:"white",tan:"brown",teal:"blue",tomato:"red",violet:"purple",wheat:"brown",white:"white"},Pu=e=>e.split("--").pop().replace(")","");function Nu(){const{pushGeneratedVariations:e,setDockView:t,setLastCancelableAction:n,setIsToolContainerVisible:o}=(0,m.useDispatch)(Qa),{zoomIn:i}=vc(),{getColorVariations:a,getColorVariationByTitle:s}=Js(),{currentColor:c}=ms().getSiteMetadata(),{getCurrentColor:l}=(0,m.useSelect)(Qa),{paletteColors:u,getCurrentTheme:d,saveStylesEntityRecord:p,setStyles:h,createCustomSchemeVariations:g,updateRootBlocksStyles:f}=hc(),{setSiteMetadata:b}=ms(),{getBlocks:v,getBlock:w,getBlockAttributes:k}=(0,m.useSelect)(y.store),{updateBlockAttributes:_}=(0,m.useDispatch)(y.store),{getTemplatePartClientID:x}=bs(),{getParentRootPatternBlock:C}=bs(),{getRootBlocksOfPostContent:S}=tl(),E=(0,m.useRegistry)(),I=()=>{const e=[...S(),...v(x("header")),...v(x("footer"))],t=[],n=e=>{const o=k(e.clientId);o?.backgroundColor&&t.push({clientId:e.clientId,key:"backgroundColor",value:o.backgroundColor}),o?.textColor&&t.push({clientId:e.clientId,key:"textColor",value:o.textColor}),o?.style?.color?.text&&t.push({clientId:e.clientId,key:"styleText",value:o.style.color.text}),o?.style?.color?.background&&t.push({clientId:e.clientId,key:"styleBackground",value:o.style.color.background}),e.innerBlocks?.length>0&&e.innerBlocks.forEach((e=>{n(e)}))};return e.forEach((e=>{n(e)})),t},T=e=>{E.batch((()=>{e.forEach((({clientId:e,key:t,value:n})=>{const o={...k(e)};switch(t){case"backgroundColor":case"textColor":o[t]=n;break;case"styleText":case"styleBackground":o.style||(o.style={}),o.style.color||(o.style.color={}),"styleText"===t?o.style.color.text=n:o.style.color.background=n}_(e,o)}))}))};return{validateGenerateColorPaletteArgs:e=>{if(!e)return!1;const{colors:t,keyword:n}=e;return!!(t&&Array.isArray(t)&&t.length||n)},generateColorPalette:({colors:e=[],keyword:t="",custom_colors:o,callback:i=()=>{}})=>{const p=l()||c,h=a(),m=s(p)||d();h.sort((()=>Math.random()-.5));let f=[];(t||e?.length>0)&&(f=h.filter((n=>{const o=[],i=n.styles?.color?.background;i&&o.push(Pu(i));const r=n.styles?.blocks?.["core/group"]?.variations;if(!r)return!1;for(const e of Object.values(r)){const t=e.color?.background;t&&o.push(Pu(t))}const a=[...new Set(o.filter(Boolean))];e?.length&&(n.relevance=n.settings?.color?.palette?.theme?.filter((e=>a.includes(e.slug))).reduce(((t,n)=>Math.max(t,...e.map((e=>1-zs(e).delta(n.color))))),0));const s=!!e&&n.settings?.color?.palette?.theme?.some((t=>{if(!a.includes(t.slug))return!1;const o=zs(t.color).toName({closest:!0}),i=Au[o]||"";return e.some((e=>i.includes(e)||o.includes(e)||n.title===e))})),c=n["x-big-sky-meta"]?.keywords?.includes(t);return s||c})));const y=f.find((e=>e.title===p));let b=f.sort(((e,t)=>e.relevance>t.relevance?-1:e.relevance<t.relevance?1:0)),v=b.concat(h.filter((e=>!b.includes(e))));0===v.length&&(v=h);let w=[];o&&(w=g({custom_colors:o}),v=[...w,...v],b=[...w,...b]);const k=I();n({action:"color_palette_generator",originalVariationName:m.title.raw||m.title||Ks,paletteColors:u,customColors:k}),i((0,r.createElement)(Tu,{colorVariations:v,numSuggestions:b.length,currentVariationIsSuggested:y,maxColorsToShow:6,key:"color-picker"}),(0,z.__)("Which of these palettes would you like?","big-sky"))},cancelGenerateColorPalette:e=>{h({color:e.originalVariationName}),T(e.customColors),t(Y.MENUS),o(!1),i()},doneGenerateColorPalette:()=>{p(),b({},!0),t(Y.MENUS),o(!1),i()},validateUpdateComponentColorArgs:({background_color:e,text_color:t,button_color:n,button_text_color:o,scope:i,clientId:r})=>{if(!r&&"global"!==i)throw new Error((0,z.__)("Select the block you wish to update and try again.","big-sky"));if(r&&"global"!==i){const i=w(r);if(!["jetpack/button","jetpack/subscriptions"].includes(i.name)){const r=(0,La.getBlockSupport)(i.name,"color"),a=r?.text||r?.__experimentalDefaultControls?.text||r?.defaultControls?.text,s=r?.background||r?.__experimentalDefaultControls?.background||r?.defaultControls?.background;if((t||o)&&!a)throw new Error((0,z.__)("The selected block does not support text color. Please select a different block and try again.","big-sky"));if((e||n)&&!s)throw new Error((0,z.__)("The selected block does not support background color. Please select a different block and try again.","big-sky"))}}return!0},updateComponentColor:async({background_color:t,text_color:n,button_color:o,button_text_color:i,scope:r,clientId:a})=>{const u=[],p=l()||c,g=JSON.parse(JSON.stringify(s(p)||d()));t&&(t=ec({theme:g,color:t}),u.push("background color")),n&&(n=ec({theme:g,color:n}),u.push("text color")),o&&(o=ec({theme:g,color:o}),u.push("button color")),i&&(i=ec({theme:g,color:i}),u.push("button text color")),g.styles.variations=g.styles.blocks["core/group"].variations,E.batch((()=>{switch(r){case"global":const e=[...S(),...v(x("header")),...v(x("footer"))];f({rootBlocks:e,background_color:t,text_color:n,button_color:o,button_text_color:i});break;case"section":const r=C(a);r&&f({rootBlocks:[r],background_color:t,text_color:n,button_color:o,button_text_color:i});break;case"block":const s=w(a);s&&f({rootBlocks:[s],background_color:t,text_color:n,button_color:o,button_text_color:i})}g.title=Ks,e([g]),h({color:g.title,updateBlocks:!1})}));const m=[(0,z.__)("Let me know if you need me to do anything else!","big-sky"),(0,z.__)("Do you wish to change any other colors?","big-sky"),(0,z.__)("Is there anything else you'd like me to adjust?","big-sky")];let y="";return"global"===r?y=(0,z.__)("for your site","big-sky"):"section"===r?y=(0,z.__)("in this section","big-sky"):"block"===r&&(y=(0,z.__)("of the selected block","big-sky")),`${(0,z.sprintf)(/* translators: 1: list of updated color components, 2: context (for your site/in this section) */ /* translators: 1: list of updated color components, 2: context (for your site/in this section) */
(0,z.__)("I've updated the %1$s %2$s.","big-sky"),u.length>1?u.slice(0,-1).join(", ")+(0,z.__)(" and ","big-sky")+u.slice(-1):u[0],y)} ${m[Math.floor(Math.random()*m.length)]}`},collectBlockColorAttributes:I,reapplyBlockColors:T}}const Ou={id:Ye.COLOR,description:"An assistant that handles website colors and color palette creation and selection.",instructions:e=>function(e){const t=tt(e)?"":`User: "Make all my headings use the Roboto font"\n         Analysis: This is not related to color and is not in the form of a question.\n         Action: ${it}`;return`\nYou are an expert website designer, specializing in color palette creation, selection, and assisting users with website color modifications. Your primary goal is to help users customize their website colors effectively.\n\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Qe(e,["siteTitle","siteDescription","topic"])}\n</site_context>\n\n<selected_block_context>\n${Ze(e,["clientId","type"])}\n</selected_block_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${Ke}\n</language>\n\nInstructions:\n\n1. Analyze User Input:\n   ${Xe}\n   a) Determine if the request is color-related or not\n   b) If color-related, list any specific colors or themes mentioned\n   c) Check if the request matches any specific routing criteria\n   d) Consider the appropriate tool to use based on the analysis\n   e) For color-related requests, note any component-specific changes (background, text, button, button text)\n   f) For non-color-related requests, identify if it's a question or another type of request\n   g) Determine if routing to other assistant is needed\n\n2. Handle Color-Related Requests:\n   - If specific colors are provided, immediately call the color_palette_generator tool.\n   - If specific keywords are provided, immediately call the color_palette_generator tool and pass the exact keywords found.\n   - If the request is vague but includes identifiable colors (e.g., "make my site more blue") immediately call the color_palette_generator tool.\n   - If the request includes a specific component (background, text, button, button text, etc), call the update_component_color tool.\n   - If colors can be inferred from the request (e.g., "NY Yankees team colors"), use those colors without asking for confirmation.\n   - For vague color requests where no colors can be identified , ask if the user has a specific color in mind.\n\n3. Handle Non-Color-Related Requests:\n   - ${nt}\n   ${et(e)}\n\n4. Special cases:\n   - If the request is color-related but there's no specific tool to handle it, ${ot}\n\n5. Examples:\n\nUser: "I want the buttons to be red"\nAnalysis: This is about updating the color of the buttons\nAction: Call the update_component_color tool with the component 'button' and the color 'red'\n\nUser: "Make my site more blue"\nAnalysis: This is about updating the color of the site with blue as the primary color\nAction: Call the color_palette_generator tool with the color 'blue'\n\nUser: "I love Arsenal FC, can you make my site more like the colors of Arsenal?"\nAnalysis: This is about updating the color of the site with Arsenal FC colors\nAction: Call the color_palette_generator tool with the colors inferred from "Arsenal FC colors"\n\n${t}\n\nUser: "How do I install the WooCommerce plugin?"\nAnalysis: This is not related to color and is in the form of a question.\nAction: ${ot}\n\n6. Restrictions:\n   - Only answer requests related to color and website color changes.\n   - Adhere strictly to the routing rules specified above.\n   - Do not display your analysis process in the final output.\n\nRemember to immediately call the appropriate tool or ask a follow-up question based on your analysis, without showing the analysis itself.\n`}(e),tags:[Ye.COLOR],toolkits:[Zl],toolkitHook:()=>{const{createToolCallback:e}=ts(),{getVariationKeywords:t}=Js(),{changeAssistant:n}=as(),{agentSay:o}=Ce(),{setCallbacks:i,setContext:r}=Pe(),{getSiteMetadata:a}=ms(),{siteTitle:s,siteDescription:c,topic:l}=a(),{generateColorPalette:u,validateGenerateColorPaletteArgs:d,validateUpdateComponentColorArgs:p,updateComponentColor:h}=Nu(),{zoomOut:g}=vc(),{getIsHandoff:b,currentHandoffArea:v,selectedBlock:w}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store),{getIsHandoff:n,getCurrentHandoffArea:o}=e(Qa);return{selectedBlock:t(),getIsHandoff:n,currentHandoffArea:o()}})),{setChatComponents:k,setIsToolContainerVisible:_,setToolComponent:x,setShowThread:C}=(0,m.useDispatch)(Qa);(0,f.useEffect)((()=>{i(Zl.name,{color_palette_generator:e({name:"color_palette_generator",action:e=>{u({...e,callback:(e,t)=>{b()?k([e]):(g(),x(e),_(!0)),o(t)}})},validator:e=>d(e),failValidatorAction:()=>o((0,z.__)("Please provide a color or a category to view color options.","big-sky")),closeChatWhenDone:()=>!b()}),update_component_color:e({name:"update_component_color",validator:e=>p(e),failValidatorAction:(e,t)=>{o(t.message)},action:async e=>{o(await h(e))},closeChatWhenDone:()=>!1}),change_assistant:e({name:"change_assistant",action:e=>{C(!0),n(e)},closeChatWhenDone:()=>!1})})}),[i]),(0,f.useEffect)((()=>{const e={site:{siteTitle:s,siteDescription:c,topic:l},selectedBlock:{clientId:w?.clientId,type:w?.type,name:w?.name},colors:{colorVariationCategories:t("color")}};b()&&(e.currentHandoffArea=v),r(Zl.name,e)}),[r,b,v,w])},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))}},Ru=Ou;function Mu(e=[],t=null){return{name:"add_pattern",description:'Adds a pattern, also referred to as a section, to the current page. Patterns can include forms, tables, images, paragraphs, and more.\n\t\tIf the user is asking for a map, the category must be "contact".\n\t\tIf the site location is not specified in the user request, default to '+(t?`"${t}"`:'"null"'),parameters:{type:"object",properties:{clientId:{type:["string","null"],description:"The clientId of the selected block that the pattern will be inserted before or after. Default to null if not supplied in the context."},direction:{type:"string",enum:["before","after"],description:'Where to insert patterns relative to clientId. If user does not indicate "before" or "after", default to "after".'},categories:{type:"array",description:"The ordered list of component categories that the patterns will be based off.",items:{type:"string",enum:e}},isAskingForMap:{type:"boolean",description:"Whether the user is asking to replace a pattern with a map."},siteLocation:{type:["string","null"],description:"The site location."},userPrompt:{type:"string",description:"The original prompt from the user. Pass this through, do not edit it."}},required:["clientId","categories","direction","isAskingForMap","siteLocation","userPrompt"]},strict:!0}}function Lu(e=null){return{name:"generate_pattern",description:"When a user asks to add a section, pattern, or something new that isn't a full new page,\n\t\tuse this tool to generate a pattern and add it to the current page.\n\t\tWhen the user provides a list of sections (bulleted, numbered, or otherwise), treat it as a single pattern request and include all sections in one call.\n\t\tIf the site location is not specified in the user request, default to "+(e?`"${e}"`:'"null"'),parameters:{type:"object",properties:{clientId:{type:["string","null"],description:"The clientId of the selected block that the pattern will be inserted before or after. Default to null if not supplied in the context."},direction:{type:"string",enum:["before","after"],description:'Where to insert patterns relative to clientId. If user does not indicate "before" or "after", default to "after".'},siteLocation:{type:["string","null"],description:"The site location."},userPrompt:{type:"string",description:"The original prompt from the user. Pass this through, do not edit it. If the prompt contains multiple sections, include them all in this single prompt."}},required:["clientId","direction","siteLocation","userPrompt"]},strict:!0}}function Du(e=[],t=null,n=null){return{name:"replace_pattern",description:`Replaces an existing pattern with an alternative one. If the user is asking for a map, the category must be "contact".\n\t\tIf the category is not specified in the user request, default the category to ${t?`"${t}"`:'"null"'}\n\t\tIf the site location is not specified in the user request, default to ${n?`"${n}"`:'"null"'}`,parameters:{type:"object",properties:{clientId:{type:["string","null"],description:"The clientId of the block to replace."},category:{type:"string",description:"The category of the pattern to use as a replacement.",enum:e},isAskingForMap:{type:"boolean",description:"Whether the user is asking to replace a pattern with a map."},siteLocation:{type:["string","null"],description:"The site location."}},required:["clientId","category","isAskingForMap","siteLocation"]},strict:!0}}const Bu=ha.map((e=>e.slug)),Fu={name:"pattern",tools:e=>["undefined"!=typeof window&&"true"===window.localStorage.getItem("isGeneratingPatterns")?Lu(e?.site?.location?.name):Mu(Bu,e?.site?.location?.name),{name:"remove_block",description:"Removes a block or section from the page.",parameters:{type:"object",properties:{clientId:{type:"string",description:"The clientId of the block to remove."}},required:["clientId"]},strict:!0},Du(Bu,e?.selectedBlock?.parentPatternCategory,e?.site?.location?.name),...tt(e)?[]:[at(Ye.PATTERN)]]},ju=Fu;function Uu(){const{isValidClientId:e,blockExists:t}=Ll(),{getCoordinates:n}=sl(),{getPattern:o}=tl(),{setSiteMetadata:i}=ms(),{canRemoveBlock:r}=(0,m.useSelect)(y.store),a=e=>{if(!e)throw new Error((0,z.__)("I could not complete your request at this time. Please try again.","big-sky"));return!0},s=n=>{const{clientId:o}=n;if(!e(o)||!t(o))throw new Error((0,z.__)("Please select a block and try again.","big-sky"));return!0},c=async e=>{if(!(e.categories&&!e.categories.includes("contact")||e.category&&"contact"!==e.category)){if(e.isAskingForMap&&!e.siteLocation)throw new Error((0,z.__)("I notice there is no location set for this site. What would you like the site location to be?","big-sky"));if(e.siteLocation){const t={name:e.siteLocation,coordinates:await n(e.siteLocation)};i({siteLocation:t},!0),e.siteLocation=t}}};return{validateBlockArgs:a,validateClientIdArgs:s,validateMapRequestArgs:c,validateAddPatternArgs:async e=>{a(e),s(e);const t=["header","footer",...Ua];for(const n of e.categories){const i=o(n);if(t.includes(n)&&i)throw e.doReplace=!0,e.clientId=i.clientId,e.category=n,new Error((0,z.sprintf)(
// Translators: %s is the name of a pattern category.
// Translators: %s is the name of a pattern category.
(0,z.__)("You already have a %s section on this page. Please remove the existing section before adding a new one, or select the existing section and ask to replace it.","big-sky"),n))}return await c(e),!0},validateGeneratePatternArgs:async e=>(a(e),s(e),await c(e),!0),validateRemoveBlockArgs:e=>{try{a(e),s(e)}catch(e){throw new Error(`I was not able to find a block to remove. ${e?.message}`)}const{clientId:t}=e;if(!r(t))throw new Error((0,z.__)("I'm sorry, but I cannot remove that block.","big-sky"));return!0},validateReplacePatternArgs:async e=>{if(a(e),e.clientId&&s(e),!o(e.category))throw new Error((0,z.sprintf)(
// Translators: Placeholder represents the category of the section requested by the user.
// Translators: Placeholder represents the category of the section requested by the user.
(0,z.__)("It looks like there is no %s section on this page. Would you like to add one?","big-sky"),e.category));return await c(e),!0}}}const qu=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})}),$u=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})});function Hu(e,t,n=260){const[o,i]=(0,f.useState)(!1),[a,s]=(0,f.useState)(!1),c=({direction:e,onClick:t,disabled:n,icon:o})=>(0,r.createElement)(Ul.Button,{icon:o,className:`big-sky__dock__menu__arrow-${e}`,onClick:t,disabled:n}),l=(0,f.useCallback)((()=>{const n=e.current;if(!n)return;const o=n.querySelector(t);if(!o)return;const{scrollLeft:r,scrollWidth:a,clientWidth:c}=o;i(r>10),s(r<a-c-10)}),[e,t]);(0,f.useLayoutEffect)((()=>{const e=setTimeout((()=>{l()}),200);return()=>clearTimeout(e)}),[l]),(0,f.useEffect)((()=>{const n=e.current,o=n?.querySelector(t);if(o)return l(),o.addEventListener("scroll",l),()=>{o.removeEventListener("scroll",l)}}),[e,l,t]);const u=n=>{const o=e.current;if(!o)return;const i=o.querySelector(t);if(!i)return;const r=i.scrollLeft+n;i.scrollTo({left:r,behavior:"smooth"}),setTimeout(l,300)};return{leftScrollButton:(0,r.createElement)(c,{direction:"left",icon:qu,onClick:()=>u(-n),disabled:!o}),rightScrollButton:(0,r.createElement)(c,{direction:"right",icon:$u,onClick:()=>u(n),disabled:!a}),checkScrollButtons:l}}const zu=window.wp.viewport;function Gu(){const e=ms().getSiteMetadata().isOnboarded,t=jl("big-sky__thinking-message",{"big-sky__thinking-message__is-light":!e});return(0,r.createElement)("div",{className:t},(0,r.createElement)("div",{className:"big-sky__thinking-message__three-dots"}))}const Vu=(0,f.memo)((({item:e,index:t,additionalStyles:n,viewportWidthMax:o=1440,clientId:i=null,onRendered:a})=>{const[s,c]=(0,f.useState)(!1),{setLastCancelableAction:l}=(0,m.useDispatch)(Qa),{getSelectedBlockClientId:u}=(0,m.useSelect)(y.store),{selectBlock:d}=(0,m.useDispatch)(y.store),{getRootBlocksOfPostContent:p,insertPatterns:h,replaceTemplatePart:g}=tl(),b=(0,f.useCallback)((async()=>{h(e.patterns,null,"replace",!1);const{canvasiFrameDocument:t}=ys(),n=t.querySelector(".wp-block:first-child");await Wa(W.scrollWaitTime),n.scrollIntoView({behavior:"instant",block:"start"})}),[h,e.patterns]),v=(0,f.useCallback)((async()=>{const t=null!=i?i:u();if(!t)return;if(!e?.patterns||!Array.isArray(e.patterns)||0===e.patterns.length)return;const n=e.patterns[0];if(!n?.blocks||!Array.isArray(n.blocks)||0===n.blocks.length)return;const o=p()||[],r=Array.isArray(o)?o.map((e=>e?.clientId)).filter(Boolean):[],a=n.blocks[0]?.clientId;a&&!r.includes(a)&&(n.category&&["header","footer"].includes(n.category)?await g(n.category,n.blocks):(h(e.patterns,t,"replace"),l({clientId:a})),d(a))}),[i,p,u,h,e?.patterns,g,d,l]);if((0,f.useEffect)((()=>{s||async function(){if(!e.resolvers)return c(!0),void a();await Promise.all(e.resolvers.map((async e=>e.resolver))),c(!0),a()}()}),[e,s,a]),!s)return(0,r.createElement)("div",{className:"big-sky__item-loading big-sky__item-preview"},(0,r.createElement)(Gu,null));const w=Array.isArray(e?.patterns)?e.patterns.filter((e=>e&&Array.isArray(e.blocks)&&e.blocks.length>0)).map((e=>e.blocks[0])).slice(0,4):[],{isViewportMatch:k}=(0,m.select)(zu.store);let _=o;k("< small")?_=480:k("< medium")?_=600:k("< large")?_=782:k("< wide")?_=960:k("< huge")&&(_=1280);const x=jl("big-sky__item-preview",{selected:0===t,["big-sky__item-preview__id-"+e.id]:!0});return(0,r.createElement)(Ul.__unstableMotion.button,{initial:{opacity:.8},whileHover:{opacity:1,scale:1.05,boxShadow:"0px 2px 4px rgba(0,0,0,.05)"},className:x,onClick:t=>{ea("patterns_preview_click",{type:e.patterns.length>1?"full-layout":"single-pattern"}),document.querySelectorAll(".big-sky__item-preview").forEach((e=>{e.classList.remove("selected")})),t.currentTarget.classList.add("selected"),e.patterns.length>1?b():v()},"data-pattern-id":e?.patterns?.[0]?.ID||""},(0,r.createElement)(y.BlockPreview,{blocks:w,additionalStyles:n,viewportWidth:_}))})),Wu=()=>(0,r.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)("path",{d:"M18.7035 11.5821L15.8309 10.5912C14.6949 10.2009 13.7991 9.30509 13.4088 8.16908L12.4179 5.29651C12.2828 4.90116 11.7172 4.90116 11.5821 5.29651L10.5912 8.16908C10.2009 9.30509 9.30509 10.2009 8.16908 10.5912L5.29651 11.5821C4.90116 11.7172 4.90116 12.2828 5.29651 12.4179L8.16908 13.4088C9.30509 13.7991 10.2009 14.6949 10.5912 15.8309L11.5821 18.7035C11.7172 19.0988 12.2828 19.0988 12.4179 18.7035L13.4088 15.8309C13.7991 14.6949 14.6949 13.7991 15.8309 13.4088L18.7035 12.4179C19.0988 12.2828 19.0988 11.7172 18.7035 11.5821ZM15.3505 12.2127L13.9142 12.7081C13.3437 12.9033 12.8983 13.3537 12.7031 13.9192L12.2077 15.3555C12.1376 15.5557 11.8574 15.5557 11.7873 15.3555L11.2919 13.9192C11.0967 13.3487 10.6463 12.9033 10.0808 12.7081L8.6445 12.2127C8.44433 12.1426 8.44433 11.8624 8.6445 11.7923L10.0808 11.2969C10.6513 11.1017 11.0967 10.6513 11.2919 10.0858L11.7873 8.64951C11.8574 8.44933 12.1376 8.44933 12.2077 8.64951L12.7031 10.0858C12.8983 10.6563 13.3487 11.1017 13.9142 11.2969L15.3505 11.7923C15.5507 11.8624 15.5507 12.1426 15.3505 12.2127Z",fill:"currentColor"})),Yu=()=>(0,r.createElement)("svg",{width:"21",height:"19",viewBox:"0 0 21 19",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)("path",{d:"M20.0417 11.3358L17.1759 10.3472C16.0425 9.95779 15.1488 9.06408 14.7594 7.93072L13.7708 5.06487C13.636 4.67044 13.0718 4.67044 12.937 5.06487L11.9484 7.93072C11.559 9.06408 10.6653 9.95779 9.53192 10.3472L6.66606 11.3358C6.27163 11.4706 6.27163 12.0348 6.66606 12.1696L9.53192 13.1582C10.6653 13.5476 11.559 14.4413 11.9484 15.5747L12.937 18.4405C13.0718 18.835 13.636 18.835 13.7708 18.4405L14.7594 15.5747C15.1488 14.4413 16.0425 13.5476 17.1759 13.1582L20.0417 12.1696C20.4361 12.0348 20.4361 11.4706 20.0417 11.3358ZM16.6966 11.9649L15.2636 12.4592C14.6945 12.6539 14.2501 13.1032 14.0554 13.6674L13.5611 15.1004C13.4912 15.3001 13.2116 15.3001 13.1417 15.1004L12.6474 13.6674C12.4527 13.0983 12.0033 12.6539 11.4392 12.4592L10.0062 11.9649C9.80652 11.895 9.80652 11.6154 10.0062 11.5455L11.4392 11.0512C12.0083 10.8565 12.4527 10.4071 12.6474 9.84296L13.1417 8.41003C13.2116 8.21032 13.4912 8.21032 13.5611 8.41003L14.0554 9.84296C14.2501 10.4121 14.6994 10.8565 15.2636 11.0512L16.6966 11.5455C16.8963 11.6154 16.8963 11.895 16.6966 11.9649Z"}),(0,r.createElement)("path",{d:"M3.26632 3.60462C3.26632 3.39034 3.09262 3.21664 2.87834 3.21664C2.66406 3.21664 2.49036 3.39034 2.49036 3.60462C2.49036 4.36555 2.32181 4.8249 2.04627 5.10044C1.77074 5.37598 1.31139 5.54452 0.550456 5.54452C0.33618 5.54452 0.162476 5.71823 0.162476 5.9325C0.162476 6.14678 0.33618 6.32048 0.550456 6.32048C1.31139 6.32048 1.77074 6.48903 2.04627 6.76457C2.32181 7.04011 2.49036 7.49945 2.49036 8.26039C2.49036 8.47466 2.66406 8.64837 2.87834 8.64837C3.09262 8.64837 3.26632 8.47466 3.26632 8.26039C3.26632 7.49945 3.43487 7.04011 3.71041 6.76457C3.98594 6.48903 4.44529 6.32048 5.20622 6.32048C5.4205 6.32048 5.5942 6.14678 5.5942 5.9325C5.5942 5.71823 5.4205 5.54452 5.20622 5.54452C4.44529 5.54452 3.98594 5.37598 3.71041 5.10044C3.43487 4.8249 3.26632 4.36555 3.26632 3.60462Z"}),(0,r.createElement)("path",{d:"M7.14613 0.500774C7.14613 0.286498 6.97242 0.112793 6.75815 0.112793C6.54387 0.112793 6.37017 0.286498 6.37017 0.500774C6.37017 0.992275 6.26089 1.25763 6.11199 1.40654C5.96308 1.55544 5.69773 1.66472 5.20622 1.66472C4.99195 1.66472 4.81824 1.83842 4.81824 2.0527C4.81824 2.26697 4.99195 2.44068 5.20622 2.44068C5.69773 2.44068 5.96308 2.54995 6.11199 2.69885C6.26089 2.84776 6.37017 3.11312 6.37017 3.60462C6.37017 3.81889 6.54387 3.9926 6.75815 3.9926C6.97242 3.9926 7.14613 3.81889 7.14613 3.60462C7.14613 3.11312 7.2554 2.84776 7.40431 2.69885C7.55321 2.54995 7.81857 2.44068 8.31007 2.44068C8.52435 2.44068 8.69805 2.26697 8.69805 2.0527C8.69805 1.83842 8.52435 1.66472 8.31007 1.66472C7.81857 1.66472 7.55321 1.55544 7.40431 1.40654C7.2554 1.25763 7.14613 0.992275 7.14613 0.500774Z"})),Ju=()=>(0,r.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.58994 10.2172L11.3816 6.42555C11.7233 6.08384 12.2773 6.08384 12.619 6.42555L16.4107 10.2172C16.7524 10.5589 16.7524 11.1129 16.4107 11.4547C16.069 11.7964 15.515 11.7964 15.1733 11.4547L12.8753 9.15671L12.8753 16.9609C12.8753 17.4442 12.4836 17.8359 12.0003 17.8359C11.5171 17.8359 11.1253 17.4442 11.1253 16.9609L11.1253 9.15671L8.82738 11.4547C8.48567 11.7964 7.93165 11.7964 7.58994 11.4547C7.24823 11.1129 7.24823 10.5589 7.58994 10.2172Z",fill:"currentColor"})),Ku=(0,f.memo)((({items:e,clientId:t,generateNewItem:n,initialRenderedItems:o={}})=>{const i=(0,f.useRef)(),[a,s]=(0,f.useState)(!1),[c,l]=(0,f.useState)(o),u=(0,f.useMemo)((()=>{const{canvasiFrameRoot:e}=ys(),t=window.getComputedStyle(e);return[{css:`html { ${["--site-logo-url","--site-logo-object-position"].map((e=>`${e}: ${t.getPropertyValue(e)||" "};`)).join(" ")} }`}]}),[]),d=new Set(e.map((e=>e?.patterns?.[0]?.category)));let p=3,h="big-sky__layout-variations",g=1440;if(1===d.size){const e=[...d.values()][0];switch(e){case"header":case"footer":p=2,h+=" big-sky__layout-variations-wider",g="header"===e?480:1e3}}const{leftScrollButton:m,rightScrollButton:y,checkScrollButtons:b}=Hu(i,".components-grid");return(0,f.useEffect)((()=>{b()}),[e,b]),(0,f.useEffect)((()=>{const t=e.every((e=>c[e.id]));s(t)}),[e,c]),(0,r.createElement)("div",{ref:i,className:"big-sky__item-picker"},m,(0,r.createElement)(Ul.__experimentalVStack,{spacing:3},(0,r.createElement)(Ul.__experimentalGrid,{columns:p,className:h},e&&(0,r.createElement)(r.Fragment,null,e.filter((e=>!e.isPlaceholder&&e.patterns?.length>0)).map(((e,n)=>(0,r.createElement)(Vu,{key:e.id,index:n,item:e,additionalStyles:u,viewportWidthMax:g,clientId:t,onRendered:()=>{return t=e.id,void l((e=>({...e,[t]:!0})));var t}})))),n&&a&&(0,r.createElement)(Ul.__unstableMotion.button,{initial:{opacity:.8},whileHover:{opacity:1,scale:1.05,boxShadow:"0px 2px 4px rgba(0,0,0,.05)"},className:"big-sky__item-preview",onClick:()=>{ea("item_picker_generate_new_item_click"),n()}},(0,r.createElement)(Yu,null)))),y)}));function Xu({patterns:e}){const t=(0,f.useRef)(),{leftScrollButton:n,rightScrollButton:o}=Hu(t,".components-grid"),{lastCancelableAction:i}=(0,m.useSelect)((e=>{const t=e(Qa),n=e(y.store);return{lastCancelableAction:t.getLastCancelableAction(),selectedBlock:n.getSelectedBlock()}}),[]);return["add_pattern","replace_pattern"].includes(i?.action)?(0,r.createElement)("div",{className:"big-sky__dock__menu__pattern-picker",ref:t},n,(0,r.createElement)(Ku,{items:e,clientId:i.clientId}),o):null}function Qu(){const{insertPatterns:e,composePatterns:t}=tl(),{getSiteMetadata:n}=ms(),{zoomIn:o,zoomOut:i,createDummySection:a}=vc(),{insertBlock:s}=(0,m.useDispatch)(y.store),{validateAddPatternArgs:c}=Uu(),{getContentBlockClientID:l,scrollToBlock:u,getParentRootPatternBlock:d}=bs(),{setIsToolContainerVisible:p,setToolComponent:h,setLastCancelableAction:g,setDockView:f}=(0,m.useDispatch)(Qa),{getBlock:b,getBlockIndex:v,getBlockParentsByBlockName:w,getBlocksByName:k,getBlocks:_,getSelectedBlock:x}=(0,m.useSelect)((e=>({getBlock:e(y.store).getBlock,getBlockIndex:e(y.store).getBlockIndex,getBlockParentsByBlockName:e(y.store).getBlockParentsByBlockName,getBlocksByName:e(y.store).getBlocksByName,getBlocks:e(y.store).getBlocks,getSelectedBlock:e(y.store).getSelectedBlock})));return{addPattern:async({clientId:m,categories:f,direction:y,siteLocation:x,isAskingForMap:C})=>{try{await c({clientId:m,categories:f,direction:y,siteLocation:x,isAskingForMap:C});const{topic:S,siteDescription:E,siteLocation:I}=n(),T=i(),A=k("core/post-content")[0],P=b(w(m,["core/template-part","core/post-content"])[0]);let N;if("core/template-part"===P?.name)"header"===P.attributes.slug?N=0:"footer"===P.attributes.slug&&(N=_(l()).length);else{const e="before"===y?0:1,t=d(m);N=t?v(t.clientId)+e:v(m)+e}const O=a();s(O,N,A);let R=!1;T.then((()=>{R||(R=!0,u(O.clientId,"center"))}));const M=t({categories:[{slug:f[0]}],topic:S,siteLocation:x||I,siteDescription:E,numberOfConcepts:1,isAskingForMap:C});if(!M)return o(),(0,z.__)("I'm having trouble finding options for that. Please try a different request.","big-sky");const L=M.flatMap((e=>e.resolvers.map((e=>e.resolver))));await Promise.all(L);const D="true"!==window.localStorage.getItem("isGeneratingPatterns")?t({categories:[{slug:f[0]}],topic:S,siteLocation:x||I,siteDescription:E,selectedConcept:M[0],isAskingForMap:C}):[],B=M.flatMap((e=>e.resolvers.map((e=>e.resolver))));await Promise.all(B),await Wa(W.visualAdjustmentWaitTime),e(M[0].patterns,O.clientId,"replace"),R||(R=!0,u(M[0].patterns[0].blocks[0].clientId,"center",!0));const F="true"===window.localStorage.getItem("isGeneratingPatterns"),j=F?[]:[...M,...D];return F||(h((0,r.createElement)(Xu,{patterns:j,key:"pattern-picker"})),p(!0)),g({action:"add_pattern",clientId:M[0].patterns[0].blocks[0].clientId}),(0,z.sprintf)(
// Translators: Placeholder represents the category of the section requested by the user.
// Translators: Placeholder represents the category of the section requested by the user.
(0,z.__)("I have added a new %s section to the page.","big-sky"),f[0])}catch(e){throw e}},doneAddPattern:()=>{f(Y.MENUS),p(!1),o().then((()=>{u(x()?.clientId,"start",!0)}))}}}function Zu(){const{getSiteMetadata:e}=ms(),{zoomIn:t,zoomOut:n}=vc(),{getPattern:o,composePatterns:i,getPatternCategory:a,createConceptFromCurrentCanvas:s,createConceptFromSelectedBlock:c,setCTAInSection:l}=tl(),{getFirstChildBlockByClientIdDOMElement:u,getParentRootTemplatePartBlock:d,isTemplatePart:p,setBlockIsProcessing:h,scrollToBlock:g,getParentRootPatternBlock:f}=bs(),{setIsToolContainerVisible:b,setToolComponent:v,setLastCancelableAction:w,setDockView:k}=(0,m.useDispatch)(Qa),{__unstableGetEditorMode:_,getSelectedBlock:x}=(0,m.useSelect)((e=>({__unstableGetEditorMode:e(y.store).__unstableGetEditorMode,getSelectedBlock:e(y.store).getSelectedBlock}))),{validateReplacePatternArgs:C}=Uu();return{replacePattern:async({clientId:m,category:y,siteLocation:k,isAskingForMap:x})=>{try{await C({clientId:m,category:y,siteLocation:k,isAskingForMap:x});const{topic:S,siteLocation:E,siteDescription:I}=e();let T,A;if("zoom-out"!==_()&&n(),m&&"undefined"!==m){const e=d(m);T=e?u(e.clientId):f(m),A=a(T.clientId)}A!==y&&(T=o(y),["header","footer"].includes(y)&&(T=u(T.clientId))),h(T,!0),g(T.clientId,"center");const P=s(),N=i({categories:[{slug:y}],topic:S,siteLocation:k||E,siteDescription:I,selectedConcept:P,isAskingForMap:x});if(!N)return h(T,!1),t(),(0,z.__)("I'm having trouble finding options for that. Please try a different request.","big-sky");const O=N.flatMap((e=>e.resolvers.map((e=>e.resolver))));await Promise.all(O);const R=c(T.clientId);return N.unshift(R),await Wa(W.visualAdjustmentWaitTime),h(T,!1),"header"===y&&N.flatMap((e=>e.patterns)).forEach((e=>l({category:e.category,blocks:e.blocks}))),v((0,r.createElement)(Xu,{patterns:N,key:"pattern-picker"})),b(!0),w({action:"replace_pattern",clientId:N[0].patterns[0].blocks[0].clientId,originalBlock:T,isTemplatePart:p(T.clientId)}),(0,z.sprintf)(
// Translators: Placeholder represents the category of the section requested by the user.
// Translators: Placeholder represents the category of the section requested by the user.
(0,z.__)("I have replaced the section with a new %s section.","big-sky"),y)}catch(e){throw e}},doneReplacePattern:()=>{k(Y.MENUS),b(!1),t().then((()=>{g(x()?.clientId,"start",!0)}))}}}function ed(){const{getUserPrompt:e}=function(){const{getStockImageURL:e}=Wc(),{siteTitle:t,siteDescription:n,siteLocation:o,topic:i,siteType:r}=ms().getSiteMetadata(),a=(0,m.useSelect)((e=>e(La.store).getBlockTypes().map((e=>e.name)).filter((e=>!["core/media-text","jetpack/contact-info","jetpack/address","jetpack/email","jetpack/phone"].includes(e)))),[]);return{getUserPrompt:async s=>{const c=await Promise.all(Array.from({length:20},(()=>e(i)))),l=c.slice(0,10).map((e=>{const t=e.replace(/[?&](w|h|fit)=[^&]+/g,"");return t+(t.includes("?")?"&":"?")+"fit=crop&w=800&h=1200&orientation=portrait"})),u=c.slice(10).map((e=>{const t=e.replace(/[?&](w|h|fit)=[^&]+/g,"");return t+(t.includes("?")?"&":"?")+"fit=crop&w=1200&h=800&orientation=landscape"}));return`\nYou are a WordPress block pattern generator specializing in creating complex, structured content patterns using a container-based approach. Your task is to analyze the given information and generate a WordPress block pattern that meets the specified requirements.\n\nFirst, let's review the key information you'll be working with:\n\n1. Available Images:\n<portrait_image_urls>\n${l.join("\n")}\n</portrait_image_urls>\n\n<landscape_image_urls>\n${u.join("\n")}\n</landscape_image_urls>\n\n2. Website Configuration:\n<website_details>\nTitle: ${t}\nDescription: ${n}\nLocation: ${o?.name}\nTopic: ${i}\nType: ${r}\n</website_details>\n\n3. Allowed Blocks:\n<allowed_blocks>\n${a.join(", ")}\n</allowed_blocks>\n\n4. Pattern Examples:\n<pattern_examples>\nExample 1:\n\n\x3c!-- wp:group {"metadata":{"categories":["services"],"name":"Services Offered","patternName":"assembler/services-1","patternCategory":"services","remotePatternId":16816},"align":"full","className":"alignfull is-style-section-3 is-style-section-3","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|40","bottom":"var:preset|spacing|40"}}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div class="wp-block-group alignfull is-style-section-3" id="services-section"\n\tstyle="margin-top:0;margin-bottom:0;padding-top:var(--wp--preset--spacing--40);padding-bottom:var(--wp--preset--spacing--40)">\n\t\x3c!-- wp:group {"align":"wide"} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:columns {"metadata":{"name":"Items"},"align":"wide","style":{"spacing":{"blockGap":{"top":"var:preset|spacing|40","left":"var:preset|spacing|30"}}}} --\x3e\n\t\t<div class="wp-block-columns alignwide">\x3c!-- wp:column {"style":{"spacing":{"blockGap":"48px"}}} --\x3e\n\t\t\t<div class="wp-block-column">\x3c!-- wp:heading {"style":{"layout":{"selfStretch":"fixed","flexSize":"100%"}}} --\x3e\n\t\t\t\t<h2 class="wp-block-heading">Services</h2>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:spacer {"height":"var:preset|spacing|10","style":{"spacing":{"margin":{"top":"0","bottom":"0"}}}} --\x3e\n\t\t\t\t<div style="margin-top:0;margin-bottom:0;height:var(--wp--preset--spacing--10)" aria-hidden="true"\n\t\t\t\t\tclass="wp-block-spacer"></div>\n\t\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"48px"}}} --\x3e\n\t\t\t<div class="wp-block-column">\n\t\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"4/3","scale":"cover","sizeSlug":"large","linkDestination":"none","style":{"color":{"duotone":"unset"}}} --\x3e\n\t\t\t\t\t<figure class="wp-block-image size-large"><img\n\t\t\t\t\t\t\tsrc="http://localhost:8888/wp-content/uploads/2024/10/image-4f108a85-05f3-4857-abe1-713cdc60f694.jpg"\n\t\t\t\t\t\t\tstyle="aspect-ratio:4/3;object-fit:cover" /></figure>\n\t\t\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-service-description"} --\x3e\n\t\t\t\t\t<p class="is-service-description">One-on-one sessions focused on personal growth and transition.</p>\n\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"4/3","scale":"cover","sizeSlug":"large","linkDestination":"none","style":{"color":{"duotone":"unset"}}} --\x3e\n\t\t\t\t\t<figure class="wp-block-image size-large"><img\n\t\t\t\t\t\t\tsrc="https://images.pexels.com/photos/7108352/pexels-photo-7108352.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\t\t\tstyle="aspect-ratio:4/3;object-fit:cover" /></figure>\n\t\t\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-service-description"} --\x3e\n\t\t\t\t\t<p class="is-service-description">Interactive workshops designed to foster community and shared learning.</p>\n\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"48px"}}} --\x3e\n\t\t\t<div class="wp-block-column">\n\t\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"4/3","scale":"cover","sizeSlug":"large","linkDestination":"none","style":{"color":{"duotone":"unset"}}} --\x3e\n\t\t\t\t\t<figure class="wp-block-image size-large"><img\n\t\t\t\t\t\t\tsrc="https://images.pexels.com/photos/6255633/pexels-photo-6255633.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\t\t\tstyle="aspect-ratio:4/3;object-fit:cover" /></figure>\n\t\t\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-service-description"} --\x3e\n\t\t\t\t\t<p class="is-service-description">Support for navigating major life changes with clarity and confidence.</p>\n\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"4/3","scale":"cover","sizeSlug":"large","linkDestination":"none","style":{"color":{"duotone":"unset"}}} --\x3e\n\t\t\t\t\t<figure class="wp-block-image size-large"><img\n\t\t\t\t\t\t\tsrc="https://images.pexels.com/photos/9870134/pexels-photo-9870134.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\t\t\tstyle="aspect-ratio:4/3;object-fit:cover" /></figure>\n\t\t\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-service-description"} --\x3e\n\t\t\t\t\t<p class="is-service-description">Guidance in setting and achieving personal goals with ongoing support.</p>\n\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:columns --\x3e\n\n\t\t\x3c!-- wp:spacer {"height":"10px"} --\x3e\n\t\t<div style="height:10px" aria-hidden="true" class="wp-block-spacer"></div>\n\t\t\x3c!-- /wp:spacer --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 2:\n\n\x3c!-- wp:group {"metadata":{"categories":["link-in-bio"],"patternName":"assembler/link-in-bio-2","remotePatternId":16715},"align":"full","className":"is-style-section-3","style":{"dimensions":{"minHeight":"100vh"},"spacing":{"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50","left":"var:preset|spacing|60","right":"var:preset|spacing|60"},"blockGap":"24px","margin":{"top":"0","bottom":"0"}}},"layout":{"type":"constrained","contentSize":"360px","wideSize":"520px"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmin-height: 100vh;\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-right: var( --wp--preset--spacing--60 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t\tpadding-left: var( --wp--preset--spacing--60 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center","level":3,"style":{"typography":{"fontSize":"18px"}}} --\x3e\n\t<h3 class="wp-block-heading has-text-align-center" style="font-size: 18px">\n\t\tDark fiction redefined\n\t</h3>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:heading {"textAlign":"center","level":1,"align":"wide","style":{"typography":{"fontSize":"75px"}}} --\x3e\n\t<h1\n\t\tclass="wp-block-heading alignwide has-text-align-center"\n\t\tstyle="font-size: 75px"\n\t>\n\t\tExplore unsettling tales\n\t</h1>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"large","linkDestination":"none","className":"is-style-rounded","style":{"layout":{"selfStretch":"fill","flexSize":null},"spacing":{"margin":{"top":"-24px"}}}} --\x3e\n\t<figure\n\t\tclass="wp-block-image size-large is-style-rounded"\n\t\tstyle="margin-top: -24px"\n\t>\n\t\t<img\n\t\t\tsrc="https://images.pexels.com/photos/8390338/pexels-photo-8390338.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\talt="dark fiction"\n\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t/>\n\t</figure>\n\t\x3c!-- /wp:image --\x3e\n\n\t\x3c!-- wp:social-links {"size":"has-normal-icon-size","className":"is-style-logos-only","style":{"spacing":{"blockGap":{"left":"12px"}}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center"}} --\x3e\n\t<ul class="wp-block-social-links has-normal-icon-size is-style-logos-only">\n\t\t\x3c!-- wp:social-link {"url":"#","service":"wordpress"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"bluesky"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"instagram"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"x"} /--\x3e\n\t</ul>\n\t\x3c!-- /wp:social-links --\x3e\n\n\t\x3c!-- wp:buttons {"style":{"spacing":{"padding":{"top":"32px","bottom":"0px"},"blockGap":{"top":"16px"}}},"layout":{"type":"flex","flexWrap":"wrap"}} --\x3e\n\t<div\n\t\tclass="wp-block-buttons"\n\t\tstyle="padding-top: 32px; padding-bottom: 0px"\n\t>\n\t\t\x3c!-- wp:button {"width":100} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100"\n\t\t>\n\t\t\t<a class="wp-block-button__link wp-element-button">Discover</a>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100"\n\t\t>\n\t\t\t<a class="wp-block-button__link wp-element-button">Join us</a>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100"\n\t\t>\n\t\t\t<a class="wp-block-button__link wp-element-button">Dive in</a>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100"\n\t\t>\n\t\t\t<a class="wp-block-button__link wp-element-button">Read more</a>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\t</div>\n\t\x3c!-- /wp:buttons --\x3e\n\n\t\x3c!-- wp:spacer {"height":"40px"} --\x3e\n\t<div style="height: 40px" aria-hidden="true" class="wp-block-spacer"></div>\n\t\x3c!-- /wp:spacer --\x3e\n\n\t\x3c!-- wp:paragraph {"align":"center","style":{"typography":{"fontSize":"14px"}}} --\x3e\n\t<p class="has-text-align-center" style="font-size: 14px">\n\t\tExperience narratives that blend the uncanny with profound themes,\n\t\trevealing the inherent darkness in our world.\n\t</p>\n\t\x3c!-- /wp:paragraph --\x3e\n</div>\n\n\nExample 3:\n\x3c!-- wp:group {"metadata":{"remotePatternId":16199},"align":"full","className":"is-style-section-1","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50"},"blockGap":"var:preset|spacing|30"}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-1"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center"} --\x3e\n\t<h2 class="wp-block-heading has-text-align-center">Emerging Artists</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:columns {"metadata":{"name":"Team members"},"align":"wide","style":{"spacing":{"blockGap":{"top":"var:preset|spacing|60","left":"var:preset|spacing|20"}}}} --\x3e\n\t<div class="wp-block-columns alignwide">\n\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-column">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full is-style-rounded">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/1839919/pexels-photo-1839919.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tMonthly Exhibitions\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-column">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full is-style-rounded">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/3700245/pexels-photo-3700245.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tMinimalist Design\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-column">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full is-style-rounded">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/4067759/pexels-photo-4067759.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tArt that Inspires\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\x3c!-- wp:column {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-column">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full is-style-rounded">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/2372979/pexels-photo-2372979.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tGallery Events\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:column --\x3e\n\t</div>\n\t\x3c!-- /wp:columns --\x3e\n</div>\n\n\nExample 4:\n\n\x3c!-- wp:group {"metadata":{"name":"Event Listings","patternCategory":"events","remotePatternId":15238},"align":"full","className":"is-style-section-3","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|40"},"blockGap":"var:preset|spacing|20"}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-bottom: var( --wp--preset--spacing--40 );\n\t"\n>\n\t\x3c!-- wp:heading {"align":"wide"} --\x3e\n\t<h2 class="wp-block-heading alignwide">Event Listings</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:group {"metadata":{"name":"Items"},"align":"wide","style":{"spacing":{"blockGap":"0"}}} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"border":{"bottom":{"width":"1px"}},"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="\n\t\t\t\tborder-bottom-width: 1px;\n\t\t\t\tpadding-top: 32px;\n\t\t\t\tpadding-bottom: 32px;\n\t\t\t"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tUpcoming Shows\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">Catch Sonic Pulse live!</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tGet ready for an experience!\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Buy Tickets</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"border":{"bottom":{"width":"1px"}},"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="\n\t\t\t\tborder-bottom-width: 1px;\n\t\t\t\tpadding-top: 32px;\n\t\t\t\tpadding-bottom: 32px;\n\t\t\t"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tJoin Us For An Epic Night\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">\n\t\t\t\t\t\t\tFeel the thrill of the music!\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tBe part of the electrifying vibe.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Get Tickets</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"border":{"bottom":{"width":"1px"}},"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="\n\t\t\t\tborder-bottom-width: 1px;\n\t\t\t\tpadding-top: 32px;\n\t\t\t\tpadding-bottom: 32px;\n\t\t\t"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tDon't Miss The Action\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">\n\t\t\t\t\t\t\tSonic Pulse is set to amaze.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tExperience the fusion live!\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Tickets Here</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"border":{"bottom":{"width":"1px"}},"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="\n\t\t\t\tborder-bottom-width: 1px;\n\t\t\t\tpadding-top: 32px;\n\t\t\t\tpadding-bottom: 32px;\n\t\t\t"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tJoin The Pulse\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">Let's rock the night away!</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tBe part of our electrifying scene.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Reserve Now</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"align":"wide","style":{"spacing":{"padding":{"top":"32px","bottom":"32px"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-group alignwide"\n\t\t\tstyle="padding-top: 32px; padding-bottom: 32px"\n\t\t>\n\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"flex","flexWrap":"wrap","justifyContent":"space-between"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"4px"}},"layout":{"type":"flex","orientation":"vertical"}} --\x3e\n\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\x3c!-- wp:heading {"level":3,"className":"is-event-name"} --\x3e\n\t\t\t\t\t<h3 class="wp-block-heading is-event-name">\n\t\t\t\t\t\tUnleash The Energy\n\t\t\t\t\t</h3>\n\t\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"5px"}},"layout":{"type":"flex"}} --\x3e\n\t\t\t\t\t<div class="wp-block-group">\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-date"} --\x3e\n\t\t\t\t\t\t<p class="is-event-date">Get immersed in the sound.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t\t\t\t<p>.</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\t\t\x3c!-- wp:paragraph {"className":"is-event-location"} --\x3e\n\t\t\t\t\t\t<p class="is-event-location">\n\t\t\t\t\t\t\tJoin us for a night of excitement.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:group --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\t\x3c!-- wp:buttons --\x3e\n\t\t\t\t<div class="wp-block-buttons">\n\t\t\t\t\t\x3c!-- wp:button --\x3e\n\t\t\t\t\t<div class="wp-block-button">\n\t\t\t\t\t\t<a class="wp-block-button__link wp-element-button"\n\t\t\t\t\t\t\t>Join Us</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /wp:button --\x3e\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /wp:buttons --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 5:\n\n\x3c!-- wp:group {"metadata":{"categories":[],"patternName":"core/block/5951","remotePatternId":16719},"align":"full","className":"is-style-section-3","style":{"dimensions":{"minHeight":"100vh"},"spacing":{"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50","left":"var:preset|spacing|60","right":"var:preset|spacing|60"},"blockGap":"48px","margin":{"top":"0","bottom":"0"}}},"layout":{"type":"constrained","contentSize":"320px","wideSize":"680px"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmin-height: 100vh;\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-right: var( --wp--preset--spacing--60 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t\tpadding-left: var( --wp--preset--spacing--60 );\n\t"\n>\n\t\x3c!-- wp:image {"id":null,"aspectRatio":"3/4","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"border":{"radius":{"topLeft":"200px","topRight":"200px","bottomLeft":"0px","bottomRight":"0px"},"top":{"width":"8px"},"right":{"width":"8px"},"bottom":{"width":"32px"},"left":{"width":"8px"}}}} --\x3e\n\t<figure class="wp-block-image size-full has-custom-border">\n\t\t<img\n\t\t\tsrc="https://images.pexels.com/photos/3794188/pexels-photo-3794188.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\talt="philosophical podcast"\n\t\t\tstyle="\n\t\t\t\tborder-top-left-radius: 200px;\n\t\t\t\tborder-top-right-radius: 200px;\n\t\t\t\tborder-bottom-left-radius: 0px;\n\t\t\t\tborder-bottom-right-radius: 0px;\n\t\t\t\tborder-top-width: 8px;\n\t\t\t\tborder-right-width: 8px;\n\t\t\t\tborder-bottom-width: 32px;\n\t\t\t\tborder-left-width: 8px;\n\t\t\t\taspect-ratio: 3/4;\n\t\t\t\tobject-fit: cover;\n\t\t\t"\n\t\t/>\n\t</figure>\n\t\x3c!-- /wp:image --\x3e\n\n\t\x3c!-- wp:group {"align":"wide","style":{"spacing":{"blockGap":"8px"}},"layout":{"type":"default"}} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:heading {"textAlign":"center","level":1,"align":"wide","style":{"typography":{"fontSize":"80px"}}} --\x3e\n\t\t<h1\n\t\t\tclass="wp-block-heading alignwide has-text-align-center"\n\t\t\tstyle="font-size: 80px"\n\t\t>\n\t\t\tExplore new ideas\n\t\t</h1>\n\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\x3c!-- wp:heading {"textAlign":"center","style":{"typography":{"fontSize":"18px"}}} --\x3e\n\t\t<h2\n\t\t\tclass="wp-block-heading has-text-align-center"\n\t\t\tstyle="font-size: 18px"\n\t\t>\n\t\t\tJoin the conversation\n\t\t</h2>\n\t\t\x3c!-- /wp:heading --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n\n\t\x3c!-- wp:social-links {"size":"has-normal-icon-size","className":"is-style-logos-only","style":{"spacing":{"blockGap":{"left":"12px"}}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center"}} --\x3e\n\t<ul class="wp-block-social-links has-normal-icon-size is-style-logos-only">\n\t\t\x3c!-- wp:social-link {"url":"#","service":"instagram"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"bluesky"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"x"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"spotify"} /--\x3e\n\t</ul>\n\t\x3c!-- /wp:social-links --\x3e\n\n\t\x3c!-- wp:buttons {"style":{"spacing":{"blockGap":{"top":"8px"}}},"layout":{"type":"flex","flexWrap":"wrap"}} --\x3e\n\t<div class="wp-block-buttons">\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"radius":"4px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-radius: 4px"\n\t\t\t\t>Listen now</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"radius":"4px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-radius: 4px"\n\t\t\t\t>Read blogs</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"radius":"4px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-radius: 4px"\n\t\t\t\t>Join Discord</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"radius":"4px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-radius: 4px"\n\t\t\t\t>Follow us</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\t</div>\n\t\x3c!-- /wp:buttons --\x3e\n\n\t\x3c!-- wp:spacer {"height":"24px"} --\x3e\n\t<div style="height: 24px" aria-hidden="true" class="wp-block-spacer"></div>\n\t\x3c!-- /wp:spacer --\x3e\n\n\t\x3c!-- wp:paragraph {"align":"center","style":{"typography":{"fontSize":"14px"}}} --\x3e\n\t<p class="has-text-align-center" style="font-size: 14px">\n\t\tDive into thought-provoking discussions on our podcast.\n\t</p>\n\t\x3c!-- /wp:paragraph --\x3e\n</div>\n\n\nExample 6:\n\n\x3c!-- wp:group {"metadata":{"remotePatternId":16194},"align":"full","className":"is-style-section-3","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50"},"blockGap":"var:preset|spacing|30"}},"layout":{"type":"constrained","justifyContent":"center","contentSize":"1000px"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center"} --\x3e\n\t<h2 class="wp-block-heading has-text-align-center">\n\t\tWelcome to Brushstrokes\n\t</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:group {"style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"grid","columnCount":2,"minimumColumnWidth":null}} --\x3e\n\t<div class="wp-block-group">\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"3/4","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[],"border":{"radius":"24px"}}} --\x3e\n\t\t\t<figure class="wp-block-image size-full has-custom-border">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/383568/pexels-photo-383568.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tborder-radius: 24px;\n\t\t\t\t\t\taspect-ratio: 3/4;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tExplore new perspectives\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[],"border":{"radius":"24px"}}} --\x3e\n\t\t\t<figure class="wp-block-image size-full has-custom-border">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/2079670/pexels-photo-2079670.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tborder-radius: 24px;\n\t\t\t\t\t\taspect-ratio: 1;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tDiscover modern art\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[],"border":{"radius":"24px"}}} --\x3e\n\t\t\t<figure class="wp-block-image size-full has-custom-border">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/2261165/pexels-photo-2261165.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tborder-radius: 24px;\n\t\t\t\t\t\taspect-ratio: 1;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tMeet emerging talents\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"2/3","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[],"border":{"radius":"24px"}}} --\x3e\n\t\t\t<figure class="wp-block-image size-full has-custom-border">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/1839919/pexels-photo-1839919.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="art gallery"\n\t\t\t\t\tstyle="\n\t\t\t\t\t\tborder-radius: 24px;\n\t\t\t\t\t\taspect-ratio: 2/3;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"textAlign":"center","level":3,"fontSize":"small"} --\x3e\n\t\t\t<h3\n\t\t\t\tclass="wp-block-heading has-text-align-center has-small-font-size"\n\t\t\t>\n\t\t\t\tFeatured exhibits\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 7:\n\n\x3c!-- wp:group {"metadata":{"categories":["posts"],"name":"Blog Posts","patternName":"assembler/posts-4","patternCategory":"posts","remotePatternId":16787},"align":"full","className":"alignfull is-style-section-1","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"blockGap":"var:preset|spacing|30","padding":{"top":"var:preset|spacing|40","bottom":"var:preset|spacing|40"}}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-1"\n\tid="posts-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--40 );\n\t\tpadding-bottom: var( --wp--preset--spacing--40 );\n\t"\n>\n\t\x3c!-- wp:heading {"align":"wide","style":{"layout":{"selfStretch":"fixed","flexSize":"100%"}}} --\x3e\n\t<h2 class="wp-block-heading alignwide">Cozy vibes</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:query {"queryId":1,"query":{"perPage":3,"pages":0,"offset":0,"postType":"post","order":"desc","orderBy":"date","author":"","search":"","exclude":[],"sticky":"","inherit":false,"taxQuery":null,"parents":[],"format":[],"status[0]":"publish","status[1]":"private"},"align":"wide"} --\x3e\n\t<div class="wp-block-query alignwide">\n\t\t\x3c!-- wp:post-template {"style":{"spacing":{"blockGap":"var:preset|spacing|40"}},"layout":{"type":"grid","columnCount":3}} --\x3e\n\t\t\x3c!-- wp:columns {"verticalAlignment":"center","style":{"spacing":{"blockGap":{"top":"var:preset|spacing|30","left":"var:preset|spacing|20"},"margin":{"top":"0","bottom":"0"}}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-columns are-vertically-aligned-center"\n\t\t\tstyle="margin-top: 0; margin-bottom: 0"\n\t\t>\n\t\t\t\x3c!-- wp:column {"verticalAlignment":"center"} --\x3e\n\t\t\t<div class="wp-block-column is-vertically-aligned-center">\n\t\t\t\t\x3c!-- wp:post-featured-image {"isLink":true,"aspectRatio":"1"} /--\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\n\t\t\t\x3c!-- wp:column {"verticalAlignment":"center"} --\x3e\n\t\t\t<div class="wp-block-column is-vertically-aligned-center">\n\t\t\t\t\x3c!-- wp:post-title {"level":3,"isLink":true,"fontSize":"medium"} /--\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:column --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:columns --\x3e\n\t\t\x3c!-- /wp:post-template --\x3e\n\t</div>\n\t\x3c!-- /wp:query --\x3e\n</div>\n\n\nExample 8:\n\n\x3c!-- wp:group {"metadata":{"remotePatternId":16188},"align":"full","className":"is-style-section-2","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|40","bottom":"var:preset|spacing|40"}}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-2"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--40 );\n\t\tpadding-bottom: var( --wp--preset--spacing--40 );\n\t"\n>\n\t\x3c!-- wp:group {"align":"wide","style":{"spacing":{"blockGap":"var:preset|spacing|20"}},"layout":{"type":"grid","columnCount":null,"minimumColumnWidth":"22rem"}} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/7602900/pexels-photo-7602900.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tArtisan furniture design\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Handcrafted and modern pieces.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/14792097/pexels-photo-14792097.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tOur collaborative spirit\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Designed to inspire creativity.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/29795426/pexels-photo-29795426.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tSustainable practices\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Ethically sourced materials.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"48px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/3621210/pexels-photo-3621210.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tMinimalist aesthetics\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Timeless design approach.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/447592/pexels-photo-447592.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tShowcasing our collections\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Discover our unique offerings.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\x3c!-- wp:group {"metadata":{"name":"Team Member"},"style":{"spacing":{"blockGap":"0"}},"layout":{"type":"flex","orientation":"vertical","justifyContent":"center","flexWrap":"nowrap"}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","style":{"color":[]}} --\x3e\n\t\t\t<figure class="wp-block-image size-full">\n\t\t\t\t<img\n\t\t\t\t\tsrc="https://images.pexels.com/photos/29775281/pexels-photo-29775281.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\t\t\talt="furniture design"\n\t\t\t\t\tstyle="aspect-ratio: 1; object-fit: cover"\n\t\t\t\t/>\n\t\t\t</figure>\n\t\t\t\x3c!-- /wp:image --\x3e\n\n\t\t\t\x3c!-- wp:spacer {"height":"0px","style":{"layout":{"selfStretch":"fixed","flexSize":"24px"}}} --\x3e\n\t\t\t<div\n\t\t\t\tstyle="height: 0px"\n\t\t\t\taria-hidden="true"\n\t\t\t\tclass="wp-block-spacer"\n\t\t\t></div>\n\t\t\t\x3c!-- /wp:spacer --\x3e\n\n\t\t\t\x3c!-- wp:heading {"level":3,"fontSize":"medium"} --\x3e\n\t\t\t<h3 class="wp-block-heading has-medium-font-size">\n\t\t\t\tExperience the difference\n\t\t\t</h3>\n\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\x3c!-- wp:paragraph --\x3e\n\t\t\t<p>Crafted with care.</p>\n\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 9:\n\n\x3c!-- wp:group {"metadata":{"name":"Menu","patternCategory":"menu","remotePatternId":16697},"align":"full","className":"is-style-section-2","style":{"spacing":{"margin":{"top":"0","bottom":"0"},"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50"},"blockGap":"var:preset|spacing|40"}},"layout":{"type":"constrained","justifyContent":"center"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-2"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center"} --\x3e\n\t<h2 class="wp-block-heading has-text-align-center">Our ramen selection</h2>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:group {"metadata":{"name":"Section"},"align":"wide","style":{"spacing":{"blockGap":"var:preset|spacing|30"}},"layout":{"type":"constrained"}} --\x3e\n\t<div class="wp-block-group alignwide">\n\t\t\x3c!-- wp:group {"metadata":{"name":"Items"},"style":{"spacing":{"blockGap":"var:preset|spacing|30"}}} --\x3e\n\t\t<div class="wp-block-group">\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">\n\t\t\t\t\tDive into authentic flavors\n\t\t\t\t</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tWe offer a variety of traditional ramen dishes crafted with\n\t\t\t\t\thouse-made broth and the freshest ingredients.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price","style":{"layout":{"selfStretch":"fit","flexSize":null}}} --\x3e\n\t\t\t\t<p class="is-menu-item-price">Menu</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">\n\t\t\t\t\tSignature bowls\n\t\t\t\t</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tExperience unique recipes that highlight the essence of\n\t\t\t\t\tJapanese ramen culture.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price"} --\x3e\n\t\t\t\t<p class="is-menu-item-price">See our options</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">\n\t\t\t\t\tDaily specials\n\t\t\t\t</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tJoin us for our amazing daily specials that showcase\n\t\t\t\t\tseasonal ingredients and flavors.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price"} --\x3e\n\t\t\t\t<p class="is-menu-item-price">Explore</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">Beverages</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tChoose from a selection of Japanese beverages to complement\n\t\t\t\t\tyour meal.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price"} --\x3e\n\t\t\t\t<p class="is-menu-item-price">Drink menu</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\n\t\t\t\x3c!-- wp:group {"metadata":{"name":"Item"},"style":{"spacing":{"blockGap":"12px"}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center","orientation":"vertical"}} --\x3e\n\t\t\t<div class="wp-block-group">\n\t\t\t\t\x3c!-- wp:heading {"level":4,"className":"is-menu-item-name"} --\x3e\n\t\t\t\t<h4 class="wp-block-heading is-menu-item-name">Desserts</h4>\n\t\t\t\t\x3c!-- /wp:heading --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-description"} --\x3e\n\t\t\t\t<p class="is-menu-item-description">\n\t\t\t\t\tFinish your meal with a taste of our delightful Japanese\n\t\t\t\t\tdesserts.\n\t\t\t\t</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\n\t\t\t\t\x3c!-- wp:paragraph {"className":"is-menu-item-price"} --\x3e\n\t\t\t\t<p class="is-menu-item-price">See desserts</p>\n\t\t\t\t\x3c!-- /wp:paragraph --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- /wp:group --\x3e\n\t\t</div>\n\t\t\x3c!-- /wp:group --\x3e\n\t</div>\n\t\x3c!-- /wp:group --\x3e\n</div>\n\n\nExample 10:\n\n\x3c!-- wp:group {"metadata":{"categories":["link-in-bio"],"patternName":"assembler/link-in-bio-1","remotePatternId":16725},"align":"full","className":"is-style-section-3","style":{"dimensions":{"minHeight":"100vh"},"spacing":{"padding":{"top":"var:preset|spacing|50","bottom":"var:preset|spacing|50","left":"var:preset|spacing|60","right":"var:preset|spacing|60"},"blockGap":"32px","margin":{"top":"0","bottom":"0"}}},"layout":{"type":"constrained","contentSize":"340px","wideSize":"580px"}} --\x3e\n<div\n\tclass="wp-block-group alignfull is-style-section-3"\n\tid="[object Object]-section"\n\tstyle="\n\t\tmin-height: 100vh;\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t\tpadding-top: var( --wp--preset--spacing--50 );\n\t\tpadding-right: var( --wp--preset--spacing--60 );\n\t\tpadding-bottom: var( --wp--preset--spacing--50 );\n\t\tpadding-left: var( --wp--preset--spacing--60 );\n\t"\n>\n\t\x3c!-- wp:heading {"textAlign":"center","level":3,"style":{"typography":{"fontSize":"18px"}}} --\x3e\n\t<h3 class="wp-block-heading has-text-align-center" style="font-size: 18px">\n\t\tExplore tales of terror\n\t</h3>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:heading {"textAlign":"center","level":1,"align":"wide","style":{"typography":{"fontSize":"95px"}}} --\x3e\n\t<h1\n\t\tclass="wp-block-heading alignwide has-text-align-center"\n\t\tstyle="font-size: 95px"\n\t>\n\t\tJoin the darkness\n\t</h1>\n\t\x3c!-- /wp:heading --\x3e\n\n\t\x3c!-- wp:social-links {"size":"has-normal-icon-size","className":"is-style-logos-only","style":{"spacing":{"blockGap":{"left":"12px"}}},"layout":{"type":"flex","flexWrap":"nowrap","justifyContent":"center"}} --\x3e\n\t<ul class="wp-block-social-links has-normal-icon-size is-style-logos-only">\n\t\t\x3c!-- wp:social-link {"url":"#","service":"wordpress"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"bluesky"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"instagram"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"x"} /--\x3e\n\n\t\t\x3c!-- wp:social-link {"url":"#","service":"spotify"} /--\x3e\n\t</ul>\n\t\x3c!-- /wp:social-links --\x3e\n\n\t\x3c!-- wp:image {"id":null,"aspectRatio":"1","scale":"cover","sizeSlug":"full","linkDestination":"none","className":"is-style-rounded","style":{"layout":{"selfStretch":"fill","flexSize":null},"border":{"width":"2px"}}} --\x3e\n\t<figure class="wp-block-image size-full has-custom-border is-style-rounded">\n\t\t<img\n\t\t\tsrc="https://images.pexels.com/photos/5078105/pexels-photo-5078105.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"\n\t\t\talt="horror fiction"\n\t\t\tstyle="border-width: 2px; aspect-ratio: 1; object-fit: cover"\n\t\t/>\n\t</figure>\n\t\x3c!-- /wp:image --\x3e\n\n\t\x3c!-- wp:buttons {"style":{"spacing":{"blockGap":{"top":"16px"},"padding":{"top":"8px"}}},"layout":{"type":"flex","flexWrap":"wrap"}} --\x3e\n\t<div class="wp-block-buttons" style="padding-top: 8px">\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"width":"2px","radius":"100px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-width: 2px; border-radius: 100px"\n\t\t\t\t>Listen now</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"width":"2px","radius":"100px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-width: 2px; border-radius: 100px"\n\t\t\t\t>Read stories</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"width":"2px","radius":"100px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-width: 2px; border-radius: 100px"\n\t\t\t\t>Shop merch</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\n\t\t\x3c!-- wp:button {"width":100,"className":"is-style-outline","style":{"border":{"width":"2px","radius":"100px"}}} --\x3e\n\t\t<div\n\t\t\tclass="wp-block-button has-custom-width wp-block-button__width-100 is-style-outline"\n\t\t>\n\t\t\t<a\n\t\t\t\tclass="wp-block-button__link wp-element-button"\n\t\t\t\tstyle="border-width: 2px; border-radius: 100px"\n\t\t\t\t>Subscribe</a\n\t\t\t>\n\t\t</div>\n\t\t\x3c!-- /wp:button --\x3e\n\t</div>\n\t\x3c!-- /wp:buttons --\x3e\n\n\t\x3c!-- wp:spacer {"height":"40px"} --\x3e\n\t<div style="height: 40px" aria-hidden="true" class="wp-block-spacer"></div>\n\t\x3c!-- /wp:spacer --\x3e\n\n\t\x3c!-- wp:paragraph {"align":"center","style":{"typography":{"fontSize":"14px"}}} --\x3e\n\t<p class="has-text-align-center" style="font-size: 14px">\n\t\tDive into the abyss of horror fiction and explore dark narratives that\n\t\thaunt the mind.\n\t</p>\n\t\x3c!-- /wp:paragraph --\x3e\n</div>\n\n</pattern_examples>\n\nNow, let's break down the process of generating the WordPress block pattern:\n\n1. Pattern Examples Analysis:\n<thought_process>\n- Review all provided pattern examples carefully\n- Note unique layout approaches and structural variations\n- Identify creative container relationships and hierarchies\n- List interesting compositional techniques that could be adapted\n- Look for non-standard groupings and unconventional arrangements\n</thought_process>\n\n2. Analyze the pattern structure:\n<thought_process>\n- Examine the user prompt: ${s}\n- Extract and note any specific numerical requirements (e.g., "top 5", "3 sections")\n- List the main components needed for this pattern based on the user prompt\n- Determine how these components relate to the website configuration and topic\n- Outline the overall structure and hierarchy of the pattern\n- List specific blocks you plan to use based on the allowed blocks and pattern examples\n</thought_process>\n\n3. Create container hierarchy:\n<thought_process>\n- Design a container structure that accommodates all necessary components\n- Ensure container structure exactly matches any numerical requirements from the user prompt\n- List each container with a unique and descriptive ID\n- Describe how containers are nested logically and efficiently\n- Outline how each container, no matter how small, will be broken down into sub-phases\n</thought_process>\n\n4. Plan content grouping:\n<thought_process>\n- List the content divided into logical, independently renderable groups\n- Specify which container each content group will be associated with\n- Ensure content groups match any numerical requirements specified in the user prompt\n- Describe how content groups relate to each other and the overall pattern structure\n- Identify which pattern example's layout approach could be adapted\n- Note specific structural elements to incorporate from that example\n- Explain how the chosen layout serves the content purpose\n</thought_process>\n\nNow, generate the WordPress block pattern following these rules:\n\n1. Container Syntax:\n   Phase 1 must use:\n   \x3c!-- CONTAINER_ID:unique_name type="container-type" --\x3e\n\n   Subsequent phases must wrap content with:\n   \x3c!-- CONTAINER_REF:unique_name --\x3e\n   [content]\n   \x3c!-- /CONTAINER_REF:unique_name --\x3e\n\n2. Phase Structure:\n   - Start each phase with /begin-phase-[number] and end with /end-phase-[number]\n   - Block Structure Requirements:\n     1. Every phase must be complete and valid\n     2. Every phase must contain both opening and closing tags\n     3. No partial blocks or incomplete HTML allowed\n     4. No splitting blocks across phases\n     5. No orphaned HTML tags\n     6. Phase 1 must only contain CONTAINER_ID markers\n     7. All content phases must be wrapped in CONTAINER_REF tags\n\n3. Content Phases:\n- Each content phase fills ONE complete container\n- Must be wrapped in correct CONTAINER_REF tags\n- Must be completely self-contained\n- Place individual column blocks in separate containers and phases\n\n4. Layout Requirements:\n- Avoid defaulting to basic column-based layouts unless specifically requested\n- Draw inspiration from provided pattern examples' structural approaches\n- Choose a layout style that best serves the content and user intent\n\n5. Content Rules\n   - wp:heading blocks should always include "align":"wide" in their attributes\n   - wp:columns blocks should contain images with the same orientation, all portrait or all landscape\n   - Use wp:spacer blocks to add space between sections of the pattern\n   - The outermost wp:group block must include one of these className variations randomly chosen: "is-style-section-default", "is-style-section-1", "is-style-section-2", "is-style-section-3"\n   - If the user wants a subscription form, use the jetpack/subscriptions block if available\n\n6. Generation Rules:\n   - Phase 1: Output outermost container with CONTAINER_ID markers\n   - Phase 2+: Fill each container with content wrapped in CONTAINER_REF tags\n   - Each content container must be filled in order\n   - Max 50 lines per phase\n   - Layout Selection:\n     * Review pattern examples for diverse layout approaches\n     * Choose a layout style that differs from basic column structures\n     * Adapt interesting techniques from example patterns\n     * Consider the specific content type and purpose when selecting layout\n   - Numerical Requirements:\n     * Create exactly the number of containers specified in the user prompt\n     * Fill all numerically-specified containers completely\n     * Never generate fewer items than specifically requested\n\n6. Image Guidelines:\n   - Never use inline height/width styles in the image block\n   - Always retain all image attributes in the URL\n   - Do not mix portrait and landscape images in patterns\n   - Keep images the same size across columns\n   - Use the correct format:\n     \x3c!-- wp:image {"sizeSlug":"full","linkDestination":"none"} --\x3e\n     <figure class="wp-block-image size-full">\n       <img src="[IMAGE_URL]" alt="[Alt]"/>\n     </figure>\n     \x3c!-- /wp:image --\x3e\n\n7. Additional Requirements:\n   - Break down each container into sub-phases for more granular control\n   - Ensure clear mapping between CONTAINER_ID and CONTAINER_REF\n   - Work from outside containers inward\n   - Generate independently renderable sections\n   - Do not use \`\`\` or any other code block formatting\n\nExample of correct pattern structure, this is only an example, please create different structures based on the user prompt:\n\n<example_pattern_structure>\n/begin-phase-1\n\x3c!-- wp:group --\x3e\n<div class="wp-block-group">\n  \x3c!-- CONTAINER_ID:intro type="content" --\x3e\n  \x3c!-- CONTAINER_ID:grid type="grid" --\x3e\n  \x3c!-- CONTAINER_ID:footer type="content" --\x3e\n</div>\n\x3c!-- /wp:group --\x3e\n/end-phase-1\n\n/begin-phase-2\n\x3c!-- CONTAINER_REF:intro --\x3e\n\x3c!-- wp:heading --\x3e\n<h2>Title</h2>\n\x3c!-- /wp:heading --\x3e\n\x3c!-- /CONTAINER_REF:hero --\x3e\n/end-phase-2\n\n/begin-phase-3\n\x3c!-- CONTAINER_REF:grid --\x3e\n\x3c!-- wp:columns --\x3e\n<div class="wp-block-columns">\n  \x3c!-- wp:column --\x3e\n  <div class="wp-block-column">\n    \x3c!-- CONTAINER_ID:col1 type="content" --\x3e\n  </div>\n  \x3c!-- /wp:column --\x3e\n  \x3c!-- wp:column --\x3e\n  <div class="wp-block-column">\n    \x3c!-- CONTAINER_ID:col2 type="content" --\x3e\n  </div>\n  \x3c!-- /wp:column --\x3e\n</div>\n\x3c!-- /wp:columns --\x3e\n\x3c!-- /CONTAINER_REF:grid --\x3e\n/end-phase-3\n\n/begin-phase-4\n\x3c!-- CONTAINER_REF:footer --\x3e\n\x3c!-- wp:paragraph --\x3e\n<p>Footer content</p>\n\x3c!-- /wp:paragraph --\x3e\n\x3c!-- /CONTAINER_REF:footer --\x3e\n/end-phase-4\n</example_pattern_structure>\n\nIMPORTANT:\n - Generate the complete pattern in a single response without asking for permission to continue or checking if more phases should be added. Generate ALL phases needed to complete the pattern, including all requested items and content. Every content phase must be properly wrapped in CONTAINER_REF tags that match their corresponding CONTAINER_ID markers.\n - Don't use any introduction text or any other text other than the phases and content.\n - DO NOT mix portrait and landscape image orientations in patterns.\n\n Begin generating the WordPress block pattern now, following the phase structure and rules outlined above. Remember to use the allowed blocks, consider the website configuration, and incorporate the available images appropriately.`}}}(),{extractPhase:t,parseSSEChunk:n}=function(){const{processPhase:e}=function(){const[e,t]=(0,f.useState)(!1),{replaceBlock:n,insertBlock:o,clearSelectedBlock:i}=(0,m.useDispatch)(y.store),{getBlock:r}=(0,m.useSelect)(y.store),{fixInvalidBlock:a,getContentBlockClientID:s}=bs(),{setGeneratedPatternAsString:c,setGeneratedPatternAsBlocks:l,setGeneratedPatternChunksAsJSON:u,setGeneratedRootPatternClientId:d}=(0,m.useDispatch)(Qa),{generatedPatternAsString:p,generatedPatternChunksAsJSON:h,generatedPatternDummySectionClientId:g,generatedRootPatternClientId:b}=(0,m.useSelect)((e=>({generatedPatternAsString:e(Qa).getGeneratedPatternAsString(),generatedPatternChunksAsJSON:e(Qa).getGeneratedPatternChunksAsJSON(),generatedPatternDummySectionClientId:e(Qa).getGeneratedPatternDummySectionClientId(),generatedRootPatternClientId:e(Qa).getGeneratedRootPatternClientId()}))),v=(0,f.useCallback)((e=>{e?.length&&s()&&(b&&r(b)?n(b,e[0]):o(e[0],void 0,g),i())}),[s,b,r,n,o,i,g]),w=(0,f.useCallback)((e=>{if(!e)return;const t=e.replace(/<!--\s*CONTAINER_ID:([^\s]+)(?:\s+type="[^"]*")?\s*-->/g,""),n=(0,La.parse)(t).map((e=>a(e)));return b?n[0].clientId=b:d(n[0].clientId),l(n),n}),[a,b,d,l]),k=(0,f.useCallback)((e=>{if(!e?.length)return;let t="";return e.forEach((e=>{const{phase:n,containers:o}=e;o.forEach((e=>{if(1===n)return void(t=e.content);const o=new RegExp(`\x3c!-- CONTAINER_ID:${e.refId}(?:\\s+type="[^"]*")?\\s*--\x3e`,"g");t.match(o)&&(t=t.replace(o,e.content))}))})),t!==p?(c(t),t):void 0}),[c,p]);return(0,f.useEffect)((()=>{!e&&h?.length&&(async()=>{t(!0);try{const e=k(h);if(e){const t=w(e);t?.length&&v(t)}}finally{t(!1)}})()}),[h,k,w,v,e]),{processPhase:({content:e,phaseNumber:t})=>{const n=e.split("\n").filter((e=>{const t=e.trim();return t.startsWith("\x3c!-- wp:")||t.startsWith("\x3c!-- CONTAINER")||t.startsWith("\x3c!-- /wp:")||t.startsWith("\x3c!-- /CONTAINER")||t.length>0&&!t.startsWith("\x3c!--")&&!t.endsWith("--\x3e")})).join("\n").trim(),o=/<!--\s*CONTAINER_REF:([^\s]+)\s*-->((?:(?!<!--\s*(?:\/)?CONTAINER_REF)[\s\S])*?)<!--\s*\/CONTAINER_REF:[^\s]+\s*-->/g,i=[];let r;for(;null!==(r=o.exec(n));)i.push({refId:r[1],content:r[2].trim()});0===i.length&&i.push({refId:"root",content:n}),u({phase:t,containers:i})}}}();return{extractPhase:(t,n)=>{try{const o=((e,t)=>{const n=`/begin-phase-${t}`,o=`/end-phase-${t}`,i=e.indexOf(n);if(-1===i)return{success:!1};const r=e.indexOf(o,i);return-1===r?{success:!1}:{success:!0,content:e.substring(i+n.length,r).trim()}})(t,n);if(!o.success)return null;const i=(e=>e?e.includes("\x3c!-- wp:")?{isValid:!0}:{isValid:!1,message:"Content may be malformed: no block markers found"}:{isValid:!1,message:"Content is empty"})(o.content);if(!i.isValid)return console.warn(`Phase ${n} ${i.message}`),null;const r=((e,t)=>{const n=[...e.matchAll(/<!-- CONTAINER_ID:([^\s]+)/g)].map((e=>e[1])),o=[...e.matchAll(/<!-- CONTAINER_REF:([^\s]+)/g)].map((e=>e[1])),i=[];for(const e of o)n.includes(e)||t.includes(`\x3c!-- CONTAINER_ID:${e}`)||i.push(`References undefined container: ${e}`);return{isValid:0===i.length,warnings:i}})(o.content,t);r.isValid||r.warnings.forEach((e=>console.warn(`Phase ${n} ${e}`))),e({content:o.content,phaseNumber:n})}catch(e){return console.error(`Error extracting phase ${n}:`,e),null}},parseSSEChunk:e=>{try{const t=e.split("\n");let n="";for(const e of t)if(e.startsWith("data: "))try{const t=JSON.parse(e.slice(6));"content_block_delta"===t.type&&"text_delta"===t.delta?.type&&(n+=t.delta.text)}catch(e){console.warn("Invalid JSON in SSE chunk:",e)}return n}catch(e){return console.error("Error parsing SSE chunk:",e),""}}}}(),{zoomOut:o,createDummySection:i}=vc(),{insertBlock:r,replaceBlock:a,clearSelectedBlock:s}=(0,m.useDispatch)(y.store),{setCurrentToolCall:c,setLastCancelableAction:l}=(0,m.useDispatch)(Qa),{withPendingToolCallback:u}=ts(),{getSiteMetadata:d,setSiteMetadata:p}=ms(),{logAnthropicUsage:h}=(0,m.useDispatch)(Qa),{getContentBlockClientID:g,scrollToBlock:b,getParentRootPatternBlock:v}=bs(),{setGeneratedPatternAsString:w,setGeneratedPatternAsBlocks:k,setGeneratedPatternChunksAsJSON:_,setGeneratedPatternDummySectionClientId:x,setGeneratedRootPatternClientId:C}=(0,m.useDispatch)(Qa),{getBlock:S,getBlockIndex:E,getBlockParentsByBlockName:I,getBlocksByName:T,getBlocks:A}=(0,m.useSelect)((e=>({getBlock:e(y.store).getBlock,getBlockIndex:e(y.store).getBlockIndex,getBlockParentsByBlockName:e(y.store).getBlockParentsByBlockName,getBlocksByName:e(y.store).getBlocksByName,getBlocks:e(y.store).getBlocks}))),P=(e,n)=>{let o=1;for(;;)if(n.has(o))o++;else{if(null===t(e,o))break;n.add(o),o++}return e};return{generatePattern:async({userPrompt:t,clientId:m,direction:f})=>{const y=((e,t)=>{const n=o(),a=T("core/post-content")[0],s=S(I(e,["core/template-part","core/post-content"])[0]);let c;if("core/template-part"===s?.name)"header"===s.attributes.slug?c=0:"footer"===s.attributes.slug&&(c=A(g()).length);else{const n="before"===t?0:1,o=v(e);c=o?E(o.clientId)+n:E(e)+n}const l=i({isEmpty:!1,className:"big-sky__is-loading-dummy__generated-pattern"});r(l,c,a);let u=!1;return n.then((()=>{u||(u=!0,b(l.clientId,"center"))})),x(l.clientId),l.clientId})(m,f);c("generate_pattern");const N=t;return s(),await u((async()=>{try{const t=await e(N),o=await(async e=>{const t=await fetch("/wp-json/wpcom/v2/big-sky/v1/anthropic/messages",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":jr.nonceMiddleware.nonce},body:JSON.stringify({model:"claude-3-5-sonnet-20241022",max_tokens:8e3,temperature:.2,messages:[{role:"user",content:e}],stream:!0})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t})(t),i=await(async e=>{const t=new TextDecoder;let o="";const i=new Set;let r="",a=0,s=0;try{for(;;){const{done:c,value:l}=await e.read();if(c)break;r+=t.decode(l,{stream:!0});const u=r.split("\n\n");r=u.pop()||"";for(const e of u)if(e.trim()){const t=n(e);t&&(o+=t,o=P(o,i));try{const[,t]=e.split("\n").map((e=>e.replace(/^[^:]+: /,"")));if(t){const e=JSON.parse(t);"message_start"===e.type&&e.message?.usage?.input_tokens&&(a=e.message.usage.input_tokens),"message_delta"===e.type&&"end_turn"===e.delta?.stop_reason&&(s=e.usage?.output_tokens||0)}}catch(e){}}}return(a>0||s>0)&&h("claude-3-5-sonnet-20241022",{input_tokens:a,output_tokens:s}),o}finally{e.releaseLock()}})(o.body.getReader());return((e,t)=>{if(!e)return;const n=S(e),o=S(n?.innerBlocks?.[1]?.clientId);o&&(((e,t)=>{const n=d(),o=t.length>40?t.substring(0,40)+"...":t,i=Date.now().toString().slice(-5),r=parseInt("999"+i,10);e.attributes={...e.attributes,metadata:{remotePatternId:r.toString(),patternCategory:"generated"}};const a={category:"generated",title:o,content:e};n.patterns[r]||(n.patterns[r]=[]),n.patterns[r].push(a),p(n)})(o,t),a(n.clientId,o),l({action:"add_pattern",clientId:o.clientId}),w(""),k([]),_([]),x(null),C(null))})(y,N),i}catch(e){throw ra.error("Error generating pattern:",e),e}}))()}}}const td={id:Ye.PATTERN,description:"An assistant that handles adding, removing, and replacing patterns and sections.",instructions:e=>function(e){const t=tt(e)?"":`User: "Make my site more blue"\n   Analysis: This is not related to pattern/section and is not in the form of a question\n   Action: ${it}\n   \n   User: "Add a new page for contact us"\n   Analysis: The user is asking to add a new page rather a pattern/section and is mot in the form of a question\n   Action: ${it}\n\n   User: "Find me a new stock image to replace the one I have selected."\n   Analysis: This is not related to pattern/section and is not in the form of a question\n   Action: ${it}\n\n   User: "I want to change the layout of my site."\n   Analysis: This is related to full site layout/design rather than an individual pattern/section\n   Action: ${it}`;return`\nYou are an expert website designer at Automattic, specializing in pattern and section management for WordPress sites. Your primary goal is to help users customize their website patterns and sections effectively or route their queries to appropriate assistance.\n\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Qe(e,["siteTitle","siteDescription","siteLocation","topic"])}\n</site_context>\n\n<selected_block_context>\n${Ze(e,["clientId","type"])}\n</selected_block_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${Ke}\n</language>\n\nInstructions:\n\n1. Analyze the User Input:\n   ${Xe}\n   - Identify key words or phrases related to patterns/sections\n   - Determine the specific operation requested (add, remove, replace, or none)\n   - Check if it's a map-specific request\n   - Evaluate if it's a question or other type of request\n   - Consider potential misinterpretations (e.g., content modifications vs. pattern changes)\n   - Is the request related to entire patterns or sections, or is it about modifying content within an existing pattern/section?\n   - Is the request related to full site or page layouts and not specific patterns or sections?\n   - Pay special attention to requests containing words like "replace" or "add" to ensure they are truly about entire patterns/sections and not general text modifications or unrelated actions.\n   - Requests to add, remove, or modify rows, items, or fields within an existing section should be treated as non-pattern requests.\n   - Determine if routing to other assistant is needed\n\n2. Handle Pattern/Section-Related Requests:\n   - For new patterns, use the add_pattern tool with appropriate categories.\n   - For pattern removal, use the remove_block tool.\n   - For pattern replacement, use the replace_pattern tool.\n   - For map requests, verify site location and use the "contact" category.\n   - For duplicate section errors, offer remove or replace options.\n   - For changing section/pattern designs call replace_pattern\n\n3. Handle Non-Pattern/Section Requests:\n   - ${nt}\n   ${et(e)}\n\n4. Special cases:\n   - If the request is pattern-related but there's no specific tool to handle it, ${ot}\n\n5. Examples:\n   User: "Add a contact form"\n   Analysis: Pattern-related request for new form\n   Action: Call add_pattern with form category\n\n   User: "Replace this section with a map"\n   Analysis: Map-specific pattern replacement\n   Action: Call replace_pattern with contact category and isAskingForMap true\n\n   User: "How do I install the WooCommerce plugin?"\n   Analysis: This is not related to pattern/section and is in the form of a question\n   Action: ${ot}\n\n${t}\n\n6. Restrictions:\n   - Only handle operations related to entire patterns/sections.\n   - Validate pattern categories before operations.\n   - Prevent duplicate unique sections.\n   - Route non-pattern/section requests appropriately.\n\nRemember to immediately execute appropriate tool calls or guide users based on analysis, without displaying the analysis process.\n`}(e),tags:["big-sky-pattern"],toolkits:[ju],toolkitHook:()=>{const{createToolCallback:e}=ts(),{changeAssistant:t}=as(),{agentSay:n}=Ce(),{setCallbacks:o,setContext:i}=Pe(),{selectedBlock:r}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{selectedBlock:t()}})),{getSiteMetadata:a}=ms(),{siteTitle:s,siteDescription:c,topic:l,siteLocation:u}=a(),{getParentPatternCategory:d}=tl(),{addPattern:p}=Qu(),{removeBlock:h}=function(){const{zoomIn:e}=vc(),{setIsToolContainerVisible:t}=(0,m.useDispatch)(Qa),{validateRemoveBlockArgs:n}=Uu(),{setDockView:o,setLastSelectedBlock:i}=(0,m.useDispatch)(Qa),{removeBlock:r}=(0,m.useDispatch)(y.store),{getBlock:a,getSelectedBlock:s,getBlockRootClientId:c}=(0,m.useSelect)((e=>({getBlock:e(y.store).getBlock,getSelectedBlock:e(y.store).getSelectedBlock,getBlockRootClientId:e(y.store).getBlockRootClientId}))),{lastSelectedBlock:l}=(0,m.useSelect)((e=>({lastSelectedBlock:e(Qa).getLastSelectedBlock()})));return{removeBlock:async({clientId:u})=>{try{let d=u;u||(d=s()?.clientId),d||(d=l?.clientId),await n({clientId:d});const p="core/cover"===a(d)?.name?c(d):d;return a(p)&&r(p),i(null),o(Y.MENUS),t(!1),e(),(0,z.__)("I have removed the block for you.","big-sky")}catch(e){throw e}}}}(),{replacePattern:g}=Zu(),{generatePattern:b}=ed(),{validateAddPatternArgs:v,validateGeneratePatternArgs:w,validateRemoveBlockArgs:k,validateReplacePatternArgs:_}=Uu(),{setShowThread:x}=(0,m.useDispatch)(Qa),{getIsHandoff:C}=(0,m.useSelect)((e=>{const{getIsHandoff:t}=e(Qa);return{getIsHandoff:t}}));(0,f.useEffect)((()=>{o(ju.name,{..."true"===window.localStorage.getItem("isGeneratingPatterns")?{generate_pattern:e({name:"generate_pattern",action:async e=>{const t=await b(e);n(t)},validator:w,failValidatorAction:(e,t)=>{x(!0),n(t.message)},closeChatWhenDone:()=>!C()})}:{add_pattern:e({name:"add_pattern",action:async e=>{const t=await p(e);n(t)},validator:v,failValidatorAction:(e,t)=>{x(!0),n(t.message)},closeChatWhenDone:()=>!C()})},remove_block:e({name:"remove_block",action:async e=>{const t=await h(e);n(t)},validator:k,failValidatorAction:(e,t)=>{x(!0),n(t.message)},closeChatWhenDone:()=>!C()}),replace_pattern:e({name:"replace_pattern",action:async e=>{const t=await g(e);n(t)},validator:_,failValidatorAction:(e,t)=>{x(!0),n(t.message)},closeChatWhenDone:()=>!C()}),change_assistant:e({name:"change_assistant",action:e=>{x(!0),t(e)},closeChatWhenDone:()=>!1})})}),[o]);let S=null;r&&(S=d(r)),(0,f.useEffect)((()=>{i(ju.name,{selectedBlock:{clientId:r?.clientId,name:r?.name,type:r?.type,parentPatternCategory:S},site:{siteTitle:s,siteDescription:c,siteLocation:u,topic:l}})}),[i,r,l,S])},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))}},nd=td,od={name:"font",tools:e=>{const t=[Tl(e?.keywords)];return"fonts"===e.currentHandoffArea||tt(e)||t.push(at(Ye.FONT)),t}},id=od,rd=({fontVariations:e,maxFontsToShow:t=12})=>{const{currentFont:n}=ms().getSiteMetadata();return(0,r.createElement)(Iu,{variations:e,currentVariation:n,maxToShow:t,type:"font"})};function ad(){const{zoomIn:e}=vc(),{getCurrentFont:t}=(0,m.useSelect)(Qa),{getFontVariationByTitle:n,getFontVariations:o}=Js(),{setDockView:i,setIsToolContainerVisible:a,setLastCancelableAction:s}=(0,m.useDispatch)(Qa),{setSiteMetadata:c}=ms(),{currentFont:l}=ms().getSiteMetadata(),{saveStylesEntityRecord:u,setStyles:d}=hc();return{showFontPicker:e=>{const i=t()||l,{keywords:a=[],fonts:c=[],callback:u=()=>{}}=e,{fontVariationsToShow:d,message:p}=function({keywords:e,chosenFonts:t=[],currentFont:n,getFontVariations:o,getFontVariationByTitle:i}){let r=[],a=(0,z.__)("There are no fonts available.","big-sky");const s=o()||[];if(0===s.length)return{fontVariationsToShow:r,message:a};t&&t.length?r=s.filter((e=>t.includes(e.title))):e&&e.length&&(r=s.map((t=>{const n=(t["x-big-sky-meta"]?.keywords||[]).filter((t=>e.includes(t)));return{...t,matchingKeywords:n.length}})).sort(((e,t)=>t.matchingKeywords-e.matchingKeywords)).filter((e=>e.matchingKeywords>0))),a=r.length>0?(0,z.__)("Here are your matching fonts.","big-sky"):(0,z.__)("I didn't find any fonts that match, but here are all available fonts.","big-sky"),0===r.length&&(r=s);const c=i(n);return c&&(r=[c,...r.filter((e=>e.title!==n))]),r=[...new Set(r)],{fontVariationsToShow:r,message:a}}({chosenFonts:c,keywords:a,currentFont:i,getFontVariations:o,getFontVariationByTitle:n});s({action:"show_font_picker",originalVariationName:i}),u((0,r.createElement)(rd,{fontVariations:d,key:"font-picker",maxFontsToShow:J}),p)},cancelShowFontPicker:t=>{i(Y.MENUS),d({font:t}),a(!1),e()},doneShowFontPicker:()=>{u(),c({},!0),i(Y.MENUS),a(!1),e()},validateArguments:e=>{if(!e)return!1;const{keywords:t}=e;return!!t}}}const sd={id:Ye.FONT,description:"An assistant that handles font selection.",instructions:e=>function(e){const t=tt(e)?"":`User: "Move this image to the right"\n         Analysis: This is not related to fonts and is not in the form of a question\n         Action: ${it}`;return`\nYou are an expert website designer, specializing in font selection and helping users modify their website fonts. Your primary goal is to help users customize their website fonts effectively or route their queries to appropriate assistance.\n\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Qe(e,["siteTitle","siteDescription","topic"])}\n</site_context>\n\n<selected_block_context>\n${Ze(e,["clientId","type"])}\n</selected_block_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${Ke}\n</language>\n\nInstructions:\n\n1. Analyze User Input:\n   ${Xe}\n   a) Determine if font-related or not\n   b) If font-related, list specific fonts or styles mentioned\n   c) Check routing criteria\n   d) Note any component-specific changes\n   e) For non-font requests, identify if question or other request type\n   f) Determine if routing to other assistant is needed\n\n2. Handle Font-Related Requests:\n   - If specific fonts/keywords provided, immediately call show_font_picker tool\n   - If style can be inferred (e.g., "like New York Times"), call show_font_picker with keywords inferred from the style\n   - For vague requests ("show me fonts"), infer keywords from the site context\n   - Pass fonts parameter as null if not specified\n   - Pass keywords parameter as null if not specified\n\n3. Handle Non-Font-Related Requests:\n   - ${nt}\n   - ${et()}\n\n4. Special cases:\n   - If the request is font-related but there's no specific tool to handle it, ${ot}\n\n5. Examples:\n\nUser: "I want the Roboto font"\nAnalysis: Font-specific request\nAction: Call show_font_picker with fonts=["Roboto"], keywords=null\n\nUser: "Show me serif fonts"\nAnalysis: Font style request\nAction: Call show_font_picker with fonts=null, keywords=["serif"]\n\nUser: "Make my site look professional"\nAnalysis: Vague request where fonts are not specified, but there is a keyword "professional"\nAction: Call show_font_picker with fonts=null, keywords=["professional"]\n\nUser: "I want fonts that are easy to read"\nAnalysis: This is a keyword based request\nAction: Call show_font_picker with fonts=null, keywords=["readable", "clear", "simple"]\n\n${t}\n\nUser: "How do I change my theme?"\nAnalysis: This is a question, and not related to fonts\nAction: ${ot}\n\n\n6. Restrictions:\n   - Only answer questions related to fonts and website font changes.\n   - Adhere strictly to the routing rules specified above.\n   - Do not display your analysis process in the final output.\n`}(e),tags:[Ye.FONT],toolkits:[id],toolkitHook:()=>{const{createToolCallback:e}=ts(),{getVariationKeywords:t}=Js(),{changeAssistant:n}=as(),{agentSay:o}=Ce(),{setCallbacks:i,setContext:r}=Pe(),{getSiteMetadata:a}=ms(),{siteTitle:s,siteDescription:c,topic:l}=a(),{showFontPicker:u,validateArguments:d}=ad(),{zoomOut:p}=vc(),{getIsHandoff:h,currentHandoffArea:g,selectedBlock:b}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store),{getIsHandoff:n,getCurrentHandoffArea:o}=e(Qa);return{selectedBlock:t(),getIsHandoff:n,currentHandoffArea:o()}})),{setChatComponents:v,setIsToolContainerVisible:w,setToolComponent:k,setShowThread:_}=(0,m.useDispatch)(Qa);(0,f.useEffect)((()=>{i(id.name,{show_font_picker:e({name:"show_font_picker",action:e=>{u({...e,callback:(e,t)=>{h()?v([e]):(p(),k(e),w(!0)),o(t)}})},validator:e=>d(e),failValidatorAction:()=>o((0,z.__)("Please provide a font or a category to view font options.","big-sky")),closeChatWhenDone:()=>!h()}),change_assistant:e({name:"change_assistant",action:e=>{_(!0),n(e)},closeChatWhenDone:()=>!1})})}),[i]),(0,f.useEffect)((()=>{const e={site:{siteTitle:s,siteDescription:c,topic:l},selectedBlock:{clientId:b?.clientId,type:b?.type,name:b?.name},keywords:t("font")};h()&&(e.currentHandoffArea=g),r(id.name,e)}),[r,h,g,b])},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))}},cd=sd,ld={name:"layout",tools:e=>{const t=[{name:"show_layout_picker",description:"Show a site layout picker to the user."}];return"layouts"===e.currentHandoffArea||tt(e)||t.push(at(Ye.LAYOUT)),t}},ud=ld;function dd({concepts:e,selectedConcept:t,onGenerateNewConcept:n}){const[o,i]=(0,f.useState)(e);return(0,r.createElement)("div",{className:"big-sky__dock__menu__layout-picker"},(0,r.createElement)("div",{className:"components-grid"},(0,r.createElement)(Ku,{key:"site-layout-picker",items:o,selectedItem:t,generateNewItem:async()=>{const e=await n(o);i(e)}})))}function pd(){const{getSiteMetadata:e,getPagePatterns:t}=ms(),{zoomIn:n}=vc(),{composePatterns:o,createConceptFromCurrentCanvas:i,insertPatterns:a}=tl(),{setDockView:s,setLastCancelableAction:c,setIsToolContainerVisible:l}=(0,m.useDispatch)(Qa),u=(0,f.useCallback)((n=>{const{topic:r,siteDescription:a,siteLocation:s}=e(),c=t(),l=i();return[...n,...o({categories:c.filter((e=>"header"!==e.slug&&"footer"!==e.slug)),topic:r,siteDescription:a,siteLocation:s,numberOfConcepts:1,selectedConcept:l})]}),[t,i,o,e]),d=(0,f.useCallback)((({categories:n=null,numberOfConcepts:a=3,callback:s=()=>{}})=>{const{topic:l,siteDescription:d,siteLocation:p}=e(),h=t(),g=i(),m=h.filter((e=>"header"!==e.slug&&"footer"!==e.slug)),f=[g,...o({categories:n||m,topic:l,siteDescription:d,siteLocation:p,numberOfConcepts:a,selectedConcept:g})].filter(((e,t,n)=>t===n.findIndex((t=>t.id===e.id))));return c({action:"show_layout_picker",originalLayout:g}),s((0,r.createElement)(dd,{concepts:f,selectedConcept:g,key:"site-layout-picker",onGenerateNewConcept:e=>u(e)})),(0,z.__)("Which of these layouts would you like?","big-sky")}),[e,t,i,o,c,u]);return{cancelShowLayoutPicker:e=>{a(e.patterns,null,"replace",!1),s(Y.MENUS),l(!1),n()},doneShowLayoutPicker:()=>{s(Y.MENUS),l(!1),n()},showSiteLayouts:d,composeNewConcept:u}}const hd={id:Ye.LAYOUT,description:"Helps with all requests related to switching the page layout.",instructions:e=>function(e){const t=tt(e)?"":`User: "Make my site more blue"\nAnalysis: This is not related to layout and is not in the form of a question\nAction: ${it}\n\nUser: "Add a section for a newsletter signup"\nAnalysis: This is not related to layout and is about a specific section\nAction: ${it}`;return`\nYou are an expert website designer at Automattic, specializing in layout customization and helping users modify their website layouts. Your role is to assist users with layout changes or route their queries appropriately.\n\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Qe(e,["siteTitle","siteDescription","topic"])}\n</site_context>\n\n<selected_block_context>\n${Ze(e,["clientId","type"])}\n</selected_block_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${Ke}\n</language>\n\nInstructions:\n\n1. Analyze User Input:\n   ${Xe}\n   a) Determine if request is layout-related\n   b) Layout-related requests involve the page, website, or layout. Never individual sections or patterns.\n   c) Check for routing criteria\n   d) For non-layout requests, identify if it's a question\n   e) Determine if routing to other assistant is needed\n\n2. Handle Layout-Related Requests:\n   - Call show_layout_picker tool immediately.\n   - Don't respond with anything else.\n\n3. Handle Non-Layout Requests:\n   - ${nt}\n   ${et(e)}\n\n4. Special cases:\n   - If the request is layout-related but there's no specific tool to handle it, ${ot}\n\n5. Examples:\n\nUser: "I want a sidebar on my homepage"\nAnalysis: Layout-related request with specific element\nAction: Call show_layout_picker tool\n\nUser: "I don't like the layout of my site, can you help me?"\nAnalysis: Layout-related request for the specific layout of the page\nAction: Call show_layout_picker tool\n\nUser: "How do I change my theme?"\nAnalysis: This is a question and is not in the form of a layout request\nAction: ${ot}\n\n${t}\n\n6. Restrictions:\n   - Only handle layout-related requests\n   - Follow routing rules strictly\n   - Don't display analysis in output\n`}(e),tags:[Ye.LAYOUT],toolkits:[ud],toolkitHook:()=>{const{createToolCallback:e}=ts(),{getVariationKeywords:t}=Js(),{changeAssistant:n}=as(),{agentSay:o}=Ce(),{setCallbacks:i,setContext:r}=Pe(),{getSiteMetadata:a}=ms(),{siteTitle:s,siteDescription:c,siteLocation:l,topic:u}=a(),{zoomOut:d}=vc(),{getIsHandoff:p,currentHandoffArea:h,selectedBlock:g}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store),{getIsHandoff:n,getCurrentHandoffArea:o}=e(Qa);return{selectedBlock:t(),getIsHandoff:n,currentHandoffArea:o()}})),{showSiteLayouts:b}=pd(),{setIsToolContainerVisible:v,setToolComponent:w,setShowThread:k}=(0,m.useDispatch)(Qa);(0,f.useEffect)((()=>{i(ud.name,{show_layout_picker:e({name:"show_layout_picker",action:()=>{o(b({callback:e=>{d(),w(e),v(!0)}}))},closeChatWhenDone:()=>!p()}),change_assistant:e({name:"change_assistant",action:e=>{k(!0),n(e)},closeChatWhenDone:()=>!1})})}),[i]),(0,f.useEffect)((()=>{const e={site:{siteTitle:s,siteDescription:c,siteLocation:l,topic:u},selectedBlock:{clientId:g?.clientId,type:g?.type,name:g?.name},keywords:t("font")};p()&&(e.currentHandoffArea=h),r(ud.name,e)}),[r,p,h,g])},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))}},gd=hd;function md({styles:e=[],defaultStyle:t="photographic"}){return{name:"generate_image",description:"Generate a new image using AI.",parameters:{type:"object",properties:{clientId:{type:"string",description:"The clientId of the current selected block."},description:{type:"string",description:'The description of the new image. Do not include any text about replacing the image or something similar, only what the content of the image should be. For example, if the user request is "replace this image with a dog", the description should be "dog".'},style:{type:"string",description:`The style of an AI image. If the user does not specify a style for the AI image, default to ${t}`,enum:e}},required:["clientId","description","style"]},strict:!0}}const fd={name:"image",tools:e=>[md({styles:e.images?.styles,defaultStyle:e.images?.defaultStyle}),{name:"get_stock_image",description:"Get a new stock image.",parameters:{type:"object",properties:{clientId:{type:"string",description:"The clientId of the current selected block."},description:{type:"string",description:'The description of the new image. Do not include any text about replacing the image or something similar, only what the content of the image should be. For example, if the user request is "replace this image with a dog", the description should be "dog".'}},required:["clientId","description"]},strict:!0},{name:"generate_site_logo",description:"Generate a new site logo with AI.",parameters:{type:"object",properties:{description:{type:"string",description:"The description of the new site logo."}},required:["description"]},strict:!0},{name:"upload_site_logo",description:"Allow the user to upload a new site logo image."},...tt(e)?[]:[at(Ye.IMAGE)]]},yd=fd;function bd(){const{scrollToFirstBlockByName:e,findSiteLogoBlock:t,setBlockIsProcessing:n}=bs(),{setInputtedFiles:o,setLastCancelableAction:i}=(0,m.useDispatch)(Qa),{editEntityRecord:r}=(0,m.useDispatch)(Wr.store),{record:a,editedRecord:s}=(0,Wr.useEntityRecord)("root","site");return{uploadSiteLogo:async c=>{try{const l=t();return e("core/site-logo"),await(0,kc.uploadMedia)({filesList:[c],onError:({message:e})=>ra.error(e),onFileChange:([e])=>{l&&n(l,!0),e?.id&&(i({action:"upload_site_logo",originalId:(null!=s?s:a).site_logo}),o([]),r("root","site",void 0,{site_logo:e.id}),l&&n(l,!1))}}),l?(0,z.__)("I have updated the site logo.","big-sky"):(0,z.__)('I have updated the site logo! However, I notice neither the header nor footer contains a site logo.\n\nTo change the header/footer layouts, ask me to "**replace the header/footer section**".',"big-sky")}catch(e){return ra.error("Error:",e),(0,z.__)("I encountered an error while processing your request. Please try again.","big-sky")}},cancelUploadSiteLogo:e=>{r("root","site",void 0,{site_logo:e.originalId})}}}const vd={id:Ye.IMAGE,description:"Helps with all requests related to image and site logo generating and replacement.",instructions:(e={})=>function(e){const t=tt(e)?"":`User: "Make the background of my site more blue"\nAnalysis: This is not related to images and is not in the form of a question\nAction: ${it}\n\nUser: "Replace this"\nAnalysis: This could be related to images but the the selected block is not an image\nAction: ${it}`;return`\nYou are an expert website designer specializing in image replacement and optimization. Your primary goal is to help users customize their website images or route queries to appropriate assistance.\n\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Qe(e,["siteTitle","siteDescription","siteLocation","topic"])}\n</site_context>\n\n<selected_block_context>\n${Ze(e,["clientId","type"])}\n</selected_block_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${Ke}\n</language>\n\nInstructions:\n\n1. Analyze the user's input:\n   ${Xe}\n   a) Is it image-related?\n   b) If image-related:\n      - Is it a logo request?\n      - For non-logo requests:\n        * Note the selected block's clientId\n        * Identify the image description, if it is not provided use the site topic\n        * Determine if AI or stock image is requested (default to AI if unspecified)\n        * For AI images: note any style preferences (use default if unspecified)\n   c) Are all required parameters for the chosen tool present?\n   d) If not image-related, explain why it needs routing to another assistant\n   e) Determine if routing to other assistant is needed\n\n   Then, consider the context:\n   f) How does the request relate to the site context?\n   g) Is the request appropriate for the type of website described?\n\n   For image requests, make a decision:\n   h) If AI vs. stock is not specified, consider which would be more appropriate based on the context and request.\n\n   List out required parameters:\n   i) For each potential tool, list the required parameters and check if they're present in the user's request.\n\n2. Handle image-related requests:\n   For logo changes:\n   - If uploading own logo: Call 'upload_site_logo', do not follow up with your own message\n   - If generating a logo: Call 'generate_site_logo' with description\n   - If unclear: Ask if they want to generate a new logo or upload their own\n\n   For other images:\n   - For AI images: Call 'generate_image' with:\n     * clientId\n     * description (content only, no meta text)\n     * style (use default if unspecified)\n   - For stock images: Call 'get_stock_image' with:\n     * clientId\n     * description (content only, no meta text)\n\n   If information is missing:\n   - No description: Ask for details\n   - No block selected (for non-logo requests): Ask user to select an image\n   - Unclear if stock or AI is wanted: Ask for preference\n\n3. Handle non-image requests:\n   - ${nt}\n   ${et(e)}\n\n4. Special cases:\n   - If the request is image-related but there's no specific tool to handle it, ${ot}\n\n5. Examples:\n\nUser: "I want to change my logo"\nAnalysis: This is a logo request but unclear if user wants to upload or generate\nAction: Ask if they want to generate a new logo or upload their own\n\nUser: "Generate an AI logo for my coffee shop"\nAnalysis: This is a logo generation request with clear description\nAction: Call generate_site_logo tool with description "coffee shop logo"\n\nUser: "Replace with an AI image of mountains"\nAnalysis: AI image request with selected block and clear description\nAction: Call generate_image tool with clientId, "mountains", and default style\n\nUser: "I need a stock photo of a beach"\nAnalysis: Stock image request with selected block and clear description\nAction: Call get_stock_image tool with clientId and "beach"\n\nUser: "How do I optimize my images?"\nAnalysis: This is a question about images\nAction: ${ot}\n\n${t}\n\nUser: "Split this image into two images"\nAnalysis: This request is image related but there is no tool to handle it\nAction: ${ot}\n\n6. Restrictions:\n   - Only handle image and logo-related requests\n   - If the request is image or logo-related but there is no tool to handle it, ${ot}\n   - Follow routing rules strictly\n   - Never show analysis in output\n   - Immediately call appropriate tool or request necessary information\n   - Do not respond after calling the tool\n`}(e),tags:[Ye.IMAGE],toolkits:[yd],toolkitHook:function(){const{validateArguments:e}=function(){const{getBlock:e}=(0,m.useSelect)(y.store);return{validateArguments:t=>{if(!t?.clientId)throw new Error("Please select an image block and try again.");const n=e(t.clientId);if("core/image"!==n?.name)throw new Error("The selected block is not an image. Please select an image and try again.");return!0}}}(),{createToolCallback:t,withPendingToolCallback:n}=ts(),{changeAssistant:o}=as(),{agentSay:i}=Ce(),{setCallbacks:a,setContext:s}=Pe(),{generateImage:c}=function(){const{generateImageWithAI:e}=Wc(),{setSiteMetadata:t}=ms(),{getBlock:n}=(0,m.useSelect)(y.store),{setBlockBeforeChanges:o}=(0,m.useDispatch)(Qa),{setBlockIsProcessing:i}=bs();return{generateImage:async r=>{const{clientId:a,description:s,style:c}=r,l=n(a);o(l),t({defaultImageStyle:c}),i(l,!0);const u=await e({description:s,style:c,block:l});return i(l,!1),u}}}(),{getStockImage:l}=function(){const{getNewStockImage:e}=Wc(),{getBlock:t}=(0,m.useSelect)(y.store),{setBlockBeforeChanges:n}=(0,m.useDispatch)(Qa),{setBlockIsProcessing:o}=bs();return{getStockImage:async i=>{const{clientId:r,description:a}=i,s=t(r);n(s),o(s,!0);const c=await e({topic:a,block:s});return o(s,!1),c}}}(),{generateSiteLogo:u}=function(){const{generateLogoWithAI:e}=Wc(),{getBlock:t}=(0,m.useSelect)(y.store),{setBlockIsProcessing:n,findSiteLogoBlock:o}=bs(),{setBlockBeforeChanges:i}=(0,m.useDispatch)(Qa);return{generateSiteLogo:async r=>{const a=o();if(!a)return{error:"No site logo block found"};i(a),n(t(a.clientId),!0);const s=await e({description:r,block:a});return n(t(a.clientId),!1),s}}}(),{uploadSiteLogo:d}=bd(),{defaultImageStyle:p,topic:h,siteTitle:g,siteDescription:b,siteLocation:v}=ms().getSiteMetadata(),{selectedBlock:w,getInputtedFiles:k,inputtedFiles:_,onInputtedFilesAction:x}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store),{getInputtedFiles:n,getOnInputtedFilesAction:o}=e(Qa);return{selectedBlock:t(),getInputtedFiles:n,inputtedFiles:n(),onInputtedFilesAction:o()}})),{setShowThread:C,setOnInputtedFilesAction:S,setInputtedFiles:E,setToolComponent:I,setIsToolContainerVisible:T}=(0,m.useDispatch)(Qa);(0,f.useEffect)((()=>{a(yd.name,{generate_image:t({name:"generate_image",action:async e=>{i(await c(e))},validator:t=>e(t),failValidatorAction:(e,t)=>i(t.message),closeChatWhenDone:()=>!0}),get_stock_image:t({name:"get_stock_image",action:async e=>{i(await l(e))},validator:t=>e(t),failValidatorAction:(e,t)=>i(t.message),closeChatWhenDone:()=>!0}),generate_site_logo:t({name:"generate_site_logo",action:async e=>{i(await u(e))},closeChatWhenDone:()=>!0}),upload_site_logo:t({name:"upload_site_logo",action:async()=>{const e=k()?.[0];e?A():(S({action:"upload_site_logo"}),C(!0),i((0,z.__)("Drag your logo into this chat box and I'll add it to your site.","big-sky")))},closeChatWhenDone:()=>!1}),change_assistant:t({name:"change_assistant",action:e=>{C(!0),o(e)},closeChatWhenDone:()=>!1})})}),[a]),(0,f.useEffect)((()=>{const e={images:{styles:Jl,defaultStyle:p},site:{siteTitle:g,siteDescription:b,siteLocation:v,topic:h},selectedBlock:{clientId:w?.clientId,type:w?.type,name:w?.name}};w&&(e.selectedBlock={type:w?.name,clientId:w?.clientId}),s(yd.name,e)}),[s,w]);const A=(0,f.useCallback)((()=>{const e=k()?.[0];var t;t=e.name,new RegExp(`\\.(${Vc.join("|")})$`,"i").test(t)?(S({}),n((async()=>{const t=await d(e.file);I((0,r.createElement)(Za,{notice:t,type:"info",delay:-1})),T(!0)}))()):(S({action:"upload_site_logo"}),E([]),i((0,z.sprintf)(
// Translators: %s is a comma-separated list of allowed file types.
// Translators: %s is a comma-separated list of allowed file types.
(0,z.__)("Please provide a valid image file. Allowed file types: %s","big-sky"),Vc.join(", "))))}),[k,S,n,d,I,T,i,E]);(0,f.useEffect)((()=>{_?.length&&x?.action&&"upload_site_logo"===x.action&&A()}),[_,x,A])},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))}},wd=vd;function kd(e=[]){return{name:"add_page",description:`Add a new page based on the user's description.\n\t\t\tCategories define the type of content blocks that will be used for page layout.\n\t\t\tDo not use this tool if the user requests a new section or pattern.\n\t\t\tPlease refer to the following guidance for the categories to choose for the type of page:\n\t\t\t${JSON.stringify({about:["intro","about","contact"],contact:["contact","newsletter"],events:["intro","events","newsletter"],menu:["about","menu"],pricing:["intro","pricing","testimonials"],gallery:["about","gallery"],blog:["intro","posts","about"],services:["about","services"],other:["intro","about"]})}`,parameters:{type:"object",properties:{title:{type:"string",description:"The title of the page that will be displayed to the users."},categories:{type:"array",description:"An ordered list of page sections. The tool will use these categories to generate the structure of the page.",items:{type:"object",additionalProperties:!1,required:["slug","reason"],properties:{slug:{type:"string",description:"The slug identifying the specific category of the page section.",enum:e},reason:{type:"string",description:"A brief explanation for choosing this category. This helps guide content creation by clarifying what type of content or information would fit well in this section based on its purpose."}}}}},required:["title","categories"]},strict:!0}}function _d(e=[]){const t=e.find((e=>e.isHomePage)),n=e.find((e=>e.isCurrentPage));return{name:"navigate_to_page",description:`Navigate to and edit a page based on user input.\n\t\tHome page: "${t?.title}" (ID: ${t?.id})\n\t\tCurrent page: "${n?.title}" (ID: ${n?.id})\n\t\tIf already on requested page, respond: "You're already on the page."\n\t\tFor unclear requests or non-existent pages, ask for clarification.\n\t\tIf page doesn't exist, offer to create a new one.\n\t\tDo not return any content in your response.`,parameters:{type:"object",properties:{page:{type:"string",description:"The title:postId of the page.",enum:[...e.map((e=>`${e.title}:${e.id}`))]},goHome:{type:"boolean",description:"Whether the user wants to navigate to the homepage in order to edit it."}},required:["page","goHome"]},additionalProperties:!1,strict:!0}}const xd={name:"page",tools:e=>[kd(e.categories),_d(e.pages),...tt(e)?[]:[at(Ye.PAGE)]]},Cd=xd,Sd={id:Ye.PAGE,description:"Helps with all requests related to adding a new page, and navigating between pages.",instructions:(e={})=>function(e){const t=e.pages?e.pages.map((e=>` - ${e.title}`)).join("\n"):"No Pages",n=tt(e)?"":`User: "Make the font of my site more readable"\nAnalysis: This is not related to page management and is not in the form of a question\nAction: ${it}\n\nUser: "Add an about section"\nAnalysis: This is not a page request, it's about adding an individual section or pattern to the page.\nAction: ${it}\n\nUser: "Insert a Gallery"\nAnalysis: This is not a page request, it's about inserting an individual section or pattern to the page.\nAction: ${it}`;return`\nYou are an expert website page manager, specializing in page creation, navigation, and structure optimization. Your primary goal is to help users effectively manage their website pages or route their queries to appropriate assistance.\n\nHere is the current context, use this to inform your responses:\n\n<site_context>\n${Qe(e,["siteTitle","siteDescription","topic"])}\n</site_context>\n\n<selected_block_context>\n${Ze(e,["clientId","type"])}\n</selected_block_context>\n\nHere is a list of the pages that exist on this site:\n\n<site_pages>\n${t}\n</site_pages>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${Ke}\n</language>\n\nInstructions:\n\n1. Analyze the user's input:\n   ${Xe}\n   a) List out each relevant piece of information from the user's request.\n   b) Determine if the request is page-related or not.\n   c) If page-related:\n      - Is it a creation or navigation request?\n      - Identify the page type and required sections based on pageGuidance.\n      - List the specific sections that would be included in this page type.\n   d) If not page-related:\n      - Is it a question or another type of request?\n      - Categorize the type of assistance needed (e.g., general help, technical support, content creation).\n   e) List potential tool calls that might be appropriate for this request:\n      - For each potential tool call, list out the required parameters.\n      - Note whether each required parameter is present in the user's input or needs to be inferred/requested.\n   f) If any aspect of the request is ambiguous, list potential clarification questions you might need to ask the user.\n   g) Determine if routing to other assistant is needed\n\n2. Handle requests based on your analysis:\n\n   For page-related requests:\n   - If it's a new page request, call the add_page tool with the appropriate title and categories.\n   - For navigation requests, call the navigate_to_page tool.\n   - Use pageGuidance to determine required sections for new pages.\n   - If the page type is unclear, ask the user for clarification.\n   - If a requested page doesn't exist, offer to create it.\n\n   For non-page-related requests (including pattern/section-related requests):\n   - ${nt}\n   ${et(e)}\n\n3. Special cases:\n   - If the request is page-related but there's no specific tool to handle it, ${ot}\n\n4. Examples:\n\nUser: "Create an About page"\nAnalysis: Page creation request for About type\nAction: Call add_page with categories from pageGuidance.about\n\nUser: "Take me to the Contact page"\nAnalysis: Navigation request\nAction: Call navigate_to_page for Contact page\n\nUser: "How do I install the WooCommerce plugin?"\nAnalysis: This is not related to page management and is in the form of a question\nAction: ${ot}\n\n${n}\n\n5. Restrictions:\n   - Only handle page creation and navigation\n   - Follow pageGuidance structure strictly\n   - Don't create duplicate pages\n   - Don't display analysis in output\n\nAlways call appropriate tools immediately or request clarification based on analysis.\n`}(e),tags:[Ye.PAGE],toolkits:[Cd],toolkitHook:()=>{const{createToolCallback:e}=ts(),{changeAssistant:t}=as(),{agentSay:n}=Ce(),{setCallbacks:o,setContext:i}=Pe(),{saveAndGoToPage:a}=il(),{addPage:s}=function(){const{getSelectedBlock:e}=(0,m.useSelect)(y.store),{updateBlockAttributes:t}=(0,m.useDispatch)(y.store),{createPage:n}=il(),{syncSiteMetadataPatterns:o}=tl(),{getSiteMetadata:i}=ms(),r=(0,f.useCallback)((async r=>{const{topic:a,siteDescription:s,siteLocation:c}=i(),l=e(),u=["core/button"].includes(l?.name),{title:d,categories:p}=r,{newPage:h,rootBlocks:g}=await n(d,p,a,s,c);return o({ids:[h.id],blocks:[g],persist:!0}),u&&t(l.clientId,{url:`/?page_id=${h.id}`}),{title:d,categories:p,pageId:h.id}}),[n,e,i,o,t]);return{addPage:r}}(),{navigateToPage:c}={navigateToPage:async e=>{const{page:t,goHome:n}=e;return{pageTitle:t.split(":")[0],postId:parseInt(t.split(":")[1]),goHome:n}}},{getPages:l}=il(),{getSiteMetadata:u}=ms(),{siteTitle:d,siteDescription:p,siteLocation:h,topic:g}=u(),{setShowThread:b,setChatComponents:v,setDockView:w,setNewPageId:k}=(0,m.useDispatch)(Qa),{selectedBlock:_}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{selectedBlock:t()}}));(0,f.useEffect)((()=>{o(Cd.name,{add_page:e({name:"add_page",action:async e=>{n((0,z.sprintf)(
// Translators: %s is the page title.
// Translators: %s is the page title.
(0,z.__)("Generating the %s page…","big-sky"),e.title));const{title:t,categories:o,pageId:i}=await s(e),c=o.map((e=>e.slug));n((0,z.sprintf)(/* translators: %1$s: page title, %2$s: list of category slugs */ /* translators: %1$s: page title, %2$s: list of category slugs */
(0,z.__)('A new page titled "%1$s" has been generated with "%2$s" sections.',"big-sky"),t,c.join(", ")));const l={actions:[(0,z.__)("Save and take me there","big-sky")]};v([(0,r.createElement)(Wl,{key:"suggestions",args:l,respond:async()=>{a(i),w(Y.MENUS),v([]),k(i)}})])},closeChatWhenDone:()=>!1}),navigate_to_page:e({name:"navigate_to_page",action:async e=>{const{pageTitle:t,postId:o,goHome:i}=await c(e);n((0,z.sprintf)(/* translators: %s: page title */ /* translators: %s: page title */
(0,z.__)("Found the %s page. Taking you there…","big-sky"),t)),await Wa(W.assistantMessageThinkingTime),await a(o,i),w(Y.MENUS)},closeChatWhenDone:()=>!1}),change_assistant:e({name:"change_assistant",action:e=>{b(!0),t(e)},closeChatWhenDone:()=>!1})})}),[o]),(0,f.useEffect)((()=>{const e={site:{siteTitle:d,siteDescription:p,siteLocation:h,topic:g},selectedBlock:{clientId:_?.clientId,type:_?.type,name:_?.name},categories:ha.map((e=>e.slug)),pages:l()};i(Cd.name,e)}),[l,i,_])},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))}},Ed=Sd,Id=[{slug:["what-can-i-do"],description:"An overview of all available customization and editing features for the site.",answer:`**${(0,z.__)("Here's a list of things I can help you with:","big-sky")}**\n- ${(0,z.__)("Updating text","big-sky")}\n- ${(0,z.__)("Updating an image or logo","big-sky")}\n- ${(0,z.__)("Changing your site colors","big-sky")}\n- ${(0,z.__)("Changing your site fonts","big-sky")}\n- ${(0,z.__)("Changing your site layout","big-sky")}\n- ${(0,z.__)("Adding or replacing a section","big-sky")}\n- ${(0,z.__)("Adding a new page","big-sky")}\n- ${(0,z.__)("Adding or updating a social link","big-sky")}\n- ${(0,z.__)("Updating your address","big-sky")}\n\n ${(0,z.__)("Also feel free to click around the editor and see the services I can provide!","big-sky")}`},{slug:["update-address"],description:"Instructions for updating the site address and associated map locations.",answer:`**${(0,z.__)("To update your address:","big-sky")}**\n1. ${(0,z.__)('Ask me to "Update my address to {address}"',"big-sky")}\n2. ${(0,z.__)("I'll update the address on your site and any maps that use it","big-sky")}`},{slug:["add-social-link"],description:"Guidance on adding new social media links to the site header or footer.",answer:`**${(0,z.__)("If you'd like me to add a social link to your site:","big-sky")}**\n1. ${(0,z.__)('Ask me to "Add a social link for my {social network url}"',"big-sky")}\n2. ${(0,z.__)("I'll add the new social link to the header and/or footer of your site","big-sky")}\n\n**${(0,z.__)("If you'd like to do this manually:","big-sky")}**\n1. ${(0,z.__)("Click on the social links block in the editor","big-sky")}\n2. ${(0,z.__)('Click the "+" button',"big-sky")}\n3. ${(0,z.__)("Select or browse for your desired social network","big-sky")}\n4. ${(0,z.__)("Click on the added social link and enter your URL","big-sky")}`},{slug:["update-social-link"],description:"Steps for updating existing social media links in the site header or footer.",answer:`**${(0,z.__)("If you'd like me to update a social link on your site:","big-sky")}**\n1. ${(0,z.__)('Ask me to "Update the {social network} social link to {social network url}"',"big-sky")}\n2. ${(0,z.__)("I'll update the corresponding social links in the header and/or footer of your site","big-sky")}\n\n**${(0,z.__)("If you'd like to do this manually:","big-sky")}**\n1. ${(0,z.__)("Click on the social link you want to update in the editor","big-sky")}\n2. ${(0,z.__)("Enter your URL","big-sky")}`},{slug:["color"],description:"Instructions for customizing the site color scheme and palette.",answer:`**${(0,z.__)("If you'd like me to help you update your site colors:","big-sky")}**\n1. ${(0,z.__)('Ask me to "Change my site colors"',"big-sky")}\n2. ${(0,z.__)('Provide me with a list of specific colors you\'d like to use, or a type of color scheme you\'d like to use (e.g. "pastel", "vibrant", "muted", etc.)',"big-sky")}\n3. ${(0,z.__)("I'll provide you a list of color palettes to choose from","big-sky")}\n\n**${(0,z.__)("If you'd like to do this manually:","big-sky")}**\n1. ${(0,z.__)('Click on the "Styles" button in the top toolbar',"big-sky")}\n2. ${(0,z.__)('Click on "Browse styles"',"big-sky")}\n3. ${(0,z.__)("Select from one of the predefined color palettes","big-sky")}`},{slug:["contact-form"],description:"Help with modifying contact form fields and requirements.",answer:`**${(0,z.__)("Here are some examples you can give me to update the contact form on your site:","big-sky")}**\n- ${(0,z.__)("add a phone number field","big-sky")}\n- ${(0,z.__)("make the message field required","big-sky")}\n- ${(0,z.__)("remove the email field","big-sky")}`},{slug:["font"],description:"Guidance for updating and customizing site typography scheme and font choices.",answer:`**${(0,z.__)("If you'd like me to help you update your site fonts:","big-sky")}**\n1. ${(0,z.__)('Ask me to "Change my site fonts"',"big-sky")}\n2. ${(0,z.__)('Provide me with a list of specific fonts you\'d like to use, or a type of font scheme you\'d like to use (e.g. "serif", "sans-serif", "modern", etc.)',"big-sky")}\n3. ${(0,z.__)("I'll provide you a list of font sets to choose from","big-sky")}\n\n**${(0,z.__)("If you'd like to do this manually:","big-sky")}**\n1. ${(0,z.__)('Click on the "Styles" button in the top toolbar',"big-sky")}\n2. ${(0,z.__)('Click on "Browse styles"',"big-sky")}\n3. ${(0,z.__)("Select from one of the predefined font sets","big-sky")}`},{slug:["image"],description:"Steps for updating or replacing and image or images using AI generation or manual uploads.",answer:`**${(0,z.__)("If you'd like me to help you update an image:","big-sky")}**\n1. ${(0,z.__)("Select an image in the editor","big-sky")}\n2. ${(0,z.__)('Click "Regenerate"',"big-sky")}\n3. ${(0,z.__)('Ask me to "Generate an image using AI" or "Find an image from stock"',"big-sky")}\n\n**${(0,z.__)("If you'd like to do this manually:","big-sky")}**\n- ${(0,z.__)("Drag any image on top of one in the editor to replace it","big-sky")}\n- ${(0,z.__)('Select an image and click "Replace" in the top toolbar',"big-sky")}`},{slug:["logo"],description:"Instructions for updating the site logo using custom uploads or AI generation.",answer:`**${(0,z.__)("If you already have a logo image you want to use:","big-sky")}**\n1. ${(0,z.__)('Ask me to "update the logo"',"big-sky")}\n2. ${(0,z.__)("Drop your logo image into the chat box and I'll do the rest!","big-sky")}\n\n**${(0,z.__)("If you want me to generate a new logo for you:","big-sky")}**\n1. ${(0,z.__)("Select the logo image in the editor","big-sky")}\n2. ${(0,z.__)('Click "Regenerate"',"big-sky")}\n3. ${(0,z.__)('Click "Make a logo using AI"',"big-sky")}`},{slug:["new-page-design"],description:'Intructions about new page designs, eg. "how do I see alternative page designs?"',answer:`**${(0,z.__)("To update your site layout:","big-sky")}**\n1. ${(0,z.__)('Ask me to "Change my site layout"',"big-sky")}\n2. ${(0,z.__)("I'll provide you with a list of layouts to choose from","big-sky")}\n3. ${(0,z.__)("To generate a new layout, click on the last empty layout in the list","big-sky")}`},{slug:["dimensions"],description:'Intructions about changing the dimensions of a block using padding, margins and spacing"',answer:`${(0,z.__)("I can't help with adjusting spacing yet, but you can adjust this yourself:","big-sky")}\n\n ${Td=(0,z.__)("Learn about editing block spacing","big-sky"),`[${Td}](https://wordpress.com/support/block-dimensions-settings/)`}`},{slug:["edit-text"],description:"Instructions for modifying text content and bold and italic styling.",answer:`**${(0,z.__)("To update text on your site:","big-sky")}**\n1. ${(0,z.__)("Click on the text you want to change","big-sky")}\n2. ${(0,z.__)("Start typing to make changes","big-sky")}\n3. ${(0,z.__)("You'll find some tools in the top toolbar to change style and alignment","big-sky")}\n4. ${(0,z.__)("You can also ask me to generate or rewrite text","big-sky")}`},{slug:["add-section"],description:"Steps for adding new patterns and sections to the site layout.",answer:`**${(0,z.__)("To add a section to your site:","big-sky")}**\n1. ${(0,z.__)("Select a section in the editor","big-sky")}\n2. ${(0,z.__)('Click "Add Pattern"',"big-sky")}\n3. ${(0,z.__)('Specify which section you would like to add by either selecting one from the list or telling me the type of section (e.g. "menu", "services", "about", etc.)',"big-sky")}\n4. ${(0,z.__)("You can also specify if you want the new section added before or after the one selected","big-sky")}`},{slug:["replace-section"],description:"Guide for replacing existing content sections and patterns with new layouts.",answer:`**${(0,z.__)("To replace a section on your site:","big-sky")}**\n1. ${(0,z.__)("Select a section in the editor","big-sky")}\n2. ${(0,z.__)('Ask me to "Replace this section"',"big-sky")}\n3. ${(0,z.__)("I'll provide you with a list of different section options you can choose from","big-sky")}`},{slug:["domain","seo","pricing","wordpress.com","other"],description:"Fallback entries for domain, SEO, pricing and other WordPress.com related queries."}];var Td;const Ad=Id.flatMap((e=>e.slug)),Pd={name:"help",tools:e=>{const t=[{name:"ask_wordpress_expert",description:"\n\t\t\tClassify the user question into one of the given answer slugs.\n\t\t\tUse this tool for all WordPress (both WordPress.com and self-hosted) questions.\n\t\t\t",parameters:{type:"object",properties:{question:{type:"string",description:"The user question to classify."},slug:{type:"string",description:"The slug of the answer to return.",enum:Ad}},required:["question","slug"]},strict:!0}];return"help"===e?.currentHandoffArea||e?.fromAssistantId||t.push(at(Ye.HELP)),t}},Nd=Pd;let Od=0;const Rd={id:Ye.HELP,description:"An assistant that helps answer questions about WordPress, website building, and providing technical guidance.",instructions:e=>function(e){const t=e?.fromAssistantId,n=t?"":`User: "Build me a landing page"\n         Analysis: This is an instruction and is not in the form of a question\n         Action: ${it}\n\n         User: "Show me more yellow color palettes"\n         Analysis: This is an instruction and is not in the form of a question\n         Action: ${it}\n\n         User: "Update social media links"\n         Analysis: This is an instruction and is not in the form of a question\n         Action: ${it}\n\n         User: "Change the colors of the buttons on my site"\n         Analysis: This is an instruction and is not in the form of a question\n         Action: ${it}`,o=t?"Always rephrase the user request as a question and call the 'ask_wordpress_expert' tool":`If user request is not a question, ignore all other instructions and call 'change_assistant' with the toAssistantId '${Ye.ROUTER}`;return`\nYou are a WordPress expert at Automattic specializing in answering questions about WordPress, website building, and technical guidance.\n\n<site_context>\n${Qe(e,["siteTitle","siteDescription","siteLocation","topic"])}\n</site_context>\n\n<selected_block_context>\n${Ze(e,["clientId","type"])}\n</selected_block_context>\n\nHere is the language you should use for responses unless explicitly instructed otherwise:\n\n<language>\n${Ke}\n</language>\n\nInstructions:\n\n1. Analyze User Input and any additional System Messages:\n   ${Xe}\n   a) Determine if this is a help request forwarded from another assistant\n   b) Determine if input contains a question mark, or question words\n   c) For questions and requests from other assistants, identify the specific WordPress topic/area\n   d) For non-questions, verify that they are not a question\n   e) Note any specific WordPress components, features, or functionality mentioned\n\n2. Handle Invalid Requests:\n   - ${rt}\n\n3. Handle Non Questions:\n   - ${o}\n\n4. Handle Questions:\n   - If the request has been forwarded from another assistant always call 'ask_wordpress_expert' tool, do not forward it to the router assistant\n   - If you are not able to determine a WordPress or website topic/area you can ask the user for clarification\n   - Always call 'ask_wordpress_expert' tool when:\n     - The request has been forwarded from another assistant and make sure to phrase the user request as a question\n     - Contains a question mark\n     - Starts with question words: who, what, where, when, why, how, can, could, should, would, will, do, does, did, is, are, was, were\n   - Include all relevant context and specific components mentioned\n   - Always call 'ask_wordpress_expert' tool never try to answer the question yourself\n   - Never pretend to have completed the requested task yourself\n\n5. Choose a slug:\n   - Classify the user question into one of the given answer slugs \n   - When choosing a slug always use the description to help pick the most relevant slug\n   - If the answer slug cannot be inferred from the user question, try using the selected block context\n   - If the user question cannot be classified, set the slug value to 'other'\n\n6. Answer slugs\n${Id.map((e=>`- slug: ${e.slug}, description: ${e.description}`)).join("\n")}\n\n7. Examples:\n\nUser: "How do I customize my header?"\nAnalysis: Question about header customization\nAction: Call 'ask_wordpress_expert' tool with context about header modification\n\nUser: "What's the difference between pages and posts?"\nAnalysis: Question about WordPress content types\nAction: Call 'ask_wordpress_expert' tool with context about content management\n\nUser: "Can you replace the contact section"\nAnalysis: Question about section or pattern replacement\nAction: Call 'ask_wordpress_expert' tool with context about section or pattern replacement\n\n${n}\n8. Restrictions:\n   - Only answer WordPress-related questions\n   - Never rephrase the user request yourself to make it a question\n   - Never attempt to handle non-question yourself unless they are forwarded from another assistant; always use the 'change_assistant' tool for these.\n   - Don't display analysis in output\n   - Stick to WordPress expertise scope\n\nRemember to call appropriate tool immediately based on analysis, without showing the analysis process.\n`}(e),tags:[Ye.HELP],toolkits:[Nd],toolkitHook:function(){const{createToolCallback:e}=ts(),{changeAssistant:t}=as(),{agentSay:n}=Ce(),{setCallbacks:o,setContext:i}=Pe(),{askWordPressExpert:r}=function(){const{ask_odie:e}=function(){const{isDevMode:e,sessionId:t}=(0,m.useSelect)((e=>({isDevMode:e(Qa).getIsDevMode(),sessionId:e(Qa).getSessionId()}))),n=async(o,i=!1)=>{let r=(0,z.__)("I don't know the answer to that question.","big-sky");const a=await la(!i);if(a){const s="https://public-api.wordpress.com/wpcom/v2/odie/chat/wpcom-chat-bigsky"+(Od?`/${Od}`:"");try{const n=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${a.token}`,"Content-Type":"application/json"},body:JSON.stringify({message:o.question,source:"big-sky",source_user:t,test:e})}),i=await n.json(),c=i?.messages?.[0];c?.content&&(Od=i.chat_id,r=c.content,c?.context?.sources)&&(r+=Object.values(c.context.sources.reduce(((e,t)=>(e[t.url]||(e[t.url]=t),e)),{})).map((e=>`\n\n- [${e.title}](${e.url})`)).join(""))}catch(e){if(!i)return n(o,!0);ra.error("Error calling WordPress Expert API: ",e)}}return r};return{ask_odie:n}}(),{clearMessages:t}=Ce(),{setAssistant:n}=(0,m.useDispatch)(Qa);return{askWordPressExpert:async o=>{t(G.SYSTEM),n(Ye.ROUTER);const i=Id.find((e=>e.slug.includes(o.slug)));return i&&i?.answer?i?.answer:e(o)}}}(),{validateArguments:a}={validateArguments:e=>!!e?.question},{setShowThread:s}=(0,m.useDispatch)(Qa),{getSiteMetadata:c}=ms(),{siteTitle:l,siteDescription:u,topic:d,siteLocation:p}=c(),{selectedBlock:h}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{selectedBlock:t()}}));(0,f.useEffect)((()=>{o(Nd.name,{ask_wordpress_expert:e({name:"ask_wordpress_expert",action:async e=>{const t=await r(e);n(t)},validator:e=>a(e),failValidatorAction:()=>n((0,z.__)("Please provide a question to ask the WordPress expert.","big-sky")),closeChatWhenDone:()=>!1}),change_assistant:e({name:"change_assistant",action:e=>{s(!0),t(e)},closeChatWhenDone:()=>!1})})}),[o]),(0,f.useEffect)((()=>{i(Nd.name,{site:{siteTitle:l,siteDescription:u,siteLocation:p,topic:d},selectedBlock:{clientId:h?.clientId,type:h?.type,name:h?.name}})}),[i,h])},onStart:(e,t=()=>{},n=null)=>{n&&(t(),e.agentSay(n))}};[cs,Il,Xl,Ru,nd,cd,gd,wd,Ed,Rd].forEach((function(e){ns.set(e.id,e),os.push(e)}));const Md=os;function Ld(){return(0,r.createElement)(r.Fragment,null)}const Dd=()=>{const[e,t]=(0,f.useState)(!1),{resetSite:n}=rl();return(0,r.createElement)("button",{className:"button button-primary",disabled:e,onClick:async()=>{t(!0),n()}},e?"Resetting...":"Reset remote site metadata")},Bd=()=>{const{isStoringConversation:e,setStoreConversation:t}=Ce();return(0,r.createElement)(Ul.ToggleControl,{label:"Store conversation in OpenAI Evals",checked:e,onChange:e=>{t(e)}})},Fd=()=>{const[e,t]=(0,f.useState)((()=>"true"===window.localStorage.getItem("isGeneratingPatterns")));return(0,r.createElement)(Ul.ToggleControl,{label:"Generate Patterns",checked:e,onChange:e=>{(e=>{t(e),window.localStorage.setItem("isGeneratingPatterns",e)})(e)}})},jd=({setShowDebug:e})=>{const{buildSiteTask:t}=Sl(),[n,o]=(0,f.useState)(null),{isEditorIframeLoaded:i}=(0,m.useSelect)((e=>({isEditorIframeLoaded:e(Qa).getIsEditorIframeLoaded()})));return(0,f.useEffect)((()=>{}),[]),(0,r.createElement)("button",{className:"button button-primary",onClick:async()=>{t(n,!0),e(!1)},disabled:!n||!i},"Quick Onboarding")},Ud=()=>{const e=ms().getSiteMetadata(),t={colors:[e.currentColor],fonts:[e.currentFont]};return(0,r.createElement)("button",{className:"button button-primary",onClick:async()=>{localStorage.setItem("siteMeta",JSON.stringify(e)),localStorage.setItem("buildDesigns",JSON.stringify(t))}},"Save Current Build")},qd=({setShowModifyBuildForm:e,setShowDebug:t})=>{const{resetCachedContent:n}=(0,m.useDispatch)(Qa),{buildSiteTask:o}=Sl(),i=(0,f.useRef)();return(0,r.createElement)("div",{ref:i},(0,r.createElement)("h2",null,"Modify Build"),(0,r.createElement)(Vd,{editable:!0}),(0,r.createElement)("div",{className:"big-sky__ai-debug__checkboxes"},(0,r.createElement)("div",null,(0,r.createElement)("input",{type:"checkbox",name:"resetCachedContent",defaultChecked:!1}),(0,r.createElement)("label",{htmlFor:"resetCachedContent"},"Reset cached content")),(0,r.createElement)("div",null,(0,r.createElement)("input",{type:"checkbox",name:"rebuildSite",defaultChecked:!0}),(0,r.createElement)("label",{htmlFor:"rebuildSite"},"Rebuild site"))),(0,r.createElement)("div",{className:"big-sky__ai-debug__buttons"},(0,r.createElement)("button",{className:"button button-primary",onClick:()=>{const e=(()=>{const e=i.current,t={siteType:e.querySelector('[name="siteType"]').value,siteTitle:e.querySelector('[name="siteTitle"]').value,siteDescription:e.querySelector('[name="siteDescription"]').value,topic:e.querySelector('[name="topic"]').value,currentColor:e.querySelector('[name="currentColor"]').value,currentFont:e.querySelector('[name="currentFont"]').value,defaultImageStyle:e.querySelector('[name="defaultImageStyle"]').value,siteLocation:{name:e.querySelector('[name="locationName"]').value},patterns:Array.from(e.querySelectorAll('[name="pattern"]')).map((e=>({id:parseInt(e.value),category:e.options[e.selectedIndex].dataset.category})))},n={colors:[t.currentColor],fonts:[t.currentFont]};return localStorage.setItem("siteMeta",JSON.stringify(t)),localStorage.setItem("buildDesigns",JSON.stringify(n)),t})();i.current.querySelector('[name="resetCachedContent"]').checked&&n(),i.current.querySelector('[name="rebuildSite"]').checked&&(o(e,!0),t(!1))}},"Save"),(0,r.createElement)("button",{className:"button",onClick:()=>e(!1)},"Close")))},$d=({setShowModifyBuildForm:e})=>(0,r.createElement)("button",{className:"button",onClick:async()=>{e(!0)}},"Modify Build");function Hd({setShowDebug:e}){const[t,n]=(0,f.useState)(!1),{saveEntityRecord:o}=(0,m.useDispatch)(Wr.store),{isOnboarded:i}=ms().getSiteMetadata(),{sessionId:a,chatUsage:s,chat35Usage:c,anthropicUsage:l,isBuildingSite:u,isHandoff:d}=(0,m.useSelect)((e=>({chatUsage:e(Qa).getOpenAIChatUsage(),chat35Usage:e(Qa).getOpenAIChat35Usage(),anthropicUsage:e(Qa).getAnthropicUsage(),sessionId:e(Qa).getSessionId(),isBuildingSite:e(Qa).getIsBuildingSite(),isHandoff:e(Qa).getIsHandoff()})));return(0,r.createElement)(Ul.Popover,{className:"big-sky__ai-debug"},t?(0,r.createElement)(qd,{setShowModifyBuildForm:n,setShowDebug:e}):(0,r.createElement)(r.Fragment,null,(0,r.createElement)("h2",null,"Site Data"),(0,r.createElement)(Vd,null),(0,r.createElement)("h2",null,"Model Usage"),(0,r.createElement)("table",null,(0,r.createElement)("thead",null,(0,r.createElement)("tr",null,(0,r.createElement)("th",null),(0,r.createElement)("th",null,"Prompt"),(0,r.createElement)("th",null,"Completion"),(0,r.createElement)("th",null,"Total"),(0,r.createElement)("th",null,"Reqs"),(0,r.createElement)("th",null,"Cost"))),(0,r.createElement)("tbody",null,(0,r.createElement)(zd,{usageType:"GPT 4",usage:s}),(0,r.createElement)(zd,{usageType:"GPT 3.5",usage:c}),(0,r.createElement)(zd,{usageType:"Claude 3",usage:{promptTokens:l?.inputTokens,completionTokens:l?.outputTokens,totalTokens:l?.totalTokens,totalRequests:l?.totalRequests,estimatedCost:l?.estimatedCost}}))),(0,r.createElement)(r.Fragment,null,(0,r.createElement)("h2",null,"Tools"),(0,r.createElement)(Wd,null)),(0,r.createElement)("div",{className:"big-sky__ai-debug__buttons"},(0,r.createElement)(Bd,null),(0,r.createElement)(Fd,null),(0,r.createElement)(Dd,null),!i&&(0,r.createElement)(jd,{setShowDebug:e}),i&&(d||!u)&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ud,null),(0,r.createElement)($d,{setShowModifyBuildForm:n})),window?.bigSkyInitialState?.lastPayload&&(0,r.createElement)("button",{className:"button",onClick:async()=>{(await o("root","site",{big_sky_last_site_design_payload:JSON.stringify(window.bigSkyInitialState.lastPayload)})).big_sky_last_site_design_payload&&alert("Payload saved. Now you can run evals with npm run evals")}},"Store Last Payload"),a&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("a",{href:`https://mc.a8c.com/big-sky/session/?session_uuid=${a}`,target:"_blank",rel:"noreferrer",className:"button"},"Session Log")))))}function zd({usageType:e,usage:t}){return(0,r.createElement)("tr",null,(0,r.createElement)("td",null,e),(0,r.createElement)("td",null,t?.promptTokens||0),(0,r.createElement)("td",null,t?.completionTokens||0),(0,r.createElement)("td",null,t?.totalTokens||0),(0,r.createElement)("td",null,t?.totalRequests||0),(0,r.createElement)("td",null,"$",(t?.estimatedCost||0).toFixed(2)))}function Gd({paletteColors:e}){return(0,r.createElement)(r.Fragment,null,e.map((({color:e,slug:t})=>(0,r.createElement)("span",{className:"big-sky__ai-debug__swatch",key:t,style:{backgroundColor:e}}))))}function Vd({editable:e=!1}){var t;const{currentColor:n,currentFont:o,siteType:i,topic:a,siteDescription:s,siteLocation:c,siteTitle:l,defaultImageStyle:u,patterns:d,colorRequest:p}=ms().getSiteMetadata(),{remotePatterns:h}=(0,m.useSelect)((e=>{const t=e(Qa),n=t.getUserLocale();return{remotePatterns:t.getRemotePatterns(n)}})),{currentPostId:f}=(0,m.useSelect)((e=>({currentPostId:e(g.store).getCurrentPostId()})));let y;y=Array.isArray(d)?d:d[f]||[];const{getColorVariations:b,getColorVariationByTitle:v,getFontVariations:w}=Js(),k=v(n),_=null!==(t=k?.settings?.color?.palette?.theme)&&void 0!==t?t:[],x=(0,m.useSelect)((e=>e(Qa).getAdditionalContext()));return(0,r.createElement)("div",{className:"big-sky__ai-debug__site-data"},(0,r.createElement)("table",null,(0,r.createElement)("tbody",null,(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Site Type"),(0,r.createElement)("td",null,e?(0,r.createElement)("input",{name:"siteType",defaultValue:i}):i)),(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Title"),(0,r.createElement)("td",null,e?(0,r.createElement)("input",{name:"siteTitle",defaultValue:l}):l)),(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Description"),(0,r.createElement)("td",null,e?(0,r.createElement)("input",{name:"siteDescription",defaultValue:s}):s)),(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Topic"),(0,r.createElement)("td",null,e?(0,r.createElement)("input",{name:"topic",defaultValue:a}):"abstract"!==a&&a)),(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Color Request"),(0,r.createElement)("td",null,p&&p)),(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Color Palette"),(0,r.createElement)("td",null,e?(0,r.createElement)("select",{name:"currentColor",defaultValue:n},b().sort(((e,t)=>e.title.localeCompare(t.title))).map((({title:e})=>(0,r.createElement)("option",{key:e,value:e},e)))):(0,r.createElement)(r.Fragment,null,n," ",(0,r.createElement)(Gd,{paletteColors:_})))),(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Font"),(0,r.createElement)("td",null,e?(0,r.createElement)("select",{name:"currentFont",defaultValue:o},w().sort(((e,t)=>e.title.localeCompare(t.title))).map((({title:e})=>(0,r.createElement)("option",{key:e,value:e},e)))):o)),(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Location Name"),(0,r.createElement)("td",null,e?(0,r.createElement)("input",{name:"locationName",defaultValue:JSON.stringify(c?.name)}):JSON.stringify(c?.name))),!e&&(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Location Coordinates"),(0,r.createElement)("td",null,(()=>{if(c&&c.coordinates)return`${c.coordinates[0]}, ${c.coordinates[1]}`})())),(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Image Style"),(0,r.createElement)("td",null,e?(0,r.createElement)("select",{name:"defaultImageStyle",defaultValue:u||"photographic"},Jl.map((e=>(0,r.createElement)("option",{key:e,value:e},e)))):u)),(0,r.createElement)("tr",null,(0,r.createElement)("td",null,"Patterns"),(0,r.createElement)("td",null,e?y?.map((e=>{const t=h.filter((t=>t.category===e.category)).sort(((e,t)=>e.title.localeCompare(t.title))).map((e=>(0,r.createElement)("option",{key:e.ID,value:e.ID,"data-category":e.category},e.title," ("," ",e.ID," )")));return(0,r.createElement)("select",{name:"pattern",defaultValue:e.id,key:e.id},t)})):y?.map((e=>(0,r.createElement)("div",{key:e.id},e.id," ·"," ",e.category))))),x&&Object.keys(x).map((e=>(0,r.createElement)("tr",{key:e},(0,r.createElement)("td",null,"Additional Context: ",e),(0,r.createElement)("td",null,JSON.stringify(x[e]))))))))}function Wd(){const{patterns:e}=(0,m.useSelect)((e=>{const t=e(Qa),n=t.getUserLocale();return{patterns:t.getRemotePatterns(n)}})),{selectedBlock:t}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{selectedBlock:t()}})),n=t?.attributes?.metadata?.remotePatternId||"None selected",{convertToBlocks:o,insertPatterns:i}=tl(),[a,s]=(0,f.useState)(null),c=e.sort(((e,t)=>e.ID-t.ID)),{isOnboarded:l}=ms().getSiteMetadata();return(0,f.useEffect)((()=>{s(c[0]?.ID)}),[c]),(0,r.createElement)("div",{className:"big-sky__ai-debug__tools"},l&&(0,r.createElement)("div",{className:"big-sky__ai-debug__tools__insert-pattern"},(0,r.createElement)("p",null,"Selected Pattern: ",n),(0,r.createElement)("p",null,"Insert Pattern:"),(0,r.createElement)("div",{className:"big-sky__ai-debug__flex"},(0,r.createElement)("select",{onChange:e=>s(e.target.value)},c.map((e=>(0,r.createElement)("option",{key:e.ID,value:e.ID},e.ID," · ",e.title)))),(0,r.createElement)("button",{className:"button button-primary",onClick:()=>{const e=c.find((e=>e.ID===parseInt(a))),t=o(e.html);e.blocks=t,i([e])}},"Insert"))))}const Yd=()=>{const[e,t]=(0,f.useState)(!1);return(0,f.useEffect)((()=>{const n=n=>{n.ctrlKey&&"d"===n.key&&t(!e)};return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}}),[e]),e?(0,r.createElement)(Hd,{setShowDebug:t}):null},Jd=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),Kd=()=>{const{setApiKey:e,setHasRetriedChatRequest:t}=(0,m.useDispatch)(Qa);return{withJetpackTokenRequest:async n=>{t(!1);const o=await la();o&&o.token&&(e(o.token),n(o))}}},Xd=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,c.jsx)(s.Path,{d:"M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"})}),Qd={a:e=>{const{href:t}=e;return(0,r.createElement)("a",{href:t,target:"_blank",rel:"noopener noreferrer"},e.children)}};function Zd({message:e}){const{userSay:t}=Ce(),{selectBlock:n}=(0,m.useDispatch)(y.store),{withJetpackTokenRequest:o}=Kd(),i=async()=>{e.clientId?n(e.clientId):e.role===G.ACTION&&await o((()=>t(e.content)))},a=jl("big-sky__chat-message",{"big-sky__chat-message__user":e.role===G.USER,"big-sky__chat-message__error":e.role===G.ERROR,"big-sky__chat-message__thinking":e.role===G.THINKING,"big-sky__chat-message__component":e.role===G.COMPONENT,"big-sky__chat-message__action":e.role===G.ACTION,"big-sky__chat-message__has-block-link":!!e.clientId}),s={initial:{y:40,opacity:0,transition:{duration:.3}},exit:{opacity:0,transition:{duration:0}},animate:{y:0,opacity:1,transition:{duration:.3}}};return(0,r.createElement)(Ul.__unstableMotion.div,{layoutScroll:!0,initial:s.initial,exit:s.exit,animate:s.animate,className:a,role:"button",tabIndex:"0",onClick:i,onKeyDown:i,onFocus:i},(e.role===G.ASSISTANT||e.role===G.THINKING||e.role===G.TOOL)&&(0,r.createElement)("div",{className:"big-sky__chat-message__avatar"},(0,r.createElement)(Ul.Icon,{icon:Wu})),(0,r.createElement)("div",{className:"big-sky__chat-message__content"},e.role===G.ERROR&&(0,r.createElement)(Ul.Icon,{icon:Xd}),(e=>{let t=e;return"string"==typeof t?t=(0,r.createElement)(Or,{components:Qd},t):"object"!=typeof t||Array.isArray(t)?Array.isArray(t)&&(t=(0,r.createElement)(Or,{components:Qd},t[0]?.text)):t=(0,f.cloneElement)(t),t})(e.content)))}const ep=(0,f.forwardRef)((({prompt:e,onSendMessage:t,animationProps:n={}},o)=>{const{userSay:i,pendingToolCalls:a,resetChangeAgentCount:s}=Ce(),{setContext:c}=Pe(),{withJetpackTokenRequest:l}=Kd(),{isThinking:u}=Vl(),{logUserMessage:d}=zl(),p=(0,f.useMemo)((()=>{if(a.length>0)return a[0].function?.name}),[a]),{args:h,respond:g}=Oe(p),[y,b]=(0,f.useState)(!1),[v,w]=(0,f.useState)(""),[k,_]=(0,f.useState)(!1),{setChatComponents:x,setCurrentUserMessage:C,setShowThread:S,setShowChatContinueButton:E,setIsTyping:I}=(0,m.useDispatch)(Qa),{currentUserMessage:T,showChatContinueButton:A,chatContinueButtonOnClick:P,dockView:N,hideInput:O,currentAssistant:R}=(0,m.useSelect)((e=>{const t=e(Qa);return{currentUserMessage:t.currentUserMessage(),showChatContinueButton:t.getShowChatContinueButton(),chatContinueButtonOnClick:t.getChatContinueButtonOnClick(),dockView:t.getDockView(),hideInput:t.getHideInput(),currentAssistant:t.getAssistant()}})),M=(0,f.useRef)(null),{isOnboarded:L}=ms().getSiteMetadata();(0,f.useEffect)((()=>{o?.current&&o.current?.parentNode?.style?.setProperty("--big-sky-textarea-component-font-family",window.getComputedStyle(o.current).fontFamily)}),[o]),(0,f.useEffect)((()=>{!u&&o?.current&&o?.current?.focus()}),[o,u]);const D=L?600:1200,B=(0,f.useCallback)((()=>{const e=o.current;if(e){const t=e.parentNode;if(t.dataset.all=e.value,e.selectionStart!==e.selectionEnd)return void(t.dataset.before="");t.dataset.before=e.value.slice(0,e.selectionStart);const n=window.getComputedStyle(t,":before"),o=Math.round(parseFloat(n.height));e.scrollHeight===o?e.scrollTop=e.scrollHeight:o<=parseInt(window.getComputedStyle(e).minHeight,10)&&(e.scrollTop=0)}}),[o]);(0,f.useEffect)((()=>{[Y.MENUS,Y.CHAT,Y.HANDOFF].includes(N)&&B()}),[T,B,N]);const F=(0,f.useCallback)((async()=>{var e;ea("chat_input_send_message"),w(""),x([]),s(),c((e=R,is(e))?.toolkits[0]?.name,{fromAssistantId:null}),h&&g?await l((()=>{g(T)})):(d(T),await l((()=>{i(T)}))),x([]),C(""),b(!1),S(!0);const t=o.current;t?.style?.removeProperty("height")}),[x,h,g,C,S,o,l,T,d,i]),j=(0,f.useCallback)((async()=>{b(!1),t&&await t(T),F()}),[t,T,F]);return O?null:(0,r.createElement)(r.Fragment,null,v&&(0,r.createElement)("div",{className:"big-sky__chat-input__error-too-long"},(0,r.createElement)(Zd,{message:{content:v,role:G.ERROR,type:G.ERROR}})),(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky__chat-input",...n,key:"chat-input"},A&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ul.Button,{className:"big-sky__chat-input__continue",onClick:P},(0,z.__)("Continue","big-sky")),(0,r.createElement)("div",{className:"big-sky__chat-input__ask-ai"},(0,r.createElement)(Ul.Button,{icon:Yu,onClick:()=>{E(!1)}},(0,z.__)("Try something different","big-sky")))),!A&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ul.TextareaControl,{className:"big-sky__chat-input__textarea",resizable:"false",rows:1,__nextHasNoMarginBottom:!0,onChange:e=>{(e=>{if(C(e),e.length<=D)v&&w(""),_(!1);else{k||(ea("chat_input_message_too_long",{is_onboarded:L}),_(!0));const t=(0,z.sprintf)(
// Translators: Placeholder is a number representing the maximum number of characters allowed in a message.
// Translators: Placeholder is a number representing the maximum number of characters allowed in a message.
(0,z.__)("Your message is too long %1$s/%2$s","big-sky"),e.length,D);w(t)}})(e),b(e.length>0)},label:(0,z.__)("Chat Input","big-sky"),hideLabelFromVision:!0,placeholder:e,value:T,onKeyUp:e=>{if("Enter"===e.key&&!e.shiftKey&&!v){if(""===T.trim())return e.preventDefault(),void C("");j()}M.current&&clearTimeout(M.current),M.current=setTimeout((()=>{I(!1)}),800)},onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey||"Escape"===e.key?e.preventDefault():I(!0)},disabled:u,ref:o}),(0,r.createElement)(Ul.Button,{icon:Ju,className:"big-sky__chat-input__submit",onClick:j,disabled:!y||u||v}))))})),tp=ep,np=(0,c.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(s.Path,{d:"M7 18h4.5v1.5h-7v-7H6V17L17 6h-4.5V4.5h7v7H18V7L7 18Z"})});function op(){const{isMaximized:e}=(0,m.useSelect)((e=>({isMaximized:e(Qa).getIsMaximized()}))),{setIsMaximized:t}=(0,m.useDispatch)(Qa);return(0,r.createElement)(Ul.Button,{icon:np,className:"big-sky__chat-navigation__resize",size:"compact",onClick:()=>t(!e)})}function ip({title:e,onClickBackButton:t}){const{isOnboarded:n}=ms().getSiteMetadata();return(0,r.createElement)("div",{className:"big-sky__chat-navigation"},n&&(0,r.createElement)(Ul.Button,{icon:qu,className:"big-sky__chat-navigation__back",onClick:()=>t(),size:"compact"}),e&&(0,r.createElement)("h4",null,e),(0,r.createElement)(op,null))}const rp=(0,f.forwardRef)((function({icon:e,size:t=24,...n},o){return(0,f.cloneElement)(e,{width:t,height:t,...n,ref:o})})),ap=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"m4 5.5h2v6.5h1.5v-6.5h2v-1.5h-5.5zm16 10.5h-16v-1.5h16zm-7 4h-9v-1.5h9z"})}),sp=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),cp=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M6.08 10.103h2.914L9.657 12h1.417L8.23 4H6.846L4 12h1.417l.663-1.897Zm1.463-4.137.994 2.857h-2l1.006-2.857ZM11 16H4v-1.5h7V16Zm1 0h8v-1.5h-8V16Zm-4 4H4v-1.5h4V20Zm7-1.5V20H9v-1.5h6Z"})}),lp=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M12 9c-.8 0-1.5.7-1.5 1.5S11.2 12 12 12s1.5-.7 1.5-1.5S12.8 9 12 9zm0-5c-3.6 0-6.5 2.8-6.5 6.2 0 .8.3 1.8.9 3.1.5 1.1 1.2 2.3 2 3.6.7 1 3 3.8 3.2 3.9l.4.5.4-.5c.2-.2 2.6-2.9 3.2-3.9.8-1.2 1.5-2.5 2-3.6.6-1.3.9-2.3.9-3.1C18.5 6.8 15.6 4 12 4zm4.3 8.7c-.5 1-1.1 2.2-1.9 3.4-.5.7-1.7 2.2-2.4 3-.7-.8-1.9-2.3-2.4-3-.8-1.2-1.4-2.3-1.9-3.3-.6-1.4-.7-2.2-.7-2.5 0-2.6 2.2-4.7 5-4.7s5 2.1 5 4.7c0 .2-.1 1-.7 2.4z"})}),up=Re("confirm_site_specs",(function({args:e,respond:t,onLoad:n}){const{withJetpackTokenRequest:o}=Kd(),{userSay:i,running:a}=Ce(),{setSiteMetadata:s,getSiteMetadata:c}=ms(),{setCurrentUserMessage:l,setChatComponents:u}=(0,m.useDispatch)(Qa),d=c(),{isOnboarded:p}=d,h={title:!1,description:!1,location:!1},[g,y]=(0,f.useState)(h),{siteTitle:b,siteType:v,topic:w,siteDescription:k,siteLocationName:_,defaultImageStyle:x,actions:C}={...d,siteLocationName:d.siteLocation?.name,...Object.fromEntries(Object.entries(e||{}).filter((([,e])=>!!e)))},S=(0,f.useMemo)((()=>({siteType:v,topic:w,siteTitle:b,siteDescription:k,defaultImageStyle:x,siteLocation:{name:_}})),[v,w,b,k,_,x]),E=b||k||_;if((0,f.useEffect)((()=>{n&&n()}),[n]),(0,f.useEffect)((()=>{if(E&&!p){const n=C||[{actionName:(0,z.__)("Looks good","big-sky"),description:(0,z.sprintf)(/* Translators: placeholder is the site title */ /* Translators: placeholder is the site title */
(0,z.__)("Build %s","big-sky"),b)}];u([(0,r.createElement)(Wl,{key:"suggestions",args:{siteTitle:b,siteType:v,topic:w,siteDescription:k,siteLocationName:_,actions:n},respond:()=>{if(s(S,!1,!0),e)return void t(n[0]?.description);const r=n[0]?.description;l(r),o((()=>i(r)))}})])}}),[u,s,t,S,E,b,v,w,k,_,C,p,e,l,o,i]),!e&&!d?.siteTitle||p)return null;const I=e=>{ea("site_specs_list_click",{spec_item:e}),l(`Change my ${e} to `),document.querySelector(".big-sky__ai-input__input textarea")?.focus()};return!E||a?null:(0,r.createElement)(Zd,{message:{role:G.COMPONENT,content:(0,r.createElement)(r.Fragment,null,(0,r.createElement)("table",{className:"big-sky__spec-list"},(0,r.createElement)("tbody",null,(0,r.createElement)("tr",{onClick:()=>I("site title"),onMouseEnter:()=>y({title:!0,description:!1,location:!1}),onMouseLeave:()=>y(h)},(0,r.createElement)("td",{className:"big-sky__spec-icon"},(0,r.createElement)(Ul.Tooltip,{text:(0,z.__)("Click to update site title","big-sky")},(0,r.createElement)(r.Fragment,null,!g.title&&(0,r.createElement)(rp,{icon:ap}),g.title&&(0,r.createElement)(rp,{icon:sp})))),(0,r.createElement)("td",null,(0,r.createElement)(Ul.Tooltip,{text:(0,z.__)("Click to update site title","big-sky")},(0,r.createElement)("span",null,b)))),(0,r.createElement)("tr",{onClick:()=>I("site description"),onMouseEnter:()=>y({title:!1,description:!0,location:!1}),onMouseLeave:()=>y(h)},(0,r.createElement)("td",{className:"big-sky__spec-icon"},(0,r.createElement)(Ul.Tooltip,{text:(0,z.__)("Click to update description","big-sky")},(0,r.createElement)(r.Fragment,null,!g.description&&(0,r.createElement)(rp,{icon:cp}),g.description&&(0,r.createElement)(rp,{icon:sp})))),(0,r.createElement)("td",null,(0,r.createElement)(Ul.Tooltip,{text:(0,z.__)("Click to update description","big-sky")},(0,r.createElement)("span",null,(T=k,T?`${T.charAt(0).toUpperCase()}${T.slice(1)}`:""))))),_&&(0,r.createElement)("tr",{onClick:()=>I("location"),onMouseEnter:()=>y({title:!1,description:!1,location:!0}),onMouseLeave:()=>y(h)},(0,r.createElement)("td",{className:"big-sky__spec-icon"},(0,r.createElement)(Ul.Tooltip,{text:(0,z.__)("Click to update location","big-sky")},(0,r.createElement)(r.Fragment,null,!g.location&&(0,r.createElement)(rp,{icon:lp}),g.location&&(0,r.createElement)(rp,{icon:sp})))),(0,r.createElement)("td",null,(0,r.createElement)(Ul.Tooltip,{text:(0,z.__)("Click to update location","big-sky")},(0,r.createElement)("span",null,_)))))),e&&(0,r.createElement)("div",{className:"big-sky__site-specs-list-confirm"},(0,z.__)("Do the above details look correct?","big-sky")))}});var T}));function dp({onlyShowLastRequest:e=!1}){const{hasRetriedChatRequest:t,getSessionId:n}=(0,m.useSelect)((e=>({hasRetriedChatRequest:e(Qa).getHasRetriedChatRequest(),getSessionId:e(Qa).getSessionId()}))),{messages:o,error:i,setError:a}=Ce(),s=(0,f.useRef)(),{isThinking:c}=Vl(),{setApiKey:l,setHasRetriedChatRequest:u}=(0,m.useDispatch)(Qa),d=()=>{const e=setTimeout((()=>{s.current?.scrollIntoView({behavior:"smooth"})}),100);return()=>clearTimeout(e)},p="Unauthorized"===i;return(0,f.useEffect)((()=>{p&&!t&&(async()=>{await ca(l,!1),a(""),u(!0)})()}),[i,p,o,l,a,t,u]),(0,f.useEffect)((()=>{d()}),[o]),(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky__chat-thread",initial:{opacity:0,y:10},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-10,transition:{duration:.2}},key:"chat-thread"},(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky__chat-thread__scroller",layoutRoot:!0},o?.filter(((t,n,o)=>{const i=o.map((e=>e.role)).lastIndexOf(G.USER);return n>=(e?i:0)&&""!==t.content&&t.role!==G.TOOL&&t.role!==G.SYSTEM&&(t.role!==G.ASSISTANT||"make_suggestions"!==t.tool_calls?.[0]?.function.name)})).map(((e,t)=>(0,r.createElement)(Zd,{message:e,key:t}))),i&&(!p||t)&&(0,r.createElement)(Ul.Notice,{status:"error",politeness:"assertive",onRemove:()=>{ea("error_dismissed"),a("")}},i.includes("openai_error")?(0,z.__)("Whoops! Our AI is having some issues right now. Please try again later.","big-sky"):(0,f.createInterpolateElement)((0,z.sprintf)(/* translators: %s is a reference for debugging, support is an inline link "contact support" to the support page */ /* translators: %s is a reference for debugging, support is an inline link "contact support" to the support page */
(0,z.__)("Something went wrong. Please try again or <support></support> with reference: %s","big-sky"),n),{support:(0,r.createElement)("a",{href:"https://wordpress.com/help?help-center=wapuu",target:"_blank",rel:"noopener noreferrer"},(0,z.__)("contact support","big-sky"))})),c&&(0,r.createElement)(Gu,null),(0,r.createElement)(up,{onLoad:d}),(0,r.createElement)("div",{className:"big-sky__chat-thread__end",ref:s})))}function pp(){const{chatComponents:e}=(0,m.useSelect)((e=>({chatComponents:e(Qa).getChatComponents()}))),{isThinking:t}=Vl();return!e||0===e.length||t?null:(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky__chat-components",initial:{opacity:0,y:20},layout:!0,animate:{opacity:1,y:0,transition:{duration:.2,delay:.14}},exit:{opacity:0,y:-10,transition:{duration:.2}},key:"chat-components-actions"},e.map(((e,t)=>(0,r.createElement)("div",{className:"big-sky__chat-components-component",key:t},e))))}var hp=n(957);function gp({color:e="blue",instanceId:t,onClick:n,width:o=32,height:i=32}){const{RiveComponent:a,inactiveInput:s,typingInput:c,thinkingInput:l}=function(e="blue"){const t="State Machine A",n="https://s0.wp.com/wp-content/plugins/big-sky-plugin/assets/big-sky-icon",o=`${n}/blue.riv`,i=`${n}/white.riv`,{rive:r,RiveComponent:a}=(0,hp.useRive)({src:"blue"===e?o:i,stateMachines:t,autoplay:!1}),s=(0,hp.useStateMachineInput)(r,t,"inactive",!1),c=(0,hp.useStateMachineInput)(r,t,"thinking",!1),l=(0,hp.useStateMachineInput)(r,t,"typing",!1),u=(0,f.useCallback)((()=>{r&&r.play(t)}),[r,t]),d=(0,f.useCallback)((()=>{r&&r.pause(t)}),[r,t]);return(0,f.useEffect)((()=>()=>{r&&r.cleanup()}),[r]),(0,f.useEffect)((()=>{u()}),[u]),{rive:r,RiveComponent:a,inactiveInput:s,typingInput:l,thinkingInput:c,startStateMachine:u,pauseStateMachine:d}}(e),{isTyping:u}=(0,m.useSelect)((e=>({isTyping:e(Qa).getIsTyping()}))),{isThinking:d}=Vl();(0,f.useEffect)((()=>{c&&(c.value=u),l&&(l.value=d),s&&(s.value=!u&&!d)}),[u,d,c,l,s]);return(0,r.createElement)(Ul.__unstableAnimatePresence,{mode:"wait"},(0,r.createElement)(Ul.__unstableMotion.div,{variants:{default:{scale:1,y:0,x:0},waiting:{scale:[.5,.6,.5],y:[-10,10,-10],x:[0,0,0],transition:{ease:"easeInOut",repeat:1/0,duration:1.5}},waitingEnter:{scale:.5,y:-10,x:0,transition:{ease:"easeInOut",duration:.3}},waitingExit:{scale:1,y:0,x:0,transition:{ease:"easeInOut",duration:.3}}},initial:{x:0},className:"big-sky__assistant-icon",id:t,onClick:e=>(n&&n(e),e.preventDefault())},(0,r.createElement)(a,{style:{width:o,height:i}})))}function mp({showNavigation:e=!0,navigationTitle:t,onClickBackButton:n,useBlockContext:o,defaultPrompt:i,isOnboarded:a,agentQuestion:s,fileUploadEnabled:c=!0,onlyShowLastRequest:l=!1}){const{apiKey:u,inputtedFiles:d,isHandoff:p,showThread:h,currentUserMessage:g,sessionId:y,assistant:b}=(0,m.useSelect)((e=>({apiKey:e(Qa).getApiKey(),inputtedFiles:e(Qa).getInputtedFiles(),isBuildingSite:e(Qa).getIsBuildingSite(),isHandoff:e(Qa).getIsHandoff(),showThread:e(Qa).getShowThread(),sessionId:e(Qa).getSessionId(),currentUserMessage:e(Qa).currentUserMessage(),showEditorWelcome:e(Qa).getShowEditorWelcome(),assistant:e(Qa).getAssistant()}))),{setCurrentUserMessage:v,setInputtedFiles:w,setShowThread:k}=(0,m.useDispatch)(Qa),{withJetpackTokenRequest:_}=Kd(),S=window.bigSkyInitialState?.isLocalGraph;Be({apiKey:u,feature:"big-sky",service:S?x.LOCAL_GRAPH:x.WPCOM_JETPACK_AI,model:C.GPT_4O,stream:!1,sessionId:y});const E=(0,f.useRef)(),{activeAgent:I,setActiveAgent:T}=we(),{messages:A,clearMessages:P,userSay:N}=Ce(),{invoke:O}=Pe(),{isThinking:R}=Vl();Le(),(0,f.useEffect)((()=>{b&&T(b)}),[b,T]),(0,f.useEffect)((()=>{I?.onStart&&I.onStart(O,P,s)}),[I,s,P]);const M=(0,f.useCallback)((async e=>{const t=await Promise.all(e.map((async e=>({file:e,name:e.name,url:URL.createObjectURL(e)}))));w([...d,...t])}),[d,w]),L=(0,f.useCallback)((e=>{w(d.filter(((t,n)=>n!==e)))}),[d,w]),D=({name:e,url:t,onRemove:n})=>(0,r.createElement)(r.Fragment,null,t&&(0,r.createElement)("img",{width:"50",height:"50",style:{verticalAlign:"middle"},alt:e,src:t}),e," ",(0,r.createElement)(Ul.Button,{size:"small",icon:Jd,onClick:n}));return(0,r.createElement)(r.Fragment,null,c&&(0,r.createElement)(Ul.DropZone,{onFilesDrop:M}),(0,r.createElement)("div",{className:"big-sky__dock__chat-view"},(0,r.createElement)("div",{className:"big-sky__dock__chat-content"},e&&(0,r.createElement)(ip,{title:t,onClickBackButton:()=>n()}),!A.length&&!p&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ip,{title:" ",onClickBackButton:()=>n()}),(0,r.createElement)(gp,{width:64,height:64})),(h||!a)&&(0,r.createElement)(dp,{onlyShowLastRequest:l}),!h&&a&&!g&&(0,r.createElement)(Gl,{useBlockContext:o,focusInput:()=>{E.current?.focus()},onActionClick:async e=>{k(!0),await _((()=>N(e))),v("")}})),(0,r.createElement)(pp,null),(0,r.createElement)(Yl,null),(0,r.createElement)("div",{className:"big-sky__dock__chat-input"},(0,r.createElement)(tp,{prompt:i,ref:E,animationProps:{initial:{opacity:0,filter:"blur(5px)",scale:.9},animate:{opacity:1,filter:"blur(0px)",scale:1,transition:{duration:.3,delay:.1,ease:[.42,.24,.02,1]}},exit:{filter:"blur(5px)",opacity:0,scale:.9,transition:{duration:.2,ease:[.42,.24,.02,1]}}}})),c&&!R&&!!d?.length&&(0,r.createElement)(Ul.__experimentalItemGroup,{isBordered:!0,isSeparated:!0},d.map((({name:e,url:t},n)=>(0,r.createElement)(Ul.__experimentalItem,{key:n},(0,r.createElement)(D,{name:e,url:t,onRemove:()=>L(n)})))))))}const fp={menus:{width:"auto",height:48},chat:{width:340,height:400},pending:{width:"auto",height:48},completed:{width:"auto",height:48},handoff:{width:368,height:"auto"}},yp={menus:{width:"auto",height:48},chat:{width:600,height:600},pending:{width:"auto",height:48},completed:{width:"auto",height:48},handoff:{width:600,height:"auto"}},bp=(e,t)=>t?yp[e]?.width||"auto":fp[e]?.width||"auto",vp=(e,t)=>t?yp[e]?.height||"auto":fp[e]?.height||48,wp=(e,t)=>{if(e)switch(e){case"modify_contact_form":return(0,z.__)("Generating contact form…","big-sky");case"remove_block":return!t||"core/pattern"!==t?.name&&"core/group"!==t?.name?(0,z.__)("Removing block…","big-sky"):(0,z.__)("Removing pattern…","big-sky");case"add_pattern":return(0,z.__)("Adding pattern…","big-sky");case"replace_pattern":return(0,z.__)("Replacing pattern…","big-sky");case"generate_pattern":return(0,z.__)("Generating pattern…","big-sky");case"generate_image":return(0,z.__)("Generating image…","big-sky");case"get_stock_image":return(0,z.__)("Getting stock image…","big-sky");case"replace_content":return(e=>{if(!e)return(0,z.__)("Replacing content…","big-sky");switch(e.name){case"core/paragraph":return(0,z.__)("Regenerating text…","big-sky");case"core/image":return(0,z.__)("Regenerating image…","big-sky");default:return(0,z.__)("Replacing content…","big-sky")}})(t);case"upload_site_logo":return(0,z.__)("Updating site logo…","big-sky");case"generate_site_logo":return(0,z.__)("Generating site logo…","big-sky");default:return(0,z.__)("Working on your request…","big-sky")}},kp=(e=!1)=>e?{title:(0,z.__)("How can I help you?","big-sky"),prompt:(0,z.__)("Type what you'd like to do","big-sky")}:{title:(0,z.__)("What sort of website do you need?","big-sky"),prompt:(0,z.__)("Describe your site","big-sky")},_p=e=>["generate_site_logo","remove_block"].includes(e);function xp(){const{isHandoff:e,isToolContainerVisible:t,toolComponent:n}=(0,m.useSelect)((e=>{const t=e(Qa);return{isHandoff:t.getIsHandoff(),isToolContainerVisible:t.isToolContainerVisible(),toolComponent:t.getToolComponent()}}));if(!t||!n)return;const o=n.key;return(0,r.createElement)(Ul.Popover,{className:jl("big-sky__dock__tool-container",{"big-sky__assistant-ai-actions__popover-content":!0,"big-sky__dock__wrapper":!0,"big-sky__dock__use-hover-effects":!["color-picker","font-picker","site-layout-picker","pattern-picker"].includes(o)&&!e,"big-sky__dock__handoff":e}),animate:!1},n)}function Cp({isOpen:e,onClose:t,onCancel:n,onConfirm:o,cancelText:i,confirmText:a,message:s,title:c}){return e&&(0,r.createElement)(Ul.Modal,{className:"big-sky-onboarding__dialog",onRequestClose:t,title:c},(0,r.createElement)("p",null,s),(0,r.createElement)("div",{className:"big-sky-onboarding__dialog-buttons"},(0,r.createElement)(Ul.Button,{variant:"secondary",onClick:n},i),(0,r.createElement)(Ul.Button,{variant:"primary",onClick:o},a)))}function Sp({setIsToolContainerVisible:e}){const[t,n]=(0,f.useState)(!1),{zoomIn:o}=vc(),{replacePattern:i}=tl(),{deletePage:a,goBackPage:s}=il(),{removeBlock:c,replaceInnerBlocks:l,selectBlock:u,updateBlockAttributes:d}=(0,m.useDispatch)(y.store),{selectedBlock:p,newPageId:b,currentPostId:v}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store),{getNewPageId:n}=e(Qa),{getCurrentPostId:o}=e(g.store);return{selectedBlock:t(),newPageId:n(),currentPostId:o()}})),{setBlockBeforeChanges:w,setDockView:k,setLastCancelableAction:_,setCurrentToolCall:x,setNewPageId:C}=(0,m.useDispatch)(Qa),{currentToolCall:S,lastCancelableAction:E,blockBeforeChanges:I}=(0,m.useSelect)((e=>{const t=e(Qa);return{lastCancelableAction:t.getLastCancelableAction(),blockBeforeChanges:t.getBlockBeforeChanges(),currentToolCall:t.getCurrentToolCall()}})),T=!!E?.action,A=(0,f.useCallback)((()=>{T&&"color_palette_generator"===S||k(Y.MENUS)}),[T,S,k]),{popUndoStack:P,undo:N}=function({onToolbarUndoCallback:e}={}){const{isEditorReady:t}=(0,m.useSelect)((e=>({isEditorReady:e(Qa).getIsEditorReady()}))),{getUndoManager:n}=h((0,m.useSelect)(Wr.store)),{undo:o,redo:i}=(0,m.useDispatch)(g.store),r=(0,f.useCallback)((()=>{e&&e()}),[e]);return(0,f.useEffect)((()=>{if(!t)return;const e=document.querySelector(".editor-history__undo");return e&&e.addEventListener("click",r),()=>{e&&e.removeEventListener("click",r)}}),[t,r]),{undo:()=>{try{o()}catch(e){ra.error(e)}},redo:()=>{try{i()}catch(e){ra.error(e)}},popUndoStack:()=>{n().undo()}}}({onToolbarUndoCallback:A}),{doneAddPattern:O}=Qu(),{doneReplacePattern:R}=Zu(),{cancelGenerateColorPalette:M,doneGenerateColorPalette:L}=Nu(),{cancelShowFontPicker:D,doneShowFontPicker:B}=ad(),{cancelShowLayoutPicker:F,doneShowLayoutPicker:j}=pd(),{cancelUpdateButtonLink:U}=Dl(),{cancelUploadSiteLogo:q}=bd(),{cancelUpdateAddress:$}=Bl(),H=(0,f.useCallback)((()=>{o(),k(Y.MENUS),e(!1),x(""),w(null)}),[o,k,e,x,w]),G=(0,f.useCallback)((()=>{if(b)n(!0);else if(E){switch(ea("cancel_action",{action:E.action}),E.action){case"add_menu_items":case"add_events_items":case"add_team_items":for(const e of E.clientIds)c(e);H();break;case"add_events_section":case"add_menu_section":case"add_pricing_section":case"add_services_section":case"add_testimonials_section":case"add_team_section":case"add_pattern":c(E.clientId),H();break;case"replace_pattern":i(E.clientId,E.originalBlock),H();break;case"color_palette_generator":M(E);break;case"show_font_picker":D(E.originalVariationName);break;case"show_layout_picker":F(E.originalLayout);break;case"update_button_link":U(E),H();break;case"upload_site_logo":q(E),H();break;case"update_address":$(E)}_(null)}}),[M,D,F,$,U,q,b,E,c,i,H,_]),V=(0,f.useCallback)((()=>{switch(ea("done_action",{action:E?.action||S}),E?.action){case"add_pattern":O();break;case"replace_pattern":R();break;case"color_palette_generator":L();break;case"show_font_picker":B();break;case"show_layout_picker":j();break;default:H()}b&&C(0),_(null)}),[b,C,E,O,S,R,L,B,j,H,_]);(0,f.useEffect)((()=>{const e=e=>{"Enter"===e.key&&V(),"Escape"===e.key&&G()};return document.addEventListener("keydown",e),()=>{setTimeout((()=>document.removeEventListener("keydown",e)),1e3)}}),[V,G]);const W=(0,f.useCallback)((async()=>{ea("undo_action",{action:S}),_p(S,p)?N():(P(),"modify_contact_form"===S?l(I.clientId,I.innerBlocks):I?.attributes&&d(p?.clientId,I.attributes)),p&&u(p.clientId),H()}),[I,S,P,l,H,u,p,N,d]);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Cp,{isOpen:t,onClose:()=>n(!1),onCancel:()=>n(!1),onConfirm:()=>{n(!1),C(0);const e=v;s(),a(e),H()},message:(0,z.__)("Are you sure you want to delete this page?","big-sky"),cancelText:(0,z.__)("Cancel","big-sky"),confirmText:(0,z.__)("Delete","big-sky"),title:(0,z.__)("Delete Page?","big-sky")}),(0,r.createElement)("div",{className:"big-sky__dock__action"},T&&(0,r.createElement)(Ul.Button,{className:"big-sky__dock__action__cancel",onClick:G},(0,z.__)("Cancel","big-sky")),!T&&(0,r.createElement)(Ul.Button,{className:"big-sky__dock__action__undo",onClick:W},(0,z.__)("Undo","big-sky")),(0,r.createElement)(Ul.Button,{className:"big-sky__dock__action__done",onClick:V},(()=>{if(b)return(0,z.__)("Create","big-sky");switch(E?.action){case"color_palette_generator":case"show_font_picker":return(0,z.__)("Save","big-sky");default:return(0,z.__)("Done","big-sky")}})())))}function Ep({title:e=" ",description:t="",component:n=null,primaryCta:o={text:(0,z.__)("Continue","big-sky"),onClick:()=>{}},tertiaryCta:i={text:(0,z.__)("Cancel","big-sky"),onClick:()=>{},isAi:!1},onBackClick:a=null,isChatMode:s=!1,onSkip:c=null}){const[l,u]=(0,f.useState)(!1),[d,p]=(0,f.useState)(null),h=(0,f.useRef)(n);return(0,f.useEffect)((()=>{h.current=n}),[n]),(0,f.useEffect)((()=>{l||(h.current&&"function"==typeof h.current?h.current(p):p(h.current),u(!0))}),[l]),(0,r.createElement)("div",{className:"big-sky__dock__handoff-step"},(0,r.createElement)("div",{className:"big-sky__dock__handoff-step__title-actions"},a&&(0,r.createElement)("div",{className:"big-sky__dock__handoff-step__title-actions__back"},(0,r.createElement)(Ul.Button,{icon:qu,onClick:a})),(0,r.createElement)("div",{className:"big-sky__dock__handoff-step__title-actions__title"},e),c&&(0,r.createElement)("div",{className:"big-sky__dock__handoff-step__title-actions__skip"},(0,r.createElement)(Ul.Button,{onClick:c},(0,z.__)("Skip","big-sky")))),t&&(0,r.createElement)("div",{className:"big-sky__dock__handoff-step__description"},t),(0,r.createElement)("div",{className:"big-sky__dock__handoff-step__component"},d),!s&&(0,r.createElement)("div",{className:"big-sky__dock__handoff-step__buttons"},(0,r.createElement)(Ul.Button,{className:"big-sky__dock__handoff-step__buttons__button big-sky__dock__handoff-step__buttons__button-primary",onClick:o.onClick},o.text),i&&(0,r.createElement)(Ul.Button,{className:jl("big-sky__dock__handoff-step__buttons__button big-sky__dock__handoff-step__buttons__button-tertiary",{"big-sky__dock__handoff-step__buttons__button-tertiary-ai":i.isAi}),onClick:()=>{i.onClick(p)}},i.isAi?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Yu,null),i.text):i.text)))}function Ip(){const{agentSay:e,clearMessages:t}=Ce(),{setShowThread:n}=(0,m.useDispatch)(Qa);return{initializeThread:o=>{t(),n(!0),e(o)}}}function Tp(){const{getSiteMetadata:e}=ms(),{setAiStep:t}=Cl(),{chosenCategories:n,chosenColors:o,chosenFonts:i,handoffStep:a,chosenCustomColors:s}=(0,m.useSelect)((e=>{const t=e(Qa);return{chosenCategories:t.getChosenCategories(),chosenColors:t.getChosenColors(),chosenCustomColors:t.getChosenCustomColors(),chosenFonts:t.getChosenFonts(),handoffStep:t.getHandoffStep()}})),{setDockView:c,setIsBuildingSite:l,setIsHandoff:u,setIsToolContainerVisible:d,setCurrentHandoffArea:p,setCurrentUserMessage:h,setChatComponents:g,setShowChatContinueButton:y,setChatContinueButtonOnClick:b,setHandoffStep:v,setShowEditorWelcome:w,setAssistant:k}=(0,m.useDispatch)(Qa),{zoomIn:_}=vc(),{userSay:x}=Ce(),{activeAgent:C}=we(),{initializeThread:S}=Ip(),{generateColorPalette:E}=Nu(),{showFontPicker:I}=ad(),{showSiteLayouts:T}=pd(),{withJetpackTokenRequest:A}=Kd(),{currentColor:P,currentFont:N}=e(),O=(0,f.useRef)(),R=(0,f.useRef)(),M=(0,f.useRef)(),L=()=>{ea("handoff_finished"),l(!1),u(!1),p(null),c(Y.CHAT),d(!1),t("edit"),_(),(()=>{w(!0),S((0,z.__)("Welcome to the editor! Click around to edit your layout, images, or copy. You can also give me commands.","big-sky"));const e=[{key:"help-edit-text",actionName:(0,z.__)("How do I edit text?","big-sky")},{key:"help-edit-images",actionName:(0,z.__)("How do I change images?","big-sky")}];g([(0,r.createElement)(Wl,{key:"suggestions",args:{actions:e},respond:async e=>{await A((()=>x(e))),h(""),g([])}})])})()};(0,f.useEffect)((()=>{M.current||(ea("handoff_start"),M.current=!0)}),[]);const D=e=>{g([]);const t=B.findIndex((t=>t.key===e));v(t)};(0,f.useEffect)((()=>{if("ask-ai-colors"!==B[a].key&&"ask-ai-fonts"!==B[a].key)return y(!1),O.current=P,void(R.current=N);"ask-ai-colors"===B[a].key&&C?.id!==Ru.id&&k(Ru.id),"ask-ai-fonts"===B[a].key&&C?.id!==cd.id&&k(cd.id),O.current!==P&&(O.current=P,y(!0),b((()=>{D("pick-fonts"),p("fonts")}))),R.current!==N&&(R.current=N,y(!0),b((()=>{D("pick-layouts"),p("layouts")})))}),[P,N,a,y,b,D,p]);const B=[{key:"welcome",component:(0,r.createElement)(Ep,{title:(0,z.__)("Welcome!","big-sky"),description:(0,z.__)("Pick your color palette, font pairing, and layout in three quick steps. Edit details after in the Editor.","big-sky"),primaryCta:{text:(0,z.__)("Continue","big-sky"),onClick:()=>{ea("handoff_continue_click",{step:"welcome"}),D("pick-colors"),p("colors")}},tertiaryCta:{text:(0,z.__)("Do this later","big-sky"),onClick:()=>{ea("handoff_do_later_click"),L()}}})},{key:"pick-colors",component:(0,r.createElement)(Ep,{onBackClick:()=>{ea("handoff_back_click",{step:"pick-colors"}),D("welcome")},title:(0,z.__)("Pick your colors","big-sky"),description:(0,z.__)("Select from our AI-recommended color palettes to complement your site's design.","big-sky"),component:e=>{E({colors:o,custom_colors:s,category:"",callback:t=>{e(t)}})},primaryCta:{text:(0,z.__)("Continue","big-sky"),onClick:()=>{ea("handoff_continue_click",{step:"pick-colors"}),D("pick-fonts"),p("fonts")}},tertiaryCta:{text:(0,z.__)("Ask AI for new color palettes","big-sky"),onClick:()=>{ea("handoff_ask_ai_click",{step:"pick-colors"}),D("ask-ai-colors")},isAi:!0},onSkip:()=>{ea("handoff_skip_click",{step:"pick-colors"}),D("pick-fonts"),p("fonts")}})},{key:"ask-ai-colors",component:(0,r.createElement)(Ep,{onBackClick:()=>{ea("handoff_back_click",{step:"ask-ai-colors"}),D("pick-colors")},title:(0,z.__)("Ask AI","big-sky"),component:(0,r.createElement)(mp,{showNavigation:!1,useBlockContext:!1,agentQuestion:(0,z.__)("Give me a little more information on the type of colors you want, or I can suggest colors for you.","big-sky"),defaultPrompt:(0,z.__)('"Show me modern colors"',"big-sky"),onlyShowLastRequest:!0}),isChatMode:!0,onSkip:()=>{ea("handoff_skip_click",{step:"ask-ai-colors"}),D("pick-fonts"),p("fonts")}})},{key:"pick-fonts",component:(0,r.createElement)(Ep,{onBackClick:()=>{ea("handoff_back_click",{step:"pick-fonts"}),D("pick-colors"),p("colors")},title:(0,z.__)("Pick your font pair","big-sky"),description:(0,z.__)("Select from these curated fonts pairing.","big-sky"),component:e=>{I({keywords:[],fonts:i,callback:t=>{e(t)}})},primaryCta:{text:(0,z.__)("Continue","big-sky"),onClick:()=>{D("pick-layouts"),p("layouts")}},tertiaryCta:{text:(0,z.__)("Ask AI to combine more font pairings","big-sky"),onClick:()=>{D("ask-ai-fonts")},isAi:!0},onSkip:()=>{ea("handoff_skip_click",{step:"pick-fonts"}),D("pick-layouts"),p("layouts")}})},{key:"ask-ai-fonts",component:(0,r.createElement)(Ep,{onBackClick:()=>{ea("handoff_back_click",{step:"ask-ai-fonts"}),D("pick-fonts")},title:(0,z.__)("Ask AI","big-sky"),component:(0,r.createElement)(mp,{showNavigation:!1,useBlockContext:!1,agentQuestion:(0,z.__)("Give me a little more information on the type of fonts you'd like. I can also suggest some fonts for you.","big-sky"),defaultPrompt:(0,z.__)('"Show me modern fonts"',"big-sky"),onlyShowLastRequest:!0}),isChatMode:!0,onSkip:()=>{ea("handoff_skip_click",{step:"ask-ai-fonts"}),D("pick-layouts"),p("layouts")}})},{key:"pick-layouts",component:(0,r.createElement)(Ep,{onBackClick:()=>{ea("handoff_back_click",{step:"pick-layouts"}),D("pick-fonts"),p("fonts")},title:(0,z.__)("Pick a layout","big-sky"),description:(0,z.__)("Finally, pick from these layouts to organize your content and enhance user experience.","big-sky"),component:e=>{T({categories:n,callback:t=>{e(t)}})},primaryCta:{text:(0,z.__)("Continue","big-sky"),onClick:()=>{ea("handoff_finish"),L()}},tertiaryCta:!1,onSkip:()=>{ea("handoff_skip_click",{step:"pick-layouts"}),L()}})}];return(0,r.createElement)("div",{key:B[a].key},(0,f.cloneElement)(B[a].component))}function Ap(){const{currentToolCall:e}=(0,m.useSelect)((e=>({currentToolCall:e(Qa).getCurrentToolCall()}))),{getSelectedBlock:t}=(0,m.useSelect)(y.store),n=t();return(0,r.createElement)("p",{className:"big-sky__dock__pending-action-message"},wp(e,n))}const Pp=(0,c.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(s.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})}),Np=(0,c.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(s.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})});function Op({onAssistantMenuClick:e,imageUrl:t}){const n=(0,z.__)("Background Image","big-sky");return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ul.Button,{onClick:()=>e(n,"background-image"),icon:!t&&Pp,className:"has-color-picker has-chevron",label:(0,z.__)("Background image","big-sky")},t&&(0,r.createElement)("img",{src:t,alt:(0,z.__)("Cover image","big-sky"),className:"big-sky__assistant-ai-actions__color-picker__button is-small"}),(0,r.createElement)(rp,{icon:Np})))}function Rp({onAssistantMenuClick:e}){const t=(0,z.__)("Update","big-sky");return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ul.Button,{className:"has-chevron",onClick:()=>e(t,"button-update")},t,(0,r.createElement)(rp,{icon:Np})))}const Mp=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});function Lp({onAssistantMenuClick:e}){const t=(0,z.__)("Add Pattern","big-sky"),n=(0,z.__)("Describe the pattern to add","big-sky"),{userSay:o}=Ce(),{initializeThread:i}=Ip(),{setChatComponents:a,setCurrentUserMessage:s}=(0,m.useDispatch)(Qa),{withJetpackTokenRequest:c}=Kd(),{getAvailablePatternCategories:l}=tl(),{patterns:u}=ms().getSiteMetadata(),{currentPostId:d}=(0,m.useSelect)((e=>({currentPostId:e(g.store).getCurrentPostId()})));return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ul.Button,{onClick:()=>(async()=>{e(t,"add-pattern",n),i((0,z.__)("What kind of pattern would you like to add to your page?","big-sky"));const p=l()?.filter((e=>"header"!==e&&"footer"!==e));let h=[];h=Array.isArray(u)?u.map((e=>e.category)):u[d]?.map((e=>e.category));const g={actions:p.filter((e=>!h.includes(e))).sort((()=>Math.random()-.5)).map((e=>(e=>{switch(e){case"about":return{key:e,actionName:(0,z.__)("About Section","big-sky"),description:(0,z.__)("A section about my site","big-sky"),message:(0,z.__)("Insert a section all about my site","big-sky")};case"contact":return{key:e,actionName:(0,z.__)("Contact","big-sky"),description:(0,z.__)("A contact section","big-sky"),message:(0,z.__)("Insert a section with contact information","big-sky")};case"events":return{key:e,actionName:(0,z.__)("Events List","big-sky"),description:(0,z.__)("A list of upcoming events","big-sky"),message:(0,z.__)("Insert a section with a list of upcoming events","big-sky")};case"gallery":return{key:e,actionName:(0,z.__)("Image Gallery","big-sky"),description:(0,z.__)("A gallery of images","big-sky"),message:(0,z.__)("Insert a section with a gallery of images","big-sky")};case"intro":return{key:e,actionName:(0,z.__)("Intro Section","big-sky"),description:(0,z.__)("A section introducing my site","big-sky"),message:(0,z.__)("Insert a section introducing my site","big-sky")};case"menu":return{key:e,actionName:(0,z.__)("Menu","big-sky"),description:(0,z.__)("A food menu","big-sky"),message:(0,z.__)("Insert a section for my food menu","big-sky")};case"newsletter":return{key:e,actionName:(0,z.__)("Newsletter","big-sky"),description:(0,z.__)("A newsletter subscribe form","big-sky"),message:(0,z.__)("Insert a section with a newsletter subscribe form","big-sky")};case"posts":return{key:e,actionName:(0,z.__)("Posts List","big-sky"),description:(0,z.__)("A list of my posts","big-sky"),message:(0,z.__)("Insert a section with a list of my posts","big-sky")};case"pricing":return{key:e,actionName:(0,z.__)("Pricing Table","big-sky"),description:(0,z.__)("A pricing table for my services","big-sky"),message:(0,z.__)("Insert a section with a pricing table for my services","big-sky")};case"services":return{key:e,actionName:(0,z.__)("Services List","big-sky"),description:(0,z.__)("A list of my services","big-sky"),message:(0,z.__)("Insert a section with a list of my services","big-sky")};case"testimonials":return{key:e,actionName:(0,z.__)("Testimonials","big-sky"),description:(0,z.__)("A list of testimonials","big-sky"),message:(0,z.__)("Insert a section with some testimonials","big-sky")};case"team":return{key:e,actionName:(0,z.__)("Team","big-sky"),description:(0,z.__)("A list of team members","big-sky"),message:(0,z.__)("Insert a section with a list of team members","big-sky")};default:const t=e.charAt(0).toUpperCase()+e.slice(1);return{key:e,actionName:t,description:(0,z.sprintf)(
// translators: %s is the pattern category name
// translators: %s is the pattern category name
(0,z.__)("A %s section","big-sky"),t)}}})(e)))};a([(0,r.createElement)(Wl,{key:"suggestions",args:g,respond:async e=>{await c((()=>o(e))),s(""),a([])}})])})(),icon:Mp,iconPosition:"left"},t))}function Dp({onAssistantMenuClick:e}){const t=(0,z.__)("Regenerate","big-sky");return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ul.Button,{className:"has-chevron",onClick:()=>e(t,"regenerate-image")},t,(0,r.createElement)(rp,{icon:Np})))}function Bp({onAssistantMenuClick:e}){const t=(0,z.__)("Add Page","big-sky"),n=(0,z.__)("Describe the page to add","big-sky"),{userSay:o}=Ce(),{initializeThread:i}=Ip(),{setChatComponents:a}=(0,m.useDispatch)(Qa),{withJetpackTokenRequest:s}=Kd();return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ul.Button,{onClick:()=>(async()=>{e(t,"add-page",n),i((0,z.__)("What kind of page would you like to add?","big-sky"));const c={actions:[(0,z.__)("A contact page","big-sky"),(0,z.__)("A blog page","big-sky")]};a([(0,r.createElement)(Wl,{key:"suggestions",args:c,respond:async e=>{await s((()=>o(e))),a([])}})])})(),icon:Mp,iconPosition:"left"},t))}const Fp=function({selectedBlock:e}){const{currentPostId:t}=(0,m.useSelect)((e=>({currentPostId:e(g.store).getCurrentPostId()}))),{savePost:n}=(0,m.useDispatch)(g.store);if(e?.attributes?.id===t)return null;const o=(0,z.__)("Edit page","big-sky");return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ul.Button,{icon:"edit",onClick:async()=>{await n(),window.location.href=`/wp-admin/site-editor.php?postId=${e?.attributes?.id}&postType=${e?.attributes?.type}&canvas=edit`}},o))};function jp({onAssistantMenuClick:e}){const t=(0,z.__)("Rewrite","big-sky");return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ul.Button,{className:"has-chevron",onClick:()=>e(t,"rewrite")},t,(0,r.createElement)(rp,{icon:Np})))}function Up(){const{selectedBlock:e}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{selectedBlock:t()}})),{getBlockStyles:t}=(0,m.useSelect)(La.store),{updateBlockAttributes:n}=(0,m.useDispatch)(y.store),{resetBlockTextColor:o}=hc(),{getSectionVariationBackgroundColor:i,getSectionVariationTextColor:a}=Js(),{currentColor:s}=ms().getSiteMetadata(),c=(0,f.useCallback)((()=>{if(!e)return null;const n=t(e.name);return n?(n.find((e=>"section-default"===e.name))||n.unshift({name:"section-default",label:"Default"}),n):null}),[t,e]),l=(0,f.useCallback)((()=>{if(!e||!e?.attributes?.className)return null;const t=[...e.attributes.className?.matchAll(K)];return!(!t||t.length<1)&&t[0][1]?.trim()}),[e]),u=(0,f.useCallback)((e=>{o(e),e.innerBlocks.length&&e.innerBlocks.forEach((e=>{u(e)}))}),[o]),d=(0,f.useCallback)((t=>{if(!e)return;const o=c();if(ea("dock_menu_item_click",{menu_slug:"section-color-variation-picker"}),!o)return;const i=o.findIndex((e=>e.name===t)),r=o[i+1>=o.length?0:i+1].name,a=e.attributes.className.replaceAll(K,"");n(e.clientId,{className:`${a.trim()} is-style-${r}`}),u(e)}),[c,u,e,n]);return(0,f.useMemo)((()=>{const e=l();if(!e)return null;const{hex:t}=i(e,s),{hex:n}=a(e,s);return t&&n&&(0,r.createElement)(Ul.Button,{key:`variation-${e}`,label:(0,z.__)("Pattern styles","big-sky"),onClick:()=>d(e),style:{background:`linear-gradient(90deg, ${t} 50%, ${n} 50%, ${n} 100%)`},className:"big-sky__pattern-variations-menu__button"})}),[l,i,s,a,d])}function qp(){const{currentColor:e}=ms().getSiteMetadata(),{getBlockAttributes:t,selectedBlock:n}=(0,m.useSelect)((e=>{const{getBlockAttributes:t,getSelectedBlock:n}=e(y.store);return{getBlockAttributes:t,selectedBlock:n()}})),{updateBlockAttributes:o}=(0,m.useDispatch)(y.store),{getParentRootPatternBlock:i}=bs(),{getThemeColors:a}=hc(),{getSectionVariationTextColor:s}=Js(),c=a(),[l,u]=(0,f.useState)((()=>n.attributes?.textColor||n.attributes?.style?.color?.text||null)),[d,p]=(0,f.useState)(null),h=(0,f.useCallback)((()=>{const t="#fff linear-gradient(-45deg,#0000 48%,#ddd 0,#ddd 52%,#0000 0)";if(!n)return t;const o=i(n.clientId);if(!o||!o.attributes?.className)return t;const r=[...o.attributes.className?.matchAll(K)];if(!r.length)return t;const a=r[0][1];if(!a)return t;const{hex:c}=s(a,e);return c||t}),[n,i,s,e]),g=(0,f.useCallback)((()=>{const e=c.find((({slug:e})=>e===n.attributes?.textColor));return e?.color||n.attributes?.style?.color?.text||h()}),[h,n.attributes,c]);(0,f.useEffect)((()=>{u(null);const e=g();e&&u(e),void 0===c.find((({color:e})=>e===n.attributes?.textColor))&&w(n.attributes?.style?.color?.text)}),[g,n,c]);const b=(0,f.useRef)(),v=async({color:e,slug:i})=>{u(e);const r=t(n.clientId),a={...r,textColor:i};i||(a.textColor=null,a.style={...r.style,color:{...r.style.color,text:e}}),await o(n.clientId,a)},w=e=>{b.current&&(b.current.style.background=e),p(e)},k=l||d||h();return(0,r.createElement)(Ul.Dropdown,{contentClassName:"big-sky__assistant-ai-actions__popover-content",popoverProps:{placement:"top-center",offset:14},renderToggle:({isOpen:e,onToggle:t})=>(0,r.createElement)("div",{onClick:()=>{ea("dock_menu_item_click",{selected_block:n?.name||null,menu_slug:"color-picker-toggle"}),t()},role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||t()}},(0,r.createElement)(Ul.Button,{className:"has-chevron has-color-picker","aria-expanded":e},(0,r.createElement)("span",{style:{background:k},className:"big-sky__assistant-ai-actions__color-picker__button is-small"}),(0,r.createElement)(Ul.Icon,{icon:Np}))),renderContent:()=>(0,r.createElement)("div",{className:"big-sky__assistant-ai-actions__color-picker"},c.map((({color:e,slug:t})=>(0,r.createElement)(Ul.Button,{key:e,style:{background:e},onClick:()=>{ea("dock_menu_item_click",{selected_block:n?.name||null,menu_slug:"color-picker-choice",color_name:e}),v({color:e,slug:t})},className:"big-sky__assistant-ai-actions__color-picker__button"+(l===e?" is-selected":"")}))),(0,r.createElement)(Ul.Dropdown,{className:"big-sky__assistant-ai-actions__color-picker__wheel",contentClassName:"big-sky__assistant-ai-actions__popover-content big-sky__assistant-ai-actions__popover-colorpicker",popoverProps:{placement:"top-center",offset:16},renderToggle:({isOpen:e,onToggle:t})=>(0,r.createElement)(Ul.Button,{className:jl("big-sky__assistant-ai-actions__color-picker__button","big-sky__assistant-ai-actions__color-picker__wheel-button",{"is-selected":l===d,"has-custom-color":d}),style:{background:d},ref:b,onClick:()=>{ea("dock_menu_item_click",{selected_block:n?.name||null,menu_slug:"color-picker-choice",color_name:"color-wheel"}),d&&(w(d),v({color:d,slug:null})),t()},"aria-expanded":e},d&&(0,r.createElement)("span",{className:"big-sky__assistant-ai-actions__color-picker__custom-indicator"})),renderContent:()=>(0,r.createElement)(Ul.ColorPicker,{onChange:e=>{w(e),v({color:e,slug:null})},color:d})}))})}function $p({setChatSettings:e,setUseBlockContext:t}){const{isOnboarded:n}=ms().getSiteMetadata(),{selectedBlock:o}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{selectedBlock:t()}})),{setDockView:i,setLastSelectedBlock:a,setHideInput:s}=(0,m.useDispatch)(Qa),c=(0,f.useCallback)((()=>{if(!o||!n)return null;const c=(r={})=>({onAssistantMenuClick:(c,l=null,u=kp(n).prompt,d=!0)=>{ea("dock_menu_item_click",{selected_block:o?.name||null,menu_slug:l}),s(!1),t(d),a(o),i(Y.CHAT),e({title:c,prompt:u,...r})}}),l=o?.attributes?.metadata?.remotePatternId;switch(o.name){case"core/group":case"core/post-content":return l?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Lp,{...c({showThread:!0})}),(0,r.createElement)(Up,null)):null;case"core/paragraph":case"core/heading":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(jp,{...c()}),(0,r.createElement)(qp,null));case"core/image":case"core/site-logo":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Dp,{...c()}));case"core/cover":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Lp,{...c({showThread:!0})}),(0,r.createElement)(Op,{...c(),imageUrl:o?.attributes?.url}));case"core/button":case"core/social-link":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Rp,{...c()}));case"core/navigation-link":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Fp,{...c(),selectedBlock:o}));case"core/page-list":case"core/navigation":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Bp,{...c()}));default:return null}}),[o,n,s,t,a,i,e])();return(0,r.createElement)(r.Fragment,null,c&&(0,r.createElement)("div",{className:"big-sky__dock-ai-menus"},c))}function Hp({setChatSettings:e,setUseBlockContext:t}){const{isOnboarded:n}=ms().getSiteMetadata(),{setDockView:o,setIsToolContainerVisible:i,setHideInput:a}=(0,m.useDispatch)(Qa),{dockView:s,isAssistantButtonVisible:c,isBuildingSite:l,selectedBlock:u}=(0,m.useSelect)((e=>{const t=e(Qa),n=e(y.store);return{isAssistantButtonVisible:t.getIsAssistantButtonVisible(),isBuildingSite:t.getIsBuildingSite(),dockView:t.getDockView(),selectedBlock:n.getSelectedBlock()}})),{setShowThread:d}=(0,m.useDispatch)(Qa),{clearMessages:p}=Ce(),h=(0,f.useCallback)((()=>{l||[Y.PENDING,Y.HANDOFF].includes(s)||(ea("dock_assistant_icon_click",{selected_block:u?.name||null}),p(),a(!1),t(!1),d(!1),o(Y.CHAT),e(kp(n)))}),[l,s,t,d,o,e,n]);return(0,f.useEffect)((()=>{const e=e=>{n&&(e.metaKey||e.ctrlKey)&&"j"===e.key&&(e.preventDefault(),s===Y.CHAT?o(Y.MENUS):h())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[h,s,o,n]),(0,r.createElement)(r.Fragment,null,(![Y.CHAT,Y.COMPLETED,Y.HANDOFF].includes(s)||s===Y.HANDOFF&&c)&&(0,r.createElement)(gp,{onClick:h,width:48,height:48}),s===Y.HANDOFF&&(0,r.createElement)(Tp,{setChatSettings:e}),s===Y.COMPLETED&&(0,r.createElement)(Sp,{setIsToolContainerVisible:i}),s===Y.PENDING&&(0,r.createElement)(Ap,null),s===Y.MENUS&&(0,r.createElement)($p,{setUseBlockContext:t,setChatSettings:e}))}function zp(){const[e,t]=(0,f.useState)(!0),[n,o]=(0,f.useState)("big-sky__dock"),[i,a]=(0,f.useState)(null),{isOnboarded:s}=ms().getSiteMetadata(),{zoomIn:c,zoomOut:l}=vc(),[u,d]=(0,f.useState)(kp(s)),{messages:p,clearMessages:h,agentSay:b}=Ce(),{showSiteLayouts:v}=pd(),{setChatComponents:w,setShowThread:k,setDockView:_,setOnSelectedBlockAction:x,setInputtedFiles:C,setOnInputtedFilesAction:S,setShowEditorWelcome:E,setToolComponent:I,setIsToolContainerVisible:T}=(0,m.useDispatch)(Qa),{selectedBlock:A,editorMode:P,currentPostId:N}=(0,m.useSelect)((e=>{const{getSelectedBlock:t,__unstableGetEditorMode:n}=e(y.store),{getCurrentPostId:o}=e(g.store);return{selectedBlock:t(),editorMode:n(),currentPostId:o()}})),{isHandoff:O,isBuildingSite:R,isToolContainerVisible:M,isMaximized:L,showThread:D,pendingToolCallbacks:B,dockView:F,currentToolCall:j,onSelectedBlockAction:U,isEditorReady:q,newPageId:$}=(0,m.useSelect)((e=>{const t=e(Qa);return{isHandoff:t.getIsHandoff(),isBuildingSite:t.getIsBuildingSite(),isToolContainerVisible:t.isToolContainerVisible(),currentToolCall:t.getCurrentToolCall(),showThread:t.getShowThread(),pendingToolCallbacks:e(Qa).getPendingToolCallbacks(),dockView:t.getDockView(),isMaximized:t.getIsMaximized(),onSelectedBlockAction:t.getOnSelectedBlockAction(),isEditorReady:t.getIsEditorReady(),newPageId:t.getNewPageId()}})),H=(0,f.useRef)(),z=(0,f.useCallback)((()=>{k(!1),w([]),x({}),C([]),S({}),h(),E(!1)}),[k,w,x,C,S,h,E]);(0,f.useEffect)((()=>{o(jl("big-sky__dock",{"big-sky__dock__is-menus":F===Y.MENUS,"big-sky__dock__is-chat":F===Y.CHAT}));const{canvasiFrameBody:e}=ys();e?.classList&&(e.classList.remove("big-sky__dock__is-menus"),e.classList.remove("big-sky__dock__is-chat"),e.classList.add(`big-sky__dock__is-${F}`))}),[F,s]);const G=A?.clientId&&i!==A?.clientId;(0,f.useEffect)((()=>{G&&(z(),a(A.clientId))}),[U?.action,z,A,G,P]),(0,f.useEffect)((()=>{const t=function({isOnboarded:e,isHandoff:t,dockView:n,showThread:o,isToolContainerVisible:i,pendingToolCallbacks:r,selectedBlockHasChanged:a,currentToolCall:s}){return e?t?Y.HANDOFF:r>0?Y.PENDING:n!==Y.PENDING||r?n!==Y.CHAT&&n!==Y.COMPLETED||o||!a||i||"remove_block"===s||"modify_contact_form"===s?n:Y.MENUS:Y.COMPLETED:Y.CHAT}({isOnboarded:s,isHandoff:O,dockView:F,showThread:D,isToolContainerVisible:M,pendingToolCallbacks:B,selectedBlockHasChanged:G,currentToolCall:j});t!==F&&_(t),function({showThread:e,newView:t,useBlockContext:n,selectedBlockHasChanged:o}){return!(!e||t!==Y.PENDING&&t!==Y.COMPLETED&&(t!==Y.CHAT||!n||!o))}({showThread:D,newView:t,useBlockContext:e,selectedBlockHasChanged:G})&&k(!1)}),[s,O,F,D,A,i,M,B,k,G,e,_,j]);const V=(0,f.useCallback)((()=>{ea("dock_back_button_click"),c(),_(Y.MENUS),z()}),[c,_,z]);return(0,f.useEffect)((()=>{if(!s||R)return;const e=e=>{"Escape"===e.key&&V()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[V,s,R]),(0,f.useEffect)((()=>{q&&$===N&&b(v({callback:e=>{l(),I(e),T(!0),_(Y.COMPLETED)}}))}),[N,q,$]),(0,r.createElement)(r.Fragment,null,(0,r.createElement)(xp,null),(0,r.createElement)(Ul.Popover,{resize:L,className:jl("big-sky__dock__wrapper","big-sky__assistant-ai-actions__popover-content",{"big-sky__dock__is-onboarding":!s,"big-sky__dock__is-maximized":L})},(0,r.createElement)("div",{className:n},(0,r.createElement)(Ul.__unstableAnimatePresence,{mode:"wait"},(0,r.createElement)("div",{className:"big-sky__dock__container"},(0,r.createElement)(Ul.__unstableMotion.div,{layoutRoot:!0,className:"big-sky__dock__animator",key:`${A?.name}-content`,ref:H,initial:{width:H.current?.offsetWidth,height:H.current?.offsetHeight,opacity:0},animate:{opacity:1,width:bp(F,L),height:vp(F,L),transition:{type:"spring",mass:1.1,stiffness:280,damping:28}}},F===Y.CHAT&&!G&&(0,r.createElement)(mp,{showNavigation:p.length>0,navigationTitle:u.title,onClickBackButton:()=>V(),useBlockContext:e,defaultPrompt:u.prompt,isOnboarded:s}),(0,r.createElement)(Hp,{setChatSettings:d,setUseBlockContext:t})))))))}const Gp=window.wp.preferences;function Vp(e){const t=new Image;t.onerror=t=>{ra.error("Error preloading image after uploading from pexels",t,{url:e})},t.src=e}function Wp(e,t){const n=[];return e.forEach((e=>{["core/image","core/cover"].includes(e.name)&&e.attributes.url&&!e.attributes.url.startsWith(t)&&e.attributes.url.includes("pexels.com")&&n.push(e),n.push(...Wp(e.innerBlocks,t))})),n}let Yp=!1;function Jp(){const{postType:e,postId:t}=(0,m.useSelect)((e=>({postType:e(g.store).getCurrentPostType(),postId:e(g.store).getCurrentPostId()}))),n=(0,m.useSelect)((n=>n(Wr.store).isSavingEntityRecord("postType",e,t))),{editorBlocks:o,siteUrl:i}=(0,m.useSelect)((e=>({editorBlocks:e(g.store).getEditorBlocks(),mediaUpload:e(y.store).getSettings().mediaUpload,siteUrl:e(Wr.store).getSite()?.url||""})),[]),{updateBlockAttributes:r}=(0,m.useDispatch)(y.store),{savePost:a}=(0,m.useDispatch)(g.store);function s(){const e=Fr(),n=e?`https://${window.Jetpack_Editor_Initial_State.siteFragment}`:i,a=Wp(o,n).map((e=>{const t=e.attributes.url.match(/pexels\.com\/photos\/(\d+)\//);return e.pexelsID=t?t[1]:null,e})).filter((e=>e.pexelsID)),s=[];if(a.length>0){const n=e?"rest/v1.1/external-media-upload":"wpcom/v2/external-media/copy/pexels",o=a.map((e=>({guid:JSON.stringify({url:e.attributes.url,caption:e.pexelsID,name:`image-pexels-${e.pexelsID}.jpg`,title:"Uploaded from Pexels "+e.pexelsID})}))),i=jr({path:n,method:"POST",data:{[e?"external_ids":"media"]:e?o.map((e=>e.guid)):o,service:"pexels",post_id:t}}).then((e=>new Promise(((t,n)=>{var o;const i=null!==(o=e?.media)&&void 0!==o?o:e;ra.info("Uploaded images",i),a.length!==i.length&&n("Not all images were uploaded");for(let e=0;e<i.length;e++){var s,c,l,u,d;const t=null!==(s=null!==(c=i[e].error)&&void 0!==c?c:i[e].errors)&&void 0!==s?s:null;null===t?(Vp(null!==(l=i[e]?.URL)&&void 0!==l?l:i[e].url),r(a[e].clientId,{id:null!==(u=i[e]?.ID)&&void 0!==u?u:i[e].id,url:null!==(d=i[e]?.URL)&&void 0!==d?d:i[e].url})):n(t)}t()}))));s.push(i)}else Promise.resolve([]);return Promise.all(s)}return{importExternalImagesNow:async()=>{Yp=!0,await s(),Yp=!1},importExternalImagesOnSave:async()=>{!Yp&&n&&(Yp=!0,(await s()).length>0&&await a(),Yp=!1)}}}function Kp(){!function({awaitEditor:e}){var t;const{canvasMode:n,clearTemplateParts:o,clearBlocks:i,insertDummySections:r,setIframeScale:a,zoomIn:s,zoomOut:c}=vc(),{setDefaultEditMode:l}=tl(),[u,d]=(0,f.useState)(!1),[p,h]=(0,f.useState)(!1),{getBlocks:b,getBlockCount:v}=(0,m.useSelect)((e=>({getBlocks:e(y.store).getBlocks,getBlockCount:e(y.store).getBlockCount}))),{setRenderingMode:w}=(0,m.useDispatch)(g.store),{isOnboarded:k}=ms().getSiteMetadata(),{chosenCategories:_,isBuildingSite:x,isEditorReady:C,isEditorIframeLoaded:S,isHandoff:E,isTemplatePartContentReady:I}=(0,m.useSelect)((e=>({chosenCategories:e(Qa).getChosenCategories(),isBuildingSite:e(Qa).getIsBuildingSite(),isEditorReady:e(Qa).getIsEditorReady(),isEditorIframeLoaded:e(Qa).getIsEditorIframeLoaded(),isHandoff:e(Qa).getIsHandoff(),isTemplatePartContentReady:e(Qa).getIsTemplatePartContentReady()}))),{getContentBlockClientID:T,getTemplatePartClientID:A}=bs(),{setDefaults:P}=(0,m.useDispatch)(Gp.store),{setIsEditorReady:N,setIsEditorIframeLoaded:O,setIsTemplatePartContentReady:R}=(0,m.useDispatch)(Qa),{setShowWelcomeGuide:M}=null!==(t=(0,m.useDispatch)("automattic/wpcom-welcome-guide"))&&void 0!==t?t:{};(0,f.useEffect)((()=>{e&&!u&&(d(!0),(async()=>{await new Promise((e=>{const t=(0,m.subscribe)((()=>{v(T())>=0&&(t(),e())}))})),N(!0)})())}),[v,N,e,u,T]);const L=(0,f.useCallback)((()=>{const{canvasiFrameDocument:e}=ys();return e?.querySelector("html")}),[]);(0,f.useEffect)((()=>{P("core",{distractionFree:!0,fixedToolbar:!0,isComplementaryAreaVisible:!1,showBlockBreadcrumbs:!1}),P("core/edit-site",{isComplementaryAreaVisible:!1,welcomeGuide:!1,welcomeGuidePage:!1,welcomeGuideStyles:!1,welcomeGuideTemplate:!1})}),[P]),(0,f.useEffect)((()=>{M&&M(!1)}),[M]),(0,f.useEffect)((()=>{const t=async()=>{const e=L();if(!e?.classList.contains("block-editor-iframe__html"))return await Wa(500),void t();O(!0)};C&&e&&!S&&t()}),[e,L,S,C,O]),function(){const e=(0,f.useRef)(),t=(0,f.useRef)(),{getMedia:n}=(0,m.useSelect)((e=>{const{getMedia:t}=e(Wr.store);return{getMedia:t}}),[]),{record:o,editedRecord:i,isResolving:r}=(0,Wr.useEntityRecord)("root","site"),{useCustomCss:a}=hc(),[s,c]=a(),{currentColor:l}=ms().getSiteMetadata(),{setStyleProperties:u}=vc(),{getColorVariationByTitle:d}=Js(),{isEditorReady:p,isEditorIframeLoaded:h}=(0,m.useSelect)((e=>({isEditorReady:e(Qa).getIsEditorReady(),isEditorIframeLoaded:e(Qa).getIsEditorIframeLoaded()}))),{canvasiFrameDocument:g}=ys();(0,f.useEffect)((()=>{if(!p||!h||!g)return;const n=g.getElementById("svg-logo-colors");if(n)e.current=n;else{const t=g.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("id","svg-logo-colors"),t.setAttribute("width","0px"),t.setAttribute("height","0px"),t.setAttribute("class","logo-svg"),g.body.appendChild(t),e.current=t}const o=g.getElementById("style-logo-colors");if(o)t.current=o;else{const e=g.createElement("style");e.setAttribute("id","style-logo-colors"),g.body.appendChild(e),t.current=e}}),[g,h,p]),(0,f.useEffect)((()=>{var a;if(!p||!h)return;if(r)return;const g=null!==(a=i?.site_logo)&&void 0!==a?a:o?.site_logo;g&&(async()=>{var o;let i=n(g);!i&&g&&(i=await async function(e){try{return await jr({path:`/wp/v2/media/${e}`,method:"GET"})}catch(e){ra.error("Error fetching media by id: ",e)}}(g));const r=!!i?.meta?.big_sky_generated_logo,a=d(l),p=r?Object.entries(null!==(o=d(l)?.styles?.blocks?.["core/group"]?.variations)&&void 0!==o?o:{}).map((([e,t])=>{var n,o;return{name:e,text:null!==(n=null!==(o=t?.color?.text)&&void 0!==o?o:a?.styles?.color?.text)&&void 0!==n?n:"#000"}})):[];var h;r&&!p.includes("section-default")&&p.unshift({name:"section-default",text:null!==(h=a?.styles?.color?.text)&&void 0!==h?h:"#000"}),e.current&&t.current&&function(e,t,n){e.replaceChildren();const o=[];for(const t of n){o.push(`.is-style-${t.name} feFlood { color: ${t.text}; }`),o.push(`.is-style-${t.name} { --site-logo-filter: url(#svg-logo-color-${t.name}); }`);const n=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","filter");n.setAttribute("id",`svg-logo-color-${t.name}`),n.setAttribute("class",`is-style-${t.name}`),n.setAttribute("color-interpolation-filters","sRGB");const i=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","feFlood");i.setAttribute("flood-color","currentcolor"),i.setAttribute("result","flood");const r=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","feComposite");r.setAttribute("operator","in"),r.setAttribute("in","flood"),r.setAttribute("in2","SourceGraphic"),n.appendChild(i),n.appendChild(r),e.appendChild(n)}t.textContent=o.join("\n")}(e.current,t.current,p),u(r?{"--site-logo-url":`url(${i.source_url})`,"--site-logo-object-position":"-1024px"}:{"--site-logo-url":"none","--site-logo-object-position":"50%"}),r?$c(s,c,i.source_url):function(e,t){e.includes("/* START Big Sky */")&&t(e.replace(/\/\* START Big Sky \*\/.*\/\* END Big Sky \*\//s,"").trim())}(s,c)})()}),[l,d,n,h,p,r,u,s,c,i?.site_logo,o?.site_logo])}();const D=(0,f.useRef)(null);(0,f.useEffect)((()=>{const{canvasiFrame:e}=ys();return S?(e.style.visibility="visible",D.current||(D.current=new window.MutationObserver((t=>{for(const n of t)for(const t of n.removedNodes)t.contains(e)&&O(!1)})),D.current.observe(document.getElementById("site-editor"),{subtree:!0,childList:!0}))):D.current&&(D.current.disconnect(),D.current=null),()=>{D.current&&(D.current.disconnect(),D.current=null)}}),[S,O]),(0,f.useEffect)((()=>{(async()=>{const{canvasiFrame:e}=ys();C&&!S&&e?e.style.opacity=0:C&&S&&e&&(await Wa(300),e.style.opacity=1)})()}),[C,S]),(0,f.useEffect)((()=>{e&&!p&&(h(!0),(async()=>{await new Promise((e=>{const t=(0,m.subscribe)((()=>{const n=b(A("header")),o=b(A("footer"));n.length>0&&o.length>0&&(t(),e())}))})),R(!0)})())}),[A,b,R,e,p]),(0,f.useEffect)((()=>{if(!I)return;const e=b(A("header")),t=b(A("footer"));l([...e,...t])}),[I,b,A,l]),(0,f.useEffect)((()=>{S&&(async()=>{const{canvasiFrame:e,canvasiFrameRoot:t}=ys();if(x)return e.classList.add("big-sky__is-building-site"),t.classList.add("big-sky__is-building-site"),t.classList.add("big-sky__is-building-site-overlay"),c(),w("template-locked"),void(E||(await Wa(500),await Promise.all([o(),i()]),_.length&&(await r({count:_.length+2,replaceTemplateParts:!0}),t.classList.remove("big-sky__is-building-site-overlay"))));k&&(w("template-locked"),s()),e.classList.remove("big-sky__is-building-site"),t.classList.remove("big-sky__is-building-site")})()}),[_,x,S,k]),(0,f.useEffect)((()=>{(async()=>{const{canvasiFrameRoot:e}=ys(),t=document.querySelector(".big-sky__ai-messages");"view"===n?(document.querySelector("body").classList.add("big-sky__canvas-mode-view"),e?.classList?.add("big-sky__canvas-mode-view"),t&&(t.style.visibility="hidden")):(document.querySelector("body").classList.remove("big-sky__canvas-mode-view"),e?.classList?.remove("big-sky__canvas-mode-view"),await Wa(1500),t&&(t.style.visibility="visible"),a())})()}),[n,S,a])}({awaitEditor:!0});const{importExternalImagesOnSave:e}=Jp();return(0,f.useEffect)((()=>{e()}),[e]),null}const Xp=({hook:e})=>(e(),null);function Qp(){return(0,r.createElement)(r.Fragment,null,Md.filter((e=>e.toolkitHook)).map(((e,t)=>(0,r.createElement)(Xp,{key:t,hook:e.toolkitHook}))))}const Zp=(0,c.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(s.Path,{d:"M7 7.2h8.2L13.5 9l1.1 1.1 3.6-3.6-3.5-4-1.1 1 1.9 2.3H7c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.2-.5zm13.8 4V11h-1.5v.3c0 1.1 0 3.5-1 4.5-.3.3-.7.5-1.3.5H8.8l1.7-1.7-1.1-1.1L5.9 17l3.5 4 1.1-1-1.9-2.3H17c.9 0 1.7-.3 2.3-.9 1.5-1.4 1.5-4.2 1.5-5.6z"})}),eh=[{actionName:(0,z.__)("Build a website","big-sky"),description:(0,z.__)("for my bakery","big-sky")},{actionName:(0,z.__)("Design a portfolio","big-sky"),description:(0,z.__)("for showcasing my work","big-sky")},{actionName:(0,z.__)("Make a landing page","big-sky"),description:(0,z.__)("for my new book","big-sky")},{actionName:(0,z.__)("Create a portfolio","big-sky"),description:(0,z.__)("for my handmade jewelry","big-sky")},{actionName:(0,z.__)("Build a blog","big-sky"),description:(0,z.__)("for my travel adventures","big-sky")},{actionName:(0,z.__)("Design a website","big-sky"),description:(0,z.__)("for my restaurant","big-sky")},{actionName:(0,z.__)("Design a landing page","big-sky"),description:(0,z.__)("for my photography","big-sky")},{actionName:(0,z.__)("Make a website","big-sky"),description:(0,z.__)("for my yoga studio","big-sky")},{actionName:(0,z.__)("Build an online presence","big-sky"),description:(0,z.__)("for my business","big-sky")},{actionName:(0,z.__)("Create a site","big-sky"),description:(0,z.__)("for my podcast","big-sky")},{actionName:(0,z.__)("Design a website","big-sky"),description:(0,z.__)("for my fitness coaching","big-sky")},{actionName:(0,z.__)("Build a website","big-sky"),description:(0,z.__)("for my coffee shop","big-sky")}];function th({onClickSuggestion:e,animationVariants:t}){const{setChatComponents:n,setCurrentUserMessage:o}=(0,m.useDispatch)(Qa),{userSay:i}=Ce(),{logUserChoice:a}=zl(),{withJetpackTokenRequest:s}=Kd(),[c,l]=(0,f.useState)(!1),{currentUserMessage:u}=(0,m.useSelect)((e=>({currentUserMessage:e(Qa).currentUserMessage()}))),d=(0,f.useCallback)((async t=>{ea("onboarding_suggestion_click"),e(),o(t),await Wa(1500),a(t),await s((()=>i(t))),n([]),o("")}),[a,e,n,o,i,s]),p=(0,f.useCallback)(((e=3,t=[])=>{const n=t.map((e=>`${e.actionName} ${e.description}`));return[...eh.filter((e=>!n.includes(`${e.actionName} ${e.description}`)))].sort((()=>.5-Math.random())).slice(0,e).map((e=>({...e,key:H(),onClick:()=>{d(`${e.actionName} ${e.description}`)}})))}),[d]),[h,g]=(0,f.useState)(p());return(0,f.useEffect)((()=>{u?.length>0&&h?.length>0&&g([]),!u?.length>0&&!h?.length>0&&g(p())}),[u,h,p]),(0,r.createElement)(Ul.__unstableMotion.div,{...t},(0,r.createElement)(Ul.__unstableAnimatePresence,{mode:"wait",onExitComplete:()=>l(!1)},(0,r.createElement)("div",{className:jl("big-sky-onboarding__actions",{"big-sky-onboarding__actions__is-loading":c})},(0,r.createElement)(Gl,{actions:h,key:h[0]?.key,animationVariants:{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{ease:[.42,.24,.02,1],duration:.2,delay:.05}}}),h.length>0&&(0,r.createElement)(Ul.Button,{icon:Zp,onClick:async()=>{ea("onboarding_suggestion_refresh_click"),l(!0),await Wa(500),g(p(3,h)),l(!1)},className:"big-sky-onboarding__refresh-actions",label:(0,z.__)("Refresh","big-sky"),disabled:c}))))}function nh({onSendMessage:e,onClickSuggestion:t}){const n=(0,f.useRef)(null),o=[.42,.24,.02,1],i={ease:o,duration:.2},a={initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10,transition:{...i,delay:.3}},transition:i},s={ease:o,duration:.6,delay:a.exit.transition.delay+.5},c={exit:()=>{const e=document.querySelector(".big-sky-onboarding__assistant-button").getBoundingClientRect(),t=document.querySelector(".big-sky-onboarding__landing-view"),n=window.getComputedStyle(t);return{y:parseInt(n.paddingTop,10)-e.top}},transition:s},l={exit:()=>{const e=document.querySelector(".big-sky-onboarding__chat-input").getBoundingClientRect(),t=window.innerHeight,n=document.querySelector(".big-sky-onboarding__landing-view"),o=window.getComputedStyle(n),i=parseInt(o.paddingBottom,10);return{y:t-e.bottom-i}},transition:s};return(0,r.createElement)("div",{className:"big-sky-onboarding__landing-view"},(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky-onboarding__assistant-button",...c},(0,r.createElement)(gp,{width:100,height:100,color:"white"})),(0,r.createElement)(Ul.__unstableMotion.h1,{className:"big-sky-onboarding__title",...a},(0,z.__)("Make a website as unique as you.","big-sky")),(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky-onboarding__chat-input",...l},(0,r.createElement)(tp,{ref:n,prompt:(0,z.__)("What do you want to build?","big-sky"),onSendMessage:e})),(0,r.createElement)(th,{onClickSuggestion:t,animationVariants:a}))}function oh({onSendMessage:e}){const t=(0,f.useRef)(null),n=(0,f.useRef)(null);return(0,f.useEffect)((()=>{const e=new ResizeObserver((e=>{for(const t of e)t.target===n.current&&document.documentElement.style.setProperty("--chat-input-height",`${t.contentRect.height}px`)}));return n.current&&e.observe(n.current),()=>{e.disconnect()}}),[]),(0,r.createElement)("div",{className:"big-sky-onboarding__chat-view"},(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky-onboarding__assistant-button"},(0,r.createElement)(gp,{width:100,height:100,color:"white"})),(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky-onboarding__chat-thread"},(0,r.createElement)(dp,null)),(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky-onboarding__chat-input",ref:n},(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky-onboarding__actions"},(0,r.createElement)(Ul.__unstableAnimatePresence,{mode:"wait"},(0,r.createElement)("div",null,(0,r.createElement)(pp,{key:"chat-components-actions"}),(0,r.createElement)(Yl,{key:"chat-suggestions-actions"})))),(0,r.createElement)(tp,{ref:t,prompt:(0,z.__)("Send a message","big-sky"),onSendMessage:e})))}function ih(){const{topic:e}=ms().getSiteMetadata(),{apiKey:t,sessionId:n}=(0,m.useSelect)((e=>({apiKey:e(Qa).getApiKey(),sessionId:e(Qa).getSessionId()}))),[o,i]=(0,f.useState)(!!e),a=(0,f.useRef)(e),s=window.bigSkyInitialState?.isLocalGraph,{setStoreConversation:c}=Ce(),{setAiStep:l}=Cl();(0,f.useEffect)((()=>{null!==a.current&&null===e&&i(!1),a.current=e}),[e]),l("onboarding"),Be({apiKey:t,feature:"big-sky",service:s?x.LOCAL_GRAPH:x.WPCOM_JETPACK_AI,model:C.GPT_4O,sessionId:n,stream:!1}),Le(),(0,f.useEffect)((()=>(document.body.classList.add("big-sky-onboarding-open"),()=>{document.body.classList.remove("big-sky-onboarding-open")})),[]);const u=(0,f.useRef)(!1);(0,f.useEffect)((()=>{u.current||(ea("onboarding_started"),u.current=!0)}),[]),(0,f.useEffect)((()=>{c&&c(!0)}),[c]);const d=async()=>{i(!0),await Wa(1500)};return(0,r.createElement)(Ul.Popover,{className:"big-sky-onboarding"},(0,r.createElement)(Ul.__unstableMotion.div,{className:"big-sky-onboarding__content",key:"onboarding-content",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut",duration:.3,delay:.3}},(0,r.createElement)(Ul.__unstableAnimatePresence,{mode:"wait"},o?(0,r.createElement)(oh,{key:"onboarding-chat-view"}):(0,r.createElement)(nh,{key:"onboarding-landing-view",onSendMessage:d,onClickSuggestion:d}))))}const rh=function(){const{isBuildingSite:e,isEditorIframeLoaded:t,isDevMode:n,siteMetadata:o,currentHandoffArea:i}=(0,m.useSelect)((e=>({isBuildingSite:e(Qa).getIsBuildingSite(),isEditorIframeLoaded:e(Qa).getIsEditorIframeLoaded(),isDevMode:e(Qa).getIsDevMode(),siteMetadata:e(Qa).getSiteMetadata(),currentHandoffArea:e(Qa).getCurrentHandoffArea()}))),a=wc(),{logAction:s,logToolCall:c,logAssistantMessage:l,logError:u}=zl(),{canvasMode:d}=vc(),{setLastSelectedBlock:p,setDockView:h}=(0,m.useDispatch)(Qa),{lastSelectedBlock:b}=(0,m.useSelect)((e=>({lastSelectedBlock:e(Qa).getLastSelectedBlock()}))),{selectedBlock:v}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{selectedBlock:t()}})),{postType:w}=(0,m.useSelect)((e=>({postType:e(g.store).getCurrentPostType()}))),[k,_]=(0,f.useState)(!1),[x,C]=(0,f.useState)(!1),S=(0,f.useRef)(null),{messages:E,error:I}=Ce(),T=(0,f.useRef)(null),A=(0,f.useRef)(null),{buildNewSite:P}=rl(),{setSiteMetadata:N}=ms(),O=o?.isOnboarded,{setAiStep:R,showOnboardingDialog:M,setShowOnboardingDialog:L}=Cl({runUrlChangeHandling:!0}),{canvasiFrameBody:D}=ys();(0,f.useEffect)((()=>{const e=E?.[E.length-1];if(e&&e!==T.current){const t=e?.role,n=e?.content?.[0]?.text||e?.content||"",o=e?.tool_calls?.[0];if(t===G.ASSISTANT){const t=o?.function;t&&c(t,e.id),n&&l(n,e.id)}T.current=e}}),[E,c,l]),(0,f.useEffect)((()=>{I?I!==A.current&&(u(I),A.current=I):A.current=null}),[I,u]),(0,f.useEffect)((()=>{a&&s("Save Page",G.SAVE_PAGE)}),[a]),(0,f.useEffect)((()=>{v&&v.clientId!==S.current?.clientId&&(p(S.current),S.current=v)}),[v,p,b]),(0,f.useEffect)((()=>{w&&["page"].includes(w)?_(!0):_(!1)}),[w]),(0,f.useEffect)((()=>{D?t&&!x&&C(!0):C(!1)}),[t,x,C,D]);const B=O?[...Md]:[Il],F=Md.find((e=>"big-sky-color"===e.id)),j=Md.find((e=>"big-sky-font"===e.id));return(0,r.createElement)(r.Fragment,null,"edit"===d&&k&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ve,{activeAgentId:O?"colors"===i?F.id:"fonts"===i?j.id:cs.id:Il.id,agents:B,started:!0},x&&O&&(0,r.createElement)(zp,null),!O&&(0,r.createElement)(ih,null),(0,r.createElement)(Qp,null)),e&&(0,r.createElement)(Ld,null),n?(0,r.createElement)(Yd,null):null),(0,r.createElement)(Cp,{isOpen:M,onClose:()=>L(!1),onCancel:()=>{L(!1),R("handoff",!0),h(Y.MENUS)},onConfirm:()=>{L(!1),N({isOnboarded:!1},!1,!0),P()},message:(0,z.__)("If you go back, your current progress may be lost. From there, you can start fresh and create a new site.","big-sky"),cancelText:(0,z.__)("Continue editing","big-sky"),confirmText:(0,z.__)("Build a new site","big-sky"),title:(0,z.__)("Start Over?","big-sky")}),(0,r.createElement)(Kp,null))};class ah extends f.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){ra.error("Plugin Error:",e,t),this.props.onReset?.()}render(){return this.props.children}}const sh=ah,ch=window.wp.commands;function lh({name:e,hook:t,search:n}){var o;const{commands:i}=(0,m.useSelect)((e=>({commands:e(Qa).getCommands()}))),{addCommand:r}=(0,m.useDispatch)(Qa),a=null!==(o=t({search:n}))&&void 0!==o?o:{};return(0,f.useEffect)((()=>{i[e]&&i[e].length===a.commands.length||r({[e]:a.commands})}),[r,i,t,a.commands,e]),e&&t||ra.warn("invalid loader",{name:e,hook:t}),null}function uh(){const{commandLoadersNonContextual:e,commandLoadersContextual:t}=(0,m.useSelect)((e=>({commandLoadersNonContextual:e(ch.store).getCommandLoaders(!1),commandLoadersContextual:e(ch.store).getCommandLoaders(!0)}))),n=["core/block-editor/blockQuickActions","core/block-editor/blockTransforms"];return(0,r.createElement)(r.Fragment,null,t.concat(e).filter((e=>e?.name&&(n.includes(e.name)||e.name.startsWith("ai/")))).map((e=>e&&e.name?(0,r.createElement)(lh,{key:e.name,name:e.name,hook:e.hook,search:""}):(ra.warn("invalid loader",e),null))))}const dh=function(){const[e,t]=(0,f.useState)(!1),[n,o]=(0,f.useState)([]),{getBlock:i,getBlocksByName:a,getBlockAttributes:s,isEditorIframeLoaded:c,isHandoff:l,selectedBlock:u}=(0,m.useSelect)((e=>{const{getSelectedBlock:t}=e(y.store);return{getBlock:e(y.store).getBlock,getBlocksByName:e(y.store).getBlocksByName,getBlockAttributes:e(y.store).getBlockAttributes,selectedBlock:t(),isEditorIframeLoaded:e(Qa).getIsEditorIframeLoaded(),isHandoff:e(Qa).getIsHandoff(),getImageStyle:e(Qa).getImageStyle}})),{updateBlockAttributes:d}=(0,m.useDispatch)(y.store),{themeColors:p}=hc();(0,f.useEffect)((()=>{if(!c)return;const e=a("core/cover");o(e.map((e=>{const t=i(e);return{clientId:t.clientId,url:t.attributes.url}})))}),[i,a,c,l]);const h=(0,f.useCallback)((e=>{const t=e.clientId,o=n.find((e=>e.clientId===t))?.url;return e.attributes.url!==o}),[n]),g=(0,f.useCallback)((async()=>{t(!0);const e=await Gc(u.attributes.url);o((e=>{const t=e.findIndex((e=>e.clientId===u.clientId));return-1!==t?e.map(((e,n)=>n===t?{...e,url:u.attributes.url}:e)):[...e,{clientId:u.clientId,url:u.attributes.url}]}));const n=Qs(e,p),i=s(u.clientId);await d(u.clientId,{overlayColor:void 0,customOverlayColor:e,isUserOverlayColor:!1,style:{...i?.style,color:{text:n?.color}}}),t(!1)}),[u,d,s,p]);return(0,f.useEffect)((()=>{if(!u)return;let t=()=>{};return"core/cover"===u.name&&u.attributes.url&&h(u)&&!e&&(t=(0,m.subscribe)(g)),()=>{t()}}),[u,g,h,e]),(0,r.createElement)(r.Fragment,null)},{GlobalStylesProvider:ph}=h(g.privateApis);(0,a.registerPlugin)("big-sky-assembler",{icon:l,render:()=>{const e=es();return(0,r.createElement)(sh,{onReset:e},(0,r.createElement)(ph,null,(0,r.createElement)(rh,null),(0,r.createElement)(uh,null),(0,r.createElement)(dh,null)))}})}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,i,r)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,i,r]=e[u],s=!0,c=0;c<n.length;c++)(!1&r||a>=r)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(s=!1,r<a&&(a=r));if(s){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,i,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0,350:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[a,s,c]=n,l=0;if(a.some((t=>0!==e[t]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(c)var u=c(o)}for(t&&t(n);l<a.length;l++)r=a[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=globalThis.webpackChunkbig_sky=globalThis.webpackChunkbig_sky||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[350],(()=>o(852)));i=o.O(i)})();
//# sourceMappingURL=index.js.map